(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"0ae55f3aeb8765b56936":function(e,t,n){"use strict";n.d(t,"a",(function(){return Se}));var r=n("de2381d63a6ff1b26077"),i=(n("eef23a05705d8b46f87b"),n("fc3363cb05869232e380"),n("e934f008ce014eda6535"),n("1c4b8d4085d28a8b83d7"),n("645393b5322020a2f522"),n("a909ca3296d499985c89"),n("84e0a0c8a6be71b33470"),n("c93a3409710bc0c7e7f7"),n("96e657875a3e8636f3a2"),n("3001a3934397946b1a1f"),n("562804f2026cdb551686"),n("e502d00ea6e2f0b47ea0"),n("098ff896a5dab77f75b3"),n("765c3fe4871c97a98a7a"),n("b9c487edb4e7fbfb9158"),n("6a793917dc2021a2fd0a"),n("b08a684f42886b58505a"),n("f8c988483231af8381d2")),a=n.n(i),o=n("cc3ba8f20ced7ad84834"),s=n.n(o),c=n("d8c910279447f3b2f170"),u=n.n(c),l=(n("d21c3f3d4c981a871761"),n("cf2c3842fd8b1c54ed12"),n("16da3d83ca2b978dbac3"),n("79bbd5077cad2d6c4d8a"),n("de3e4d1249ca86a17021"),n("c9461f50c5d53d77beb2"),n("9ba26f6b662448d8bc59"),n("659871ac4bcffb14987f"),n("80e6d69186a0d6260a46"),n("98d1f6ec77c5e8016a58"),n("af4e4e4030596b369b13"),n("b82b8efbfaa040833fc3"),n("8c975a8e48558997ef6e"),n("a5b5b7a2e2288b74b453"),n("a2a80d3346615eb09116"),n("f70171f22d45e54deaec"),n("df0f8aaf4d251ab5481e"),n("d8cf9a74ccea045dcbf3"),n("abe57333ca79dc15d3f8"),n("281981c6b99b2a82c28b"),n("2424222fdd55b7282442"),n("587ee3767cae257489e4"),n("0b165edde72ebe3f3ca5")),d=n.n(l),f=(n("2f22f453e80dcd80946e"),n("99db023933d00eead7df"),n("49c77cfe9861eb5430df"),n("d74f5f93f73b1ae4b424"),n("def7fc9a4ab8c857edaf"),n("242d8a87221617b4ac29"),n("366b089b5a8649d3c218"),n("4dd75ee0c23d4a9d0f78"),"undefined"!=typeof window&&window.location.href.indexOf("loggerdebug")>-1);function h(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0,n=0;n<e.length;n++)isNaN(Number(e[n].end))||isNaN(Number(e[n].begin))||e[n].begin<0||e[n].end<0||e[n].end<e[n].begin||(t+=e[n].end-e[n].begin);return t=parseInt(1e3*t,10)}function p(e){if(null==e||""===e||"string"!=typeof e)return"";var t=e.split("/"),n="";return t.length>3&&t[2]&&(n=t[2]),n}function v(e){var t={};if(e instanceof window.XMLHttpRequest)try{e.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach((function(e){var n=e.split(": "),r=n.shift(),i=n.join(": ");t[r]=i}))}catch(n){}return t}function g(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];f&&(t=console).log.apply(t,["[logger]",e].concat(r))}function y(){try{return Math.round(window.performance.now())}catch(e){return(new Date).getTime()}}function m(){return(new Date).getTime()}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,r){try{e||r(new Error("url is undefined"));var i=0,a=0,o={},s=new window.XMLHttpRequest;s.open("get",e),s.onreadystatechange=function(){2===s.readyState&&(o.headers=v(s),o.connectTime=y()-a,o.status=s.status,o.statusText=s.statusText,i=y()),1===s.readyState&&(a=y())},s.onload=function(){n(o)},s.onprogress=function(e){var t,n=y()-i;n<5&&(n=y()-a),t=parseInt(e.loaded/1e3/(n/1e3),10),o.speed=t,o.costTime=n},s.onerror=function(e){r(e)},s.ontimeout=function(){o.status||(o.status=-2),n(o)},s.onabort=function(){n(o)},s.responseType="arraybuffer",s.timeout=t.timeout||1e4,s.setRequestHeader("Range","bytes=".concat(t.range||"0-1048576")),s.send()}catch(c){r(c)}}))}function _(e){return!e||window.location.href.indexOf(e)>-1}var k={x_response_sinfo:"x-response-sinfo",x_response_cache:"x-response-cache",x_response_cinfo:"x-response-cinfo"};function w(e){if(!e)return{};var t={};return Object.keys(k).map((function(n){if(e[n]||"string"!=typeof k[n]){if(!e[n]&&k[n]instanceof Array){var r=k[n].filter((function(t){return void 0!==e[t]}));r.length>0?t[n]=e[r[0]]:t[n]=""}}else t[n]=e[k[n]]||""})),t}function E(e,t){return e&&("string"==typeof t||"number"==typeof t)?e+""+t:t}function T(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]}function A(e,t){if(!e||!t)return!1;try{return Array.prototype.some.call(e.classList,(function(e){return e===t}))}catch(r){var n=e.className&&"object"===d()(e.className)?e.getAttribute("class"):e.className;return n&&!!n.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}}function S(e){return"String"===T(e)?e.replace("P","p"):e?"Number"===T(e)?"".concat(e):void 0:""}function I(e){try{return JSON.stringify(e)}catch(t){return""}}var R=[];function O(e){var t={};try{var n=function(){e=e.replace(/^http:|^https:/,"");for(var n=R||[],r=function(r){if(n[r].name.replace(/^http:|^https:/,"")===e)return["domainLookupEnd","domainLookupStart","startTime","requestStart","responseEnd","responseStart","connectStart","connectEnd","fetchStart"].map((function(e){t[e]=Math.round(n[r][e])})),t.url=n[r].name,t.duration=Math.round(n[r].duration),t.domainDuration=t.domainLookupEnd-t.domainLookupStart,t.connectDuration=t.connectEnd-t.connectStart,"break"},i=n.length-1;i>=0;i--){if("break"===r(i))break}return{v:t}}();if("object"===d()(n))return n.v}catch(r){return t}}"undefined"!=typeof window&&function(){try{new window.PerformanceObserver((function(e,t){var n=e.getEntriesByType("resource");R.length>30&&R.splice(0,R.length-30);for(var r=0;r<n.length;r++)R.push(n[r])})).observe({entryTypes:["resource"]})}catch(e){console.warn("PerformanceObserver not support",e)}}();var C=function(){try{return"undefined"!=typeof localStorage&&"setItem"in window.localStorage&&!!window.localStorage.setItem}catch(e){return!1}}()&&!function(){try{return window.localStorage.setItem("_localstorage_support_test",!0),window.localStorage.removeItem("_localstorage_support_test"),!1}catch(e){return!0}}()?window.localStorage:{},x="__xgplayerlogkey",P={set:function(e){try{var t=this.get();t.push(e),C.setItem(x,JSON.stringify(t))}catch(n){}},get:function(){try{var e=C.getItem(x);return e=e?JSON.parse(e):[]}catch(t){return[]}},remove:function(){try{C.removeItem(x)}catch(e){}},clear:function(){try{C.clear()}catch(e){}}},D=(n("641ac9db2425e96d99a8"),[{key:"QQBrowser",reg:/(qqbrowser)\/([\d.]+)/},{key:"QIHU360EE",reg:/qihu 360ee/},{key:"QIHU360SE",reg:/qihu 360se/},{key:"2345Explorer",reg:/(2345explorer)\/([\d.]+)/},{key:"Sogou",reg:/(metasr)/},{key:"Wexin",reg:/(micromessenger)\/([\d.]+)/},{key:"Openlanguage",reg:/(openlanguage)\/([\d.]+)/},{key:"NewsArticle",reg:/(newsarticle)\/([\d.]+)/},{key:"VideoArticle",reg:/(videoarticle)\/([\d.]+)/},{key:"Hotsoon",reg:/(live_stream)_([\d.]+)/},{key:"Aweme",reg:/(aweme)_([\d.]+)/},{key:"Lark",reg:/(lark)\/([\d.]+)/},{key:"PlayStation",reg:/(playstation)/},{key:"BingPreview",reg:/(bingpreview)\/([\d.]+)/},{key:"Baiduspider",reg:/(baiduspider-render)\/([\d.]+)/},{key:"YandexBot",reg:/(yandexbot)\/([\d.]+)/},{key:"Chrome",reg:/(chrome)\/([\d.]+)/},{key:"Safari",reg:/(version)\/([\d.]+)\s*(safari)/}]),L=[{key:"Trident",reg:/(rv:)([\d.]+)/},{key:"Trident",reg:/(msie)\s*([\d.]+)/}];function M(){var e=document.createElement("video"),t={isSupport:!1,mime:""};return"function"==typeof e.canPlayType?(["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"].map((function(n){"probably"===e.canPlayType('video/mp4; codecs="'.concat(n,'"'))&&(t.isSupport=!0,t.mime+="||".concat(n))})),t):(e=null,t)}var N=["Baiduspider","YandexBot"];function U(e,t){var n=!1;return N.map((function(t){t===e&&(n=!0)})),/(\+http|; http|\(http):\/\/([\w.]+\/?)\S*/.test(t)&&(n=!0),n}function B(){var e=navigator.mimeTypes;if(e){for(var t=0;t<e.length;t++){if(e[t].type&&e[t].type.indexOf("360")>-1)return!0;if(e[t].type&&e[t].type.indexOf("application/vnd.chromium.remoting-viewer")>-1)return!0;if(e[t].description&&e[t].description.indexOf("360")>-1)return!0}return!1}}var F="undefined"!=typeof navigator&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e=e.toLocaleLowerCase();var t=/(iphone)/.test(e)||/(ipad)/.test(e),n=/(android)/.test(e),r=/(windows phone)/.test(e),i=t||n||r,a={isIOS:t,isAndroid:n,isMobile:i,isPC:!i,isPad:/(ipad)/.test(e)},o=M();a.isSupportMP4=o.isSupport,a.mime=o.mime;var s="",c=0,u=[],l=D;/trident/.test(e)&&(l=L);for(var d=0;d<l.length;d++)if(u=l[d].reg.exec(e)){s=l[d].key,c=u.length>2?u[2]:"";break}if(s)a["is".concat(s)]=!0,a.name=s,a.appVersion=c;else{var f=B();f&&(a.name="360EE")}if(a.name&&"Trident"!==a.name){var h=/(trident)/.exec(e);h&&(a.name=a.name?"".concat(a.name,"_Trident"):"Trident")}return a.isSpider=U(a.name),a}(navigator.userAgent),j={range:"0-1048576",timer:6e4,timeout:15e3},H=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a()(this,e),Object.keys(j).map((function(e){void 0!==t[e]&&null!==t[e]||(t[e]=j[e])})),this.options=t,this._headers={},this.intervalId=null,this.ishangUp=!1,this._data={contentLength:0,statusText:"",status:-1,speed:0,costTime:0,connectTime:0,contentType:""},this.url=[]}return s()(e,[{key:"setData",value:function(e,t){var n=this;if(Object.keys(e).map((function(t){"headers"!==t&&(n._data[t]=e[t])})),e.headers&&Object.keys(e.headers).length>0){this._headers=w(e.headers),e.headers["content-type"]&&(this._data.contentType=e.headers["content-type"]);var r=(e.headers["content-range"]||"").split("/");r&&r.length>1&&(this._data.contentLength=parseInt(r[1]))}}},{key:"contentLength",get:function(){return this._data.length||0}},{key:"trigger",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"start",r=this.options;this.url=e,!this.url||"start"!==n&&(this.ishangUp||this.intervalId)?g("task>>cant`t trigger url",this.ishangUp,this.intervalId):(g("task>>trigger url ",e),this.ishangUp=!0,this.intervalId&&this.clear(),this.intervalId=setTimeout((function(){t.clear()}),"start"===n?500:r.timer),b(this.url,{range:"start"===n?"0-1024":r.range,timeout:r.timeout}).then((function(e){g("getXhr>>check result ",e),t.setData(e||{}),t.ishangUp=!1})).catch((function(e){g("getXhr>>error ",e),t.ishangUp=!1,t._data.status=-1})))}},{key:"url",get:function(){return this.options.url},set:function(e){e&&(this.options.url=e)}},{key:"serverIp",get:function(){return this._headers.x_response_sinfo||""}},{key:"headers",get:function(){return this._headers||{}}},{key:"status",get:function(){return this._data.status||-1}},{key:"speed",get:function(){return this._data.speed}},{key:"clear",value:function(){clearTimeout(this.intervalId),this.intervalId=null}}]),e}();function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}g("logger version is ".concat("0.11.11"));var G,z=(G="Object",function(e){return Object.prototype.toString.call(e)==="[object ".concat(G,"]")}),X="videoplayer_oneplay",Y="videoplayer_oneopera",K="videoplayer_oneerror",Z="videoplayer_oneevent",Q="videoplayer_onetemp",q={data:1e3,runtime:1002,parse:1004,network:1003,no_error_handler:9997,custom_error:9998,other:9999,notSupport:1005},J={1:-499991,2:-499992,3:-499993,4:-499994,5:-499995},$=0,ee=1,te=2,ne=3,re=4,ie=0,ae=1,oe=2,se=3,ce=1,ue=2,le=3,de=4,fe=5,he=6,pe="error_retry",ve="oneerror",ge="oneevent",ye="onetemp",me=0,be=1,_e=1300,ke="__tea_cache_tokens_".concat(_e),we=["vtype","tag","subtag","codec_type","device_type"],Ee="",Te=null,Ae=function(){function e(t,n){var r=this;if(a()(this,e),u()(this,"initializeUrlLog",(function(e){var t=e||"";"String"!==T(t)&&(t=""),r.urlLog={initial_url:t,initial_host:p(t),initial_ip:""}})),u()(this,"onMediaFormatError",(function(e){r.onOneEvent({end_type:(e.error_type||"")+"Error"})})),u()(this,"onDrmTypeChange",(function(e){r.addIfExist("drm_type",{drm_type:e},r._options)})),u()(this,"onReplayBtnClick",(function(){r.resetLoggerParams()})),u()(this,"onBeforeDefinitionChange",(function(){r.resLogs.ldst=y(),r._endType="switch"})),u()(this,"onDefinitionChange",(function(e){var t=e.from,n=e.to;r.changeResolution(t,n,r.resLogs.ldst,"switch"),g("onDefinitionChange from:".concat(t,", to:").concat(n))})),u()(this,"onDefiChangeSuccess",(function(){g("onDefinitionChangeSuccess"),r.updateVideoSize(),r.triggerTask("start")})),u()(this,"onAbrChange",(function(e){var t=e.prev,n=e.cur,i=e.abrInfo;if(r.player.abrInstance){var a=r.player.abrInstance.eventInfo;g("abrChange",a),a.last_definition=t,a.now_definition=n,r.abrInfo.abr_event_info.video_switch.push(a),r.changeResolution(t,n,y(),"abr_switch",i)}})),u()(this,"onAbrPrestallEnd",(function(e){r.abrInfo.abr_user_info.cancel_abr=e?1:0})),u()(this,"onTimeUpdate",(function(){var e=r.playlogs,t=r.resLogs,n=r.player;if(r.errorLog.try_err_c=0,e.vt||1!==r.startStep||(e.vt=m(),g("onTimeUpdate: first frame inited","currentTime11:".concat(n.currentTime," vt-pt:").concat(e.vt-e.pt," vt-nt:").concat(e.vt-e.nt," vt-rt:").concat(e.vt-e.rt)),r.startStep=2),!t.initial_resolution){var i=n.currentDefitionFromPlayer&&n.currentDefitionFromPlayer.definition?n.currentDefitionFromPlayer.definition:n.config.defaultDefinition||n.video.videoHeight+"p"||"";i=S(i),t.initial_resolution=i}t.final_resolution||(t.final_resolution=t.initial_resolution);var a=e.played.length;a<1?e.played.push({begin:n.currentTime,end:-1}):e.played[a-1].end=n.currentTime;var o=t.played.length;o<1?t.played.push({begin:n.currentTime,end:-1}):t.played[o-1].end=n.currentTime,r.lastVideoTime=n.currentTime||0,r.updateCurBuffer()})),u()(this,"onCanplay",(function(){g("onCanplay","this.startStep:".concat(r.startStep," ").concat(m())),r.setVt()})),u()(this,"onLoadeddata",(function(){g("onLoadeddata","this.startStep:".concat(r.startStep," ").concat(m())),r.setVt(),r.updateVideoSize()})),u()(this,"onLoadStart",(function(){var e=_(r.player.currentSrc);r.triggerTask("start"),g("onLoadStart","this.startStep:".concat(r.startStep," ").concat(m()," isSrcEmpty:").concat(e," player.src:").concat(r.player.src)),0!==r.startStep||e||"visible"!==document.visibilityState||r.setPt()})),u()(this,"onDashStateChange",(function(e){g("onDashStateChange","this.startStep:".concat(r.startStep," ").concat(y()," state:").concat(e));var t=r.playlogs;if(r.startStep<2)switch(e){case"player_start":t.dash_pst=y();break;case"wasm_start":t.dash_wst=y();break;case"wasm_ready":t.dash_wrt=y();break;case"init_finished":t.dash_ift=y();break;case"core_start":t.dash_cst=y();break;case"start_play":t.dash_spt=y()}})),u()(this,"onMp4StateChange",(function(e){var t=e.state;(r.exInfo.states.length>10||"player_start"===t)&&(r.exInfo.states=[]),r.exInfo.states.push(e)})),u()(this,"onBufferedChange",(function(){var e=r.player.video&&r.player.video.buffered;if(e){var t=e.length;t>0&&e.end(t-1)+1>r.player.duration&&(r.bft=m())}})),u()(this,"onPlayerInited",(function(){g("player init"),r._playerCreatedTime=m(),r.playlogs.rt=m()})),u()(this,"onNotAutoPlay",(function(){g("onNotAutoPlay","autoplay:".concat(r.isAutoplay)),0===r.isAutoplay?r.isAutoplay=2:1===r.isAutoplay&&(r.isAutoplay=3)})),u()(this,"onDashError",(function(e){e=e||{};var t=r.errorLog;t.last_errors.push(e.errorCode),t.accu_errc++,r.onOneError({errorType:e.errorTypeCode,code:e.errorCode,url:e.url||"",headers:e.headers||{}},0)})),u()(this,"onPlayerError",(function(e){e=e||{};var t=r.errorLog,n=r.player,i=r.line_app_id;if(g("onPlayerError","this.player.type:".concat(r.player.type," this.player.replayRunning:").concat(r.player.replayRunning," isSupportMP4:").concat(F.isSupportMP4," isPC:").concat(F.isPC)),g("onPlayerError",e),r.load_state=se,r._endType="error",r.suspendWaitingStatus("onPlayerError"),"dash"!==n.type||!n.replayRunning){if(e.url||(e.url=r.player.currentSrc),(1768===i||9999===i)&&F.isPC&&!F.isSupportMP4||F.isSpider)return t.errc=J[5],t.errt=q.notSupport,r.onOneError({errorType:t.errt,code:t.errc,url:e.url,headers:e.headers||{}},0),void(r._isOnePlayReport=!0);t.errt=e.errorTypeCode||(e.errorType&&q[e.errorType]?q[e.errorType]:9999),e.errorCode?t.errc=e.errorCode>0&&J[e.errorCode]?J[e.errorCode]:e.errorCode:e.code&&(t.errc=e.code>0&&J[e.code]?J[e.code]:e.code),t.last_errors.push(t.errc),0===t.fir_errc&&(t.fir_errc=t.errc),r.onOnePlay(ce),r.onOneTemp(ce),r.sendDegradeLog("playCatch_end",r.playlogs.degrade),r.onOneError({errorType:t.errt,code:t.errc,url:e.url,headers:e.headers||{}}),r.sendEventsQueue()}})),u()(this,"onPlayInterfaceInfo",(function(e){g("onPlayInterfaceInfo",e);var t=r.errorLog,n=r.apiLog,i=r.playlogs;if(e&&Object.keys(e).map((function(t){"code"===t?n.vsc=e[t]:"message"===t?n.vsc_message=e.message||"success\uff0c\u89c6\u9891\u53ef\u6b63\u5e38\u64ad\u653e":n[t]=e[t]})),i.at=e.timestamep||(new Date).getTime(),(!e.error||-9988!==e.error.errc)&&(n.vsc=e.code||10,n.vsc_message=e.message||"success\uff0c\u89c6\u9891\u53ef\u6b63\u5e38\u64ad\u653e",e.error)){var a=e.error;t.errt=1e3,t.errc=a.errc||-9998,t.last_errors.push(a.errc||-9998),0===t.fir_errc&&(t.fir_errc=a.errc||-9998),t.accu_errc++,1===t.accu_errc&&(t.fir_errt=y()),r.onOneError({errorType:1e3,code:a.errc||-9998,url:"",headers:{}})}})),u()(this,"onProgressEvent",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.netLog;if(e.speed){var n=e.speed>1e6?Math.floor(e.speed/1e3):e.speed;t.downloadSpeed=n,t.totalSpeed+=n,t.rqCount++}"oversize"!==e.type&&t.requestCount++,e.connectTime&&(t.connectCost=e.connectTime);var i=t.rqCount<7?100:e.costTime>=5e3?20:10;if(!("success"===e.type&&parseInt(100*Math.random(),10)<=i)){var a=O(e.cdnUrl),o=e.xhr||{},s=e.type?"progress_".concat(e.type):"progress",c=e.headers;c||(c=v(o));var u=W(W({},c=w(c)),{},{download_speed:t.downloadSpeed,connect_cost:t.connectCost,c_dur:a.connectDuration||0,d_dur:a.domainDuration||0,r_dur:a.duration||0,rqtt:(new Date).getTime(),x_cache:c.x_response_cache||"",server_ip:c.x_response_sinfo});e.status?t.status=e.status:o&&o instanceof window.XMLHttpRequest&&(t.status=o.status||0),u.status=t.status;var l=e.cdnUrl||e.url;"error"===e.type&&r.merror.cdn.push(W(W({costTime:e.costTime,cur_play_pos:e.pos,cdn_url:l,cdn_host:p(l)},u),c)),r.onOneEvent({costTime:e.costTime,vid:e.vid,end_type:s,cur_play_pos:e.pos,cdn_url:l,cdn_host:p(l)},u,"error"===e.type?0:2)}})),u()(this,"onNext",(function(e){if(g("onNext:startStep:",r.startStep),r.startStep>0){if(r._reportInvalidVV(ue))return;r.onOnePlay(ue),r.onOneTemp(ue),r.sendEventsQueue()}r.vtype=null,r.playlogs.lc=0,r.resetLoggerParams()})),u()(this,"onNextEnded",(function(){var e=r.player,t=r.resLogs,n=S(e.config.defaultDefinition||"");t.initial_resolution=n,t.final_resolution=n})),u()(this,"onXgLogWaiting",(function(e){var t=r.playlogs,n=r.resLogs,i=r.stall;if(r._options.checkByInnerLog&&0===e.type){g("onXgLogWaiting",e);var a=e.endType,o=e.costTime,s=e.start,c={download_speed:r.mp4Speed,avg_speed:r.mp4RealSpeed,mse_op:r.mp4MseOpLength,mp4_load_range:r.mp4LoadSegmentTimeRange,bitrate:r.curBitrate};if("waitingStart"===e.eventType)return r.onOneEvent({costTime:o,end_type:"waitstart"},c,2),void r.appendStallInfo("start",s);if("waitingEnd"===e.eventType){var u=y();g("onXgLogWaiting>>".concat(a,"|costTime:").concat(o,"  vt:").concat(t.vt)),r.appendStallInfo("end",u,a),t.bc++,r.checkInBuffer(r.player.currentTime)?(t.de_bu_acu_t+=o,t.dbc++):(t.nbc++,t.n_bu_acu_t+=o),n.bc++,t.bu_acu_t+=o,n.bu_acu_t+=o,i.stall_end=u,i.stall_last_interval=i.stall_end-i.stall_start,i.stall_acc_time+=i.stall_last_interval,1===i.sc&&(i.first_buf_endt=u),r.onOneEvent({costTime:o,end_type:"waitend"},c,2)}}})),u()(this,"onSeeking",(function(){if(!_(r.player.src)){var e=r.resLogs,t=r.playlogs,n=r.player,i=r.seekLog;g("onSeeking","currentTime:".concat(n.currentTime)),0===r.startStep&&r.setPt(),r.suspendWaitingStatus("seek"),r.isSeeking&&r.suspendSeekStatus("seek",!1),r.isSeeking=!0,t.played.push({begin:r.player.currentTime,end:-1}),e.played.push({begin:r.player.currentTime,end:-1}),i.lastSeekStartTime=y(),i.seekBefore=r.lastVideoTime.toString(),i.intervalId=setTimeout((function(){r.isSeeking&&r.suspendSeekStatus("seekTimeout",!0)}),6e4)}})),u()(this,"onSeeked",(function(){_(r.player.src)||r.isSeeking&&r.suspendSeekStatus("seeked",!0)})),u()(this,"onPlaying",(function(){r.suspendWaitingStatus("play"),r.load_state=ae;var e=y();r.pauseLog.isPausing&&(r.pauseLog.isPausing=!1,r.pauseLog.pause_acu_t+=e-r.pauseLog.pause_start)})),u()(this,"onPlayCatch",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{errorType:"",errorTypeCode:0,errorCode:0,url:"",headers:{},status:0};if(g("onPlayCatch",e,t),e){var n=r.errorLog,i=r.playlogs,a=r.merror;a.playCatch.push(W({errc:t.errorCode,errt:t.errorType},t.headers)),r.setBr("playcatch"),n.accu_errc++,n.try_err_c++,n.fir_errc=t.errorCode,t.errorCode&&n.last_errors.push(t.errorCode),r.suspendWaitingStatus("playcatch"),r.sendDegradeLog("playCatch",i.degrade,{cdn_url:t.url}),"mp42dash"===e?r.vtype="DASH_2":"dash2mp4"===e?r.vtype="MP4_2":"dash1mp4"===e&&(r.vtype="MP4_1"),i.degrade=e,r.onOneError({errorType:t.errorTypeCode,code:t.errorCode,url:t.url||"",status:t.httpCode||t.status,headers:t.headers||{},vid:t.vid||r.vid,preload_hit:t.preloadHit||0,preload_cached:t.preloadCached||0,endState:he,costTime:t.costTime,message:t.errorMessage},0)}})),u()(this,"onMediaExpied",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{errorType:"",errorTypeCode:0,errorCode:0,url:"",headers:{},status:0},t=r.errorLog,n=r.playlogs;g("onMediaExpied",e),r.suspendWaitingStatus("expied"),r.setBr("expied"),t.accu_errc++,t.try_err_c++,t.last_errors.push(e.errorCode),n.at=(new Date).getTime(),r.merror.expied.push(W({errorType:e.errorTypeCode||e.errorType,code:e.errorCode,url:e.url||"",status:e.status},w(e.headers||{}))),r.onOneError({errorType:e.errorTypeCode||e.errorType,code:e.errorCode,url:e.url||"",status:e.status,headers:e.headers||{}},0)})),u()(this,"onLog",(function(e){g("onLog",e);var t=e.type;if(delete e.type,t)switch(t){case pe:break;case ye:r._templog||(r._templog={}),r._templog=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return Object.keys(t).map((function(r){e[r]="append"===n?E(e[r],t[r]):t[r]})),e}(r._templog,e.data,e.action),r._templog.preload_hit&&(r._cacheFile=be);break;case ve:var n=r.errorLog;n.accu_errc++,n.try_err_c++,r.setBr("mp4error"),n.last_errors.push(e.code),r.onOneError(e,0);break;case ge:var i=function(e,t){var n={ext:e.ext||{},data:{}};return Object.keys(e).map((function(r){t[r]?n.data[t[r]]=e[r]:"ext"!==r&&(n.ext[r]=e[r])})),n}(e,{costTime:"costTime",vid:"vid",end_type:"end_type",pos:"cur_play_pos",cdnUrl:"cdn_url"});i.ext&&["start","end"].map((function(e){i.ext[e]&&(i.ext["ext_".concat(e)]=i.ext[e],delete i.ext[e])})),r.onOneEvent(i.data,i.ext,2)}})),u()(this,"onPlay",(function(){g("onPlay","this.startStep :".concat(r.startStep," this.isEnded:").concat(r.isEnded)),r.isEnded&&(r.resetLoggerParams(),r.setPt())})),u()(this,"onPause",(function(){g("onPause");var e=r.pauseLog;e.isPausing=!0,e.pause_start=y()})),u()(this,"onWaiting",(function(){var e=r.stall;r._options.checkByInnerLog||(g("onWaiting>","isSeeking:".concat(r.isSeeking," startStep:").concat(r.startStep," intervalId:").concat(e.intervalId)),r.isSeeking||0===r.playlogs.vt||r.inWaitingStart>0||(e.intervalId&&(window.clearTimeout(e.intervalId),e.intervalId=null),r.inWaitingStart=y(),e.intervalId=window.setTimeout((function(){var e=r.stall;g("stall.intervalId>>".concat(e.intervalId," cost: ").concat(y()-r.inWaitingStart)),r._endType="wait",r.load_state=oe,r.vtype.indexOf("MP4")>-1&&r.player.currentTime>10&&r.task&&(r.triggerTask("waiting",r.initial_url),r.requestCount++),e.stall_start=r.inWaitingStart,1===e.sc&&(e.first_buf_startt=r.inWaitingStart),window.clearTimeout(e.intervalId),e.intervalId=null,r.startWaitingStatus(r.inWaitingStart,y()-r.inWaitingStart),e.intervalId=setTimeout((function(){r.inWaitingStart>0&&r.suspendWaitingStatus("waitTimeout")}),6e4)}),200)))})),u()(this,"onEnded",(function(){if(r.initial_url){g("onEnded","watchDur:".concat(r.watchDur," vt:").concat(r.vt," pt:").concat(r.pt)),r.isEnded=!0;var e=r.resLogs.df;r.changeResolution(e,e,y(),"leave_switch"),r.onOnePlay(le),r.sendDegradeLog("playCatch_end",r.playlogs.degrade),r.onOneTemp(le),r.sendEventsQueue(),r.playlogs.lc++}})),u()(this,"onUnload",(function(){0!==r.startStep&&r.initial_url&&(r.onOneTemp(de),r.sendDegradeLog("playCatch_end",r.playlogs.degrade),r._reportInvalidVV(de)||(r._options.disableLocalCache?r.onOnePlay(de,!1):r.onOnePlay(de,!0)))})),u()(this,"onVisibilitychange",(function(){var e=r.playlogs.vt;"visible"===document.visibilityState&&(e||r.setPt())})),u()(this,"onDestroy",(function(){g("onDestroy:this.startStep:".concat(r.startStep," initial_url:").concat(r.initial_url," ").concat(!!r.initial_url)),console.log(">>>onDestroy",r.startStep>0&&!!r.initial_url),r.onOnePlay(fe),r.startStep>0&&r.initial_url&&(r.onOneTemp(fe),r.sendDegradeLog("playCatch_end",r.playlogs.degrade));var e=r.resLogs.df;r.changeResolution(e,e,y(),"leave_switch"),r.sendEventsQueue(),F.isPC?window.removeEventListener("beforeunload",r.onUnload):(F.isMobile||F.isPad)&&window.removeEventListener("pagehide",r.onUnload),document.removeEventListener("visibilitychange",r.onVisibilitychange),r.listeners.forEach((function(e){r.player.off(e.evt,e.handler)})),r.clearTimers(),r.player.off("destroy",r.onDestroy),r.task&&r.task.clear()})),u()(this,"onOnePlay",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(g("onOnePlay _isOnePlayReport:".concat(r._isOnePlayReport," isLeave: ").concat(t," endState:").concat(e)),!r._isOnePlayReport){var n=r.errorLog,i=r.playlogs,a=r.abrInfo,o=r.resLogs,s=r.player,c=r.apiLog,u=r.pauseLog,l=r.stall,d=r.netLog,f=r.watchDur;r._isOnePlayReport=!0;var h=m(),p=0,v=0,y=s.video&&s.video.buffered;if(y){for(var b=y.length,_=0,k=0;k<b;k++)_+=y.end(k)-y.start(k);p=v=1e3*_}var w=r.mp4FFInfo;Object.keys(w).map((function(e){r.exInfo[e]=w[e]})),r.setPerformance(),r.setStat();var E=W(W(W({local_time:(new Date).getTime(),log_type:"video_playq",plugin_exception:0,player_create_exception:"",v:r.vid,initial_url:r.initial_url,initial_host:r.initial_host,initial_ip:r.curHeaders.x_response_sinfo||0,initial_type:r.initial_type},r.curHeaders),{},{initial_resolution:o.initial_resolution,final_resolution:o.final_resolution,pt:r.pt,prepare_start_time:i.nt,prepare_end_time:i.rt||m(),vt:r.vt,lt:r.lt,lpt:r.lpt,fvt:r.fvt,nvt:r.nvt,bft:r.bft,sc:r.seekLog.sc,sat:r.seekLog.sat,bc:r.bc,dbc:i.dbc||0,nbc:i.nbc||0,video_net_s:r.videoNetworkState,status:r.curStatus,first_buf_startt:l.first_buf_startt,first_buf_endt:l.first_buf_endt,lc:i.lc,bu_acu_t:r.bu_acu_t>432e5?0:r.bu_acu_t,de_bu_acu_t:i.de_bu_acu_t||0,n_bu_acu_t:i.n_bu_acu_t||0,pause_acu_t:u.pause_acu_t,cur_play_pos:r.cur_play_pos,load_state:r.load_state,play_speed:r.playbackRate,playback_state:r.playback_state,end_state:e,watch_dur:f>432e5?0:f,switch_resolution_c:r.switchResolutionCount,is_start_play_automatically:r.isAutoplay,start_time:r.start_time,finish:r.finish,errt:n.errt,errc:n.errc,vsc:c.vsc,vsc_message:c.vsc_message,api_str:c.api_str,auth:c.auth||c.logid,width:r.videoWidth,height:r.videoHeight,vd:r.vd,video_length:parseInt(p,10),audio_length:parseInt(v,10),df:r.resolution,lf:o.lf,play_c:0,player_created_t:r.player_created_t,fir_errt:n.fir_errt,fir_errc:n.fir_errc,lv_method:0,ldst:o.ldst,ldet:o.ldet,is_disable_short_seek:0,mute:r.mute,volume:r.volume,download_speed:r.mp4RealSpeed?r.mp4RealSpeed:r.task&&r.task.speed?r.task.speed:d.downloadSpeed,avg_speed:r.mp4Speed?r.mp4Speed:d.rqCount>0?parseInt(d.totalSpeed/d.rqCount,10):0,bitrate:r.curBitrate,preload_state:r.preloadState,preload_hit:r.preLoadData.hit,preload_cached:r.preLoadData.duration||r.preLoadData.byteLength,mdl_req_num:d.requestCount,watingcost:r.watingCost,br:i.br,fbrt:i.fbrt,try_err_c:n.try_err_c,accu_errc:n.accu_errc,dash_pst:r.dash_pst,dash_wst:r.dash_wst,dash_wrt:r.dash_wrt,dash_ift:r.dash_ift,dash_cst:r.dash_cst,dash_spt:r.dash_spt,dash_break:2===s.dashBufferBreak?1:0,merror:I(r.merror),ex:I(r.exInfo),bufs:I(r.buffers.allBuffer),vs:o.vs,vds:o.vds,vps:o.vps},r.buffers.curBuffer),{},{degrade:i.degrade,cache_file:r._cacheFile});if(0!==r.vt&&(E.et=h),s&&s.config&&s.config.codecType&&(E.codec_type=s.config.codecType),s&&s.dashState&&(E.dash_state=s.dashState),["drm_type","dynamic_type","enable_bash"].forEach((function(e){r.addIfExist(e,r._options,E)})),s.abrInstance){var T=s.abrInstance;if(a.abr_general_info=T.generalInfo,a.abr_event_info.video_exit={local_time_ms:(new Date).getTime(),buffer_length:T.bufferLength,internet_speed:T.downloadSpeed,now_bitrate:T.nowBitrate,play_speed:r.player.playbackRate},T.getAbrPlayInfo&&(a.abr_play_info=T.getAbrPlayInfo()),T.getAbrVVStats){var A=T.getAbrVVStats();Object.keys(A).forEach((function(e){E[e]=A[e]}))}}a.abr_init_opts=r.player.config.autoBitrateOpts||{},E.abr_info=I(r.abrInfo),t?r.reportLog(X,E,t):r.reportLog(X,E)}})),u()(this,"onOneEvent",(function(e){var t=e.costTime,n=e.vid,i=e.end_type,a=e.cur_play_pos,o=e.cdn_url,s=e.cdn_host,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=arguments.length>2?arguments[2]:void 0,l=r.buffers.curBuffer,d=W({local_time:(new Date).getTime(),v:n||r.vid,cost_time:t,end_type:i||r.end_type,cdn_url:o||r.url,cdn_host:s||"",initial_type:r.initial_type,resolution:r.resolution,play_speed:r.playbackRate,first_frame_interval:y()-r.pt,last_switch_interval:r.getLastInterval("lastSwitchStartTime",r.resLogs,!1),last_seek_interval:r.updateSeekPt(!1),last_event_interval:r.getLastInterval("lastEventTime"),cur_play_pos:a||r.cur_play_pos,video_ready_s:r.videoReadyState,video_seeking:r.videoSeeking,video_paused:r.videoPaused,bufs:I(r.buffers.allBuffer),retry_count:r.retry_count,at:r.playlogs.at,stay_seconds:parseInt(((new Date).getTime()-r.playlogs.at)/1e3,10),preload_state:r.preloadState,preload_hit:r.preLoadData.hit,preload_cached:r.preLoadData.duration||r.preLoadData.byteLength},l);if("waitstart"===i&&"function"==typeof r._options.getPageFPS){var f=r._options.getPageFPS();d.cur_fps=f.curFPS||0,d.avg_fps=f.avgFPS||0}var h=r.player;h&&h.dashState&&(d.dash_state=r.player.dashState),h&&h.config&&h.config.codecType&&(d.codec_type=h.config.codecType),Object.keys(c).forEach((function(e){d[e]=c[e]})),r.addIfExist("drm_type",r._options,d),r.reportLog(Z,d,u)})),u()(this,"onOneTemp",(function(){if(g("onOneTemp>>",!r._templog),r._templog){var e=r.player,t=r.playlogs,n=r.pauseLog,i=r.errorLog,a=r.resLogs,o=r.watchDur,s=W(W(W({local_time:(new Date).getTime()},r._templog),{},{v:r.vid,initial_type:r.initial_type,pt:r.pt,vt:r.vt,lt:r.lt,fvt:r.fvt,bc:r.bc,bu_acu_t:r.bu_acu_t>432e5?0:r.bu_acu_t,pause_acu_t:n.pause_acu_t,cur_play_pos:r.cur_play_pos,watch_dur:o>432e5?0:o,finish:r.finish,errt:i.errt,errc:i.errc,vd:r.vd,df:r.resolution,lf:a.lf,br:t.br,fbrt:t.fbrt,try_err_c:i.try_err_c,accu_errc:i.accu_errc,dash_break:2===e.dashBufferBreak?1:0,bufs:I(r.buffers.allBuffer),vs:a.vs,vds:a.vds,vps:a.vps},r.buffers.curBuffer),{},{degrade:t.degrade});0!==r.vt&&(s.et=m()),["drm_type","dynamic_type","enable_bash"].forEach((function(e){r.addIfExist(e,r._options,s)})),e&&e.config&&e.config.codecType&&(s.codec_type=e.config.codecType),r.reportLog(Q,s,0),r._templog=null}})),this.player=t,void 0===this.player||null===this.player)throw new Error("player is ".concat(this.player));if(n&&n.line_app_id){(n.isTask||void 0===n.isTask)&&(this.task=new H),this.eventQueue=[],this._instanceCreateTime=(new Date).getTime(),n.codec_type=n.codec_type||"h264",this._options=n,!this._options.maxQueueCount&&(this._options.maxQueueCount=5),this.line_app_id=parseInt(n.line_app_id,10)||0,this.line_user_id=(n.line_user_id||"").toString(),this.version="0.11.11",this.sdk_version="0.11.11",this.playerCoreVersion=n.playerCoreVersion||"",this.playerVersion=n.playerVersion||n.sdk_version,this.closeSeekLog=n.closeSeekLog||!1,this.start_time=1e3*(n.start_time||0),this.isFullAB=n.isFullAB||!1,this._initial_resolution="",this.__vtype=null,this.__dt="",this.isLowMp4=!1,this.resetLoggerParams();try{this.initializeTracker(),this.sendLocalLog(),this.bindEvt(),g("logger constructor:"+this.player.video)}catch(i){console.log(i)}}else console.warn("player.config.vodLogOpts.line_app_id is necessary for plugin xgVodLogger")}return s()(e,[{key:"resetLoggerParams",value:function(){g("resetLoggerParams");var e=this.playlogs?this.playlogs.lc:0;this.playlogs={nt:m(),vt:0,rt:this.isEnded?m():0,at:0,pt:0,bu_acu_t:0,bc:0,br:0,fbrt:"",dbc:0,de_bu_acu_t:0,nbc:0,n_bu_acu_t:0,played:[{begin:0,end:-1}],dash_pst:0,dash_wst:0,dash_wrt:0,dash_ift:0,dash_cst:0,dash_spt:0,interruptCount:0,degrade:"none",lc:e},this.degradeLog={bu_acu_t:0,bc:0,watch_dur:0,hasSendEnd:!1},this.buffers={allBuffer:[],curBuffer:{buf_diff:0,buf_s_pos:0,buf_e_pos:0,buf_include:0}},this.netLog={downloadSpeed:0,requestCount:0,connectCost:0,totalSpeed:0,rqCount:0,status:0},this.merror={cdn:[],player:[],playCatch:[],expied:[]},this.exInfo={buffer:{},stall:[],states:[]},this._templog=null,this._isOnePlayReport=!1,this.startStep=0,this.bft=0,this.initializeLogDatas(),this.initializeUrlLog()}},{key:"initializeLogDatas",value:function(){this.startStep=0,this.inWaitingStart=0,this.lastVideoTime=0,this._endType="",this._retryCount=0,this.lastOperaTime=-1,this.lastEventTime=-1,this.seekLog={intervalId:0,lastSeekStartTime:y(),seekBefore:0,sat:0,sc:0},this.resLogs={lastSwitchStartTime:-1,switch_count:0,abr_switch_count:0,initial_resolution:"",final_resolution:"",ldst:0,ldet:0,df:"",lf:"",played:[],bc:0,bu_acu_t:0,sc:0,sat:0,buf:0,lbuf:0,lplayed:0,vs:0,vds:0,vps:0,vis:0,bitrate:0},this.apiLog={code:0,message:"",logid:"",api:"",auth:"",error:{}},this.errorLog={accu_errc:0,try_err_c:0,errt:0,errc:0,fir_errt:0,fir_errc:F.isSupportMP4?0:1005,last_errors:[]},this.pauseLog={pause_acu_t:0,isPausing:!1,pause_start:0},this.stall={intervalId:0,stall_count:0,first_buf_startt:0,first_buf_endt:0,stall_start:0,stall_end:0,stall_last_interval:0,stall_acc_time:0},this._playerCreatedTime=0,this.load_state=ie,this.lv_method=6,this.isSeeking=!1,this.isEnded=!1,this.startStep=0,this.isAutoplay=this.player.config&&this.player.config.autoplay?1:0,this.abrInfo={abr_general_info:{},abr_event_info:{video_switch:[],video_stall:[],video_exit:{}},abr_play_info:{start_play_time_ms:0,is_hint:0,playback_info:{internet_speed_record:[],play_bitrate_record:[],buffer_length_record:[],play_speed_record:[]}},abr_user_info:{cancel_abr:0},abr_init_opts:this.player.config.autoBitrateOpts||{}},this._cacheFile=me}},{key:"initSessionId",value:function(){var e="0";try{e=window.localStorage.getItem(ke).web_id||"0"}catch(t){e="0"}this._sessionId=function(e){var t=(new Date).getTime();try{e=parseInt(e)}catch(n){e=0}return t+=e,window.performance&&"function"==typeof window.performance.now&&(t+=window.performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)}))}(e),g("sessionId ".concat(this._sessionId))}},{key:"initializeTracker",value:function(){var e=this._options;if(window.__xgplayer_vod_log__)this.tracker=window.__xgplayer_vod_log__;else{this.tracker=window.__xgplayer_vod_log__=new Te("tracker");var t=e.channel||"cn",n={app_id:"cn"===(t="va"===t||"sg"===t?t:"cn")?_e:1300===_e?323254:_e,channel:t,log:!1,disable_sdk_monitor:!0};e.channelDomain&&(n.channel_domain=e.channelDomain),n.enable_ab_test=!!e.enableAbTest,this.tracker.init(n)}this.initSessionId();var r=navigator?navigator.hardwareConcurrency:0,i=navigator?navigator.deviceMemory:0;this.commonParams={play_type:0,source_type:"vid",sdk_version:this.sdk_version,pc:this.playerCoreVersion,pv:this.playerVersion,line_app_id:this.line_app_id,line_user_id:this.line_user_id,app_version:e.appVersion||"",platform:F.isPad?"pad":F.isMobile?"mobile":"pc",cpu_core:Number(r)||0,memory_size:Number(i)||0},g("commonParams ",this.commonParams);var a={evtParams:this.commonParams,disable_auto_pv:!0};g("Browser.name ",F.name),!F.name||F.isChrome||F.isSafari||(a.browser=F.name,F.appVersion&&(a.browser_version=F.appVersion)),this.line_user_id&&(a.user_unique_id=this.line_user_id,a.web_id=this.line_user_id),e.referrer&&(a.referrer=e.referrer,a.referrer_host=p(e.referrer)),this.tracker.config(a),this.tracker.start()}},{key:"resetDefiInfo",value:function(){var e=this.resLogs;e.played=[],e.bc=0,e.bu_acu_t=0,e.sc=0,e.sat=0}},{key:"sendLocalLog",value:function(){var e=this,t=P.get();P.remove(),t.map((function(t){Object.keys(t).map((function(n){if(g("sendLocalLog",n,t[n]),e.player){e.player.emit("abLog",n,t[n]);var r=e._options.sendLocalCallback;r&&"function"==typeof r&&r(n,t[n])}e._track(n,t[n])}))}))}},{key:"_track",value:function(e,t){"function"==typeof this.tracker?this.tracker(e,t):this.tracker.event(e,t)}},{key:"bindEvt",value:function(){var e=this;this.listeners=[{evt:"play",handler:this.onPlay},{evt:"playing",handler:this.onPlaying},{evt:"pause",handler:this.onPause},{evt:"waiting",handler:this.onWaiting},{evt:"playInterfaceInfo",handler:this.onPlayInterfaceInfo},{evt:"DRM_ERROR",handler:this.onDashError},{evt:"ended",handler:this.onEnded},{evt:"loadeddata",handler:this.onLoadeddata},{evt:"loadstart",handler:this.onLoadStart},{evt:"canplay",handler:this.onCanplay},{evt:"dashStateChange",handler:this.onDashStateChange},{evt:"mp4StateChange",handler:this.onMp4StateChange},{evt:"autoplay was prevented",handler:this.onNotAutoPlay},{evt:"autoplay_was_prevented",handler:this.onNotAutoPlay},{evt:"seeking",handler:this.onSeeking},{evt:"seeked",handler:this.onSeeked},{evt:"complete",handler:this.onPlayerInited},{evt:"timeupdate",handler:this.onTimeUpdate},{evt:"bufferedChange",handler:this.onBufferedChange},{evt:"beforeDefinitionChange",handler:this.onBeforeDefinitionChange},{evt:"definitionChange",handler:this.onDefinitionChange},{evt:"definitionChangeSuccess",handler:this.onDefiChangeSuccess},{evt:"drmTypeChange",handler:this.onDrmTypeChange},{evt:"replayBtnClick",handler:this.onReplayBtnClick},{evt:"initialUrl",handler:this.initializeUrlLog},{evt:"ABR_CHANGE",handler:this.onAbrChange},{evt:"playCatch",handler:this.onPlayCatch},{evt:"MEDIA_EXPIRED",handler:this.onMediaExpied},{evt:"log",handler:this.onLog},{evt:"ABR_PRESTALL_END",handler:this.onAbrPrestallEnd},{evt:"progress_event",handler:this.onProgressEvent},{evt:"logger_next",handler:this.onNext},{evt:"playnext",handler:this.onNext},{evt:"nextEnded",handler:this.onNextEnded},{evt:"media_format_error",handler:this.onMediaFormatError},{evt:"xglog",handler:this.onXgLogWaiting}];var t=this.player.config.errorKey;g(">>>errorKey",t);var n={evt:"error",handler:this.onPlayerError};t&&(n.evt=t),this.listeners.push(n),this.listeners.forEach((function(t){e.player.on(t.evt,t.handler)})),this.bindUnload()}},{key:"addIfExist",value:function(e,t,n){if(z(t)){var r=t[e];!(null==r)&&(n[e]=r)}}},{key:"changeResolution",value:function(e,t,n,r,i){var a=this.resLogs;e=S(e),t=S(t),a.ldet=y(),a.df=t,a.lf=e,a.final_resolution=t,a.switch_count++;var o=a.ldet-n,s={bc:a.bc,bu_acu_t:a.bu_acu_t,sc:a.sc,sat:a.sat,watch_dur:h(a.played)};i&&(s.abrInfo=i),this.updateVds(),this.resetDefiInfo(),this._options.closeResolutionLog||this.onOneOperator({costTime:o,operaType:r,stateBefore:e,stateAfter:t},s,0)}},{key:"getLastInterval",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t[e],i=y(),a=-1===r?-1:i-r;return n&&(t[e]=i),a}},{key:"updateSeekPt",value:function(e){return this.getLastInterval("lastSeekStartTime",this.seekLog,e)}},{key:"_reportInvalidVV",value:function(e){return!!this._isInvaidVV()&&(this.onOneError({endState:e,errorType:9998,code:-1,url:this.player.currentSrc,headers:{}},0),this._isOnePlayReport=!0,!0)}},{key:"_isInvaidVV",value:function(){return 0===this.vt&&-1===this.curStatus}},{key:"bindUnload",value:function(){F.isPC?window.addEventListener("beforeunload",this.onUnload):(F.isMobile||F.isPad)&&window.addEventListener("pagehide",this.onUnload),document.addEventListener("visibilitychange",this.onVisibilitychange),this.player.once("destroy",this.onDestroy)}},{key:"clearTimers",value:function(){var e=this.seekLog,t=this.stall;e.intervalId&&window.clearTimeout(e.intervalId),t.intervalId&&window.clearTimeout(t.intervalId)}},{key:"sendDegradeLog",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"playCatch",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};g("sendDegradeLog",e,t,n);var r=this.degradeLog;if(!(r.hasSendEnd||"playCatch_end"===e&&"none"===t)){"playCatch_end"===e&&(r.hasSendEnd=!0);var i=this.bu_acu_t-r.bu_acu_t;this.onOneEvent({costTime:this.vd,vid:this.vid,end_type:e,cur_play_pos:this.player.currentTime,cdn_url:n.url},W({degrade:t,vt:this.vt,pt:this.pt,fvt:this.fvt,bc:this.bc-r.bc,bu_acu_t:i>432e5?0:i,watch_dur:this.watchDur-r.watch_dur},n),0)}}},{key:"setPerformance",value:function(){var e=this,t=this.player.performance||{};Object.keys(t).map((function(n){e.exInfo[n]=t[n]}))}},{key:"setStat",value:function(){var e=this,t=this.player.stat||{};t.performance&&delete t.performance,Object.keys(t).map((function(n){e.exInfo[n]=t[n]}))}},{key:"onOneOperator",value:function(e){var t=e.costTime,n=e.operaType,r=e.stateBefore,i=e.stateAfter,a=e.endType,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,c=this.getLastInterval("lastOperaTime"),u={local_time:(new Date).getTime(),v:this.vid,opera_type:n,state_before:r,state_after:i,cost_time:t,end_type:a||this.end_type,cdn_url:this.url,resolution:this.resolution,last_interval:c,bufs:I(this.buffers.allBuffer),cur_play_pos:this.cur_play_pos,retry_count:this.retry_count},l=this.player;l&&l.dashState&&(u.dash_state=this.player.dashState),Object.keys(o).forEach((function(e){u[e]=o[e]})),l&&l.config&&l.config.codecType&&(u.codec_type=l.config.codecType),this.addIfExist("drm_type",this._options,u),this.reportLog(Y,u,s)}},{key:"onOneError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{errorType:0,code:0,url:"",headers:{},costTime:0,vid:"",message:"",preload_hit:0,preload_cached:0},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;g("onOneError",e);var n=this.errorLog,r=this.apiLog,i=this.resLogs,a=this.player,o=this.playlogs,s=w(e.headers||{});this.setPerformance(),this.setStat();var c=W(W(W({v:e.vid||this.vid,video_pos:this.cur_play_pos,local_time:(new Date).getTime(),cost_time:e&&e.costTime?e.costTime:0,errt:e.errorType,errc:e.code,es:this.es,cdn_url:e.url||this.url,bufs:I(this.buffers.allBuffer),resolution:i.final_resolution,last_errors:n.last_errors.join(";"),vsc:r.vsc,vsc_message:e.message||r.vsc_message,server_ip:s.x_response_sinfo||0,initial_url:this.initial_url,initial_host:this.initial_host},s),{},{cur_play_pos:this.cur_play_pos},this.buffers.curBuffer),{},{degrade:o.degrade,end_state:e.endState||ce,preload_hit:e.preload_hit,preload_cached:e.preload_cached,ex:I(this.exInfo),video_ready_s:this.videoReadyState});a&&a.dashState&&(c.dash_state=a.dashState),a&&a.config&&a.config.codecType&&(c.codec_type=a.config.codecType),this.addIfExist("drm_type",this._options,c),this.reportLog(K,c,t)}},{key:"reportLog",value:function(t,n,r){var i=this,a=this._options,o=this.player.ABTestTag;!n.player_sessionid&&(n.player_sessionid=this.sessionId),!n.web_url&&(n.web_url=window.location.href),n.user_agent=navigator.userAgent,n.dynamic_type=this.dynamicType;var s="Array"===T(a.absdkVersion)?a.absdkVersion.join(","):a.absdkVersion;n.absdkVersion=s||e.AB_SDK_VERSION,null!=o&&(n.abtest_tag=o);var c=this._options;if(n.codec_type&&(c.codec_type=n.codec_type),z(c)&&(we.forEach((function(e){i.addIfExist(e,c,n)})),n.vtype=this.vtype),1===r){var u={};return u[t]=n,void P.set(u)}2!==r?(this.player&&this.player.emit("abLog",t,n),this._track(t,n)):this.addEventsQueue(t,n)}},{key:"addEventsQueue",value:function(e,t){this.eventQueue.push({event:e,params:t}),this.eventQueue.length>=this._options.maxQueueCount&&this.sendEventsQueue()}},{key:"sendEventsQueue",value:function(){for(;this.eventQueue.length>0;){var e=this.eventQueue.pop();this._track(e.event,e.params)}}},{key:"startWaitingStatus",value:function(e,t){this.onOneEvent({costTime:t,end_type:"waitstart"},{},2),this.appendStallInfo("start",e)}},{key:"triggerTask",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"start",t=arguments.length>1?arguments[1]:void 0;g("triggerTask>>",e);var n=_(t=t||this.player.src);!n&&this.vtype.indexOf("MP4")>-1&&this.task&&this.task.trigger(t,e)}},{key:"appendStallInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"start",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=this.exInfo.stall;if("start"===e){r.length>6&&r.splice(0,r.length-6);var i=this.buffers.curBuffer;r.push({start:t,end:-1,endType:"waitstart",cost:0,cur:this.cur_play_pos,buf_s:i.buf_s_pos,buf_e:i.buf_e_pos,buf_i:i.buf_include})}else if("end"===e){var a=r.length-1;if(a<0)return;r[a].end<0&&(r[a].end=t,r[a].endType=n,r[a].cost=t-r[a].start)}g("appendStallInfo",r)}},{key:"suspendWaitingStatus",value:function(e){var t=y(),n=this.playlogs,r=this.resLogs,i=this.stall,a=this.inWaitingStart;if(!(a<=0||this.isSeeking||n.vt<=0)){if(g("suspendWaitingStatus>>".concat(e,"|costTime:").concat(t-a," isSeeking:").concat(this.isSeeking," vt:").concat(n.vt)),this.appendStallInfo("end",t,e),t-a>200){var o=t-this.inWaitingStart;if(n.bc++,this.checkInBuffer(this.player.currentTime)?(n.de_bu_acu_t+=o,n.dbc++):(n.nbc++,n.n_bu_acu_t+=o),r.bc++,n.bu_acu_t+=o,r.bu_acu_t+=o,i.stall_end=t,i.stall_last_interval=i.stall_end-i.stall_start,i.stall_acc_time+=i.stall_last_interval,1===i.sc&&(i.first_buf_endt=t),this.player.abrInstance&&!this.isSeeking&&this.playlogs.vt){var s=this.player.abrInstance;this.abrInfo.abr_event_info.video_stall.push({local_time_ms:(new Date).getTime(),stall_duration:parseFloat((o/1e3).toFixed(2)),buffer_length:s.bufferLength,internet_speed:s.downloadSpeed,now_bitrate:s.nowBitrate,play_speed:this.player.playbackRate,is_abr:s.isCurrentInAbr?1:0})}this.onOneEvent({costTime:o,end_type:e||"wait"},{},2)}this._endType="",this.load_state=ae,this.inWaitingStart=0,window.clearTimeout(i.intervalId),i.intervalId=null}}},{key:"suspendSeekStatus",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.isSeeking){var n=this.seekLog,r=this.resLogs,i=this.player,a=y()-n.lastSeekStartTime;g("suspendSeekStatus>>","".concat(e," currentTime:").concat(i.currentTime," costTime:").concat(a," sat:").concat(n.sat," resLogs.sat:").concat(r.sat)),n.intervalId&&window.clearTimeout(n.intervalId),n.intervalId=null,this.isSeeking=!1;var o=this._endType="seek",s=n.seekBefore,c=(i.currentTime||0).toString();n.sc++,n.sat+=a>36e5?0:a,r.sc++,r.sat+=a>36e5?0:a,this.updateSeekPt(!0),!this.closeSeekLog&&t&&this.onOneOperator({costTime:a,operaType:o,stateBefore:s,stateAfter:c,endType:e})}}},{key:"setPt",value:function(){var e=this.playlogs;this.startStep=1,!e.pt&&this.player.currentTime&&(this.isSeeking=!0),e.pt||(e.pt=m(),g("setPt","init pt :".concat(e.pt,", document.visibilityState:").concat(document.visibilityState)))}},{key:"setVt",value:function(){var e=this.playlogs;1===this.startStep&&(e.vt||(e.vt=m(),g("setVt: first frame inited","vt-pt:".concat(e.vt-e.pt," vt-nt:").concat(e.vt-e.nt))),this.startStep=2)}},{key:"setBr",value:function(e){var t=this.playlogs;t.vt>0&&(0===t.br&&(t.fbrt=e||""),t.br++)}},{key:"url",get:function(){var e=this.player;return e&&e.config?e.config.url:""}},{key:"vid",get:function(){var e=this.player;return e&&e.config?e.config.vid:""}},{key:"bc",get:function(){return this.playlogs.bc}},{key:"bu_acu_t",get:function(){return this.playlogs.bu_acu_t}},{key:"pt",get:function(){return this.playlogs.pt||m()}},{key:"vt",get:function(){var e=this.playlogs,t=e.vt;return e.pt>0?t:0}},{key:"fvt",get:function(){var e=this.playlogs,t=e.vt,n=e.pt;return t>0&&n>0?parseInt(t-n,10):0}},{key:"nvt",get:function(){var e=this.playlogs,t=e.vt,n=e.nt;return t>0&&n>0?parseInt(t-n,10):0}},{key:"dash_pst",get:function(){return this.playlogs.dash_pst}},{key:"dash_wst",get:function(){return this.playlogs.dash_wst}},{key:"dash_wrt",get:function(){return this.playlogs.dash_wrt}},{key:"dash_ift",get:function(){return this.playlogs.dash_ift}},{key:"dash_cst",get:function(){return this.playlogs.dash_cst}},{key:"dash_spt",get:function(){return this.playlogs.dash_spt}},{key:"vd",get:function(){var e=this.player;return e.duration&&"number"==typeof e.duration&&e.duration>0?parseInt(1e3*e.duration,10):e.config.duration&&"number"==typeof e.config.duration?parseInt(1e3*e.config.duration,10):0}},{key:"cur_play_pos",get:function(){return parseInt(1e3*this.player.currentTime,10)}},{key:"volume",get:function(){return this.player.volume}},{key:"buffer_time",get:function(){var e=0;try{var t=this.player.getBufferedRange();e=t[1]-t[0]}catch(n){e=0}return e}},{key:"player_created_t",get:function(){return this._playerCreatedTime}},{key:"playbackRate",get:function(){return this.player.playbackRate}},{key:"mute",get:function(){return this.player.muted?0:1}},{key:"videoWidth",get:function(){var e=this.player;return e&&e.video?e.video.videoWidth:0}},{key:"videoHeight",get:function(){var e=this.player;return e&&e.video?e.video.videoHeight:0}},{key:"preload",get:function(){var e=this.player;return!(!e||!e.video)&&e.video.preload}},{key:"initial_url",get:function(){var e=this.player.currentSrc;return e.indexOf("blob:")>-1&&this.urlLog.initial_url?this.urlLog.initial_url:_(e)?"":e}},{key:"initial_host",get:function(){var e=this.player.currentSrc;return e.indexOf("blob:")>-1&&this.urlLog.initial_host?this.urlLog.initial_host:p(_(e)?"":e)}},{key:"curHeaders",get:function(){var e=this.player,t=this.task;return e&&e.__dash__&&e.__dash__.curReqVideoSegInfo?w(e.__dash__.curReqVideoSegInfo.headers||{}):t?t.headers:{}}},{key:"curStatus",get:function(){var e=this.task,t=this.vtype,n=this.netLog;return t.indexOf("MP4")>-1?e?e.status:0:n.status}},{key:"play_type",get:function(){return 0}},{key:"resolution",get:function(){var e=this.player.curDefinition;return e?e.definition+"":this.resLogs.df}},{key:"sessionId",get:function(){return this._sessionId}},{key:"finish",get:function(){return this.isEnded?1:0}},{key:"end_type",get:function(){return this._endType}},{key:"mp4Speed",get:function(){if(!this.player||!this.player.plugins)return 0;var e=this.player.plugins.mp4encryptplayer;return e?e.speed:0}},{key:"mp4RealSpeed",get:function(){if(!this.player||!this.player.plugins)return 0;var e=this.player.plugins.mp4encryptplayer;return e?e.realTimeSpeed:0}},{key:"mp4MseOpLength",get:function(){if(!this.player||!this.player.plugins)return-1;var e=this.player.plugins.mp4encryptplayer;return e?e.opQueueLen||0:-1}},{key:"mp4LoadSegmentTimeRange",get:function(){if(!this.player||!this.player.plugins)return"";var e=this.player.plugins.mp4encryptplayer;return e?e.loadSegmentTimeRange.join(","):""}},{key:"mp4FFInfo",get:function(){if(!this.player||!this.player.plugins)return{};var e=this.player.plugins.mp4encryptplayer;return e&&e.firstFrameTime||{}}},{key:"preLoadData",get:function(){if(!this.player||!this.player.plugins)return[];var e=this.player.plugins.mp4encryptplayer;if(e&&e.preLoadData)return{hit:1,duration:e.preLoadData.duration,length:e.preLoadData.byteLength};var t=this.player.stat||{};if(t.preLoadData){var n=t.preLoadData.length;return{hit:n>0,length:n}}return{hit:0,duration:0,length:0}}},{key:"preloadState",get:function(){if(!this.player||!this.player.plugins)return 0;if(void 0!==this.player.preloadState)return this.player.preloadState||0;var e=this.player.plugins.mp4encryptplayer;return e&&e.preloadState?e.preloadState:0}},{key:"curBitrate",get:function(){var e=this.player,t=e.config,n=e.curDefinition;return n&&n.bitrate?n.bitrate:t.defaultBitrate?t.defaultBitrate:0}},{key:"videoReadyState",get:function(){var e=this.player;return e&&e.video?e.video.readyState:-1}},{key:"videoSeeking",get:function(){var e=this.player;return e&&e.video&&e.video.seeking?1:0}},{key:"videoPaused",get:function(){var e=this.player;return e&&e.video&&e.video.paused?1:0}},{key:"retry_count",get:function(){return this._retryCount}},{key:"switchResolutionCount",get:function(){return this.resLogs.switch_count}},{key:"isError",get:function(){return A(this.player.root,"xgpplayer-is-error")}},{key:"isPlaying",get:function(){return A(this.player.root,"xgplayer-playing")}},{key:"isStop",get:function(){return A(this.player.root,"xgplayer-ended")||A(this.player.root,"xgplayer-nostart")}},{key:"isPause",get:function(){return A(this.player.root,"xgplayer-pause")}},{key:"isLoading",get:function(){return A(this.player.root,"xgplayer-isloading")}},{key:"es",get:function(){return this.isPlaying?"playing":"beforePlay"}},{key:"lt",get:function(){var e=0;return 0===this.vt&&(g("lt init",this.playlogs.lt),e=m()),e}},{key:"lpt",get:function(){return this.lt?this.lt-this.pt:0}},{key:"playback_state",get:function(){return this.isError?ne:this.isStop?$:this.isPause?te:this.isLoading?re:ee}},{key:"is_start_play_automatically",get:function(){return this.isAutoplay+""}},{key:"watchDur",get:function(){var e=this.player,t=this.playlogs;return e.cumulateTime?e.cumulateTime:h(t.played)}},{key:"vtype",get:function(){return this.__vtype?this.__vtype:this.player.dash?"DASH":"DASH"===this._options.vtype?"MP4":this._options.vtype||"MP4"},set:function(e){this.__vtype=e}},{key:"watingCost",get:function(){if(this.inWaitingStart>0){var e=y()-this.inWaitingStart;return e>36e5?0:e}return 0}},{key:"videoNetworkState",get:function(){var e=this.player;return e&&e.video?e.video.networkState:-1}},{key:"eagleid",get:function(){var e=this.player;return e&&e.__dash__&&e.__dash__.curReqVideoSegInfo?(e.__dash__.curReqVideoSegInfo.headers||{}).eagleid:""}},{key:"initial_type",get:function(){var e=this.player.config||{};return e&&e.vodLogOpts&&void 0!==e.vodLogOpts.currentDashType?parseInt(e.vodLogOpts.currentDashType,10):-1}},{key:"dynamicType",get:function(){var e=this.player;return this.__dt?this.__dt:e&&e.__dash__&&e.__dash__.dash&&e.__dash__.dash.mpd?(this.__dt=e.__dash__.dash.mpd.dashType,this.__dt):""}},{key:"updateCurBuffer",value:function(){var e=this.player,t=e.buffered,n=e.currentTime,r={buf_s_pos:0,buf_e_pos:0,buf_include:0},i=[];if(!t||t.length<1)return r;for(var a=-1,o=-1,s=t.length-1;s>-1;s--){var c=parseInt(1e3*t.start(s),10),u=parseInt(1e3*t.end(s),10);i.push({start:c,end:u}),n>c&&n<u?(r.buf_include=1,r.buf_s_pos=c,r.buf_e_pos=u):n<c&&(a<0||c-n<a)?(a=c-n,o=s):n>u&&(a<0||n-u<a)&&(a=n-u,o=s)}1!==r.buf_include&&o>-1&&(r.buf_s_pos=parseInt(1e3*t.start(o),10),r.buf_e_pos=parseInt(1e3*t.end(o),10)),r.buf_diff=parseInt(1e3*t.end(t.length-1)-1e3*n),this.buffers.allBuffer=i,this.buffers.curBuffer=r}},{key:"checkInBuffer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.player.buffered;if(!n)return!1;e=parseInt(1e3*e,10);for(var r=0;r<n.length;r++){var i=parseInt(1e3*n.start(r),10)+t,a=parseInt(1e3*n.end(r),10)+t;if(e>i&&e<a)return!0}return!1}},{key:"updateVideoSize",value:function(){var e=this._options,t=this.player,n=this.resLogs,r=0,i=0;if(t.__dash__&&t.__dash__.dash&&t.__dash__.dash.mpd.mediaList){var a=t.__dash__.dash.mpd.mediaList.video,o=a[a.selectedIdx];g("updateVideoSize\u300b\u300bvideoItem",o),i=o?o.bitrate||o.bandwidth:0,r=o?o.size:0}else{var s=this.player.curDefinition;s?(i=s.bitrate||t.config.bitrate||0,r=parseInt(s.bitrate*t.duration/8,10)):(r=e.videoSize||t.config.videoSize||0,i=e.bitrate||t.config.bitrate||0)}g("updateVideoSize","bitrate:".concat(i,", vs:").concat(r)),r&&(n.vs=r,n.vis=parseInt(r/t.duration,10),n.bitrate=i||n.vis)}},{key:"updateVds",value:function(){var e=this.resLogs,t=this.playlogs,n=this.player;if(0!==e.vis){for(var r=parseInt(h(t.played)/1e3,10),i=n.buffered,a=0,o=0;o<i.length;o++)a+=parseInt(i.end(o)-i.start(o),10);g("updateVds","pdur:".concat(r," bdur:").concat(a," \n         lbuf:").concat(e.lbuf," lplayed:").concat(e.lplayed," bitrate: ").concat(e.bitrate," vis:").concat(e.vis," vs:").concat(e.vs)),e.vps+=parseInt((r-e.lplayed)*e.vis,10),e.vds+=parseInt((a-e.lbuf)*e.vis,10),e.lplayed=r,e.lbuf=a}else g("updateVds","vis:".concat(e.vis))}}],[{key:"TEA_ID",get:function(){return _e},set:function(e){ke="__tea_cache_tokens_".concat(_e=e)}},{key:"AB_SDK_VERSION",get:function(){return Ee},set:function(e){Ee="Array"===T(e)?e.join(","):e}},{key:"Collector",set:function(e){Te=e}}]),e}();Ae.TEA_ID=1300,Ae.Collector=r.a;var Se=function(e){if(e&&e.player){var t=e.player.config.vodLogOpts||{};e.player.vodLogger=new Ae(e.player,t),e.player.plugins.xgVodLogger=e.player.vodLogger}else this.vodLogger=new Ae(this,this.config.vodLogOpts||{})};Se.pluginName="__xgVodLogger",Se.playerConfig={},Se.Collector=r.a,Se.setABSdkVersion=function(e){Ae.AB_SDK_VERSION=e}},"1219d2e8717a9a753eb7":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={LANG:"zh-cn",TEXT:{ERROR_TYPES:{network:{code:1,msg:"\u89c6\u9891\u4e0b\u8f7d\u9519\u8bef"},mse:{code:2,msg:"\u6d41\u8ffd\u52a0\u9519\u8bef"},parse:{code:3,msg:"\u89e3\u6790\u9519\u8bef"},format:{code:4,msg:"\u683c\u5f0f\u9519\u8bef"},decoder:{code:5,msg:"\u89e3\u7801\u9519\u8bef"},runtime:{code:6,msg:"\u8bed\u6cd5\u9519\u8bef"},timeout:{code:7,msg:"\u64ad\u653e\u8d85\u65f6"},other:{code:8,msg:"\u5176\u4ed6\u9519\u8bef"}},HAVE_NOTHING:"\u6ca1\u6709\u5173\u4e8e\u97f3\u9891/\u89c6\u9891\u662f\u5426\u5c31\u7eea\u7684\u4fe1\u606f",HAVE_METADATA:"\u97f3\u9891/\u89c6\u9891\u7684\u5143\u6570\u636e\u5df2\u5c31\u7eea",HAVE_CURRENT_DATA:"\u5173\u4e8e\u5f53\u524d\u64ad\u653e\u4f4d\u7f6e\u7684\u6570\u636e\u662f\u53ef\u7528\u7684\uff0c\u4f46\u6ca1\u6709\u8db3\u591f\u7684\u6570\u636e\u6765\u64ad\u653e\u4e0b\u4e00\u5e27/\u6beb\u79d2",HAVE_FUTURE_DATA:"\u5f53\u524d\u53ca\u81f3\u5c11\u4e0b\u4e00\u5e27\u7684\u6570\u636e\u662f\u53ef\u7528\u7684",HAVE_ENOUGH_DATA:"\u53ef\u7528\u6570\u636e\u8db3\u4ee5\u5f00\u59cb\u64ad\u653e",NETWORK_EMPTY:"\u97f3\u9891/\u89c6\u9891\u5c1a\u672a\u521d\u59cb\u5316",NETWORK_IDLE:"\u97f3\u9891/\u89c6\u9891\u662f\u6d3b\u52a8\u7684\u4e14\u5df2\u9009\u53d6\u8d44\u6e90\uff0c\u4f46\u5e76\u672a\u4f7f\u7528\u7f51\u7edc",NETWORK_LOADING:"\u6d4f\u89c8\u5668\u6b63\u5728\u4e0b\u8f7d\u6570\u636e",NETWORK_NO_SOURCE:"\u672a\u627e\u5230\u97f3\u9891/\u89c6\u9891\u6765\u6e90",MEDIA_ERR_ABORTED:"\u53d6\u56de\u8fc7\u7a0b\u88ab\u7528\u6237\u4e2d\u6b62",MEDIA_ERR_NETWORK:"\u7f51\u7edc\u9519\u8bef",MEDIA_ERR_DECODE:"\u89e3\u7801\u9519\u8bef",MEDIA_ERR_SRC_NOT_SUPPORTED:"\u4e0d\u652f\u6301\u7684\u97f3\u9891/\u89c6\u9891\u683c\u5f0f",REPLAY:"\u91cd\u64ad",ERROR:"\u7f51\u7edc\u8fde\u63a5\u4f3c\u4e4e\u51fa\u73b0\u4e86\u95ee\u9898",PLAY_TIPS:"\u64ad\u653e",PAUSE_TIPS:"\u6682\u505c",PLAYNEXT_TIPS:"\u4e0b\u4e00\u96c6",DOWNLOAD_TIPS:"\u4e0b\u8f7d",ROTATE_TIPS:"\u65cb\u8f6c",RELOAD_TIPS:"\u91cd\u65b0\u8f7d\u5165",FULLSCREEN_TIPS:"\u8fdb\u5165\u5168\u5c4f",EXITFULLSCREEN_TIPS:"\u9000\u51fa\u5168\u5c4f",CSSFULLSCREEN_TIPS:"\u8fdb\u5165\u6837\u5f0f\u5168\u5c4f",EXITCSSFULLSCREEN_TIPS:"\u9000\u51fa\u6837\u5f0f\u5168\u5c4f",TEXTTRACK:"\u5b57\u5e55",PIP:"\u753b\u4e2d\u753b",SCREENSHOT:"\u622a\u56fe",LIVE:"\u6b63\u5728\u76f4\u64ad",OFF:"\u5173\u95ed",OPEN:"\u5f00\u542f",MINI_DRAG:"\u70b9\u51fb\u6309\u4f4f\u53ef\u62d6\u52a8\u89c6\u9891",MINISCREEN:"\u5c0f\u5c4f\u5e55",REFRESH_TIPS:"\u8bf7\u8bd5\u8bd5",REFRESH:"\u5237\u65b0",FORWARD:"\u5feb\u8fdb\u4e2d",LIVE_TIP:"\u76f4\u64ad"}}},"19e4067ac39c456c1120":function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));n("7cb145ff51d539d4bd6d");var r=n("0b165edde72ebe3f3ca5"),i=n.n(r),a=n("f8c988483231af8381d2"),o=n.n(a),s=n("cc3ba8f20ced7ad84834"),c=n.n(s),u=n("f07456edab2c7b12cc0c"),l=n.n(u),d=n("f28ded8c7364f6de9abc"),f=n.n(d),h=n("e93695117ac1f764190a"),p=n.n(h),v=(n("fce1e10c0a59a8bd89e4"),n("34c0f6a91c0bdd59090c")),g=n("afa39434f067edd8798c"),y=n("1dbcb949bab5b5ef954b"),m=n("3b76dd97653dea47ddc2"),b=(n("cf2c3842fd8b1c54ed12"),n("16da3d83ca2b978dbac3"),n("b82b8efbfaa040833fc3"),function(){function e(t){o()(this,e),this.config=t.config,this.parent=t.root,this.root=v.a.createDom("ul","",{},"xg-options-list ".concat(this.config.className)),t.root.appendChild(this.root),this.onItemClick=this.onItemClick.bind(this),this.renderItemList();var n="mobile"===g.a.device?"touchend":"click";this._delegates=m.b.delegate.call(this,this.root,"li",n,this.onItemClick)}return c()(e,[{key:"renderItemList",value:function(e){var t=this,n=this.config,r=this.root;e?n.data=e:e=n.data,n.style&&Object.keys(n.style).map((function(e){r.style[e]=n[e]})),e.length>0&&(this.attrKeys=Object.keys(e[0])),this.root.innerHTML="",e.map((function(e,n){var r=e.selected?"option-item selected":"option-item";e["data-index"]=n,t.root.appendChild(v.a.createDom("li","<span>".concat(e.showText,"</span>"),e,r))}))}},{key:"onItemClick",value:function(e){e.delegateTarget||(e.delegateTarget=e.target);var t=e.delegateTarget;if(t&&v.a.hasClass(t,"selected"))return!1;var n="function"==typeof this.config.onItemClick?this.config.onItemClick:null,r=this.root.querySelector(".selected");v.a.addClass(t,"selected"),r&&v.a.removeClass(r,"selected"),n(e,{from:r?this.getAttrObj(r,this.attrKeys):null,to:this.getAttrObj(t,this.attrKeys)})}},{key:"getAttrObj",value:function(e,t){if(!e||!t)return{};var n={};t.map((function(t){n[t]=e.getAttribute(t)}));var r=e.getAttribute("data-index");return r&&(n.index=Number(r)),n}},{key:"show",value:function(){v.a.removeClass(this.root,"hide"),v.a.addClass(this.root,"active")}},{key:"hide",value:function(){v.a.removeClass(this.root,"active"),v.a.addClass(this.root,"hide")}},{key:"destroy",value:function(){this._delegates&&(this._delegates.map((function(e){e.destroy&&e.destroy()})),this._delegates=null),this.root.innerHTML=null,this.parent.removeChild(this.root),this.root=null}}]),e}());function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var k="mobile"===g.a.device,w=function(e){l()(n,e);var t=_(n);function n(e){var r;return o()(this,n),(r=t.call(this,e)).isActive=!1,r.curValue=null,r.curIndex=0,r}return c()(n,[{key:"updateLang",value:function(e){this.renderItemList(this.config.list,this.curIndex)}},{key:"afterCreate",value:function(){var e=this,t=this.config;k&&"middle"!==t.listType&&(t.listType="rightSide"),t.hidePortrait&&v.a.addClass(this.root,"portrait"),this.once(y.CANPLAY,(function(){t.list&&t.list.length>0&&(e.renderItemList(t.list),e.show())})),k&&this.on(y.PLAYER_FOCUS,(function(){e.isActive&&(e.optionsList&&e.optionsList.hide(),e.isActive=!1)})),this.activeEvent=k?"touchend":"mouseenter",this.onEnter=this.onEnter.bind(this),this.onLeave=this.onLeave.bind(this),this.bind(this.activeEvent,this.onEnter),this.bind("mouseleave",this.onLeave)}},{key:"show",value:function(){!this.config.list||this.config.list.length<2||v.a.addClass(this.root,"show")}},{key:"hide",value:function(){v.a.removeClass(this.root,"show")}},{key:"getTextByLang",value:function(e,t,n){if(void 0===e)return"";var r=this.config.list;return!n&&(n=this.player.lang),t=!t||v.a.isUndefined(e[t])?"text":t,"number"==typeof e&&(e=r[e]),"object"===i()(e[t])?e[t][n]||e[t].zh:e[t]||""}},{key:"onEnter",value:function(e){e.preventDefault(),e.stopPropagation(),this.onToggle(!0)}},{key:"onLeave",value:function(e){e.preventDefault(),e.stopPropagation(),this.isActive&&this.onToggle(!1)}},{key:"onToggle",value:function(e){if(this.isActive!==e){var t=this.player.controls,n=this.config.listType;e?("rightSide"===n?t.blur():t.focus(),this.optionsList&&this.optionsList.show()):("rightSide"===n?t.focus():t.focusAwhile(),this.optionsList&&this.optionsList.hide()),this.isActive=e}}},{key:"onItemClick",value:function(e,t){e.preventDefault(),e.stopPropagation();var n=this.config,r=n.listType,i=n.list;(k||"rightSide"===r)&&this.onToggle(!1),this.curIndex=t.to.index,this.curItem=i[this.curIndex],this.changeCurrentText(),this.onToggle(!1)}},{key:"changeCurrentText",value:function(){var e=this.config.list,t=e[this.curIndex<e.length?this.curIndex:0];t&&(this.find(".icon-text").innerHTML=this.getTextByLang(t,"iconText"))}},{key:"renderItemList",value:function(e,t){var n=this,r=this.config,i=this.optionsList,a=this.player;if("number"==typeof t&&(this.curIndex=t,this.curItem=r.list[t]),i)return i.renderItemList(e),void this.changeCurrentText();var o={config:{data:e||[],className:"rightSide"===r.listType?"right-side":"",onItemClick:function(e,t){n.onItemClick(e,t)}},root:"rightSide"===r.listType?a.root:this.root};this.config.isShowIcon&&(this.optionsList=new b(o),this.changeCurrentText(),this.show())}},{key:"destroy",value:function(){this.unbind(this.activeEvent,this.onToggle),this.unbind("mouseleave",this.onToggle),this.optionsList&&(this.optionsList.destroy(),this.optionsList=null)}},{key:"render",value:function(){if(this.config.isShowIcon)return'<xg-icon class="xg-options-icon '.concat(this.config.className||"",'">\n    <div class="xgplayer-icon btn-text">\n    <span class="icon-text"></span>\n    </div>\n   </xg-icon>')}}],[{key:"pluginName",get:function(){return"optionsIcon"}},{key:"defaultConfig",get:function(){return{position:m.a.CONTROLS_RIGHT,index:100,list:[],listType:"middle",listStyle:{},hidePortrait:!0,isShowIcon:!1}}}]),n}(m.b)},"1dbcb949bab5b5ef954b":function(e,t,n){"use strict";n.r(t),n.d(t,"ABORT",(function(){return E})),n.d(t,"AFTER_DEFINITION_CHANGE",(function(){return j})),n.d(t,"AUTOPLAY_PREVENTED",(function(){return C})),n.d(t,"AUTOPLAY_STARTED",(function(){return O})),n.d(t,"BEFORE_DEFINITION_CHANGE",(function(){return F})),n.d(t,"BUFFER_CHANGE",(function(){return T})),n.d(t,"CANPLAY",(function(){return f})),n.d(t,"CANPLAY_THROUGH",(function(){return h})),n.d(t,"COMPLETE",(function(){return x})),n.d(t,"CSS_FULLSCREEN_CHANGE",(function(){return N})),n.d(t,"DEFINITION_CHANGE",(function(){return B})),n.d(t,"DESTROY",(function(){return D})),n.d(t,"DURATION_CHANGE",(function(){return p})),n.d(t,"EMPTIED",(function(){return _})),n.d(t,"ENDED",(function(){return a})),n.d(t,"ERROR",(function(){return s})),n.d(t,"FULLSCREEN_CHANGE",(function(){return M})),n.d(t,"LOADED_DATA",(function(){return g})),n.d(t,"LOAD_START",(function(){return b})),n.d(t,"MINI_STATE_CHANGE",(function(){return U})),n.d(t,"PAUSE",(function(){return o})),n.d(t,"PIP_CHANGE",(function(){return G})),n.d(t,"PLAY",(function(){return r})),n.d(t,"PLAYER_BLUR",(function(){return S})),n.d(t,"PLAYER_FOCUS",(function(){return A})),n.d(t,"PLAYING",(function(){return i})),n.d(t,"PLAYNEXT",(function(){return Y})),n.d(t,"PROGRESS",(function(){return m})),n.d(t,"RATE_CHANGE",(function(){return y})),n.d(t,"READY",(function(){return I})),n.d(t,"REPLAY",(function(){return P})),n.d(t,"RETRY",(function(){return V})),n.d(t,"ROTATE",(function(){return z})),n.d(t,"SCREEN_SHOT",(function(){return X})),n.d(t,"SEEKED",(function(){return u})),n.d(t,"SEEKING",(function(){return c})),n.d(t,"SEI_PARSED",(function(){return H})),n.d(t,"SHORTCUT",(function(){return K})),n.d(t,"STALLED",(function(){return k})),n.d(t,"STATS_EVENTS",(function(){return $})),n.d(t,"SUSPEND",(function(){return w})),n.d(t,"TIME_UPDATE",(function(){return l})),n.d(t,"URL_CHANGE",(function(){return L})),n.d(t,"URL_NULL",(function(){return R})),n.d(t,"USER_ACTION",(function(){return Q})),n.d(t,"USER_ACTION1",(function(){return q})),n.d(t,"VIDEO_EVENTS",(function(){return J})),n.d(t,"VIDEO_RESIZE",(function(){return W})),n.d(t,"VOLUME_CHANGE",(function(){return v})),n.d(t,"WAITING",(function(){return d})),n.d(t,"XGLOG",(function(){return Z}));var r="play",i="playing",a="ended",o="pause",s="error",c="seeking",u="seeked",l="timeupdate",d="waiting",f="canplay",h="canplaythrough",p="durationchange",v="volumechange",g="loadeddata",y="ratechange",m="progress",b="loadstart",_="emptied",k="stalled",w="suspend",E="abort",T="bufferedChange",A="focus",S="blur",I="ready",R="urlNull",O="autoplay_started",C="autoplay_was_prevented",x="complete",P="replay",D="destroy",L="urlchange",M="fullscreen_change",N="cssFullscreen_change",U="mini_state_change",B="definition_change",F="before_definition_change",j="after_definition_change",H="SEI_PARSED",V="retry",W="video_resize",G="pip_change",z="rotate",X="screenShot",Y="playnext",K="shortcut",Z="xglog",Q="user_action",q="user_action1",J=["play","playing","ended","pause","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","ratechange","progress","loadstart","emptied","stalled","suspend","abort"],$={STATS_INFO:"stats_info",STATS_DOWNLOAD:"stats_download",STATS_RESET:"stats_reset"}},"2678b08b21fe126e57ce":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n("7cb145ff51d539d4bd6d");var r=n("f8c988483231af8381d2"),i=n.n(r),a=n("cc3ba8f20ced7ad84834"),o=n.n(a),s=n("4b84106568f6cb3ecbe0"),c=n.n(s),u=n("f07456edab2c7b12cc0c"),l=n.n(u),d=n("f28ded8c7364f6de9abc"),f=n.n(d),h=n("e93695117ac1f764190a"),p=n.n(h),v=(n("cf2c3842fd8b1c54ed12"),n("8c975a8e48558997ef6e"),n("af4e4e4030596b369b13"),n("1dbcb949bab5b5ef954b")),g=n("3b76dd97653dea47ddc2");function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var m=function(e){l()(n,e);var t=y(n);function n(e){var r;return i()(this,n),(r=t.call(this,e)).curTime=0,r.isPaused=!0,r}return o()(n,[{key:"beforeCreate",value:function(e){var t=e.config.list;Array.isArray(t)&&t.length>0&&(e.config.list=t.map((function(e){return!e.text&&e.name&&(e.text=e.name),e.text||(e.text=e.definition),e})))}},{key:"afterCreate",value:function(){var e=this;c()(p()(n.prototype),"afterCreate",this).call(this),this.on("resourceReady",(function(t){e.changeDefinitionList(t)})),this.on(v.DEFINITION_CHANGE,(function(t){e.renderItemList(e.config.list,t.to)})),this.player.definitionList.length<2&&this.hide()}},{key:"initDefinition",value:function(){var e=this.config,t=e.list,n=e.defaultDefinition;if(t.length>0){var r=null;t.map((function(e){e.definition===n&&(r=e)})),r||(r=t[0]),this.changeDefinition(r)}}},{key:"renderItemList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.list||[],r=arguments.length>1?arguments[1]:void 0,i=r&&r.definition?r.definition:this.config.defaultDefinition;r&&t.forEach((function(e){e.selected=!1}));var a=0,o=t.map((function(t,n){var r={url:t.url,definition:t.definition||"",showText:e.getTextByLang(t)||t.definition,selected:!1};return(t.selected||t.definition&&t.definition===i)&&(r.selected=!0,a=n),r}));c()(p()(n.prototype),"renderItemList",this).call(this,o,a)}},{key:"changeDefinitionList",value:function(e){Array.isArray(e)&&(this.config.list=e.map((function(e){return!e.text&&e.name&&(e.text=e.name),e.text||(e.text=e.definition),e})),this.renderItemList(),this.config.list.length<2?this.hide():this.show())}},{key:"changeDefinition",value:function(e,t){this.player.changeDefinition(e,t)}},{key:"onItemClick",value:function(e,t){c()(p()(n.prototype),"onItemClick",this).apply(this,arguments),this.emitUserAction(e,"change_definition",{from:t.from,to:t.to}),this.player.changeDefinition(t.to,t.from)}}],[{key:"pluginName",get:function(){return"definition"}},{key:"defaultConfig",get:function(){return{position:g.a.CONTROLS_RIGHT,index:3,list:[],defaultDefinition:"",disable:!1,hidePortrait:!1,className:"xgplayer-definition",isShowIcon:!0}}}]),n}(n("19e4067ac39c456c1120").a)},"2c1d7c757760acb5482f":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n("7cb145ff51d539d4bd6d");var r=n("f8c988483231af8381d2"),i=n.n(r),a=n("cc3ba8f20ced7ad84834"),o=n.n(a),s=n("4b84106568f6cb3ecbe0"),c=n.n(s),u=n("f07456edab2c7b12cc0c"),l=n.n(u),d=n("f28ded8c7364f6de9abc"),f=n.n(d),h=n("e93695117ac1f764190a"),p=n.n(h),v=(n("cf2c3842fd8b1c54ed12"),n("b82b8efbfaa040833fc3"),n("1dbcb949bab5b5ef954b")),g=n("3b76dd97653dea47ddc2");function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var m=function(e){l()(n,e);var t=y(n);function n(e){var r;return i()(this,n),(r=t.call(this,e)).curRate=1,r}return o()(n,[{key:"beforeCreate",value:function(e){var t=e.player.config.playbackRate,n=t?Array.isArray(t)?t:e.config.list:[];Array.isArray(n)&&(e.config.list=n.map((function(e){return"number"==typeof e?e={rate:e,text:"".concat(e,"x")}:!e.text&&e.rate&&(e.text="".concat(e.rate,"x")),e})))}},{key:"afterCreate",value:function(){var e=this;c()(p()(n.prototype),"afterCreate",this).call(this),this.on(v.RATE_CHANGE,(function(){e.curValue!==e.player.playbackRate&&e.renderItemList()})),this.renderItemList()}},{key:"show",value:function(){this.config.list&&0!==this.config.list.length&&c()(p()(n.prototype),"show",this).call(this)}},{key:"onItemClick",value:function(e,t){c()(p()(n.prototype),"onItemClick",this).apply(this,arguments);var r=e.delegateTarget,i=Number(r.getAttribute("rate"));if(!i||i===this.curValue)return!1;var a={playbackRate:{from:this.player.playbackRate,to:i}};this.emitUserAction(e,"change_rate",{props:a}),this.curValue=i,this.player.playbackRate=i}},{key:"renderItemList",value:function(){var e=this,t=this.player.playbackRate||1;this.curValue=t;var r=0,i=this.config.list.map((function(n,i){var a={rate:n.rate};return a.rate===t&&(a.selected=!0,r=i),a.showText=e.getTextByLang(n),a}));c()(p()(n.prototype),"renderItemList",this).call(this,i,r)}},{key:"destroy",value:function(){c()(p()(n.prototype),"destroy",this).call(this)}}],[{key:"pluginName",get:function(){return"playbackRate"}},{key:"defaultConfig",get:function(){return{position:g.a.CONTROLS_RIGHT,index:4,list:[2,1.5,1,.75,.5],className:"xgplayer-playbackrate",isShowIcon:!0,hidePortrait:!1}}}]),n}(n("19e4067ac39c456c1120").a)},"34c0f6a91c0bdd59090c":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("2bc4fe74291883f7c727"),i=n.n(r),a=n("0b165edde72ebe3f3ca5"),o=n.n(a),s=(n("af4e4e4030596b369b13"),n("16da3d83ca2b978dbac3"),n("2f22f453e80dcd80946e"),n("242d8a87221617b4ac29"),n("4dd75ee0c23d4a9d0f78"),n("9ba26f6b662448d8bc59"),n("99db023933d00eead7df"),n("d74f5f93f73b1ae4b424"),n("49c77cfe9861eb5430df"),n("a5b5b7a2e2288b74b453"),n("cf2c3842fd8b1c54ed12"),n("733fd62058ae078d16d8"),n("c9461f50c5d53d77beb2"),n("d21c3f3d4c981a871761"),n("8c975a8e48558997ef6e"),n("a2a80d3346615eb09116"),n("e2a049807982af34ed2b"),n("ff12d07833562306368e")),c=n("f8c988483231af8381d2"),u=n.n(c),l=n("cc3ba8f20ced7ad84834"),d=n.n(l),f=function(){function e(t){u()(this,e),this.bufferedList=t}return d()(e,[{key:"start",value:function(e){return this.bufferedList[e].start}},{key:"end",value:function(e){return this.bufferedList[e].end}},{key:"length",get:function(){return this.bufferedList.length}}]),e}(),h={};function p(e,t){for(var n=0,r=t.length;n<r;n++)if(e.indexOf(t[n])>-1)return!0;return!1}h.createDom=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=document.createElement(e);return i.className=r,i.innerHTML=t,Object.keys(n).forEach((function(t){var r=t,a=n[t];"video"===e||"audio"===e||"live-video"===e?a&&i.setAttribute(r,a):i.setAttribute(r,a)})),i},h.createDomFromHtml=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{var r=document.createElement("div");r.innerHTML=e;var i=r.children;return r=null,i.length>0?(i=i[0],n&&h.addClass(i,n),t&&Object.keys(t).forEach((function(e){i.setAttribute(e,t[e])})),i):null}catch(a){return s.b.logError("util.createDomFromHtml",a),null}},h.hasClass=function(e,t){if(!e||!t)return!1;try{return Array.prototype.some.call(e.classList,(function(e){return e===t}))}catch(r){var n=e.className&&"object"===o()(e.className)?e.getAttribute("class"):e.className;return n&&!!n.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}},h.addClass=function(e,t){if(e&&t)try{t.trim().split(/\s+/g).forEach((function(t){t&&e.classList.add(t)}))}catch(n){h.hasClass(e,t)||(e.className&&"object"===o()(e.className)?e.setAttribute("class",e.getAttribute("class")+" "+t):e.className+=" "+t)}},h.removeClass=function(e,t){if(e&&t)try{t.trim().split(/\s+/g).forEach((function(t){t&&e.classList.remove(t)}))}catch(n){h.hasClass(e,t)&&t.split(/\s+/g).forEach((function(t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className&&"object"===o()(e.className)?e.setAttribute("class",e.getAttribute("class").replace(n," ")):e.className=e.className.replace(n," ")}))}},h.toggleClass=function(e,t){e&&t.split(/\s+/g).forEach((function(t){h.hasClass(e,t)?h.removeClass(e,t):h.addClass(e,t)}))},h.classNames=function(){for(var e=arguments,t=[],n=function(n){"String"===h.typeOf(e[n])?t.push(e[n]):"Object"===h.typeOf(e[n])&&Object.keys(e[n]).map((function(r){e[n][r]&&t.push(r)}))},r=0;r<arguments.length;r++)n(r);return t.join(" ")},h.findDom=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1?arguments[1]:void 0;try{e=t.querySelector(n)}catch(r){s.b.logError("util.findDom",r),0===n.indexOf("#")&&(e=t.getElementById(n.slice(1)))}return e},h.getCss=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,!1)[t]},h.padStart=function(e,t,n){for(var r=String(n),i=t>>0,a=Math.ceil(i/r.length),o=[],s=String(e);a--;)o.push(r);return o.join("").substring(0,i-s.length)+s},h.format=function(e){if(window.isNaN(e))return"";e=Math.round(e);var t=h.padStart(Math.floor(e/3600),2,0),n=h.padStart(Math.floor((e-3600*t)/60),2,0),r=h.padStart(Math.floor(e-3600*t-60*n),2,0);return("00"===t?[n,r]:[t,n,r]).join(":")},h.event=function(e){if(e.touches){var t=e.touches[0]||e.changedTouches[0];e.clientX=t.clientX||0,e.clientY=t.clientY||0,e.offsetX=t.pageX-t.target.offsetLeft,e.offsetY=t.pageY-t.target.offsetTop}e._target=e.target||e.srcElement},h.typeOf=function(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]},h.deepCopy=function(e,t){if("Object"===h.typeOf(t)&&"Object"===h.typeOf(e))return Object.keys(t).forEach((function(n){"Object"!==h.typeOf(t[n])||t[n]instanceof Node?"Array"===h.typeOf(t[n])?e[n]="Array"===h.typeOf(e[n])?e[n].concat(t[n]):t[n]:e[n]=t[n]:void 0===e[n]||void 0===e[n]?e[n]=t[n]:h.deepCopy(e[n],t[n])})),e},h.deepMerge=function(e,t){return Object.keys(t).map((function(n){var r;"Array"===h.typeOf(t[n])&&"Array"===h.typeOf(e[n])?"Array"===h.typeOf(e[n])&&(r=e[n]).push.apply(r,i()(t[n])):h.typeOf(e[n])!==h.typeOf(t[n])||null===e[n]||"Object"!==h.typeOf(e[n])||t[n]instanceof window.Node?null!==t[n]&&(e[n]=t[n]):h.deepMerge(e[n],t[n])})),e},h.getBgImage=function(e){var t=(e.currentStyle||window.getComputedStyle(e,null)).backgroundImage;if(!t||"none"===t)return"";var n=document.createElement("a");return n.href=t.replace(/url\("|"\)/g,""),n.href},h.copyDom=function(e){if(e&&1===e.nodeType){var t=document.createElement(e.tagName);return Array.prototype.forEach.call(e.attributes,(function(e){t.setAttribute(e.name,e.value)})),e.innerHTML&&(t.innerHTML=e.innerHTML),t}return""},h.setInterval=function(e,t,n,r){e._interval[t]||(e._interval[t]=setInterval(n.bind(e),r))},h.clearInterval=function(e,t){clearInterval(e._interval[t]),e._interval[t]=null},h.setTimeout=function(e,t,n){e._timers||(e._timers=[]);var r=setTimeout((function(){t(),h.clearTimeout(e,r)}),n);return e._timers.push(r),r},h.clearTimeout=function(e,t){var n=e._timers;if("Array"===h.typeOf(n)){for(var r=0;r<n.length;r++)if(n[r]===t){n.splice(r,1),clearTimeout(t);break}}else clearTimeout(t)},h.clearAllTimers=function(e){var t=e._timers;"Array"===h.typeOf(t)&&(t.map((function(e){clearTimeout(e)})),e._timerIds=[])},h.createImgBtn=function(e,t,n,r){var i,a,o,s=h.createDom("xg-".concat(e),"",{},"xgplayer-".concat(e,"-img"));(s.style.backgroundImage='url("'.concat(t,'")'),n&&r)&&(["px","rem","em","pt","dp","vw","vh","vm","%"].every((function(e){return!(n.indexOf(e)>-1&&r.indexOf(e)>-1)||(i=parseFloat(n.slice(0,n.indexOf(e)).trim()),a=parseFloat(r.slice(0,r.indexOf(e)).trim()),o=e,!1)})),s.style.width="".concat(i).concat(o),s.style.height="".concat(a).concat(o),s.style.backgroundSize="".concat(i).concat(o," ").concat(a).concat(o),s.style.margin="start"===e?"-".concat(a/2).concat(o," auto auto -").concat(i/2).concat(o):"auto 5px auto 5px");return s},h.Hex2RGBA=function(e,t){var n=[];if(/^\#[0-9A-F]{3}$/i.test(e)){var r="#";e.replace(/[0-9A-F]/gi,(function(e){r+=e+e})),e=r}return/^#[0-9A-F]{6}$/i.test(e)?(e.replace(/[0-9A-F]{2}/gi,(function(e){n.push(parseInt(e,16))})),"rgba(".concat(n.join(","),", ").concat(t,")")):"rgba(255, 255, 255, 0.1)"},h.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},h.checkIsFunction=function(e){return e&&"function"==typeof e},h.checkIsObject=function(e){return null!==e&&"object"===o()(e)},h.hide=function(e){e.style.display="none"},h.show=function(e,t){e.style.display=t||"block"},h.isUndefined=function(e){if(null==e)return!0},h.setStyleFromCsstext=function(e,t){t&&("String"===h.typeOf(t)?t.replace(/\s+/g,"").split(";").map((function(t){if(t){var n=t.split(":");n.length>1&&(e.style[n[0]]=n[1])}})):Object.keys(t).map((function(n){e.style[n]=t[n]})))},h.filterStyleFromText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["width","height","top","left","bottom","right","position","z-index","padding","margin","transform"],n=e.style.cssText;if(!n)return{};var r=n.replace(/\s+/g,"").split(";"),i={},a={};return r.map((function(e){if(e){var n=e.split(":");n.length>1&&(p(n[0],t)?i[n[0]]=n[1]:a[n[0]]=n[1])}})),e.setAttribute("style",""),Object.keys(a).map((function(t){e.style[t]=a[t]})),i},h.getStyleFromCsstext=function(e){var t=e.style.cssText;if(!t)return{};var n=t.replace(/\s+/g,"").split(";"),r={};return n.map((function(e){if(e){var t=e.split(":");t.length>1&&(r[t[0]]=t[1])}})),r},h.preloadImg=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(e){var r=new window.Image;r.complete?t&&t():(r.onload=function(e){r=null,t&&t(e)},r.onerror=function(e){r=null,n&&n(e)}),r.src=e}},h.stopPropagation=function(e){e&&(e.stopPropagation(),e.cancelable&&e.preventDefault())},h.scrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},h.scrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0},h.checkTouchSupport=function(){return"ontouchstart"in window},h.getBuffered2=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=[],r=0;r<e.length;r++)n.push({start:e.start(r)<.5?0:e.start(r),end:e.end(r)});n.sort((function(e,t){var n=e.start-t.start;return n||t.end-e.end}));var i=[];if(t)for(var a=0;a<n.length;a++){var o=i.length;if(o){var s=i[o-1].end;n[a].start-s<t?n[a].end>s&&(i[o-1].end=n[a].end):i.push(n[a])}else i.push(n[a])}else i=n;return new f(i)},h.getEventPos=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{x:e.x/t,y:e.y/t,clientX:e.clientX/t,clientY:e.clientY/t,offsetX:e.offsetX/t,offsetY:e.offsetY/t,pageX:e.pageX/t,pageY:e.pageY/t}},h.requestAnimationFrame=function(e){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(t)return t(e)},h.getHostFromUrl=function(e){if(null==e||""===e||"string"!=typeof e)return"";var t=e.split("/"),n="";return t.length>3&&t[2]&&(n=t[2]),n},h.cancelAnimationFrame=function(e){var t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame;t&&t(e)};var v=h},"3b76dd97653dea47ddc2":function(e,t,n){"use strict";n.d(t,"a",(function(){return T})),n.d(t,"b",(function(){return R}));n("7cb145ff51d539d4bd6d");var r=n("f8c988483231af8381d2"),i=n.n(r),a=n("cc3ba8f20ced7ad84834"),o=n.n(a),s=n("4b84106568f6cb3ecbe0"),c=n.n(s),u=n("f07456edab2c7b12cc0c"),l=n.n(u),d=n("f28ded8c7364f6de9abc"),f=n.n(d),h=n("e93695117ac1f764190a"),p=n.n(h),v=n("0b165edde72ebe3f3ca5"),g=n.n(v),y=(n("d21c3f3d4c981a871761"),n("cf2c3842fd8b1c54ed12"),n("16da3d83ca2b978dbac3"),n("8c975a8e48558997ef6e"),n("af4e4e4030596b369b13"),n("a2a80d3346615eb09116"),n("fce1e10c0a59a8bd89e4"),n("b82b8efbfaa040833fc3"),n("7367695471878cd60218")),m=n("6a7e64e55c15b9a2ad4a"),b=n.n(m),_=n("ff12d07833562306368e"),k=n("34c0f6a91c0bdd59090c");function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var E={CONTROLS:"controls",ROOT:"root"},T={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_RIGHT:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"};function A(e){return!!e&&(e.indexOf&&/^http/.test(e))}function S(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=null;if(e instanceof window.Element)return k.a.addClass(e,n),Object.keys(r).map((function(t){e.setAttribute(t,r[t])})),e;if(A(e)||A(e.url))return r.src=A(e)?e:e.url||"",a=k.a.createDom(e.tag||"img","",r,"xg-img ".concat(n));if("function"==typeof e)try{return(a=e())instanceof window.Element?(k.a.addClass(a,n),Object.keys(r).map((function(e){a.setAttribute(e,r[e])})),a):(_.b.logWarn("warn>>icons.".concat(t," in config of plugin named [").concat(i,"] is a function mast return an Element Object")),null)}catch(o){return _.b.logError("Plugin named [".concat(i,"]:createIcon"),o),null}return"string"==typeof e?k.a.createDomFromHtml(e,r,n):(_.b.logWarn("warn>>icons.".concat(t," in config of plugin named [").concat(i,"] is invalid")),null)}function I(e,t){var n=t.config.icons||t.playerConfig.icons;Object.keys(e).map((function(r){var i=e[r],a=i&&i.class?i.class:"",o=i&&i.attr?i.attr:{},s=null;n&&n[r]&&(a=function(e,t){return"object"===g()(e)&&e.class&&"string"==typeof e.class?"".concat(t," ").concat(e.class):t}(n[r],a),o=function(e,t){return"object"===g()(e)&&e.attr&&"object"===g()(e.attr)&&Object.keys(e.attr).map((function(n){t[n]=e.attr[n]})),t}(n[r],o),s=S(n[r],r,a,o,t.pluginName)),!s&&i&&(s=S(i.icon?i.icon:i,o,a,{},t.pluginName)),t.icons[r]=s}))}var R=function(e){l()(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,n),(e=t.call(this,r)).__delegates=[],e}return o()(n,[{key:"__init",value:function(e){if(c()(p()(n.prototype),"__init",this).call(this,e),e.root){var t=e.root,r=null;this.icons={},this.root=null,this.parent=null,I(this.registerIcons()||{},this),this.langText={};var i,a,o=this.registerLanguageTexts()||{};i=o,a=this,Object.keys(i).map((function(e){Object.defineProperty(a.langText,e,{get:function(){var t=a.lang,n=a.i18n;return n[e]?n[e]:i[e]&&i[e][t]||""}})}));var s="";try{s=this.render()}catch(d){throw _.b.logError("Plugin:".concat(this.pluginName,":render"),d),new Error("Plugin:".concat(this.pluginName,":render:").concat(d.message))}if(s)(r=n.insert(s,t,e.index)).setAttribute("data-index",e.index);else{if(!e.tag)return;(r=k.a.createDom(e.tag,"",e.attr,e.name)).setAttribute("data-index",e.index),t.appendChild(r)}this.root=r,this.parent=t;var u=this.config.attr||{},l=this.config.style||{};this.setAttr(u),this.setStyle(l),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registerChildren()}}},{key:"__registerChildren",value:function(){var e=this;if(this.root){this._children=[];var t=this.children();t&&"object"===g()(t)&&Object.keys(t).length>0&&Object.keys(t).map((function(n){var r,i,a=n,o=t[a],s={root:e.root};"function"==typeof o?(r=e.config[a]||{},i=o):"object"===g()(o)&&"function"==typeof o.plugin&&(r=o.options?k.a.deepCopy(e.config[a]||{},o.options):e.config[a]||{},i=o.plugin),s.config=r,void 0!==r.index&&(s.index=r.index),r.root&&(s.root=r.root),e.registerPlugin(i,s,a)}))}}},{key:"updateLang",value:function(e){e||(e=this.lang);var t=this.root,n=this.i18n,r=this.langText;t&&function e(t,n){for(var r=0;r<t.children.length;r++)t.children[r].children.length>0?e(t.children[r],n):n(t.children[r])}(t,(function(t){var i=t.getAttribute&&t.getAttribute("lang-key");if(i){var a=n[i.toUpperCase()]||r[i];a&&(t.innerHTML="function"==typeof a?a(e):a)}}))}},{key:"lang",get:function(){return this.player.lang}},{key:"changeLangTextKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.i18n||{},r=this.langText;e.setAttribute&&e.setAttribute("lang-key",t);var i=n[t]||r[t]||"";i&&(e.innerHTML=i)}},{key:"plugins",value:function(){return this._children}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.root=t.root||this.root;var i=c()(p()(n.prototype),"registerPlugin",this).call(this,e,t,r);return this._children.push(i),i}},{key:"registerIcons",value:function(){return{}}},{key:"registerLanguageTexts",value:function(){return{}}},{key:"find",value:function(e){if(this.root)return this.root.querySelector(e)}},{key:"bind",value:function(e,t,r){var i=this;if(arguments.length<3&&"function"==typeof t)Array.isArray(e)?e.forEach((function(e){i.bindEL(e,t)})):this.bindEL(e,t);else{var a=n.delegate.call(this,this.root,e,t,r);this.__delegates=this.__delegates.concat(a)}}},{key:"unbind",value:function(e,t){var n=this;if(arguments.length<3&&"function"==typeof t)Array.isArray(e)?e.forEach((function(e){n.unbindEL(e,t)})):this.unbindEL(e,t);else for(var r="".concat(e,"_").concat(t),i=0;i<this.__delegates.length;i++)if(this.__delegates[i].key===r){this.__delegates[i].destroy(),this.__delegates.splice(i,1);break}}},{key:"setStyle",value:function(e,t){var n=this;if(this.root)return"String"===k.a.typeOf(e)?this.root.style[e]=t:void("Object"===k.a.typeOf(e)&&Object.keys(e).map((function(t){n.root.style[t]=e[t]})))}},{key:"setAttr",value:function(e,t){var n=this;if(this.root)return"String"===k.a.typeOf(e)?this.root.setAttribute(e,t):void("Object"===k.a.typeOf(e)&&Object.keys(e).map((function(t){n.root.setAttribute(t,e[t])})))}},{key:"setHtml",value:function(e,t){this.root&&(this.root.innerHTML=e,"function"==typeof t&&t())}},{key:"bindEL",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(e)in this.root&&"function"==typeof t&&this.root.addEventListener(e,t,n)}},{key:"unbindEL",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(e)in this.root&&"function"==typeof t&&this.root.removeEventListener(e,t,n)}},{key:"show",value:function(e){if(this.root)return this.root.style.display=void 0!==e?e:"block","none"===window.getComputedStyle(this.root,null).getPropertyValue("display")?this.root.style.display="block":void 0}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(e,t){if(!this.root)return null;if(arguments.length<2&&arguments[0]instanceof window.Element)return this.root.appendChild(arguments[0]);if(!(t&&t instanceof window.Element))return null;try{return"string"==typeof e?this.find(e).appendChild(t):e.appendChild(t)}catch(n){return _.b.logError("Plugin:appendChild",n),null}}},{key:"render",value:function(){return""}},{key:"destroy",value:function(){}},{key:"__destroy",value:function(){var e=this,t=this.player;this.__delegates.map((function(e){e.destroy()})),this.__delegates=[],this._children instanceof Array&&(this._children.map((function(e){t.unRegisterPlugin(e.pluginName)})),this._children=null),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root)),c()(p()(n.prototype),"__destroy",this).call(this),this.icons={},["root","parent"].map((function(t){e[t]=null}))}}],[{key:"insert",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.children.length,i=Number(n),a=e instanceof window.Node;if(r){for(var o=0,s=null,c="";o<r;o++){s=t.children[o];var u=Number(s.getAttribute("data-index"));if(u>=i){c="beforebegin";break}u<i&&(c="afterend")}return a?"afterend"===c?t.appendChild(e):t.insertBefore(e,s):s.insertAdjacentHTML(c,e),"afterend"===c?t.children[t.children.length-1]:t.children[o]}return a?t.appendChild(e):t.insertAdjacentHTML("beforeend",e),t.children[t.children.length-1]}},{key:"defaultConfig",get:function(){return{}}},{key:"delegate",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=[];if(e instanceof window.Node&&"function"==typeof r)if(Array.isArray(n))n.forEach((function(n){var o=b()(e,t,n,r,i);o.key="".concat(t,"_").concat(n),a.push(o)}));else{var o=b()(e,t,n,r,i);o.key="".concat(t,"_").concat(n),a.push(o)}return a}},{key:"ROOT_TYPES",get:function(){return E}},{key:"POSITIONS",get:function(){return T}}]),n}(y.a)},"4e19e12862d114f09ad6":function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));n("7cb145ff51d539d4bd6d");var r=n("f8c988483231af8381d2"),i=n.n(r),a=n("cc3ba8f20ced7ad84834"),o=n.n(a),s=n("4b84106568f6cb3ecbe0"),c=n.n(s),u=n("f07456edab2c7b12cc0c"),l=n.n(u),d=n("f28ded8c7364f6de9abc"),f=n.n(d),h=n("e93695117ac1f764190a"),p=n.n(h),v=(n("fce1e10c0a59a8bd89e4"),n("34c0f6a91c0bdd59090c")),g=n("1dbcb949bab5b5ef954b"),y=n("3b76dd97653dea47ddc2"),m=n("57bbfaace4b62097c464");function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var _=function(e){l()(n,e);var t=b(n);function n(e){var r;return i()(this,n),(r=t.call(this,e)).isActiving=!1,r}return o()(n,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"currentTime",get:function(){return this.player.currentTime||0}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"afterCreate",value:function(){var e=this,t=this.player.controls.config.mode;this.mode="flex"===t?"flex":"normal",this.config.disable||("flex"===this.mode&&(this.createCenterTime(),this.hide()),this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.on(g.DURATION_CHANGE,(function(){e.onTimeUpdate()})),this.on(g.TIME_UPDATE,(function(){e.onTimeUpdate()})),this.on(g.EMPTIED,(function(){e.onReset()})))}},{key:"show",value:function(){"flex"!==this.mode&&c()(p()(n.prototype),"show",this).call(this)}},{key:"onTimeUpdate",value:function(){var e=this.player;if(!(this.config.disable||this.isActiving||e.state<m.a.RUNNING&&e.state!==m.a.ATTACHED)){var t=this.currentTime+this.timeOffset;"flex"===this.mode?(this.centerCurDom.innerHTML=v.a.format(t),this.duration!==1/0&&this.duration>0&&(this.centerDurDom.innerHTML=v.a.format(this.duration))):(this.timeDom.innerHTML=v.a.format(t),this.duration!==1/0&&this.duration>0&&(this.durationDom.innerHTML=v.a.format(this.duration)))}}},{key:"onReset",value:function(){"flex"===this.mode?(this.centerCurDom.innerHTML=v.a.format(0),this.centerDurDom.innerHTML=v.a.format(0)):(this.timeDom.innerHTML=v.a.format(0),this.durationDom.innerHTML=v.a.format(0))}},{key:"createCenterTime",value:function(){var e=this.player;if(e.controls&&e.controls.center){var t=e.controls.center;this.centerCurDom=v.a.createDom("xg-icon","00:00",{},"xgplayer-time left"),this.centerDurDom=v.a.createDom("xg-icon","00:00",{},"xgplayer-time right"),t.children.length>0?t.insertBefore(this.centerCurDom,t.children[0]):t.appendChild(this.centerCurDom),t.appendChild(this.centerDurDom)}}},{key:"afterPlayerInit",value:function(){var e=this.config;this.duration===1/0||this.playerConfig.isLive?(v.a.hide(this.durationDom),v.a.hide(this.timeDom),v.a.hide(this.find(".time-separator")),v.a.show(this.find(".time-live-tag"))):v.a.hide(this.find(".time-live-tag")),e.hide?this.hide():this.show()}},{key:"changeLiveState",value:function(e){e?(v.a.hide(this.durationDom),v.a.hide(this.timeDom),v.a.hide(this.find(".time-separator")),v.a.show(this.find(".time-live-tag"))):(v.a.hide(this.find(".time-live-tag")),v.a.show(this.find(".time-separator")),v.a.show(this.durationDom),v.a.show(this.timeDom))}},{key:"updateTime",value:function(e){this.isActiving=!0,!e&&0!==e||e>this.duration||("flex"!==this.mode?this.timeDom.innerHTML=v.a.format(e):this.centerCurDom.innerHTML=v.a.format(e))}},{key:"resetActive",value:function(){var e=this,t=this.player,n=function(){e.isActiving=!1};this.off(g.SEEKED,n),t.isSeeking?this.once(g.SEEKED,n):this.isActiving=!1}},{key:"destroy",value:function(){var e=this.player.controls.center;this.centerCurDom&&e.removeChild(this.centerCurDom),this.centerCurDom=null,this.centerDurDom&&e.removeChild(this.centerDurDom),this.centerDurDom=null}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-time">\n    <span class="time-current">00:00</span>\n    <span class="time-separator">/</span>\n    <span class="time-duration">00:00</span>\n    <span class="time-live-tag">'.concat(this.i18n.LIVE_TIP,"</span>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"time"}},{key:"defaultConfig",get:function(){return{position:y.a.CONTROLS_LEFT,index:2,disable:!1}}}]),n}(y.b)},"561d05ff0d1178722f25":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));n("281981c6b99b2a82c28b"),n("7c7754eaac87446b00ec"),n("4fe1cfddaf90ec59b1fe"),n("9d0ca8b6b4ed29afaea1"),n("e3e20c2233a726c5030d"),n("0d50ea7bf61f95bd27a3"),n("40593390d2a56c9000c3"),n("a9a0574c493a10fa7b56"),n("e8d406fbf48a3be73a29"),n("35cb213607f0dbaa33a3"),n("5993954772ba78564ad4"),n("9719731fbecce0b796a9"),n("9e3c44d76479bd9cad6b"),n("a1c9567e919d8ae0bc47"),n("83eed6c5d236c5189285"),n("4a371b8c0f650059b753"),n("4ea9a2360f1f9dff21ee"),n("e27353d76bdab012b9c1"),n("b19c0be1333636d7eeaf"),n("50956165734b52dfae17"),n("a909ca3296d499985c89"),n("941cf7107cc378a8a916"),n("fc3363cb05869232e380"),n("979d76ef8895af5eee38"),n("714667d626fd04a26548"),n("c93a3409710bc0c7e7f7"),n("96e657875a3e8636f3a2"),n("562804f2026cdb551686"),n("d8cf9a74ccea045dcbf3"),n("c24204dd29ff77475878"),n("1c4b8d4085d28a8b83d7"),n("4ae9548107096fa68936"),n("2424222fdd55b7282442"),n("abe57333ca79dc15d3f8"),n("587ee3767cae257489e4"),n("eef23a05705d8b46f87b"),n("e934f008ce014eda6535"),n("3001a3934397946b1a1f"),n("17d091243b0d38080c9b"),n("4d29b26999e97f1d28ec"),n("644ee2c2adee959c985f"),n("173ed76c91c0d96934ab"),n("84e0a0c8a6be71b33470");var r=n("8ad17b2edf3b3b7b5dc8");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=Object(r.a)((function(){!function(){function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},a=function(e){return e&&e.Math==Math&&e},o=a("object"==("undefined"==typeof globalThis?"undefined":i(globalThis))&&globalThis)||a("object"==("undefined"==typeof window?"undefined":i(window))&&window)||a("object"==("undefined"==typeof self?"undefined":i(self))&&self)||a("object"==i(r)&&r)||function(){return this}()||Function("return this")(),s={},c=function(e){try{return!!e()}catch(t){return!0}},u=!c((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),l=!c((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),d=l,f=Function.prototype.call,h=d?f.bind(f):function(){return f.apply(f,arguments)},p={},v={}.propertyIsEnumerable,g=Object.getOwnPropertyDescriptor,y=g&&!v.call({1:2},1);p.f=y?function(e){var t=g(this,e);return!!t&&t.enumerable}:v;var m,b,_=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},k=l,w=Function.prototype,E=w.bind,T=w.call,A=k&&E.bind(T,T),S=k?function(e){return e&&A(e)}:function(e){return e&&function(){return T.apply(e,arguments)}},I=S,R=I({}.toString),O=I("".slice),C=function(e){return O(R(e),8,-1)},x=S,P=c,D=C,L=o.Object,M=x("".split),N=P((function(){return!L("z").propertyIsEnumerable(0)}))?function(e){return"String"==D(e)?M(e,""):L(e)}:L,U=o.TypeError,B=function(e){if(null==e)throw U("Can't call method on "+e);return e},F=N,j=B,H=function(e){return F(j(e))},V=function(e){return"function"==typeof e},W=V,G=function(e){return"object"==i(e)?null!==e:W(e)},z=o,X=V,Y=function(e){return X(e)?e:void 0},K=function(e,t){return arguments.length<2?Y(z[e]):z[e]&&z[e][t]},Z=S({}.isPrototypeOf),Q=K("navigator","userAgent")||"",q=o,J=Q,$=q.process,ee=q.Deno,te=$&&$.versions||ee&&ee.version,ne=te&&te.v8;ne&&(b=(m=ne.split("."))[0]>0&&m[0]<4?1:+(m[0]+m[1])),!b&&J&&(!(m=J.match(/Edge\/(\d+)/))||m[1]>=74)&&(m=J.match(/Chrome\/(\d+)/))&&(b=+m[1]);var re=b,ie=re,ae=c,oe=!!Object.getOwnPropertySymbols&&!ae((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&ie&&ie<41})),se=oe&&!Symbol.sham&&"symbol"==i(Symbol.iterator),ce=K,ue=V,le=Z,de=se,fe=o.Object,he=de?function(e){return"symbol"==i(e)}:function(e){var t=ce("Symbol");return ue(t)&&le(t.prototype,fe(e))},pe=o.String,ve=function(e){try{return pe(e)}catch(t){return"Object"}},ge=V,ye=ve,me=o.TypeError,be=function(e){if(ge(e))return e;throw me(ye(e)+" is not a function")},_e=be,ke=function(e,t){var n=e[t];return null==n?void 0:_e(n)},we=h,Ee=V,Te=G,Ae=o.TypeError,Se={exports:{}},Ie=o,Re=Object.defineProperty,Oe=function(e,t){try{Re(Ie,e,{value:t,configurable:!0,writable:!0})}catch(n){Ie[e]=t}return t},Ce=Oe,xe=o["__core-js_shared__"]||Ce("__core-js_shared__",{}),Pe=xe;(Se.exports=function(e,t){return Pe[e]||(Pe[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.22.7",mode:"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.22.7/LICENSE",source:"https://github.com/zloirock/core-js"});var De=B,Le=o.Object,Me=function(e){return Le(De(e))},Ne=Me,Ue=S({}.hasOwnProperty),Be=Object.hasOwn||function(e,t){return Ue(Ne(e),t)},Fe=S,je=0,He=Math.random(),Ve=Fe(1..toString),We=function(e){return"Symbol("+(void 0===e?"":e)+")_"+Ve(++je+He,36)},Ge=o,ze=Se.exports,Xe=Be,Ye=We,Ke=oe,Ze=se,Qe=ze("wks"),qe=Ge.Symbol,Je=qe&&qe.for,$e=Ze?qe:qe&&qe.withoutSetter||Ye,et=function(e){if(!Xe(Qe,e)||!Ke&&"string"!=typeof Qe[e]){var t="Symbol."+e;Ke&&Xe(qe,e)?Qe[e]=qe[e]:Qe[e]=Ze&&Je?Je(t):$e(t)}return Qe[e]},tt=h,nt=G,rt=he,it=ke,at=function(e,t){var n,r;if("string"===t&&Ee(n=e.toString)&&!Te(r=we(n,e)))return r;if(Ee(n=e.valueOf)&&!Te(r=we(n,e)))return r;if("string"!==t&&Ee(n=e.toString)&&!Te(r=we(n,e)))return r;throw Ae("Can't convert object to primitive value")},ot=et,st=o.TypeError,ct=ot("toPrimitive"),ut=function(e,t){if(!nt(e)||rt(e))return e;var n,r=it(e,ct);if(r){if(void 0===t&&(t="default"),n=tt(r,e,t),!nt(n)||rt(n))return n;throw st("Can't convert object to primitive value")}return void 0===t&&(t="number"),at(e,t)},lt=ut,dt=he,ft=function(e){var t=lt(e,"string");return dt(t)?t:t+""},ht=G,pt=o.document,vt=ht(pt)&&ht(pt.createElement),gt=function(e){return vt?pt.createElement(e):{}},yt=gt,mt=!u&&!c((function(){return 7!=Object.defineProperty(yt("div"),"a",{get:function(){return 7}}).a})),bt=u,_t=h,kt=p,wt=_,Et=H,Tt=ft,At=Be,St=mt,It=Object.getOwnPropertyDescriptor;s.f=bt?It:function(e,t){if(e=Et(e),t=Tt(t),St)try{return It(e,t)}catch(n){}if(At(e,t))return wt(!_t(kt.f,e,t),e[t])};var Rt={},Ot=u&&c((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Ct=o,xt=G,Pt=Ct.String,Dt=Ct.TypeError,Lt=function(e){if(xt(e))return e;throw Dt(Pt(e)+" is not an object")},Mt=u,Nt=mt,Ut=Ot,Bt=Lt,Ft=ft,jt=o.TypeError,Ht=Object.defineProperty,Vt=Object.getOwnPropertyDescriptor;Rt.f=Mt?Ut?function(e,t,n){if(Bt(e),t=Ft(t),Bt(n),"function"==typeof e&&"prototype"===t&&"value"in n&&"writable"in n&&!n.writable){var r=Vt(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:"configurable"in n?n.configurable:r.configurable,enumerable:"enumerable"in n?n.enumerable:r.enumerable,writable:!1})}return Ht(e,t,n)}:Ht:function(e,t,n){if(Bt(e),t=Ft(t),Bt(n),Nt)try{return Ht(e,t,n)}catch(r){}if("get"in n||"set"in n)throw jt("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var Wt=Rt,Gt=_,zt=u?function(e,t,n){return Wt.f(e,t,Gt(1,n))}:function(e,t,n){return e[t]=n,e},Xt={exports:{}},Yt=u,Kt=Be,Zt=Function.prototype,Qt=Yt&&Object.getOwnPropertyDescriptor,qt=Kt(Zt,"name"),Jt={EXISTS:qt,PROPER:qt&&"something"===function(){}.name,CONFIGURABLE:qt&&(!Yt||Yt&&Qt(Zt,"name").configurable)},$t=V,en=xe,tn=S(Function.toString);$t(en.inspectSource)||(en.inspectSource=function(e){return tn(e)});var nn,rn,an,on=en.inspectSource,sn=V,cn=on,un=o.WeakMap,ln=sn(un)&&/native code/.test(cn(un)),dn=Se.exports,fn=We,hn=dn("keys"),pn=function(e){return hn[e]||(hn[e]=fn(e))},vn={},gn=ln,yn=o,mn=S,bn=G,_n=zt,kn=Be,wn=xe,En=pn,Tn=vn,An=yn.TypeError,Sn=yn.WeakMap;if(gn||wn.state){var In=wn.state||(wn.state=new Sn),Rn=mn(In.get),On=mn(In.has),Cn=mn(In.set);nn=function(e,t){if(On(In,e))throw new An("Object already initialized");return t.facade=e,Cn(In,e,t),t},rn=function(e){return Rn(In,e)||{}},an=function(e){return On(In,e)}}else{var xn=En("state");Tn[xn]=!0,nn=function(e,t){if(kn(e,xn))throw new An("Object already initialized");return t.facade=e,_n(e,xn,t),t},rn=function(e){return kn(e,xn)?e[xn]:{}},an=function(e){return kn(e,xn)}}var Pn={set:nn,get:rn,has:an,enforce:function(e){return an(e)?rn(e):nn(e,{})},getterFor:function(e){return function(t){var n;if(!bn(t)||(n=rn(t)).type!==e)throw An("Incompatible receiver, "+e+" required");return n}}},Dn=c,Ln=V,Mn=Be,Nn=u,Un=Jt.CONFIGURABLE,Bn=on,Fn=Pn.enforce,jn=Pn.get,Hn=Object.defineProperty,Vn=Nn&&!Dn((function(){return 8!==Hn((function(){}),"length",{value:8}).length})),Wn=String(String).split("String"),Gn=Xt.exports=function(e,t,n){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!Mn(e,"name")||Un&&e.name!==t)&&Hn(e,"name",{value:t,configurable:!0}),Vn&&n&&Mn(n,"arity")&&e.length!==n.arity&&Hn(e,"length",{value:n.arity});try{n&&Mn(n,"constructor")&&n.constructor?Nn&&Hn(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(i){}var r=Fn(e);return Mn(r,"source")||(r.source=Wn.join("string"==typeof t?t:"")),e};Function.prototype.toString=Gn((function(){return Ln(this)&&jn(this).source||Bn(this)}),"toString");var zn=V,Xn=zt,Yn=Xt.exports,Kn=Oe,Zn=function(e,t,n,r){r||(r={});var i=r.enumerable,a=void 0!==r.name?r.name:t;return zn(n)&&Yn(n,a,r),r.global?i?e[t]=n:Kn(t,n):(r.unsafe?e[t]&&(i=!0):delete e[t],i?e[t]=n:Xn(e,t,n)),e},Qn={},qn=Math.ceil,Jn=Math.floor,$n=Math.trunc||function(e){var t=+e;return(t>0?Jn:qn)(t)},er=function(e){var t=+e;return t!=t||0===t?0:$n(t)},tr=er,nr=Math.max,rr=Math.min,ir=function(e,t){var n=tr(e);return n<0?nr(n+t,0):rr(n,t)},ar=er,or=Math.min,sr=function(e){return e>0?or(ar(e),9007199254740991):0},cr=sr,ur=function(e){return cr(e.length)},lr=H,dr=ir,fr=ur,hr=function(e){return function(t,n,r){var i,a=lr(t),o=fr(a),s=dr(r,o);if(e&&n!=n){for(;o>s;)if((i=a[s++])!=i)return!0}else for(;o>s;s++)if((e||s in a)&&a[s]===n)return e||s||0;return!e&&-1}},pr={includes:hr(!0),indexOf:hr(!1)},vr=Be,gr=H,yr=pr.indexOf,mr=vn,br=S([].push),_r=function(e,t){var n,r=gr(e),i=0,a=[];for(n in r)!vr(mr,n)&&vr(r,n)&&br(a,n);for(;t.length>i;)vr(r,n=t[i++])&&(~yr(a,n)||br(a,n));return a},kr=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],wr=_r,Er=kr.concat("length","prototype");Qn.f=Object.getOwnPropertyNames||function(e){return wr(e,Er)};var Tr={};Tr.f=Object.getOwnPropertySymbols;var Ar=K,Sr=Qn,Ir=Tr,Rr=Lt,Or=S([].concat),Cr=Ar("Reflect","ownKeys")||function(e){var t=Sr.f(Rr(e)),n=Ir.f;return n?Or(t,n(e)):t},xr=Be,Pr=Cr,Dr=s,Lr=Rt,Mr=function(e,t,n){for(var r=Pr(t),i=Lr.f,a=Dr.f,o=0;o<r.length;o++){var s=r[o];xr(e,s)||n&&xr(n,s)||i(e,s,a(t,s))}},Nr=c,Ur=V,Br=/#|\.prototype\./,Fr=function(e,t){var n=Hr[jr(e)];return n==Wr||n!=Vr&&(Ur(t)?Nr(t):!!t)},jr=Fr.normalize=function(e){return String(e).replace(Br,".").toLowerCase()},Hr=Fr.data={},Vr=Fr.NATIVE="N",Wr=Fr.POLYFILL="P",Gr=Fr,zr=o,Xr=s.f,Yr=zt,Kr=Zn,Zr=Oe,Qr=Mr,qr=Gr,Jr=function(e,t){var n,r,a,o,s,c=e.target,u=e.global,l=e.stat;if(n=u?zr:l?zr[c]||Zr(c,{}):(zr[c]||{}).prototype)for(r in t){if(o=t[r],a=e.dontCallGetSet?(s=Xr(n,r))&&s.value:n[r],!qr(u?r:c+(l?".":"#")+r,e.forced)&&void 0!==a){if(i(o)==i(a))continue;Qr(o,a)}(e.sham||a&&a.sham)&&Yr(o,"sham",!0),Kr(n,r,o,e)}},$r=be,ei=l,ti=S(S.bind),ni=function(e,t){return $r(e),void 0===t?e:ei?ti(e,t):function(){return e.apply(t,arguments)}},ri=C,ii=Array.isArray||function(e){return"Array"==ri(e)},ai={};ai[et("toStringTag")]="z";var oi="[object z]"===String(ai),si=o,ci=oi,ui=V,li=C,di=et("toStringTag"),fi=si.Object,hi="Arguments"==li(function(){return arguments}()),pi=ci?li:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=fi(e),di))?n:hi?li(t):"Object"==(r=li(t))&&ui(t.callee)?"Arguments":r},vi=S,gi=c,yi=V,mi=pi,bi=on,_i=function(){},ki=[],wi=K("Reflect","construct"),Ei=/^\s*(?:class|function)\b/,Ti=vi(Ei.exec),Ai=!Ei.exec(_i),Si=function(e){if(!yi(e))return!1;try{return wi(_i,ki,e),!0}catch(t){return!1}},Ii=function(e){if(!yi(e))return!1;switch(mi(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Ai||!!Ti(Ei,bi(e))}catch(t){return!0}};Ii.sham=!0;var Ri=!wi||gi((function(){var e;return Si(Si.call)||!Si(Object)||!Si((function(){e=!0}))||e}))?Ii:Si,Oi=o,Ci=ii,xi=Ri,Pi=G,Di=et("species"),Li=Oi.Array,Mi=function(e){var t;return Ci(e)&&(t=e.constructor,(xi(t)&&(t===Li||Ci(t.prototype))||Pi(t)&&null===(t=t[Di]))&&(t=void 0)),void 0===t?Li:t},Ni=function(e,t){return new(Mi(e))(0===t?0:t)},Ui=ni,Bi=N,Fi=Me,ji=ur,Hi=Ni,Vi=S([].push),Wi=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,a=6==e,o=7==e,s=5==e||a;return function(c,u,l,d){for(var f,h,p=Fi(c),v=Bi(p),g=Ui(u,l),y=ji(v),m=0,b=d||Hi,_=t?b(c,y):n||o?b(c,0):void 0;y>m;m++)if((s||m in v)&&(h=g(f=v[m],m,p),e))if(t)_[m]=h;else if(h)switch(e){case 3:return!0;case 5:return f;case 6:return m;case 2:Vi(_,f)}else switch(e){case 4:return!1;case 7:Vi(_,f)}return a?-1:r||i?i:_}},Gi={forEach:Wi(0),map:Wi(1),filter:Wi(2),some:Wi(3),every:Wi(4),find:Wi(5),findIndex:Wi(6),filterReject:Wi(7)},zi=c,Xi=re,Yi=et("species"),Ki=function(e){return Xi>=51||!zi((function(){var t=[];return(t.constructor={})[Yi]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Zi=Gi.map;Jr({target:"Array",proto:!0,forced:!Ki("map")},{map:function(e){return Zi(this,e,arguments.length>1?arguments[1]:void 0)}});var Qi=o,qi=V,Ji=Qi.String,$i=Qi.TypeError,ea=S,ta=Lt,na=function(e){if("object"==i(e)||qi(e))return e;throw $i("Can't set "+Ji(e)+" as a prototype")},ra=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=ea(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(r){}return function(n,r){return ta(n),na(r),t?e(n,r):n.__proto__=r,n}}():void 0),ia=V,aa=G,oa=ra,sa=function(e,t,n){var r,i;return oa&&ia(r=t.constructor)&&r!==n&&aa(i=r.prototype)&&i!==n.prototype&&oa(e,i),e},ca=S(1..valueOf),ua=pi,la=o.String,da=function(e){if("Symbol"===ua(e))throw TypeError("Cannot convert a Symbol value to a string");return la(e)},fa="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",ha=B,pa=da,va=S("".replace),ga="[\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]",ya=RegExp("^"+ga+ga+"*"),ma=RegExp(ga+ga+"*$"),ba=function(e){return function(t){var n=pa(ha(t));return 1&e&&(n=va(n,ya,"")),2&e&&(n=va(n,ma,"")),n}},_a={start:ba(1),end:ba(2),trim:ba(3)},ka=u,wa=o,Ea=S,Ta=Gr,Aa=Zn,Sa=Be,Ia=sa,Ra=Z,Oa=he,Ca=ut,xa=c,Pa=Qn.f,Da=s.f,La=Rt.f,Ma=ca,Na=_a.trim,Ua=wa.Number,Ba=Ua.prototype,Fa=wa.TypeError,ja=Ea("".slice),Ha=Ea("".charCodeAt),Va=function(e){var t=Ca(e,"number");return"bigint"==typeof t?t:Wa(t)},Wa=function(e){var t,n,r,i,a,o,s,c,u=Ca(e,"number");if(Oa(u))throw Fa("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=Na(u),43===(t=Ha(u,0))||45===t){if(88===(n=Ha(u,2))||120===n)return NaN}else if(48===t){switch(Ha(u,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(o=(a=ja(u,2)).length,s=0;s<o;s++)if((c=Ha(a,s))<48||c>i)return NaN;return parseInt(a,r)}return+u};if(Ta("Number",!Ua(" 0o1")||!Ua("0b1")||Ua("+0x1"))){for(var Ga,za=function(e){var t=arguments.length<1?0:Ua(Va(e)),n=this;return Ra(Ba,n)&&xa((function(){Ma(n)}))?Ia(Object(t),n,za):t},Xa=ka?Pa(Ua):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),Ya=0;Xa.length>Ya;Ya++)Sa(Ua,Ga=Xa[Ya])&&!Sa(za,Ga)&&La(za,Ga,Da(Ua,Ga));za.prototype=Ba,Ba.constructor=za,Aa(wa,"Number",za,{constructor:!0})}var Ka=_r,Za=kr,Qa=Object.keys||function(e){return Ka(e,Za)},qa=u,Ja=S,$a=h,eo=c,to=Qa,no=Tr,ro=p,io=Me,ao=N,oo=Object.assign,so=Object.defineProperty,co=Ja([].concat),uo=!oo||eo((function(){if(qa&&1!==oo({b:1},oo(so({},"a",{enumerable:!0,get:function(){so(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=oo({},e)[n]||"abcdefghijklmnopqrst"!=to(oo({},t)).join("")}))?function(e,t){for(var n=io(e),r=arguments.length,i=1,a=no.f,o=ro.f;r>i;)for(var s,c=ao(arguments[i++]),u=a?co(to(c),a(c)):to(c),l=u.length,d=0;l>d;)s=u[d++],qa&&!$a(o,c,s)||(n[s]=c[s]);return n}:oo;Jr({target:"Object",stat:!0,arity:2,forced:Object.assign!==uo},{assign:uo});var lo=c,fo=function(e,t){var n=[][e];return!!n&&lo((function(){n.call(null,t||function(){return 1},1)}))},ho=Jr,po=N,vo=H,go=fo,yo=S([].join),mo=po!=Object,bo=go("join",",");ho({target:"Array",proto:!0,forced:mo||!bo},{join:function(e){return yo(vo(this),void 0===e?",":e)}});var _o=Gi.forEach,ko=fo("forEach")?[].forEach:function(e){return _o(this,e,arguments.length>1?arguments[1]:void 0)};Jr({target:"Array",proto:!0,forced:[].forEach!=ko},{forEach:ko});var wo=pi,Eo=oi?{}.toString:function(){return"[object "+wo(this)+"]"};oi||Zn(Object.prototype,"toString",Eo,{unsafe:!0});var To={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Ao=gt("span").classList,So=Ao&&Ao.constructor&&Ao.constructor.prototype,Io=So===Object.prototype?void 0:So,Ro=o,Oo=To,Co=Io,xo=ko,Po=zt,Do=function(e){if(e&&e.forEach!==xo)try{Po(e,"forEach",xo)}catch(t){e.forEach=xo}};for(var Lo in Oo)Oo[Lo]&&Do(Ro[Lo]&&Ro[Lo].prototype);Do(Co);var Mo={},No=u,Uo=Ot,Bo=Rt,Fo=Lt,jo=H,Ho=Qa;Mo.f=No&&!Uo?Object.defineProperties:function(e,t){Fo(e);for(var n,r=jo(t),i=Ho(t),a=i.length,o=0;a>o;)Bo.f(e,n=i[o++],r[n]);return e};var Vo,Wo=K("document","documentElement"),Go=Lt,zo=Mo,Xo=kr,Yo=vn,Ko=Wo,Zo=gt,Qo=pn("IE_PROTO"),qo=function(){},Jo=function(e){return"<script>"+e+"<\/script>"},$o=function(e){e.write(Jo("")),e.close();var t=e.parentWindow.Object;return e=null,t},es=function(){try{Vo=new ActiveXObject("htmlfile")}catch(r){}var e,t;es="undefined"!=typeof document?document.domain&&Vo?$o(Vo):((t=Zo("iframe")).style.display="none",Ko.appendChild(t),t.src=globalThis.getFilterXss().filterUrl(String("javascript:"),null,{logType:"js.href/src",reportOnly:"all"}),(e=t.contentWindow.document).open(),e.write(Jo("document.F=Object")),e.close(),e.F):$o(Vo);for(var n=Xo.length;n--;)delete es.prototype[Xo[n]];return es()};Yo[Qo]=!0;var ts=Object.create||function(e,t){var n;return null!==e?(qo.prototype=Go(e),n=new qo,qo.prototype=null,n[Qo]=e):n=es(),void 0===t?n:zo.f(n,t)},ns=et,rs=ts,is=Rt.f,as=ns("unscopables"),os=Array.prototype;null==os[as]&&is(os,as,{configurable:!0,value:rs(null)});var ss,cs,us,ls={},ds=!c((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),fs=o,hs=Be,ps=V,vs=Me,gs=ds,ys=pn("IE_PROTO"),ms=fs.Object,bs=ms.prototype,_s=gs?ms.getPrototypeOf:function(e){var t=vs(e);if(hs(t,ys))return t[ys];var n=t.constructor;return ps(n)&&t instanceof n?n.prototype:t instanceof ms?bs:null},ks=c,ws=V,Es=_s,Ts=Zn,As=et("iterator"),Ss=!1;[].keys&&("next"in(us=[].keys())?(cs=Es(Es(us)))!==Object.prototype&&(ss=cs):Ss=!0),(null==ss||ks((function(){var e={};return ss[As].call(e)!==e})))&&(ss={}),ws(ss[As])||Ts(ss,As,(function(){return this}));var Is={IteratorPrototype:ss,BUGGY_SAFARI_ITERATORS:Ss},Rs=Rt.f,Os=Be,Cs=et("toStringTag"),xs=function(e,t,n){e&&!n&&(e=e.prototype),e&&!Os(e,Cs)&&Rs(e,Cs,{configurable:!0,value:t})},Ps=Is.IteratorPrototype,Ds=ts,Ls=_,Ms=xs,Ns=ls,Us=function(){return this},Bs=Jr,Fs=h,js=V,Hs=function(e,t,n,r){var i=t+" Iterator";return e.prototype=Ds(Ps,{next:Ls(+!r,n)}),Ms(e,i,!1),Ns[i]=Us,e},Vs=_s,Ws=ra,Gs=xs,zs=zt,Xs=Zn,Ys=ls,Ks=Jt.PROPER,Zs=Jt.CONFIGURABLE,Qs=Is.IteratorPrototype,qs=Is.BUGGY_SAFARI_ITERATORS,Js=et("iterator"),$s=function(){return this},ec=function(e,t,n,r,i,a,o){Hs(n,t,r);var s,c,u,l=function(e){if(e===i&&v)return v;if(!qs&&e in h)return h[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},d=t+" Iterator",f=!1,h=e.prototype,p=h[Js]||h["@@iterator"]||i&&h[i],v=!qs&&p||l(i),g="Array"==t&&h.entries||p;if(g&&(s=Vs(g.call(new e)))!==Object.prototype&&s.next&&(Vs(s)!==Qs&&(Ws?Ws(s,Qs):js(s[Js])||Xs(s,Js,$s)),Gs(s,d,!0)),Ks&&"values"==i&&p&&"values"!==p.name&&(Zs?zs(h,"name","values"):(f=!0,v=function(){return Fs(p,this)})),i)if(c={values:l("values"),keys:a?v:l("keys"),entries:l("entries")},o)for(u in c)(qs||f||!(u in h))&&Xs(h,u,c[u]);else Bs({target:t,proto:!0,forced:qs||f},c);return h[Js]!==v&&Xs(h,Js,v,{name:i}),Ys[t]=v,c},tc=H,nc=function(e){os[as][e]=!0},rc=ls,ic=Pn,ac=Rt.f,oc=ec,sc=u,cc=ic.set,uc=ic.getterFor("Array Iterator"),lc=oc(Array,"Array",(function(e,t){cc(this,{type:"Array Iterator",target:tc(e),index:0,kind:t})}),(function(){var e=uc(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),dc=rc.Arguments=rc.Array;if(nc("keys"),nc("values"),nc("entries"),sc&&"values"!==dc.name)try{ac(dc,"name",{value:"values"})}catch(JR){}var fc="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,hc=Zn,pc=Z,vc=o.TypeError,gc=function(e,t){if(pc(t,e))return e;throw vc("Incorrect invocation")},yc=er,mc=sr,bc=o.RangeError,_c=function(e){if(void 0===e)return 0;var t=yc(e),n=mc(t);if(t!==n)throw bc("Wrong length or index");return n},kc=o.Array,wc=Math.abs,Ec=Math.pow,Tc=Math.floor,Ac=Math.log,Sc=Math.LN2,Ic={pack:function(e,t,n){var r,i,a,o=kc(n),s=8*n-t-1,c=(1<<s)-1,u=c>>1,l=23===t?Ec(2,-24)-Ec(2,-77):0,d=e<0||0===e&&1/e<0?1:0,f=0;for((e=wc(e))!=e||e===1/0?(i=e!=e?1:0,r=c):(r=Tc(Ac(e)/Sc),e*(a=Ec(2,-r))<1&&(r--,a*=2),(e+=r+u>=1?l/a:l*Ec(2,1-u))*a>=2&&(r++,a/=2),r+u>=c?(i=0,r=c):r+u>=1?(i=(e*a-1)*Ec(2,t),r+=u):(i=e*Ec(2,u-1)*Ec(2,t),r=0));t>=8;)o[f++]=255&i,i/=256,t-=8;for(r=r<<t|i,s+=t;s>0;)o[f++]=255&r,r/=256,s-=8;return o[--f]|=128*d,o},unpack:function(e,t){var n,r=e.length,i=8*r-t-1,a=(1<<i)-1,o=a>>1,s=i-7,c=r-1,u=e[c--],l=127&u;for(u>>=7;s>0;)l=256*l+e[c--],s-=8;for(n=l&(1<<-s)-1,l>>=-s,s+=t;s>0;)n=256*n+e[c--],s-=8;if(0===l)l=1-o;else{if(l===a)return n?NaN:u?-1/0:1/0;n+=Ec(2,t),l-=o}return(u?-1:1)*n*Ec(2,l-t)}},Rc=Me,Oc=ir,Cc=ur,xc=function(e){for(var t=Rc(this),n=Cc(t),r=arguments.length,i=Oc(r>1?arguments[1]:void 0,n),a=r>2?arguments[2]:void 0,o=void 0===a?n:Oc(a,n);o>i;)t[i++]=e;return t},Pc=ft,Dc=Rt,Lc=_,Mc=function(e,t,n){var r=Pc(t);r in e?Dc.f(e,r,Lc(0,n)):e[r]=n},Nc=ir,Uc=ur,Bc=Mc,Fc=o.Array,jc=Math.max,Hc=function(e,t,n){for(var r=Uc(e),i=Nc(t,r),a=Nc(void 0===n?r:n,r),o=Fc(jc(a-i,0)),s=0;i<a;i++,s++)Bc(o,s,e[i]);return o.length=s,o},Vc=o,Wc=S,Gc=u,zc=fc,Xc=Jt,Yc=zt,Kc=function(e,t,n){for(var r in t)hc(e,r,t[r],n);return e},Zc=c,Qc=gc,qc=er,Jc=sr,$c=_c,eu=Ic,tu=_s,nu=ra,ru=Qn.f,iu=Rt.f,au=xc,ou=Hc,su=xs,cu=Xc.PROPER,uu=Xc.CONFIGURABLE,lu=Pn.get,du=Pn.set,fu=Vc.ArrayBuffer,hu=fu,pu=hu&&hu.prototype,vu=Vc.DataView,gu=vu&&vu.prototype,yu=Object.prototype,mu=Vc.Array,bu=Vc.RangeError,_u=Wc(au),ku=Wc([].reverse),wu=eu.pack,Eu=eu.unpack,Tu=function(e){return[255&e]},Au=function(e){return[255&e,e>>8&255]},Su=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},Iu=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},Ru=function(e){return wu(e,23,4)},Ou=function(e){return wu(e,52,8)},Cu=function(e,t){iu(e.prototype,t,{get:function(){return lu(this)[t]}})},xu=function(e,t,n,r){var i=$c(n),a=lu(e);if(i+t>a.byteLength)throw bu("Wrong index");var o=lu(a.buffer).bytes,s=i+a.byteOffset,c=ou(o,s,s+t);return r?c:ku(c)},Pu=function(e,t,n,r,i,a){var o=$c(n),s=lu(e);if(o+t>s.byteLength)throw bu("Wrong index");for(var c=lu(s.buffer).bytes,u=o+s.byteOffset,l=r(+i),d=0;d<t;d++)c[u+d]=l[a?d:t-d-1]};if(zc){var Du=cu&&"ArrayBuffer"!==fu.name;if(Zc((function(){fu(1)}))&&Zc((function(){new fu(-1)}))&&!Zc((function(){return new fu,new fu(1.5),new fu(NaN),Du&&!uu})))Du&&uu&&Yc(fu,"name","ArrayBuffer");else{(hu=function(e){return Qc(this,pu),new fu($c(e))}).prototype=pu;for(var Lu,Mu=ru(fu),Nu=0;Mu.length>Nu;)(Lu=Mu[Nu++])in hu||Yc(hu,Lu,fu[Lu]);pu.constructor=hu}nu&&tu(gu)!==yu&&nu(gu,yu);var Uu=new vu(new hu(2)),Bu=Wc(gu.setInt8);Uu.setInt8(0,2147483648),Uu.setInt8(1,2147483649),!Uu.getInt8(0)&&Uu.getInt8(1)||Kc(gu,{setInt8:function(e,t){Bu(this,e,t<<24>>24)},setUint8:function(e,t){Bu(this,e,t<<24>>24)}},{unsafe:!0})}else pu=(hu=function(e){Qc(this,pu);var t=$c(e);du(this,{bytes:_u(mu(t),0),byteLength:t}),Gc||(this.byteLength=t)}).prototype,gu=(vu=function(e,t,n){Qc(this,gu),Qc(e,pu);var r=lu(e).byteLength,i=qc(t);if(i<0||i>r)throw bu("Wrong offset");if(i+(n=void 0===n?r-i:Jc(n))>r)throw bu("Wrong length");du(this,{buffer:e,byteLength:n,byteOffset:i}),Gc||(this.buffer=e,this.byteLength=n,this.byteOffset=i)}).prototype,Gc&&(Cu(hu,"byteLength"),Cu(vu,"buffer"),Cu(vu,"byteLength"),Cu(vu,"byteOffset")),Kc(gu,{getInt8:function(e){return xu(this,1,e)[0]<<24>>24},getUint8:function(e){return xu(this,1,e)[0]},getInt16:function(e){var t=xu(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=xu(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return Iu(xu(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return Iu(xu(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return Eu(xu(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return Eu(xu(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){Pu(this,1,e,Tu,t)},setUint8:function(e,t){Pu(this,1,e,Tu,t)},setInt16:function(e,t){Pu(this,2,e,Au,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){Pu(this,2,e,Au,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){Pu(this,4,e,Su,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){Pu(this,4,e,Su,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){Pu(this,4,e,Ru,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){Pu(this,8,e,Ou,t,arguments.length>2?arguments[2]:void 0)}});su(hu,"ArrayBuffer"),su(vu,"DataView");var Fu={ArrayBuffer:hu,DataView:vu},ju=Ri,Hu=ve,Vu=o.TypeError,Wu=function(e){if(ju(e))return e;throw Vu(Hu(e)+" is not a constructor")},Gu=Lt,zu=Wu,Xu=et("species"),Yu=function(e,t){var n,r=Gu(e).constructor;return void 0===r||null==(n=Gu(r)[Xu])?t:zu(n)},Ku=Jr,Zu=S,Qu=c,qu=Lt,Ju=ir,$u=sr,el=Yu,tl=Fu.ArrayBuffer,nl=Fu.DataView,rl=nl.prototype,il=Zu(tl.prototype.slice),al=Zu(rl.getUint8),ol=Zu(rl.setUint8);Ku({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:Qu((function(){return!new tl(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(il&&void 0===t)return il(qu(this),e);for(var n=qu(this).byteLength,r=Ju(e,n),i=Ju(void 0===t?n:t,n),a=new(el(this,tl))($u(i-r)),o=new nl(this),s=new nl(a),c=0;r<i;)ol(s,c++,al(o,r++));return a}});var sl={exports:{}},cl=et("iterator"),ul=!1;try{var ll=0,dl={next:function(){return{done:!!ll++}},return:function(){ul=!0}};dl[cl]=function(){return this},Array.from(dl,(function(){throw 2}))}catch(JR){}var fl,hl,pl,vl=function(e,t){if(!t&&!ul)return!1;var n=!1;try{var r={};r[cl]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(JR){}return n},gl=fc,yl=u,ml=o,bl=V,_l=G,kl=Be,wl=pi,El=ve,Tl=zt,Al=Zn,Sl=Rt.f,Il=Z,Rl=_s,Ol=ra,Cl=et,xl=We,Pl=ml.Int8Array,Dl=Pl&&Pl.prototype,Ll=ml.Uint8ClampedArray,Ml=Ll&&Ll.prototype,Nl=Pl&&Rl(Pl),Ul=Dl&&Rl(Dl),Bl=Object.prototype,Fl=ml.TypeError,jl=Cl("toStringTag"),Hl=xl("TYPED_ARRAY_TAG"),Vl=xl("TYPED_ARRAY_CONSTRUCTOR"),Wl=gl&&!!Ol&&"Opera"!==wl(ml.opera),Gl=!1,zl={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Xl={BigInt64Array:8,BigUint64Array:8},Yl=function(e){if(!_l(e))return!1;var t=wl(e);return kl(zl,t)||kl(Xl,t)};for(fl in zl)(pl=(hl=ml[fl])&&hl.prototype)?Tl(pl,Vl,hl):Wl=!1;for(fl in Xl)(pl=(hl=ml[fl])&&hl.prototype)&&Tl(pl,Vl,hl);if((!Wl||!bl(Nl)||Nl===Function.prototype)&&(Nl=function(){throw Fl("Incorrect invocation")},Wl))for(fl in zl)ml[fl]&&Ol(ml[fl],Nl);if((!Wl||!Ul||Ul===Bl)&&(Ul=Nl.prototype,Wl))for(fl in zl)ml[fl]&&Ol(ml[fl].prototype,Ul);if(Wl&&Rl(Ml)!==Ul&&Ol(Ml,Ul),yl&&!kl(Ul,jl))for(fl in Gl=!0,Sl(Ul,jl,{get:function(){return _l(this)?this[Hl]:void 0}}),zl)ml[fl]&&Tl(ml[fl],Hl,fl);var Kl={NATIVE_ARRAY_BUFFER_VIEWS:Wl,TYPED_ARRAY_CONSTRUCTOR:Vl,TYPED_ARRAY_TAG:Gl&&Hl,aTypedArray:function(e){if(Yl(e))return e;throw Fl("Target is not a typed array")},aTypedArrayConstructor:function(e){if(bl(e)&&(!Ol||Il(Nl,e)))return e;throw Fl(El(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n,r){if(yl){if(n)for(var i in zl){var a=ml[i];if(a&&kl(a.prototype,e))try{delete a.prototype[e]}catch(JR){try{a.prototype[e]=t}catch(o){}}}Ul[e]&&!n||Al(Ul,e,n?t:Wl&&Dl[e]||t,r)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(yl){if(Ol){if(n)for(r in zl)if((i=ml[r])&&kl(i,e))try{delete i[e]}catch(JR){}if(Nl[e]&&!n)return;try{return Al(Nl,e,n?t:Wl&&Nl[e]||t)}catch(JR){}}for(r in zl)!(i=ml[r])||i[e]&&!n||Al(i,e,t)}},isView:function(e){if(!_l(e))return!1;var t=wl(e);return"DataView"===t||kl(zl,t)||kl(Xl,t)},isTypedArray:Yl,TypedArray:Nl,TypedArrayPrototype:Ul},Zl=o,Ql=c,ql=vl,Jl=Kl.NATIVE_ARRAY_BUFFER_VIEWS,$l=Zl.ArrayBuffer,ed=Zl.Int8Array,td=!Jl||!Ql((function(){ed(1)}))||!Ql((function(){new ed(-1)}))||!ql((function(e){new ed,new ed(null),new ed(1.5),new ed(e)}),!0)||Ql((function(){return 1!==new ed(new $l(2),1,void 0).length})),nd=G,rd=Math.floor,id=Number.isInteger||function(e){return!nd(e)&&isFinite(e)&&rd(e)===e},ad=er,od=o.RangeError,sd=function(e){var t=ad(e);if(t<0)throw od("The argument can't be less than 0");return t},cd=o.RangeError,ud=function(e,t){var n=sd(e);if(n%t)throw cd("Wrong offset");return n},ld=pi,dd=ke,fd=ls,hd=et("iterator"),pd=function(e){if(null!=e)return dd(e,hd)||dd(e,"@@iterator")||fd[ld(e)]},vd=h,gd=be,yd=Lt,md=ve,bd=pd,_d=o.TypeError,kd=function(e,t){var n=arguments.length<2?bd(e):t;if(gd(n))return yd(vd(n,e));throw _d(md(e)+" is not iterable")},wd=ls,Ed=et("iterator"),Td=Array.prototype,Ad=function(e){return void 0!==e&&(wd.Array===e||Td[Ed]===e)},Sd=ni,Id=h,Rd=Wu,Od=Me,Cd=ur,xd=kd,Pd=pd,Dd=Ad,Ld=Kl.aTypedArrayConstructor,Md=K,Nd=Rt,Ud=u,Bd=et("species"),Fd=function(e){var t=Md(e),n=Nd.f;Ud&&t&&!t[Bd]&&n(t,Bd,{configurable:!0,get:function(){return this}})},jd=Jr,Hd=o,Vd=h,Wd=u,Gd=td,zd=Kl,Xd=Fu,Yd=gc,Kd=_,Zd=zt,Qd=id,qd=sr,Jd=_c,$d=ud,ef=ft,tf=Be,nf=pi,rf=G,af=he,of=ts,sf=Z,cf=ra,uf=Qn.f,lf=function(e){var t,n,r,i,a,o,s=Rd(this),c=Od(e),u=arguments.length,l=u>1?arguments[1]:void 0,d=void 0!==l,f=Pd(c);if(f&&!Dd(f))for(o=(a=xd(c,f)).next,c=[];!(i=Id(o,a)).done;)c.push(i.value);for(d&&u>2&&(l=Sd(l,arguments[2])),n=Cd(c),r=new(Ld(s))(n),t=0;n>t;t++)r[t]=d?l(c[t],t):c[t];return r},df=Gi.forEach,ff=Fd,hf=Rt,pf=s,vf=sa,gf=Pn.get,yf=Pn.set,mf=hf.f,bf=pf.f,_f=Math.round,kf=Hd.RangeError,wf=Xd.ArrayBuffer,Ef=wf.prototype,Tf=Xd.DataView,Af=zd.NATIVE_ARRAY_BUFFER_VIEWS,Sf=zd.TYPED_ARRAY_CONSTRUCTOR,If=zd.TYPED_ARRAY_TAG,Rf=zd.TypedArray,Of=zd.TypedArrayPrototype,Cf=zd.aTypedArrayConstructor,xf=zd.isTypedArray,Pf=function(e,t){Cf(e);for(var n=0,r=t.length,i=new e(r);r>n;)i[n]=t[n++];return i},Df=function(e,t){mf(e,t,{get:function(){return gf(this)[t]}})},Lf=function(e){var t;return sf(Ef,e)||"ArrayBuffer"==(t=nf(e))||"SharedArrayBuffer"==t},Mf=function(e,t){return xf(e)&&!af(t)&&t in e&&Qd(+t)&&t>=0},Nf=function(e,t){return t=ef(t),Mf(e,t)?Kd(2,e[t]):bf(e,t)},Uf=function(e,t,n){return t=ef(t),!(Mf(e,t)&&rf(n)&&tf(n,"value"))||tf(n,"get")||tf(n,"set")||n.configurable||tf(n,"writable")&&!n.writable||tf(n,"enumerable")&&!n.enumerable?mf(e,t,n):(e[t]=n.value,e)};Wd?(Af||(pf.f=Nf,hf.f=Uf,Df(Of,"buffer"),Df(Of,"byteOffset"),Df(Of,"byteLength"),Df(Of,"length")),jd({target:"Object",stat:!0,forced:!Af},{getOwnPropertyDescriptor:Nf,defineProperty:Uf}),sl.exports=function(e,t,n){var r=e.match(/\d+$/)[0]/8,i=e+(n?"Clamped":"")+"Array",a="get"+e,o="set"+e,s=Hd[i],c=s,u=c&&c.prototype,l={},d=function(e,t){mf(e,t,{get:function(){return function(e,t){var n=gf(e);return n.view[a](t*r+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,i){var a=gf(e);n&&(i=(i=_f(i))<0?0:i>255?255:255&i),a.view[o](t*r+a.byteOffset,i,!0)}(this,t,e)},enumerable:!0})};Af?Gd&&(c=t((function(e,t,n,i){return Yd(e,u),vf(rf(t)?Lf(t)?void 0!==i?new s(t,$d(n,r),i):void 0!==n?new s(t,$d(n,r)):new s(t):xf(t)?Pf(c,t):Vd(lf,c,t):new s(Jd(t)),e,c)})),cf&&cf(c,Rf),df(uf(s),(function(e){e in c||Zd(c,e,s[e])})),c.prototype=u):(c=t((function(e,t,n,i){Yd(e,u);var a,o,s,l=0,f=0;if(rf(t)){if(!Lf(t))return xf(t)?Pf(c,t):Vd(lf,c,t);a=t,f=$d(n,r);var h=t.byteLength;if(void 0===i){if(h%r)throw kf("Wrong length");if((o=h-f)<0)throw kf("Wrong length")}else if((o=qd(i)*r)+f>h)throw kf("Wrong length");s=o/r}else s=Jd(t),a=new wf(o=s*r);for(yf(e,{buffer:a,byteOffset:f,byteLength:o,length:s,view:new Tf(a)});l<s;)d(e,l++)})),cf&&cf(c,Rf),u=c.prototype=of(Of)),u.constructor!==c&&Zd(u,"constructor",c),Zd(u,Sf,c),If&&Zd(u,If,i);var f=c!=s;l[i]=c,jd({global:!0,constructor:!0,forced:f,sham:!Af},l),"BYTES_PER_ELEMENT"in c||Zd(c,"BYTES_PER_ELEMENT",r),"BYTES_PER_ELEMENT"in u||Zd(u,"BYTES_PER_ELEMENT",r),ff(i)}):sl.exports=function(){},(0,sl.exports)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}));var Bf=Me,Ff=ir,jf=ur,Hf=Math.min,Vf=Kl,Wf=S([].copyWithin||function(e,t){var n=Bf(this),r=jf(n),i=Ff(e,r),a=Ff(t,r),o=arguments.length>2?arguments[2]:void 0,s=Hf((void 0===o?r:Ff(o,r))-a,r-i),c=1;for(a<i&&i<a+s&&(c=-1,a+=s-1,i+=s-1);s-- >0;)a in n?n[i]=n[a]:delete n[i],i+=c,a+=c;return n}),Gf=Vf.aTypedArray;(0,Vf.exportTypedArrayMethod)("copyWithin",(function(e,t){return Wf(Gf(this),e,t,arguments.length>2?arguments[2]:void 0)}));var zf=Gi.every,Xf=Kl.aTypedArray;(0,Kl.exportTypedArrayMethod)("every",(function(e){return zf(Xf(this),e,arguments.length>1?arguments[1]:void 0)}));var Yf=h,Kf=xc,Zf=Kl.aTypedArray;(0,Kl.exportTypedArrayMethod)("fill",(function(e){var t=arguments.length;return Yf(Kf,Zf(this),e,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}));var Qf=ur,qf=Yu,Jf=Kl.TYPED_ARRAY_CONSTRUCTOR,$f=Kl.aTypedArrayConstructor,eh=function(e){return $f(qf(e,e[Jf]))},th=function(e,t){for(var n=0,r=Qf(t),i=new e(r);r>n;)i[n]=t[n++];return i},nh=eh,rh=Gi.filter,ih=function(e,t){return th(nh(e),t)},ah=Kl.aTypedArray;(0,Kl.exportTypedArrayMethod)("filter",(function(e){var t=rh(ah(this),e,arguments.length>1?arguments[1]:void 0);return ih(this,t)}));var oh=Gi.find,sh=Kl.aTypedArray;(0,Kl.exportTypedArrayMethod)("find",(function(e){return oh(sh(this),e,arguments.length>1?arguments[1]:void 0)}));var ch=Gi.findIndex,uh=Kl.aTypedArray;(0,Kl.exportTypedArrayMethod)("findIndex",(function(e){return ch(uh(this),e,arguments.length>1?arguments[1]:void 0)}));var lh=Gi.forEach,dh=Kl.aTypedArray;(0,Kl.exportTypedArrayMethod)("forEach",(function(e){lh(dh(this),e,arguments.length>1?arguments[1]:void 0)}));var fh=pr.includes,hh=Kl.aTypedArray;(0,Kl.exportTypedArrayMethod)("includes",(function(e){return fh(hh(this),e,arguments.length>1?arguments[1]:void 0)}));var ph=pr.indexOf,vh=Kl.aTypedArray;(0,Kl.exportTypedArrayMethod)("indexOf",(function(e){return ph(vh(this),e,arguments.length>1?arguments[1]:void 0)}));var gh=o,yh=c,mh=S,bh=Kl,_h=lc,kh=et("iterator"),wh=gh.Uint8Array,Eh=mh(_h.values),Th=mh(_h.keys),Ah=mh(_h.entries),Sh=bh.aTypedArray,Ih=bh.exportTypedArrayMethod,Rh=wh&&wh.prototype,Oh=!yh((function(){Rh[kh].call([1])})),Ch=!!Rh&&Rh.values&&Rh[kh]===Rh.values&&"values"===Rh.values.name,xh=function(){return Eh(Sh(this))};Ih("entries",(function(){return Ah(Sh(this))}),Oh),Ih("keys",(function(){return Th(Sh(this))}),Oh),Ih("values",xh,Oh||!Ch,{name:"values"}),Ih(kh,xh,Oh||!Ch,{name:"values"});var Ph=Kl.aTypedArray,Dh=Kl.exportTypedArrayMethod,Lh=S([].join);Dh("join",(function(e){return Lh(Ph(this),e)}));var Mh=l,Nh=Function.prototype,Uh=Nh.apply,Bh=Nh.call,Fh="object"==("undefined"==typeof Reflect?"undefined":i(Reflect))&&Reflect.apply||(Mh?Bh.bind(Uh):function(){return Bh.apply(Uh,arguments)}),jh=Fh,Hh=H,Vh=er,Wh=ur,Gh=fo,zh=Math.min,Xh=[].lastIndexOf,Yh=!!Xh&&1/[1].lastIndexOf(1,-0)<0,Kh=Gh("lastIndexOf"),Zh=Fh,Qh=Yh||!Kh?function(e){if(Yh)return jh(Xh,this,arguments)||0;var t=Hh(this),n=Wh(t),r=n-1;for(arguments.length>1&&(r=zh(r,Vh(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}:Xh,qh=Kl.aTypedArray;(0,Kl.exportTypedArrayMethod)("lastIndexOf",(function(e){var t=arguments.length;return Zh(Qh,qh(this),t>1?[e,arguments[1]]:[e])}));var Jh=Gi.map,$h=eh,ep=Kl.aTypedArray;(0,Kl.exportTypedArrayMethod)("map",(function(e){return Jh(ep(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new($h(e))(t)}))}));var tp=be,np=Me,rp=N,ip=ur,ap=o.TypeError,op=function(e){return function(t,n,r,i){tp(n);var a=np(t),o=rp(a),s=ip(a),c=e?s-1:0,u=e?-1:1;if(r<2)for(;;){if(c in o){i=o[c],c+=u;break}if(c+=u,e?c<0:s<=c)throw ap("Reduce of empty array with no initial value")}for(;e?c>=0:s>c;c+=u)c in o&&(i=n(i,o[c],c,a));return i}},sp={left:op(!1),right:op(!0)},cp=sp.left,up=Kl.aTypedArray;(0,Kl.exportTypedArrayMethod)("reduce",(function(e){var t=arguments.length;return cp(up(this),e,t,t>1?arguments[1]:void 0)}));var lp=sp.right,dp=Kl.aTypedArray;(0,Kl.exportTypedArrayMethod)("reduceRight",(function(e){var t=arguments.length;return lp(dp(this),e,t,t>1?arguments[1]:void 0)}));var fp=Kl.aTypedArray,hp=Kl.exportTypedArrayMethod,pp=Math.floor;hp("reverse",(function(){for(var e,t=fp(this).length,n=pp(t/2),r=0;r<n;)e=this[r],this[r++]=this[--t],this[t]=e;return this}));var vp=o,gp=h,yp=Kl,mp=ur,bp=ud,_p=Me,kp=c,wp=vp.RangeError,Ep=vp.Int8Array,Tp=Ep&&Ep.prototype,Ap=Tp&&Tp.set,Sp=yp.aTypedArray,Ip=yp.exportTypedArrayMethod,Rp=!kp((function(){var e=new Uint8ClampedArray(2);return gp(Ap,e,{length:1,0:3},1),3!==e[1]})),Op=Rp&&yp.NATIVE_ARRAY_BUFFER_VIEWS&&kp((function(){var e=new Ep(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));Ip("set",(function(e){Sp(this);var t=bp(arguments.length>1?arguments[1]:void 0,1),n=_p(e);if(Rp)return gp(Ap,this,n,t);var r=this.length,i=mp(n),a=0;if(i+t>r)throw wp("Wrong length");for(;a<i;)this[t+a]=n[a++]}),!Rp||Op);var Cp=S([].slice),xp=eh,Pp=Cp,Dp=Kl.aTypedArray;(0,Kl.exportTypedArrayMethod)("slice",(function(e,t){for(var n=Pp(Dp(this),e,t),r=xp(this),i=0,a=n.length,o=new r(a);a>i;)o[i]=n[i++];return o}),c((function(){new Int8Array(1).slice()})));var Lp=Gi.some,Mp=Kl.aTypedArray;(0,Kl.exportTypedArrayMethod)("some",(function(e){return Lp(Mp(this),e,arguments.length>1?arguments[1]:void 0)}));var Np=Hc,Up=Math.floor,Bp=function(e,t){for(var n,r,i=e.length,a=1;a<i;){for(r=a,n=e[a];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==a++&&(e[r]=n)}return e},Fp=function(e,t,n,r){for(var i=t.length,a=n.length,o=0,s=0;o<i||s<a;)e[o+s]=o<i&&s<a?r(t[o],n[s])<=0?t[o++]:n[s++]:o<i?t[o++]:n[s++];return e},jp=function e(t,n){var r=t.length,i=Up(r/2);return r<8?Bp(t,n):Fp(t,e(Np(t,0,i),n),e(Np(t,i),n),n)},Hp=Q.match(/firefox\/(\d+)/i),Vp=!!Hp&&+Hp[1],Wp=/MSIE|Trident/.test(Q),Gp=Q.match(/AppleWebKit\/(\d+)\./),zp=!!Gp&&+Gp[1],Xp=S,Yp=c,Kp=be,Zp=jp,Qp=Vp,qp=Wp,Jp=re,$p=zp,ev=Kl.aTypedArray,tv=Kl.exportTypedArrayMethod,nv=o.Uint16Array,rv=nv&&Xp(nv.prototype.sort),iv=!(!rv||Yp((function(){rv(new nv(2),null)}))&&Yp((function(){rv(new nv(2),{})}))),av=!!rv&&!Yp((function(){if(Jp)return Jp<74;if(Qp)return Qp<67;if(qp)return!0;if($p)return $p<602;var e,t,n=new nv(516),r=Array(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,r[e]=e-2*t+3;for(rv(n,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(n[e]!==r[e])return!0}));tv("sort",(function(e){return void 0!==e&&Kp(e),av?rv(this,e):Zp(ev(this),function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!=n?-1:t!=t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}}(e))}),!av||iv);var ov=sr,sv=ir,cv=eh,uv=Kl.aTypedArray;(0,Kl.exportTypedArrayMethod)("subarray",(function(e,t){var n=uv(this),r=n.length,i=sv(e,r);return new(cv(n))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,ov((void 0===t?r:sv(t,r))-i))}));var lv=Fh,dv=Kl,fv=c,hv=Cp,pv=o.Int8Array,vv=dv.aTypedArray,gv=dv.exportTypedArrayMethod,yv=[].toLocaleString,mv=!!pv&&fv((function(){yv.call(new pv(1))}));gv("toLocaleString",(function(){return lv(yv,mv?hv(vv(this)):vv(this),hv(arguments))}),fv((function(){return[1,2].toLocaleString()!=new pv([1,2]).toLocaleString()}))||!fv((function(){pv.prototype.toLocaleString.call([1,2])})));var bv=Kl.exportTypedArrayMethod,_v=c,kv=S,wv=o.Uint8Array,Ev=wv&&wv.prototype||{},Tv=[].toString,Av=kv([].join);_v((function(){Tv.call({})}))&&(Tv=function(){return Av(this)});var Sv=Ev.toString!=Tv;bv("toString",Tv,Sv);var Iv=Xt.exports,Rv=Rt,Ov=Lt,Cv=function(){var e=Ov(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},xv=u,Pv=function(e,t,n){return n.get&&Iv(n.get,t,{getter:!0}),n.set&&Iv(n.set,t,{setter:!0}),Rv.f(e,t,n)},Dv=Cv,Lv=c,Mv=RegExp.prototype;xv&&Lv((function(){return"sy"!==Object.getOwnPropertyDescriptor(Mv,"flags").get.call({dotAll:!0,sticky:!0})}))&&Pv(Mv,"flags",{configurable:!0,get:Dv}),Jr({global:!0,constructor:!0,forced:!fc},{DataView:Fu.DataView});var Nv=Jr,Uv=o,Bv=ii,Fv=Ri,jv=G,Hv=ir,Vv=ur,Wv=H,Gv=Mc,zv=et,Xv=Cp,Yv=Ki("slice"),Kv=zv("species"),Zv=Uv.Array,Qv=Math.max;Nv({target:"Array",proto:!0,forced:!Yv},{slice:function(e,t){var n,r,i,a=Wv(this),o=Vv(a),s=Hv(e,o),c=Hv(void 0===t?o:t,o);if(Bv(a)&&(n=a.constructor,(Fv(n)&&(n===Zv||Bv(n.prototype))||jv(n)&&null===(n=n[Kv]))&&(n=void 0),n===Zv||void 0===n))return Xv(a,s,c);for(r=new(void 0===n?Zv:n)(Qv(c-s,0)),i=0;s<c;s++,i++)s in a&&Gv(r,i,a[s]);return r.length=i,r}});var qv=S,Jv=Zn,$v=Date.prototype,eg=qv($v.toString),tg=qv($v.getTime);"Invalid Date"!=String(new Date(NaN))&&Jv($v,"toString",(function(){var e=tg(this);return e==e?eg(this):"Invalid Date"}));var ng=h,rg=Be,ig=Z,ag=Cv,og=RegExp.prototype,sg=Jt.PROPER,cg=Zn,ug=Lt,lg=da,dg=c,fg=function(e){var t=e.flags;return void 0!==t||"flags"in og||rg(e,"flags")||!ig(og,e)?t:ng(ag,e)},hg=RegExp.prototype.toString,pg=dg((function(){return"/a/b"!=hg.call({source:"a",flags:"b"})})),vg=sg&&"toString"!=hg.name;(pg||vg)&&cg(RegExp.prototype,"toString",(function(){var e=ug(this);return"/"+lg(e.source)+"/"+lg(fg(e))}),{unsafe:!0});var gg=S,yg=be,mg=G,bg=Be,_g=Cp,kg=l,wg=o.Function,Eg=gg([].concat),Tg=gg([].join),Ag={},Sg=function(e,t,n){if(!bg(Ag,t)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";Ag[t]=wg("C,a","return new C("+Tg(r,",")+")")}return Ag[t](e,n)},Ig=kg?wg.bind:function(e){var t=yg(this),n=t.prototype,r=_g(arguments,1),i=function(){var n=Eg(r,_g(arguments));return this instanceof i?Sg(t,n.length,n):t.apply(e,n)};return mg(n)&&(i.prototype=n),i},Rg=Jr,Og=Fh,Cg=Ig,xg=Wu,Pg=Lt,Dg=G,Lg=ts,Mg=c,Ng=K("Reflect","construct"),Ug=Object.prototype,Bg=[].push,Fg=Mg((function(){function e(){}return!(Ng((function(){}),[],e)instanceof e)})),jg=!Mg((function(){Ng((function(){}))})),Hg=Fg||jg;function Vg(e){return(Vg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wg(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Vg(e)););return e}function Gg(){return(Gg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Wg(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function zg(e,t){return(zg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Xg(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zg(e,t)}function Yg(e){return(Yg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kg(e,t){if(t&&("object"===Yg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Zg(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Qg(e,t,n){return(Qg=Zg()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&zg(i,n.prototype),i}).apply(null,arguments)}function qg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $g(e,t,n){return t&&Jg(e.prototype,t),n&&Jg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}Rg({target:"Reflect",stat:!0,forced:Hg,sham:Hg},{construct:function(e,t){xg(e),Pg(t);var n=arguments.length<3?e:xg(arguments[2]);if(jg&&!Fg)return Ng(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return Og(Bg,r,t),new(Og(Cg,e,r))}var i=n.prototype,a=Lg(Dg(i)?i:Ug),o=Og(e,a,t);return Dg(o)?o:a}});var ey=Fd,ty=Fu.ArrayBuffer;Jr({global:!0,constructor:!0,forced:o.ArrayBuffer!==ty},{ArrayBuffer:ty}),ey("ArrayBuffer"),(0,sl.exports)("Int8",(function(e){return function(t,n,r){return e(this,t,n,r)}})),(0,sl.exports)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0),(0,sl.exports)("Int16",(function(e){return function(t,n,r){return e(this,t,n,r)}})),(0,sl.exports)("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}})),(0,sl.exports)("Int32",(function(e){return function(t,n,r){return e(this,t,n,r)}})),(0,sl.exports)("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}})),(0,sl.exports)("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}})),(0,sl.exports)("Float64",(function(e){return function(t,n,r){return e(this,t,n,r)}}));var ny=o,ry=c,iy=S,ay=da,oy=_a.trim,sy=ny.parseInt,cy=ny.Symbol,uy=cy&&cy.iterator,ly=/^[+-]?0x/i,dy=iy(ly.exec),fy=8!==sy("\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff08")||22!==sy("\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff0x16")||uy&&!ry((function(){sy(Object(uy))}))?function(e,t){var n=oy(ay(e));return sy(n,t>>>0||(dy(ly,n)?16:10))}:sy;Jr({global:!0,forced:parseInt!=fy},{parseInt:fy});var hy=Jr,py=o,vy=c,gy=ii,yy=G,my=Me,by=ur,_y=Mc,ky=Ni,wy=Ki,Ey=re,Ty=et("isConcatSpreadable"),Ay=py.TypeError,Sy=Ey>=51||!vy((function(){var e=[];return e[Ty]=!1,e.concat()[0]!==e})),Iy=wy("concat"),Ry=function(e){if(!yy(e))return!1;var t=e[Ty];return void 0!==t?!!t:gy(e)};hy({target:"Array",proto:!0,arity:1,forced:!Sy||!Iy},{concat:function(e){var t,n,r,i,a,o=my(this),s=ky(o,0),c=0;for(t=-1,r=arguments.length;t<r;t++)if(Ry(a=-1===t?o:arguments[t])){if(c+(i=by(a))>9007199254740991)throw Ay("Maximum allowed index exceeded");for(n=0;n<i;n++,c++)n in a&&_y(s,c,a[n])}else{if(c>=9007199254740991)throw Ay("Maximum allowed index exceeded");_y(s,c++,a)}return s.length=c,s}});var Oy=Jr,Cy=o,xy=ir,Py=er,Dy=ur,Ly=Me,My=Ni,Ny=Mc,Uy=Ki("splice"),By=Cy.TypeError,Fy=Math.max,jy=Math.min;function Hy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vg(e);if(t){var i=Vg(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Kg(this,n)}}Oy({target:"Array",proto:!0,forced:!Uy},{splice:function(e,t){var n,r,i,a,o,s,c=Ly(this),u=Dy(c),l=xy(e,u),d=arguments.length;if(0===d?n=r=0:1===d?(n=0,r=u-l):(n=d-2,r=jy(Fy(Py(t),0),u-l)),u+n-r>9007199254740991)throw By("Maximum allowed length exceeded");for(i=My(c,r),a=0;a<r;a++)(o=l+a)in c&&Ny(i,a,c[o]);if(i.length=r,n<r){for(a=l;a<u-r;a++)s=a+n,(o=a+r)in c?c[s]=c[o]:delete c[s];for(a=u;a>u-r+n;a--)delete c[a-1]}else if(n>r)for(a=u-r;a>l;a--)s=a+n-1,(o=a+r-1)in c?c[s]=c[o]:delete c[s];for(a=0;a<n;a++)c[a+l]=arguments[a+2];return c.length=u-r+n,i}});var Vy=function(){function e(){qg(this,e)}return $g(e,[{key:"mixIn",value:function(e){return Object.assign(this,e)}},{key:"clone",value:function(){var e=new this.constructor;return Object.assign(e,this),e}}],[{key:"create",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qg(this,t)}}]),e}(),Wy=function(e){Xg(n,e);var t=Hy(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4*r.length;qg(this,n),e=t.call(this);var a=r;if(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),(a instanceof Int8Array||a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)&&(a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength)),a instanceof Uint8Array){for(var o=a.byteLength,s=[],c=0;c<o;c+=1)s[c>>>2]|=a[c]<<24-c%4*8;e.words=s,e.sigBytes=o}else e.words=r,e.sigBytes=i;return e}return $g(n,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gy;return e.stringify(this)}},{key:"concat",value:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var a=0;a<i;a+=1){var o=n[a>>>2]>>>24-a%4*8&255;t[r+a>>>2]|=o<<24-(r+a)%4*8}else for(var s=0;s<i;s+=4)t[r+s>>>2]=n[s>>>2];return this.sigBytes+=i,this}},{key:"clamp",value:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=Math.ceil(t/4)}},{key:"clone",value:function(){var e=Gg(Vg(n.prototype),"clone",this).call(this);return e.words=this.words.slice(0),e}}],[{key:"random",value:function(e){for(var t,r=[],i=function(e){var t=e,n=987654321,r=4294967295;return function(){var e=((n=36969*(65535&n)+(n>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return e/=4294967296,(e+=.5)*(Math.random()>.5?1:-1)}},a=0;a<e;a+=4){var o=i(4294967296*(t||Math.random()));t=987654071*o(),r.push(4294967296*o()|0)}return new n(r,e)}}]),n}(Vy),Gy={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i+=1){var a=t[i>>>2]>>>24-i%4*8&255;r.push((a>>>4).toString(16)),r.push((15&a).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new Wy(n,t/2)}},zy=function(e){for(var t=e.length,n=[],r=0;r<t;r+=1)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new Wy(n,t)},Xy=function(e){return zy(unescape(encodeURIComponent(e)))},Yy=function(e){Xg(n,e);var t=Hy(n);function n(){var e;return qg(this,n),(e=t.call(this))._minBufferSize=0,e}return $g(n,[{key:"reset",value:function(){this._data=new Wy,this._nDataBytes=0}},{key:"_append",value:function(e){var t=e;"string"==typeof t&&(t=Xy(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes}},{key:"_process",value:function(e){var t,n=this._data,r=this.blockSize,i=n.words,a=n.sigBytes,o=a/(4*r),s=(o=e?Math.ceil(o):Math.max((0|o)-this._minBufferSize,0))*r,c=Math.min(4*s,a);if(s){for(var u=0;u<s;u+=r)this._doProcessBlock(i,u);t=i.splice(0,s),n.sigBytes-=c}return new Wy(t,c)}},{key:"clone",value:function(){var e=Gg(Vg(n.prototype),"clone",this).call(this);return e._data=this._data.clone(),e}}]),n}(Vy),Ky=function(e){Xg(n,e);var t=Hy(n);function n(e){var r;return qg(this,n),(r=t.call(this)).blockSize=16,r.cfg=Object.assign(new Vy,e),r.reset(),r}return $g(n,[{key:"reset",value:function(){Gg(Vg(n.prototype),"reset",this).call(this),this._doReset()}},{key:"update",value:function(e){return this._append(e),this._process(),this}},{key:"finalize",value:function(e){return e&&this._append(e),this._doFinalize()}}],[{key:"_createHelper",value:function(e){return function(t,n){return new e(n).finalize(t)}}},{key:"_createHmacHelper",value:function(e){return function(t,n){return new Zy(e,n).finalize(t)}}}]),n}(Yy),Zy=function(e){Xg(n,e);var t=Hy(n);function n(e,r){var i;qg(this,n),i=t.call(this);var a=new e;i._hasher=a;var o=r;"string"==typeof o&&(o=Xy(o));var s=a.blockSize,c=4*s;o.sigBytes>c&&(o=a.finalize(r)),o.clamp();var u=o.clone();i._oKey=u;var l=o.clone();i._iKey=l;for(var d=u.words,f=l.words,h=0;h<s;h+=1)d[h]^=1549556828,f[h]^=909522486;return u.sigBytes=c,l.sigBytes=c,i.reset(),i}return $g(n,[{key:"reset",value:function(){var e=this._hasher;e.reset(),e.update(this._iKey)}},{key:"update",value:function(e){return this._hasher.update(e),this}},{key:"finalize",value:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}}]),n}(Vy),Qy=Jr,qy=pr.indexOf,Jy=fo,$y=S([].indexOf),em=!!$y&&1/$y([1],1,-0)<0,tm=Jy("indexOf");Qy({target:"Array",proto:!0,forced:em||!tm},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return em?$y(this,e,t)||0:qy(this,e,t)}});var nm={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],a=0;a<n;a+=3)for(var o=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,s=0;s<4&&a+.75*s<n;s+=1)i.push(r.charAt(o>>>6*(3-s)&63));var c=r.charAt(64);if(c)for(;i.length%4;)i.push(c);return i.join("")},parse:function(e){var t=e.length,n=this._map,r=this._reverseMap;if(!r){this._reverseMap=[],r=this._reverseMap;for(var i=0;i<n.length;i+=1)r[n.charCodeAt(i)]=i}var a=n.charAt(64);if(a){var o=e.indexOf(a);-1!==o&&(t=o)}return function(e,t,n){for(var r=[],i=0,a=0;a<t;a+=1)if(a%4){var o=n[e.charCodeAt(a-1)]<<a%4*2|n[e.charCodeAt(a)]>>>6-a%4*2;r[i>>>2]|=o<<24-i%4*8,i+=1}return Wy.create(r,i)}(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function rm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vg(e);if(t){var i=Vg(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Kg(this,n)}}for(var im=[],am=0;am<64;am+=1)im[am]=4294967296*Math.abs(Math.sin(am+1))|0;var om=function(e,t,n,r,i,a,o){var s=e+(t&n|~t&r)+i+o;return(s<<a|s>>>32-a)+t},sm=function(e,t,n,r,i,a,o){var s=e+(t&r|n&~r)+i+o;return(s<<a|s>>>32-a)+t},cm=function(e,t,n,r,i,a,o){var s=e+(t^n^r)+i+o;return(s<<a|s>>>32-a)+t},um=function(e,t,n,r,i,a,o){var s=e+(n^(t|~r))+i+o;return(s<<a|s>>>32-a)+t},lm=function(e){Xg(n,e);var t=rm(n);function n(){return qg(this,n),t.apply(this,arguments)}return $g(n,[{key:"_doReset",value:function(){this._hash=new Wy([1732584193,4023233417,2562383102,271733878])}},{key:"_doProcessBlock",value:function(e,t){for(var n=e,r=0;r<16;r+=1){var i=t+r,a=e[i];n[i]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var o=this._hash.words,s=n[t+0],c=n[t+1],u=n[t+2],l=n[t+3],d=n[t+4],f=n[t+5],h=n[t+6],p=n[t+7],v=n[t+8],g=n[t+9],y=n[t+10],m=n[t+11],b=n[t+12],_=n[t+13],k=n[t+14],w=n[t+15],E=o[0],T=o[1],A=o[2],S=o[3];E=om(E,T,A,S,s,7,im[0]),S=om(S,E,T,A,c,12,im[1]),A=om(A,S,E,T,u,17,im[2]),T=om(T,A,S,E,l,22,im[3]),E=om(E,T,A,S,d,7,im[4]),S=om(S,E,T,A,f,12,im[5]),A=om(A,S,E,T,h,17,im[6]),T=om(T,A,S,E,p,22,im[7]),E=om(E,T,A,S,v,7,im[8]),S=om(S,E,T,A,g,12,im[9]),A=om(A,S,E,T,y,17,im[10]),T=om(T,A,S,E,m,22,im[11]),E=om(E,T,A,S,b,7,im[12]),S=om(S,E,T,A,_,12,im[13]),A=om(A,S,E,T,k,17,im[14]),T=om(T,A,S,E,w,22,im[15]),E=sm(E,T,A,S,c,5,im[16]),S=sm(S,E,T,A,h,9,im[17]),A=sm(A,S,E,T,m,14,im[18]),T=sm(T,A,S,E,s,20,im[19]),E=sm(E,T,A,S,f,5,im[20]),S=sm(S,E,T,A,y,9,im[21]),A=sm(A,S,E,T,w,14,im[22]),T=sm(T,A,S,E,d,20,im[23]),E=sm(E,T,A,S,g,5,im[24]),S=sm(S,E,T,A,k,9,im[25]),A=sm(A,S,E,T,l,14,im[26]),T=sm(T,A,S,E,v,20,im[27]),E=sm(E,T,A,S,_,5,im[28]),S=sm(S,E,T,A,u,9,im[29]),A=sm(A,S,E,T,p,14,im[30]),T=sm(T,A,S,E,b,20,im[31]),E=cm(E,T,A,S,f,4,im[32]),S=cm(S,E,T,A,v,11,im[33]),A=cm(A,S,E,T,m,16,im[34]),T=cm(T,A,S,E,k,23,im[35]),E=cm(E,T,A,S,c,4,im[36]),S=cm(S,E,T,A,d,11,im[37]),A=cm(A,S,E,T,p,16,im[38]),T=cm(T,A,S,E,y,23,im[39]),E=cm(E,T,A,S,_,4,im[40]),S=cm(S,E,T,A,s,11,im[41]),A=cm(A,S,E,T,l,16,im[42]),T=cm(T,A,S,E,h,23,im[43]),E=cm(E,T,A,S,g,4,im[44]),S=cm(S,E,T,A,b,11,im[45]),A=cm(A,S,E,T,w,16,im[46]),T=cm(T,A,S,E,u,23,im[47]),E=um(E,T,A,S,s,6,im[48]),S=um(S,E,T,A,p,10,im[49]),A=um(A,S,E,T,k,15,im[50]),T=um(T,A,S,E,f,21,im[51]),E=um(E,T,A,S,b,6,im[52]),S=um(S,E,T,A,l,10,im[53]),A=um(A,S,E,T,y,15,im[54]),T=um(T,A,S,E,c,21,im[55]),E=um(E,T,A,S,v,6,im[56]),S=um(S,E,T,A,w,10,im[57]),A=um(A,S,E,T,h,15,im[58]),T=um(T,A,S,E,_,21,im[59]),E=um(E,T,A,S,d,6,im[60]),S=um(S,E,T,A,m,10,im[61]),A=um(A,S,E,T,u,15,im[62]),T=um(T,A,S,E,g,21,im[63]),o[0]=o[0]+E|0,o[1]=o[1]+T|0,o[2]=o[2]+A|0,o[3]=o[3]+S|0}},{key:"_doFinalize",value:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32;var i=Math.floor(n/4294967296),a=n;t[15+(r+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t[14+(r+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(t.length+1),this._process();for(var o=this._hash,s=o.words,c=0;c<4;c+=1){var u=s[c];s[c]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return o}},{key:"clone",value:function(){var e=Gg(Vg(n.prototype),"clone",this).call(this);return e._hash=this._hash.clone(),e}}]),n}(Ky);function dm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vg(e);if(t){var i=Vg(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Kg(this,n)}}Ky._createHelper(lm),Ky._createHmacHelper(lm);var fm=function(e){Xg(n,e);var t=dm(n);function n(e){var r;return qg(this,n),(r=t.call(this)).cfg=Object.assign(new Vy,{keySize:4,hasher:lm,iterations:1},e),r}return $g(n,[{key:"compute",value:function(e,t){for(var n,r=this.cfg,i=r.hasher.create(),a=Wy.create(),o=a.words,s=r.keySize,c=r.iterations;o.length<s;){n&&i.update(n),n=i.update(e).finalize(t),i.reset();for(var u=1;u<c;u+=1)n=i.finalize(n),i.reset();a.concat(n)}return a.sigBytes=4*s,a}}]),n}(Vy);function hm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vg(e);if(t){var i=Vg(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Kg(this,n)}}var pm=function(e){Xg(n,e);var t=hm(n);function n(e,r,i){var a;return qg(this,n),(a=t.call(this)).cfg=Object.assign(new Vy,i),a._xformMode=e,a._key=r,a.reset(),a}return $g(n,[{key:"reset",value:function(){Gg(Vg(n.prototype),"reset",this).call(this),this._doReset()}},{key:"process",value:function(e){return this._append(e),this._process()}},{key:"finalize",value:function(e){return e&&this._append(e),this._doFinalize()}}],[{key:"createEncryptor",value:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)}},{key:"createDecryptor",value:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)}},{key:"_createHelper",value:function(e){var t=function(e){return"string"==typeof e?Tm:wm};return{encrypt:function(n,r,i){return t(r).encrypt(e,n,r,i)},decrypt:function(n,r,i){return t(r).decrypt(e,n,r,i)}}}}]),n}(Yy);pm._ENC_XFORM_MODE=1,pm._DEC_XFORM_MODE=2,pm.keySize=4,pm.ivSize=4;var vm=function(e){Xg(n,e);var t=hm(n);function n(e,r){var i;return qg(this,n),(i=t.call(this))._cipher=e,i._iv=r,i}return $g(n,null,[{key:"createEncryptor",value:function(e,t){return this.Encryptor.create(e,t)}},{key:"createDecryptor",value:function(e,t){return this.Decryptor.create(e,t)}}]),n}(Vy);function gm(e,t,n){var r,i=e,a=this._iv;a?(r=a,this._iv=void 0):r=this._prevBlock;for(var o=0;o<n;o+=1)i[t+o]^=r[o]}var ym=function(e){Xg(n,e);var t=hm(n);function n(){return qg(this,n),t.apply(this,arguments)}return $g(n)}(vm);ym.Encryptor=function(e){Xg(n,e);var t=hm(n);function n(){return qg(this,n),t.apply(this,arguments)}return $g(n,[{key:"processBlock",value:function(e,t){var n=this._cipher,r=n.blockSize;gm.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}]),n}(ym),ym.Decryptor=function(e){Xg(n,e);var t=hm(n);function n(){return qg(this,n),t.apply(this,arguments)}return $g(n,[{key:"processBlock",value:function(e,t){var n=this._cipher,r=n.blockSize,i=e.slice(t,t+r);n.decryptBlock(e,t),gm.call(this,e,t,r),this._prevBlock=i}}]),n}(ym);var mm={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,i=r<<24|r<<16|r<<8|r,a=[],o=0;o<r;o+=4)a.push(i);var s=Wy.create(a,r);e.concat(s)},unpad:function(e){var t=e,n=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=n}},bm=function(e){Xg(n,e);var t=hm(n);function n(e,r,i){var a;return qg(this,n),(a=t.call(this,e,r,Object.assign({mode:ym,padding:mm},i))).blockSize=4,a}return $g(n,[{key:"reset",value:function(){var e;Gg(Vg(n.prototype),"reset",this).call(this);var t=this.cfg,r=t.iv,i=t.mode;this._xformMode===this.constructor._ENC_XFORM_MODE?e=i.createEncryptor:(e=i.createDecryptor,this._minBufferSize=1),this._mode=e.call(i,this,r&&r.words),this._mode.__creator=e}},{key:"_doProcessBlock",value:function(e,t){this._mode.processBlock(e,t)}},{key:"_doFinalize",value:function(){var e,t=this.cfg.padding;return this._xformMode===this.constructor._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e}}]),n}(pm),_m=function(e){Xg(n,e);var t=hm(n);function n(e){var r;return qg(this,n),(r=t.call(this)).mixIn(e),r}return $g(n,[{key:"toString",value:function(e){return(e||this.formatter).stringify(this)}}]),n}(Vy),km={stringify:function(e){var t=e.ciphertext,n=e.salt;return(n?Wy.create([1398893684,1701076831]).concat(n).concat(t):t).toString(nm)},parse:function(e){var t,n=nm.parse(e),r=n.words;return 1398893684===r[0]&&1701076831===r[1]&&(t=Wy.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),_m.create({ciphertext:n,salt:t})}},wm=function(e){Xg(n,e);var t=hm(n);function n(){return qg(this,n),t.apply(this,arguments)}return $g(n,null,[{key:"encrypt",value:function(e,t,n,r){var i=Object.assign(new Vy,this.cfg,r),a=e.createEncryptor(n,i),o=a.finalize(t),s=a.cfg;return _m.create({ciphertext:o,key:n,iv:s.iv,algorithm:e,mode:s.mode,padding:s.padding,blockSize:a.blockSize,formatter:i.format})}},{key:"decrypt",value:function(e,t,n,r){var i=t,a=Object.assign(new Vy,this.cfg,r);return i=this._parse(i,a.format),e.createDecryptor(n,a).finalize(i.ciphertext)}},{key:"_parse",value:function(e,t){return"string"==typeof e?t.parse(e,this):e}}]),n}(Vy);wm.cfg=Object.assign(new Vy,{format:km});var Em={execute:function(e,t,n,r){var i=r;i||(i=Wy.random(8));var a=fm.create({keySize:t+n}).compute(e,i),o=Wy.create(a.words.slice(t),4*n);return a.sigBytes=4*t,_m.create({key:a,iv:o,salt:i})}},Tm=function(e){Xg(n,e);var t=hm(n);function n(){return qg(this,n),t.apply(this,arguments)}return $g(n,null,[{key:"encrypt",value:function(e,t,n,r){var i=Object.assign(new Vy,this.cfg,r),a=i.kdf.execute(n,e.keySize,e.ivSize);i.iv=a.iv;var o=wm.encrypt.call(this,e,t,a.key,i);return o.mixIn(a),o}},{key:"decrypt",value:function(e,t,n,r){var i=t,a=Object.assign(new Vy,this.cfg,r);i=this._parse(i,a.format);var o=a.kdf.execute(n,e.keySize,e.ivSize,i.salt);return a.iv=o.iv,wm.decrypt.call(this,e,i,o.key,a)}}]),n}(wm);function Am(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vg(e);if(t){var i=Vg(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Kg(this,n)}}Tm.cfg=Object.assign(wm.cfg,{kdf:Em});for(var Sm=[],Im=[],Rm=[],Om=[],Cm=[],xm=[],Pm=[],Dm=[],Lm=[],Mm=[],Nm=[],Um=0;Um<256;Um+=1)Nm[Um]=Um<128?Um<<1:Um<<1^283;for(var Bm=0,Fm=0,jm=0;jm<256;jm+=1){var Hm=Fm^Fm<<1^Fm<<2^Fm<<3^Fm<<4;Hm=Hm>>>8^255&Hm^99,Sm[Bm]=Hm,Im[Hm]=Bm;var Vm=Nm[Bm],Wm=Nm[Vm],Gm=Nm[Wm],zm=257*Nm[Hm]^16843008*Hm;Rm[Bm]=zm<<24|zm>>>8,Om[Bm]=zm<<16|zm>>>16,Cm[Bm]=zm<<8|zm>>>24,xm[Bm]=zm,zm=16843009*Gm^65537*Wm^257*Vm^16843008*Bm,Pm[Hm]=zm<<24|zm>>>8,Dm[Hm]=zm<<16|zm>>>16,Lm[Hm]=zm<<8|zm>>>24,Mm[Hm]=zm,Bm?(Bm=Vm^Nm[Nm[Nm[Gm^Vm]]],Fm^=Nm[Nm[Fm]]):Bm=Fm=1}var Xm=[0,1,2,4,8,16,32,64,128,27,54],Ym=function(e){Xg(n,e);var t=Am(n);function n(){return qg(this,n),t.apply(this,arguments)}return $g(n,[{key:"_doReset",value:function(){var e;if(!this._nRounds||this._keyPriorReset!==this._key){this._keyPriorReset=this._key;var t=this._keyPriorReset,n=t.words,r=t.sigBytes/4;this._nRounds=r+6;var i=4*(this._nRounds+1);this._keySchedule=[];for(var a=this._keySchedule,o=0;o<i;o+=1)o<r?a[o]=n[o]:(e=a[o-1],o%r?r>6&&o%r==4&&(e=Sm[e>>>24]<<24|Sm[e>>>16&255]<<16|Sm[e>>>8&255]<<8|Sm[255&e]):(e=Sm[(e=e<<8|e>>>24)>>>24]<<24|Sm[e>>>16&255]<<16|Sm[e>>>8&255]<<8|Sm[255&e],e^=Xm[o/r|0]<<24),a[o]=a[o-r]^e);this._invKeySchedule=[];for(var s=this._invKeySchedule,c=0;c<i;c+=1){var u=i-c;e=c%4?a[u]:a[u-4],s[c]=c<4||u<=4?e:Pm[Sm[e>>>24]]^Dm[Sm[e>>>16&255]]^Lm[Sm[e>>>8&255]]^Mm[Sm[255&e]]}}}},{key:"encryptBlock",value:function(e,t){this._doCryptBlock(e,t,this._keySchedule,Rm,Om,Cm,xm,Sm)}},{key:"decryptBlock",value:function(e,t){var n=e,r=n[t+1];n[t+1]=n[t+3],n[t+3]=r,this._doCryptBlock(n,t,this._invKeySchedule,Pm,Dm,Lm,Mm,Im),r=n[t+1],n[t+1]=n[t+3],n[t+3]=r}},{key:"_doCryptBlock",value:function(e,t,n,r,i,a,o,s){for(var c=e,u=this._nRounds,l=c[t]^n[0],d=c[t+1]^n[1],f=c[t+2]^n[2],h=c[t+3]^n[3],p=4,v=1;v<u;v+=1){var g=r[l>>>24]^i[d>>>16&255]^a[f>>>8&255]^o[255&h]^n[p];p+=1;var y=r[d>>>24]^i[f>>>16&255]^a[h>>>8&255]^o[255&l]^n[p];p+=1;var m=r[f>>>24]^i[h>>>16&255]^a[l>>>8&255]^o[255&d]^n[p];p+=1;var b=r[h>>>24]^i[l>>>16&255]^a[d>>>8&255]^o[255&f]^n[p];p+=1,l=g,d=y,f=m,h=b}var _=(s[l>>>24]<<24|s[d>>>16&255]<<16|s[f>>>8&255]<<8|s[255&h])^n[p];p+=1;var k=(s[d>>>24]<<24|s[f>>>16&255]<<16|s[h>>>8&255]<<8|s[255&l])^n[p];p+=1;var w=(s[f>>>24]<<24|s[h>>>16&255]<<16|s[l>>>8&255]<<8|s[255&d])^n[p];p+=1;var E=(s[h>>>24]<<24|s[l>>>16&255]<<16|s[d>>>8&255]<<8|s[255&f])^n[p];p+=1,c[t]=_,c[t+1]=k,c[t+2]=w,c[t+3]=E}}]),n}(bm);Ym.keySize=8;var Km=bm._createHelper(Ym),Zm=function(e){var t=Gy.parse(e);return _m.create({ciphertext:t})};function Qm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vg(e);if(t){var i=Vg(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Kg(this,n)}}var qm=function(e){Xg(n,e);var t=Qm(n);function n(){return qg(this,n),t.apply(this,arguments)}return $g(n)}(vm);qm.Encryptor=function(e){Xg(n,e);var t=Qm(n);function n(){return qg(this,n),t.apply(this,arguments)}return $g(n,[{key:"processBlock",value:function(e,t){var n=e,r=this._cipher,i=r.blockSize,a=this._iv,o=this._counter;a&&(this._counter=a.slice(0),o=this._counter,this._iv=void 0);var s=o.slice(0);r.encryptBlock(s,0),o[i-1]=o[i-1]+1|0;for(var c=0;c<i;c+=1)n[t+c]^=s[c]}}]),n}(qm),qm.Decryptor=qm.Encryptor;var Jm,$m,eb={pad:function(){},unpad:function(){}},tb=c,nb=o.RegExp,rb=tb((function(){var e=nb("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),ib=rb||tb((function(){return!nb("a","y").sticky})),ab={BROKEN_CARET:rb||tb((function(){var e=nb("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),MISSED_STICKY:ib,UNSUPPORTED_Y:rb},ob=c,sb=o.RegExp,cb=ob((function(){var e=sb(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),ub=c,lb=o.RegExp,db=ub((function(){var e=lb("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),fb=h,hb=S,pb=da,vb=Cv,gb=ab,yb=Se.exports,mb=ts,bb=Pn.get,_b=cb,kb=db,wb=yb("native-string-replace",String.prototype.replace),Eb=RegExp.prototype.exec,Tb=Eb,Ab=hb("".charAt),Sb=hb("".indexOf),Ib=hb("".replace),Rb=hb("".slice),Ob=($m=/b*/g,fb(Eb,Jm=/a/,"a"),fb(Eb,$m,"a"),0!==Jm.lastIndex||0!==$m.lastIndex),Cb=gb.BROKEN_CARET,xb=void 0!==/()??/.exec("")[1];(Ob||xb||Cb||_b||kb)&&(Tb=function(e){var t,n,r,i,a,o,s,c=this,u=bb(c),l=pb(e),d=u.raw;if(d)return d.lastIndex=c.lastIndex,t=fb(Tb,d,l),c.lastIndex=d.lastIndex,t;var f=u.groups,h=Cb&&c.sticky,p=fb(vb,c),v=c.source,g=0,y=l;if(h&&(p=Ib(p,"y",""),-1===Sb(p,"g")&&(p+="g"),y=Rb(l,c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==Ab(l,c.lastIndex-1))&&(v="(?: "+v+")",y=" "+y,g++),n=new RegExp("^(?:"+v+")",p)),xb&&(n=new RegExp("^"+v+"$(?!\\s)",p)),Ob&&(r=c.lastIndex),i=fb(Eb,h?n:c,y),h?i?(i.input=Rb(i.input,g),i[0]=Rb(i[0],g),i.index=c.lastIndex,c.lastIndex+=i[0].length):c.lastIndex=0:Ob&&i&&(c.lastIndex=c.global?i.index+i[0].length:r),xb&&i&&i.length>1&&fb(wb,i[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(i[a]=void 0)})),i&&f)for(i.groups=o=mb(null),a=0;a<f.length;a++)o[(s=f[a])[0]]=i[s[1]];return i});var Pb=Tb;Jr({target:"RegExp",proto:!0,forced:/./.exec!==Pb},{exec:Pb});var Db=S,Lb=Zn,Mb=Pb,Nb=c,Ub=et,Bb=zt,Fb=Ub("species"),jb=RegExp.prototype,Hb=function(e,t,n,r){var i=Ub(e),a=!Nb((function(){var t={};return t[i]=function(){return 7},7!=""[e](t)})),o=a&&!Nb((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[Fb]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return t=!0,null},n[i](""),!t}));if(!a||!o||n){var s=Db(/./[i]),c=t(i,""[e],(function(e,t,n,r,i){var o=Db(e),c=t.exec;return c===Mb||c===jb.exec?a&&!i?{done:!0,value:s(t,n,r)}:{done:!0,value:o(n,t,r)}:{done:!1}}));Lb(String.prototype,e,c[0]),Lb(jb,i,c[1])}r&&Bb(jb[i],"sham",!0)},Vb=S,Wb=er,Gb=da,zb=B,Xb=Vb("".charAt),Yb=Vb("".charCodeAt),Kb=Vb("".slice),Zb=function(e){return function(t,n){var r,i,a=Gb(zb(t)),o=Wb(n),s=a.length;return o<0||o>=s?e?"":void 0:(r=Yb(a,o))<55296||r>56319||o+1===s||(i=Yb(a,o+1))<56320||i>57343?e?Xb(a,o):r:e?Kb(a,o,o+2):i-56320+(r-55296<<10)+65536}},Qb={codeAt:Zb(!1),charAt:Zb(!0)},qb=Qb.charAt,Jb=function(e,t,n){return t+(n?qb(e,t).length:1)},$b=S,e_=Me,t_=Math.floor,n_=$b("".charAt),r_=$b("".replace),i_=$b("".slice),a_=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,o_=/\$([$&'`]|\d{1,2})/g,s_=h,c_=Lt,u_=V,l_=C,d_=Pb,f_=o.TypeError,h_=function(e,t){var n=e.exec;if(u_(n)){var r=s_(n,e,t);return null!==r&&c_(r),r}if("RegExp"===l_(e))return s_(d_,e,t);throw f_("RegExp#exec called on incompatible receiver")},p_=Fh,v_=h,g_=S,y_=Hb,m_=c,b_=Lt,__=V,k_=er,w_=sr,E_=da,T_=B,A_=Jb,S_=ke,I_=function(e,t,n,r,i,a){var o=n+e.length,s=r.length,c=o_;return void 0!==i&&(i=e_(i),c=a_),r_(a,c,(function(a,c){var u;switch(n_(c,0)){case"$":return"$";case"&":return e;case"`":return i_(t,0,n);case"'":return i_(t,o);case"<":u=i[i_(c,1,-1)];break;default:var l=+c;if(0===l)return a;if(l>s){var d=t_(l/10);return 0===d?a:d<=s?void 0===r[d-1]?n_(c,1):r[d-1]+n_(c,1):a}u=r[l-1]}return void 0===u?"":u}))},R_=h_,O_=et("replace"),C_=Math.max,x_=Math.min,P_=g_([].concat),D_=g_([].push),L_=g_("".indexOf),M_=g_("".slice),N_="$0"==="a".replace(/./,"$0"),U_=!!/./[O_]&&""===/./[O_]("a","$0");y_("replace",(function(e,t,n){var r=U_?"$":"$0";return[function(e,n){var r=T_(this),i=null==e?void 0:S_(e,O_);return i?v_(i,e,r,n):v_(t,E_(r),e,n)},function(e,i){var a=b_(this),o=E_(e);if("string"==typeof i&&-1===L_(i,r)&&-1===L_(i,"$<")){var s=n(t,a,o,i);if(s.done)return s.value}var c=__(i);c||(i=E_(i));var u=a.global;if(u){var l=a.unicode;a.lastIndex=0}for(var d=[];;){var f=R_(a,o);if(null===f)break;if(D_(d,f),!u)break;""===E_(f[0])&&(a.lastIndex=A_(o,w_(a.lastIndex),l))}for(var h,p="",v=0,g=0;g<d.length;g++){for(var y=E_((f=d[g])[0]),m=C_(x_(k_(f.index),o.length),0),b=[],_=1;_<f.length;_++)D_(b,void 0===(h=f[_])?h:String(h));var k=f.groups;if(c){var w=P_([y],b,m,o);void 0!==k&&D_(w,k);var E=E_(p_(i,void 0,w))}else E=I_(y,o,m,b,k,i);m>=v&&(p+=M_(o,v,m)+E,v=m+y.length)}return p+M_(o,v)}]}),!!m_((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!N_||U_);var B_=Gi.filter;Jr({target:"Array",proto:!0,forced:!Ki("filter")},{filter:function(e){return B_(this,e,arguments.length>1?arguments[1]:void 0)}});var F_=o,j_=c,H_=da,V_=_a.trim,W_=S("".charAt),G_=F_.parseFloat,z_=F_.Symbol,X_=z_&&z_.iterator,Y_=1/G_("\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff-0")!=-1/0||X_&&!j_((function(){G_(Object(X_))}))?function(e){var t=V_(H_(e)),n=G_(t);return 0===n&&"-"==W_(t,0)?-0:n}:G_;Jr({global:!0,forced:parseFloat!=Y_},{parseFloat:Y_});var K_=er,Z_=da,Q_=B,q_=o.RangeError,J_=Jr,$_=o,ek=S,tk=er,nk=ca,rk=function(e){var t=Z_(Q_(this)),n="",r=K_(e);if(r<0||r==1/0)throw q_("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n},ik=c,ak=$_.RangeError,ok=$_.String,sk=Math.floor,ck=ek(rk),uk=ek("".slice),lk=ek(1..toFixed),dk=function e(t,n,r){return 0===n?r:n%2==1?e(t,n-1,r*t):e(t*t,n/2,r)},fk=function(e,t,n){for(var r=-1,i=n;++r<6;)i+=t*e[r],e[r]=i%1e7,i=sk(i/1e7)},hk=function(e,t){for(var n=6,r=0;--n>=0;)r+=e[n],e[n]=sk(r/t),r=r%t*1e7},pk=function(e){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==e[t]){var r=ok(e[t]);n=""===n?r:n+ck("0",7-r.length)+r}return n};J_({target:"Number",proto:!0,forced:ik((function(){return"0.000"!==lk(8e-5,3)||"1"!==lk(.9,0)||"1.25"!==lk(1.255,2)||"1000000000000000128"!==lk(0xde0b6b3a7640080,0)}))||!ik((function(){lk({})}))},{toFixed:function(e){var t,n,r,i,a=nk(this),o=tk(e),s=[0,0,0,0,0,0],c="",u="0";if(o<0||o>20)throw ak("Incorrect fraction digits");if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return ok(a);if(a<0&&(c="-",a=-a),a>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(a*dk(2,69,1))-69)<0?a*dk(2,-t,1):a/dk(2,t,1),n*=4503599627370496,(t=52-t)>0){for(fk(s,0,n),r=o;r>=7;)fk(s,1e7,0),r-=7;for(fk(s,dk(10,r,1),0),r=t-1;r>=23;)hk(s,1<<23),r-=23;hk(s,1<<r),fk(s,1,1),hk(s,2),u=pk(s)}else fk(s,0,n),fk(s,1<<-t,0),u=pk(s)+ck("0",o);return u=o>0?c+((i=u.length)<=o?"0."+ck("0",o-i)+u:uk(u,0,i-o)+"."+uk(u,i-o)):c+u}});var vk,gk,yk,mk,bk="process"==C(o.process),_k=o.TypeError,kk=/(?:ipad|iphone|ipod).*applewebkit/i.test(Q),wk=o,Ek=Fh,Tk=ni,Ak=V,Sk=Be,Ik=c,Rk=Wo,Ok=Cp,Ck=gt,xk=function(e,t){if(e<t)throw _k("Not enough arguments");return e},Pk=kk,Dk=bk,Lk=wk.setImmediate,Mk=wk.clearImmediate,Nk=wk.process,Uk=wk.Dispatch,Bk=wk.Function,Fk=wk.MessageChannel,jk=wk.String,Hk=0,Vk={};try{vk=wk.location}catch(JR){}var Wk=function(e){if(Sk(Vk,e)){var t=Vk[e];delete Vk[e],t()}},Gk=function(e){return function(){Wk(e)}},zk=function(e){Wk(e.data)},Xk=function(e){wk.postMessage(jk(e),vk.protocol+"//"+vk.host)};Lk&&Mk||(Lk=function(e){xk(arguments.length,1);var t=Ak(e)?e:Bk(e),n=Ok(arguments,1);return Vk[++Hk]=function(){Ek(t,void 0,n)},gk(Hk),Hk},Mk=function(e){delete Vk[e]},Dk?gk=function(e){Nk.nextTick(Gk(e))}:Uk&&Uk.now?gk=function(e){Uk.now(Gk(e))}:Fk&&!Pk?(mk=(yk=new Fk).port2,yk.port1.onmessage=zk,gk=Tk(mk.postMessage,mk)):wk.addEventListener&&Ak(wk.postMessage)&&!wk.importScripts&&vk&&"file:"!==vk.protocol&&!Ik(Xk)?(gk=Xk,wk.addEventListener("message",zk,!1)):gk="onreadystatechange"in Ck("script")?function(e){Rk.appendChild(Ck("script")).onreadystatechange=function(){Rk.removeChild(this),Wk(e)}}:function(e){setTimeout(Gk(e),0)});var Yk,Kk,Zk,Qk,qk,Jk,$k,ew,tw={set:Lk,clear:Mk},nw=o,rw=/ipad|iphone|ipod/i.test(Q)&&void 0!==nw.Pebble,iw=/web0s(?!.*chrome)/i.test(Q),aw=o,ow=ni,sw=s.f,cw=tw.set,uw=kk,lw=rw,dw=iw,fw=bk,hw=aw.MutationObserver||aw.WebKitMutationObserver,pw=aw.document,vw=aw.process,gw=aw.Promise,yw=sw(aw,"queueMicrotask"),mw=yw&&yw.value;mw||(Yk=function(){var e,t;for(fw&&(e=vw.domain)&&e.exit();Kk;){t=Kk.fn,Kk=Kk.next;try{t()}catch(JR){throw Kk?Qk():Zk=void 0,JR}}Zk=void 0,e&&e.enter()},uw||fw||dw||!hw||!pw?!lw&&gw&&gw.resolve?(($k=gw.resolve(void 0)).constructor=gw,ew=ow($k.then,$k),Qk=function(){ew(Yk)}):fw?Qk=function(){vw.nextTick(Yk)}:(cw=ow(cw,aw),Qk=function(){cw(Yk)}):(qk=!0,Jk=pw.createTextNode(""),new hw(Yk).observe(Jk,{characterData:!0}),Qk=function(){Jk.data=qk=!qk}));var bw=mw||function(e){var t={fn:e,next:void 0};Zk&&(Zk.next=t),Kk||(Kk=t,Qk()),Zk=t},_w=o,kw=function(e){try{return{error:!1,value:e()}}catch(JR){return{error:!0,value:JR}}},ww=function(){this.head=null,this.tail=null};ww.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var Ew=ww,Tw=o.Promise,Aw="object"==("undefined"==typeof window?"undefined":i(window))&&"object"!=("undefined"==typeof Deno?"undefined":i(Deno)),Sw=o,Iw=Tw,Rw=V,Ow=Gr,Cw=on,xw=et,Pw=Aw,Dw=re;Iw&&Iw.prototype;var Lw=xw("species"),Mw=!1,Nw=Rw(Sw.PromiseRejectionEvent),Uw={CONSTRUCTOR:Ow("Promise",(function(){var e=Cw(Iw),t=e!==String(Iw);if(!t&&66===Dw)return!0;if(Dw>=51&&/native code/.test(e))return!1;var n=new Iw((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};return(n.constructor={})[Lw]=r,!(Mw=n.then((function(){}))instanceof r)||!t&&Pw&&!Nw})),REJECTION_EVENT:Nw,SUBCLASSING:Mw},Bw={},Fw=be,jw=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=Fw(t),this.reject=Fw(n)};Bw.f=function(e){return new jw(e)};var Hw,Vw,Ww,Gw=Jr,zw=bk,Xw=o,Yw=h,Kw=Zn,Zw=ra,Qw=xs,qw=Fd,Jw=be,$w=V,eE=G,tE=gc,nE=Yu,rE=tw.set,iE=bw,aE=function(e,t){var n=_w.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))},oE=kw,sE=Ew,cE=Pn,uE=Tw,lE=Bw,dE=Uw.CONSTRUCTOR,fE=Uw.REJECTION_EVENT,hE=Uw.SUBCLASSING,pE=cE.getterFor("Promise"),vE=cE.set,gE=uE&&uE.prototype,yE=uE,mE=gE,bE=Xw.TypeError,_E=Xw.document,kE=Xw.process,wE=lE.f,EE=wE,TE=!!(_E&&_E.createEvent&&Xw.dispatchEvent),AE=function(e){var t;return!(!eE(e)||!$w(t=e.then))&&t},SE=function(e,t){var n,r,i,a=t.value,o=1==t.state,s=o?e.ok:e.fail,c=e.resolve,u=e.reject,l=e.domain;try{s?(o||(2===t.rejection&&xE(t),t.rejection=1),!0===s?n=a:(l&&l.enter(),n=s(a),l&&(l.exit(),i=!0)),n===e.promise?u(bE("Promise-chain cycle")):(r=AE(n))?Yw(r,n,c,u):c(n)):u(a)}catch(JR){l&&!i&&l.exit(),u(JR)}},IE=function(e,t){e.notified||(e.notified=!0,iE((function(){for(var n,r=e.reactions;n=r.get();)SE(n,e);e.notified=!1,t&&!e.rejection&&OE(e)})))},RE=function(e,t,n){var r,i;TE?((r=_E.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),Xw.dispatchEvent(r)):r={promise:t,reason:n},!fE&&(i=Xw["on"+e])?i(r):"unhandledrejection"===e&&aE("Unhandled promise rejection",n)},OE=function(e){Yw(rE,Xw,(function(){var t,n=e.facade,r=e.value;if(CE(e)&&(t=oE((function(){zw?kE.emit("unhandledRejection",r,n):RE("unhandledrejection",n,r)})),e.rejection=zw||CE(e)?2:1,t.error))throw t.value}))},CE=function(e){return 1!==e.rejection&&!e.parent},xE=function(e){Yw(rE,Xw,(function(){var t=e.facade;zw?kE.emit("rejectionHandled",t):RE("rejectionhandled",t,e.value)}))},PE=function(e,t,n){return function(r){e(t,r,n)}},DE=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,IE(e,!0))},LE=function e(t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===n)throw bE("Promise can't be resolved itself");var i=AE(n);i?iE((function(){var r={done:!1};try{Yw(i,n,PE(e,r,t),PE(DE,r,t))}catch(JR){DE(r,JR,t)}})):(t.value=n,t.state=1,IE(t,!1))}catch(JR){DE({done:!1},JR,t)}}};if(dE&&(mE=(yE=function(e){tE(this,mE),Jw(e),Yw(Hw,this);var t=pE(this);try{e(PE(LE,t),PE(DE,t))}catch(JR){DE(t,JR)}}).prototype,(Hw=function(e){vE(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new sE,rejection:!1,state:0,value:void 0})}).prototype=Kw(mE,"then",(function(e,t){var n=pE(this),r=wE(nE(this,yE));return n.parent=!0,r.ok=!$w(e)||e,r.fail=$w(t)&&t,r.domain=zw?kE.domain:void 0,0==n.state?n.reactions.add(r):iE((function(){SE(r,n)})),r.promise})),Vw=function(){var e=new Hw,t=pE(e);this.promise=e,this.resolve=PE(LE,t),this.reject=PE(DE,t)},lE.f=wE=function(e){return e===yE||void 0===e?new Vw(e):EE(e)},$w(uE)&&gE!==Object.prototype)){Ww=gE.then,hE||Kw(gE,"then",(function(e,t){var n=this;return new yE((function(e,t){Yw(Ww,n,e,t)})).then(e,t)}),{unsafe:!0});try{delete gE.constructor}catch(JR){}Zw&&Zw(gE,mE)}Gw({global:!0,constructor:!0,wrap:!0,forced:dE},{Promise:yE}),Qw(yE,"Promise",!1),qw("Promise");var ME=h,NE=Lt,UE=ke,BE=ni,FE=h,jE=Lt,HE=ve,VE=Ad,WE=ur,GE=Z,zE=kd,XE=pd,YE=function(e,t,n){var r,i;NE(e);try{if(!(r=UE(e,"return"))){if("throw"===t)throw n;return n}r=ME(r,e)}catch(JR){i=!0,r=JR}if("throw"===t)throw n;if(i)throw r;return NE(r),n},KE=o.TypeError,ZE=function(e,t){this.stopped=e,this.result=t},QE=ZE.prototype,qE=function(e,t,n){var r,a,o,s,c,u,l,d=n&&n.that,f=!(!n||!n.AS_ENTRIES),h=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),v=BE(t,d),g=function(e){return r&&YE(r,"normal",e),new ZE(!0,e)},y=function(e){return f?(jE(e),p?v(e[0],e[1],g):v(e[0],e[1])):p?v(e,g):v(e)};if(h)r=e;else{if(!(a=XE(e)))throw KE(HE(e)+" is not iterable");if(VE(a)){for(o=0,s=WE(e);s>o;o++)if((c=y(e[o]))&&GE(QE,c))return c;return new ZE(!1)}r=zE(e,a)}for(u=r.next;!(l=FE(u,r)).done;){try{c=y(l.value)}catch(JR){YE(r,"throw",JR)}if("object"==i(c)&&c&&GE(QE,c))return c}return new ZE(!1)},JE=Tw,$E=Uw.CONSTRUCTOR||!vl((function(e){JE.all(e).then(void 0,(function(){}))})),eT=h,tT=be,nT=Bw,rT=kw,iT=qE;Jr({target:"Promise",stat:!0,forced:$E},{all:function(e){var t=this,n=nT.f(t),r=n.resolve,i=n.reject,a=rT((function(){var n=tT(t.resolve),a=[],o=0,s=1;iT(e,(function(e){var c=o++,u=!1;s++,eT(n,t,e).then((function(e){u||(u=!0,a[c]=e,--s||r(a))}),i)})),--s||r(a)}));return a.error&&i(a.value),n.promise}});var aT=Jr,oT=Uw.CONSTRUCTOR,sT=Tw,cT=K,uT=V,lT=Zn,dT=sT&&sT.prototype;if(aT({target:"Promise",proto:!0,forced:oT,real:!0},{catch:function(e){return this.then(void 0,e)}}),uT(sT)){var fT=cT("Promise").prototype.catch;dT.catch!==fT&&lT(dT,"catch",fT,{unsafe:!0})}var hT=h,pT=be,vT=Bw,gT=kw,yT=qE;Jr({target:"Promise",stat:!0,forced:$E},{race:function(e){var t=this,n=vT.f(t),r=n.reject,i=gT((function(){var i=pT(t.resolve);yT(e,(function(e){hT(i,t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var mT=h,bT=Bw;Jr({target:"Promise",stat:!0,forced:Uw.CONSTRUCTOR},{reject:function(e){var t=bT.f(this);return mT(t.reject,void 0,e),t.promise}});var _T=Lt,kT=G,wT=Bw,ET=function(e,t){if(_T(e),kT(t)&&t.constructor===e)return t;var n=wT.f(e);return(0,n.resolve)(t),n.promise},TT=Jr,AT=Uw.CONSTRUCTOR,ST=ET;K("Promise"),TT({target:"Promise",stat:!0,forced:AT},{resolve:function(e){return ST(this,e)}});var IT=Jr,RT=Tw,OT=c,CT=K,xT=V,PT=Yu,DT=ET,LT=Zn,MT=RT&&RT.prototype;if(IT({target:"Promise",proto:!0,real:!0,forced:!!RT&&OT((function(){MT.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=PT(this,CT("Promise")),n=xT(e);return this.then(n?function(n){return DT(t,e()).then((function(){return n}))}:e,n?function(n){return DT(t,e()).then((function(){throw n}))}:e)}}),xT(RT)){var NT=CT("Promise").prototype.finally;MT.finally!==NT&&LT(MT,"finally",NT,{unsafe:!0})}var UT=Me,BT=Qa;Jr({target:"Object",stat:!0,forced:c((function(){BT(1)}))},{keys:function(e){return BT(UT(e))}});var FT=G,jT=C,HT=et("match"),VT=Fh,WT=h,GT=S,zT=Hb,XT=function(e){var t;return FT(e)&&(void 0!==(t=e[HT])?!!t:"RegExp"==jT(e))},YT=Lt,KT=B,ZT=Yu,QT=Jb,qT=sr,JT=da,$T=ke,eA=Hc,tA=h_,nA=Pb,rA=c,iA=ab.UNSUPPORTED_Y,aA=Math.min,oA=[].push,sA=GT(/./.exec),cA=GT(oA),uA=GT("".slice);zT("split",(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=JT(KT(this)),i=void 0===n?4294967295:n>>>0;if(0===i)return[];if(void 0===e)return[r];if(!XT(e))return WT(t,r,e,i);for(var a,o,s,c=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),l=0,d=new RegExp(e.source,u+"g");(a=WT(nA,d,r))&&!((o=d.lastIndex)>l&&(cA(c,uA(r,l,a.index)),a.length>1&&a.index<r.length&&VT(oA,c,eA(a,1)),s=a[0].length,l=o,c.length>=i));)d.lastIndex===a.index&&d.lastIndex++;return l===r.length?!s&&sA(d,"")||cA(c,""):cA(c,uA(r,l)),c.length>i?eA(c,0,i):c}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:WT(t,this,e,n)}:t,[function(t,n){var i=KT(this),a=null==t?void 0:$T(t,e);return a?WT(a,t,i,n):WT(r,JT(i),t,n)},function(e,i){var a=YT(this),o=JT(e),s=n(r,a,o,i,r!==t);if(s.done)return s.value;var c=ZT(a,RegExp),u=a.unicode,l=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(iA?"g":"y"),d=new c(iA?"^(?:"+a.source+")":a,l),f=void 0===i?4294967295:i>>>0;if(0===f)return[];if(0===o.length)return null===tA(d,o)?[o]:[];for(var h=0,p=0,v=[];p<o.length;){d.lastIndex=iA?0:p;var g,y=tA(d,iA?uA(o,p):o);if(null===y||(g=aA(qT(d.lastIndex+(iA?p:0)),o.length))===h)p=QT(o,p,u);else{if(cA(v,uA(o,h,p)),v.length===f)return v;for(var m=1;m<=y.length-1;m++)if(cA(v,y[m]),v.length===f)return v;p=h=g}}return cA(v,uA(o,h)),v}]}),!!rA((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),iA);var lA=sp.left,dA=re,fA=bk;Jr({target:"Array",proto:!0,forced:!fo("reduce")||!fA&&dA>79&&dA<83},{reduce:function(e){var t=arguments.length;return lA(this,e,t,t>1?arguments[1]:void 0)}});var hA=h,pA=Lt,vA=sr,gA=da,yA=B,mA=ke,bA=Jb,_A=h_;Hb("match",(function(e,t,n){return[function(t){var n=yA(this),r=null==t?void 0:mA(t,e);return r?hA(r,t,n):new RegExp(t)[e](gA(n))},function(e){var r=pA(this),i=gA(e),a=n(t,r,i);if(a.done)return a.value;if(!r.global)return _A(r,i);var o=r.unicode;r.lastIndex=0;for(var s,c=[],u=0;null!==(s=_A(r,i));){var l=gA(s[0]);c[u]=l,""===l&&(r.lastIndex=bA(i,vA(r.lastIndex),o)),u++}return 0===u?null:c}]}));var kA=Jt.PROPER,wA=c,EA=fa,TA=_a.trim;Jr({target:"String",proto:!0,forced:function(e){return wA((function(){return!!EA[e]()||"\u200b\x85\u180e"!=="\u200b\x85\u180e"[e]()||kA&&EA[e].name!==e}))}("trim")},{trim:function(){return TA(this)}});var AA={ArrayBufferToString:function(e){for(var t="",n=new Uint8Array(e),r=0;r<n.length;r++)t+=String.fromCharCode(n[r]);return t},StringToArrayBuffer:function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return t},Base64ToHex:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=window.atob(e.replace(/-/g,"+").replace(/_/g,"/"));if(t){for(var r=[],i=0;i<n.length;i++)r.push(n.charCodeAt(i));return new Uint8Array(r).buffer}for(var a="",o=0;o<n.length;o++)a+=("0"+n.charCodeAt(o).toString(16)).substr(-2);return a},HexToBase64:function(e){for(var t="",n=0;n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return window.btoa(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},findBox:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e.type!==t){if(e&&e.subBox){var r=e.subBox.filter((function(e){return e.type===t}));r.length?r.forEach((function(e){return n.push(e)})):e.subBox.forEach((function(e){return AA.findBox(e,t,n)}))}}else n.push(e);return(n=[].concat(n)).length>1?n:n[0]},padStart:function(e,t,n){for(var r=String(n),i=t>>0,a=Math.ceil(i/r.length),o=[],s=String(e);a--;)o.push(r);return o.join("").substring(0,i-s.length)+s},durationConvert:function(e){var t=0,n=0,r=0;return(e=e.slice(e.indexOf("PT")+2)).indexOf("H")>-1&&e.indexOf("M")>-1&&e.indexOf("S")>-1?(t=parseFloat(e.slice(0,e.indexOf("H"))),n=parseFloat(e.slice(e.indexOf("H")+1,e.indexOf("M"))),r=parseFloat(e.slice(e.indexOf("M")+1,e.indexOf("S")))):e.indexOf("H")>-1&&e.indexOf("M")>-1&&e.indexOf("S")<0?(t=parseFloat(e.slice(0,e.indexOf("H"))),n=parseFloat(e.slice(e.indexOf("H")+1,e.indexOf("M")))):e.indexOf("H")<0&&e.indexOf("M")>-1&&e.indexOf("S")>-1?(n=parseFloat(e.slice(0,e.indexOf("M"))),r=parseFloat(e.slice(e.indexOf("M")+1,e.indexOf("S")))):e.indexOf("H")>-1&&e.indexOf("M")<0&&e.indexOf("S")>-1?(t=parseFloat(e.slice(0,e.indexOf("H"))),r=parseFloat(e.slice(e.indexOf("H")+1,e.indexOf("S")))):e.indexOf("H")<0&&e.indexOf("M")<0&&e.indexOf("S")>-1?r=parseFloat(e.slice(0,e.indexOf("S"))):e.indexOf("H")<0&&e.indexOf("M")>-1&&e.indexOf("S")<0&&(n=parseFloat(e.slice(0,e.indexOf("M")))),3600*t+60*n+r},preFixInterge:function(e,t){return(Array(t).join(0)+e).slice(-t)},toHex:function(){for(var e=[],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e.push(AA.padStart(Number(t).toString(16),2,0))})),e},sum:function(){for(var e=0,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e+=t})),e},toUTF8:function(e){for(var t=encodeURIComponent(e),n=unescape(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r.buffer},fromHex:function(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2)t[n/2]=parseInt(e.substr(n,2),16);return t},fromCharCode:function(e){for(var t="",n=0;n<e.length;n+=16e3){var r=e.subarray(n,n+16e3);t+=String.fromCharCode.apply(null,r)}return t},toBase64:function(e,t){var n=AA.fromCharCode(e);t=void 0===t||t;var r=window.btoa(n).replace(/\+/g,"-").replace(/\//g,"_");return t?r:r.replace(/=*$/,"")},str2hex:function(e){if(""===e)return"";for(var t=[],n=0;n<e.length;n++)t.push(e.charCodeAt(n));return t},bufferToString:function(e){return("0"+Number(e).toString(16)).slice(-2).toUpperCase()},stringToBuffer:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e[n]+e[n+1],16));return new Uint8Array(t)}};AA.toHex=function(){for(var e=[],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e.push(AA.padStart(Number(t).toString(16),2,0))})),e},AA.formatIV=function(e){var t="";return e.forEach((function(e){t+=AA.bufferToString(e)})),t},AA.round=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Number(e.toFixed(t))},AA.isSogou=function(){return window.navigator.userAgent.toLowerCase().indexOf("metasr")>-1},AA.isEdge=function(){var e=window.navigator.userAgent.toLowerCase();return e.indexOf("edge")>-1||e.indexOf("edg/")>-1},AA.offInDestroy=function(e,t,n,r){e.once(r,(function i(){e.off(t,n),e.off(r,i)}))},AA.on=function(e,t,n,r){if(r)e.on(t,n),AA.offInDestroy(e,t,n,r);else{e.on(t,(function r(i){n(i),e.off(t,r)}))}},AA.once=function(e,t,n,r){if(r)e.once(t,n),AA.offInDestroy(e,t,n,r);else{e.once(t,(function r(i){n(i),e.off(t,r)}))}},AA.promisePolyfill=function(){Promise.prototype.finally||(Promise.prototype.finally={finally:function(e){var t=function(t){return Promise.resolve(e()).then(t)};return this.then((function(e){return t((function(){return e}))}),(function(e){return t((function(){return Promise.reject(e)}))}))}}.finally)},AA.transformHeaders=function(e,t){var n=Object.assign({},e);return Object.keys(t).forEach((function(r){var i=t[r];e&&e[r]&&(n[i]=e[r],delete n[r])})),n},AA.generateUniqueKey=function(e){var t=e.vid,n=e.start,r=e.end,i=e.mediaType,a=e.definition,o=e.codecType,s=e.format;return n=n||0,r=r||0,o=o||"h264",s=s||"dash",t&&i?a?"".concat(t,"#").concat(i,"#").concat(a,"#").concat(n,"#").concat(r,"#").concat(o,"#").concat(s):"".concat(t,"#").concat(i,"#").concat(n,"#").concat(r,"#").concat(o,"#").concat(s):null},AA.getDefinition=function(e){if(!e)return null;var t=e.split("#");return t.length>2?t[2]:null},AA.exchangeListUrl=function(e){if(e&&0!==e.length)for(var t=0;t<e.length;t++)AA.exchangeUrl(e[t])},AA.exchangeUrl=function(e){if(e&&e.main_url&&e.backup_url_1){var t=e.main_url,n=e.backup_url_1,r=t.split("?");2===r.length&&-1===n.indexOf("?")?(e.main_url=n+"?"+r[1],e.backup_url_1=r[0]):(e.main_url=n,e.backup_url_1=t)}},AA.validateFragment=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e instanceof ArrayBuffer){try{var n=new Uint8Array(e,4,4),r=String.fromCharCode.apply(null,n);if(2===t.length){var i=t[1]-t[0]+1;if(!(e.byteLength===i))return}if("moof"!==r&&"styp"!==r&&"ftyp"!==r)return!1}catch(a){return!1}return!0}return!1},AA.validateUrlRange=function(e,t){var n=e||[];if(n.length>0)for(var r=0;r<n.length;r++){var i=n[r];if(/([0-9.\-A-Za-z]+)/.test(i)&&t.indexOf(i)>-1)return!0}return!1},AA.isBase64=function(e){return/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/.test(e)};var SA,IA,RA,OA,CA=(SA="vodTimestampSalt",IA=function(e){return e.split("").map((function(e){return e.charCodeAt(0)}))},RA=function(e){return("0"+Number(e).toString(16)).substr(-2)},OA=function(e){return IA(SA).reduce((function(e,t){return e^t}),e)},function(e){return e.split("").map(IA).map(OA).map(RA).join("")}),xA=function(e){var t=function(t){return(n=e,n.split("").map((function(e){return e.charCodeAt(0)}))).reduce((function(e,t){return e^t}),t);var n};return function(e){return e.match(/.{1,2}/g).map((function(e){return parseInt(e,16)})).map(t).map((function(e){return String.fromCharCode(e)})).join("")}}("vodTimestampSalt");AA.getUnionInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(e).concat(CA((new Date).getTime().toString()))},AA.checkUnionInfoExpired=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;if(0===t.indexOf(e)){var r=parseInt(xA(t.slice(e.length))),i=(new Date).getTime()-r;if(i>0&&i<=1e3*n)return!0}return!1},AA.getCookieValue=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document.cookie.split(";"),n=0;n<t.length;n++){var r=t[n].trim().split("=");if(r[0]===e)return r[1]}return null},AA.nowTime=function(){try{return parseInt(performance.now(),10)}catch(e){return(new Date).getTime()}},AA.getBitrateItem=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=t,a=AA.getSelectorList(e,n),o=i.getSuitableBitrate?i.getSuitableBitrate(a,r):i.bitRateAdapter.select(a);return o},AA.getSelectorList=function(e,t){for(var n=e.dynamic_video_list,r=[],i=0;i<n.length;i++){var a=n[i];r.push({bitrate:a.bitrate,definition:a.definition,duration:t})}return r};var PA=AA,DA=Jr,LA=u,MA=Rt.f;DA({target:"Object",stat:!0,forced:Object.defineProperty!==MA,sham:!LA},{defineProperty:MA});var NA=o,UA={},BA=et;UA.f=BA;var FA=NA,jA=Be,HA=UA,VA=Rt.f,WA=function(e){var t=FA.Symbol||(FA.Symbol={});jA(t,e)||VA(t,e,{value:HA.f(e)})};WA("iterator");var GA=Qb.charAt,zA=da,XA=Pn,YA=ec,KA=XA.set,ZA=XA.getterFor("String Iterator");YA(String,"String",(function(e){KA(this,{type:"String Iterator",string:zA(e),index:0})}),(function(){var e,t=ZA(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=GA(n,r),t.index+=e.length,{value:e,done:!1})}));var QA=o,qA=To,JA=Io,$A=lc,eS=zt,tS=et,nS=tS("iterator"),rS=tS("toStringTag"),iS=$A.values,aS=function(e,t){if(e){if(e[nS]!==iS)try{eS(e,nS,iS)}catch(JR){e[nS]=iS}if(e[rS]||eS(e,rS,t),qA[t])for(var n in $A)if(e[n]!==$A[n])try{eS(e,n,$A[n])}catch(JR){e[n]=$A[n]}}};for(var oS in qA)aS(QA[oS]&&QA[oS].prototype,oS);aS(JA,"DOMTokenList");var sS={},cS=C,uS=H,lS=Qn.f,dS=Hc,fS="object"==("undefined"==typeof window?"undefined":i(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];sS.f=function(e){return fS&&"Window"==cS(e)?function(e){try{return lS(e)}catch(JR){return dS(fS)}}(e):lS(uS(e))};var hS=h,pS=K,vS=et,gS=Zn,yS=Jr,mS=o,bS=h,_S=S,kS=u,wS=oe,ES=c,TS=Be,AS=Z,SS=Lt,IS=H,RS=ft,OS=da,CS=_,xS=ts,PS=Qa,DS=Qn,LS=sS,MS=Tr,NS=s,US=Rt,BS=Mo,FS=p,jS=Zn,HS=Se.exports,VS=vn,WS=We,GS=et,zS=UA,XS=WA,YS=function(){var e=pS("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,r=vS("toPrimitive");t&&!t[r]&&gS(t,r,(function(e){return hS(n,this)}),{arity:1})},KS=xs,ZS=Pn,QS=Gi.forEach,qS=pn("hidden"),JS=ZS.set,$S=ZS.getterFor("Symbol"),eI=Object.prototype,tI=mS.Symbol,nI=tI&&tI.prototype,rI=mS.TypeError,iI=mS.QObject,aI=NS.f,oI=US.f,sI=LS.f,cI=FS.f,uI=_S([].push),lI=HS("symbols"),dI=HS("op-symbols"),fI=HS("wks"),hI=!iI||!iI.prototype||!iI.prototype.findChild,pI=kS&&ES((function(){return 7!=xS(oI({},"a",{get:function(){return oI(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=aI(eI,t);r&&delete eI[t],oI(e,t,n),r&&e!==eI&&oI(eI,t,r)}:oI,vI=function(e,t){var n=lI[e]=xS(nI);return JS(n,{type:"Symbol",tag:e,description:t}),kS||(n.description=t),n},gI=function(e,t,n){e===eI&&gI(dI,t,n),SS(e);var r=RS(t);return SS(n),TS(lI,r)?(n.enumerable?(TS(e,qS)&&e[qS][r]&&(e[qS][r]=!1),n=xS(n,{enumerable:CS(0,!1)})):(TS(e,qS)||oI(e,qS,CS(1,{})),e[qS][r]=!0),pI(e,r,n)):oI(e,r,n)},yI=function(e,t){SS(e);var n=IS(t),r=PS(n).concat(kI(n));return QS(r,(function(t){kS&&!bS(mI,n,t)||gI(e,t,n[t])})),e},mI=function(e){var t=RS(e),n=bS(cI,this,t);return!(this===eI&&TS(lI,t)&&!TS(dI,t))&&(!(n||!TS(this,t)||!TS(lI,t)||TS(this,qS)&&this[qS][t])||n)},bI=function(e,t){var n=IS(e),r=RS(t);if(n!==eI||!TS(lI,r)||TS(dI,r)){var i=aI(n,r);return!i||!TS(lI,r)||TS(n,qS)&&n[qS][r]||(i.enumerable=!0),i}},_I=function(e){var t=sI(IS(e)),n=[];return QS(t,(function(e){TS(lI,e)||TS(VS,e)||uI(n,e)})),n},kI=function(e){var t=e===eI,n=sI(t?dI:IS(e)),r=[];return QS(n,(function(e){!TS(lI,e)||t&&!TS(eI,e)||uI(r,lI[e])})),r};wS||(jS(nI=(tI=function(){if(AS(nI,this))throw rI("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?OS(arguments[0]):void 0,t=WS(e),n=function e(n){this===eI&&bS(e,dI,n),TS(this,qS)&&TS(this[qS],t)&&(this[qS][t]=!1),pI(this,t,CS(1,n))};return kS&&hI&&pI(eI,t,{configurable:!0,set:n}),vI(t,e)}).prototype,"toString",(function(){return $S(this).tag})),jS(tI,"withoutSetter",(function(e){return vI(WS(e),e)})),FS.f=mI,US.f=gI,BS.f=yI,NS.f=bI,DS.f=LS.f=_I,MS.f=kI,zS.f=function(e){return vI(GS(e),e)},kS&&(oI(nI,"description",{configurable:!0,get:function(){return $S(this).description}}),jS(eI,"propertyIsEnumerable",mI,{unsafe:!0}))),yS({global:!0,constructor:!0,wrap:!0,forced:!wS,sham:!wS},{Symbol:tI}),QS(PS(fI),(function(e){XS(e)})),yS({target:"Symbol",stat:!0,forced:!wS},{useSetter:function(){hI=!0},useSimple:function(){hI=!1}}),yS({target:"Object",stat:!0,forced:!wS,sham:!kS},{create:function(e,t){return void 0===t?xS(e):yI(xS(e),t)},defineProperty:gI,defineProperties:yI,getOwnPropertyDescriptor:bI}),yS({target:"Object",stat:!0,forced:!wS},{getOwnPropertyNames:_I}),YS(),KS(tI,"Symbol"),VS[qS]=!0;var wI=oe&&!!Symbol.for&&!!Symbol.keyFor,EI=Jr,TI=K,AI=Be,SI=da,II=Se.exports,RI=wI,OI=II("string-to-symbol-registry"),CI=II("symbol-to-string-registry");EI({target:"Symbol",stat:!0,forced:!RI},{for:function(e){var t=SI(e);if(AI(OI,t))return OI[t];var n=TI("Symbol")(t);return OI[t]=n,CI[n]=t,n}});var xI=Jr,PI=Be,DI=he,LI=ve,MI=wI,NI=(0,Se.exports)("symbol-to-string-registry");xI({target:"Symbol",stat:!0,forced:!MI},{keyFor:function(e){if(!DI(e))throw TypeError(LI(e)+" is not a symbol");if(PI(NI,e))return NI[e]}});var UI=Jr,BI=K,FI=Fh,jI=h,HI=S,VI=c,WI=ii,GI=V,zI=G,XI=he,YI=Cp,KI=oe,ZI=BI("JSON","stringify"),QI=HI(/./.exec),qI=HI("".charAt),JI=HI("".charCodeAt),$I=HI("".replace),eR=HI(1..toString),tR=/[\uD800-\uDFFF]/g,nR=/^[\uD800-\uDBFF]$/,rR=/^[\uDC00-\uDFFF]$/,iR=!KI||VI((function(){var e=BI("Symbol")();return"[null]"!=ZI([e])||"{}"!=ZI({a:e})||"{}"!=ZI(Object(e))})),aR=VI((function(){return'"\\udf06\\ud834"'!==ZI("\udf06\ud834")||'"\\udead"'!==ZI("\udead")})),oR=function(e,t){var n=YI(arguments),r=t;if((zI(t)||void 0!==e)&&!XI(e))return WI(t)||(t=function(e,t){if(GI(r)&&(t=jI(r,this,e,t)),!XI(t))return t}),n[1]=t,FI(ZI,null,n)},sR=function(e,t,n){var r=qI(n,t-1),i=qI(n,t+1);return QI(nR,e)&&!QI(rR,i)||QI(rR,e)&&!QI(nR,r)?"\\u"+eR(JI(e,0),16):e};ZI&&UI({target:"JSON",stat:!0,arity:3,forced:iR||aR},{stringify:function(e,t,n){var r=YI(arguments),i=FI(iR?oR:ZI,null,r);return aR&&"string"==typeof i?$I(i,tR,sR):i}});var cR=Tr,uR=Me;Jr({target:"Object",stat:!0,forced:!oe||c((function(){cR.f(1)}))},{getOwnPropertySymbols:function(e){var t=cR.f;return t?t(uR(e)):[]}});var lR=Jr,dR=u,fR=o,hR=S,pR=Be,vR=V,gR=Z,yR=da,mR=Rt.f,bR=Mr,_R=fR.Symbol,kR=_R&&_R.prototype;if(dR&&vR(_R)&&(!("description"in kR)||void 0!==_R().description)){var wR={},ER=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:yR(arguments[0]),t=gR(kR,this)?new _R(e):void 0===e?_R():_R(e);return""===e&&(wR[t]=!0),t};bR(ER,_R),ER.prototype=kR,kR.constructor=ER;var TR="Symbol(test)"==String(_R("test")),AR=hR(kR.toString),SR=hR(kR.valueOf),IR=/^Symbol\((.*)\)[^)]+$/,RR=hR("".replace),OR=hR("".slice);mR(kR,"description",{configurable:!0,get:function(){var e=SR(this),t=AR(e);if(pR(wR,e))return"";var n=TR?OR(t,7,-1):RR(t,IR,"$1");return""===n?void 0:n}}),lR({global:!0,constructor:!0,forced:!0},{Symbol:ER})}var CR,xR={};Object.defineProperty(xR,"__esModule",{value:!0}),xR.default=function(e){for(var t=0,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=!0,o=!1,s=void 0;try{for(var c,u=r[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var l=c.value;t+=l.length}}catch(b){o=!0,s=b}finally{try{!a&&u.return&&u.return()}finally{if(o)throw s}}var d=new e(t),f=0,h=!0,p=!1,v=void 0;try{for(var g,y=r[Symbol.iterator]();!(h=(g=y.next()).done);h=!0){var m=g.value;d.set(m,f),f+=m.length}}catch(b){p=!0,v=b}finally{try{!h&&y.return&&y.return()}finally{if(p)throw v}}return d};var PR=((CR=xR)&&CR.__esModule?CR:{default:CR}).default,DR=function(){function e(){qg(this,e),this.buffer=new Uint8Array(0)}return $g(e,[{key:"write",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){t?e.buffer=PR(Uint8Array,e.buffer,t):console.error(t)}))}}],[{key:"writeUint16",value:function(e){return new Uint8Array([e>>8&255,255&e])}},{key:"writeUint32",value:function(e){return new Uint8Array([e>>24,e>>16&255,e>>8&255,255&e])}}]),e}();Jr({target:"Array",stat:!0},{isArray:ii});var LR=Math.pow(2,32)-1;function MR(e){if(!Array.isArray(e)){for(var t=[],n="",r=0;r<e.length;r++)r%2&&(n=e[r-1]+e[r],t.push(parseInt(n,16)),n="");return t}return e.map((function(e){return parseInt(e,16)}))}var NR=function(){function e(){qg(this,e)}return $g(e,null,[{key:"type",value:function(e){return new Uint8Array([e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)])}},{key:"size",value:function(e){return DR.writeUint32(e)}},{key:"extension",value:function(e,t){return new Uint8Array([e,t>>16&255,t>>8&255,255&t])}},{key:"audioTrak",value:function(t){var n=new DR,r=8,i=e.tkhd({id:t.trackID||2,duration:t.audioDuration,timescale:t.audioTimeScale,width:0,height:0,type:"audio"}),a=t.channelCount,o=t.sampleRate;t.enca&&(a=t.enca.channelCount,o=t.enca.sampleRate);var s=e.mdia({type:"audio",timescale:t.audioTimeScale,duration:t.audioDuration,channelCount:a,sampleRate:o,audioConfig:t.audioConfig,enca:t.enca});return[i,s].forEach((function(e){r+=e.byteLength})),n.write(e.size(r),e.type("trak"),i,s),n.buffer}},{key:"videoTrak",value:function(t){var n=new DR,r=8,i=e.tkhd({id:t.trackID||1,duration:t.videoDuration,timescale:t.videoTimeScale,width:t.width,height:t.height,type:"video"}),a=e.mdia({type:"video",timescale:t.videoTimeScale,duration:t.videoDuration,VideoVisualSampleEntry:t.VideoVisualSampleEntry,VideoCodecConfigurationBox:t.VideoCodecConfigurationBox,encv:t.encv});return[i,a].forEach((function(e){r+=e.byteLength})),n.write(e.size(r),e.type("trak"),i,a),n.buffer}},{key:"btrt",value:function(){var t=new DR,n=new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]);return t.write(e.size(8+n.byteLength),e.type("btrt"),n),t.buffer}},{key:"dinf",value:function(){var t=new DR;return t.write(e.size(36),e.type("dinf"),e.size(28),e.type("dref"),new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1])),t.buffer}},{key:"edts",value:function(t){var n=new DR,r=t.duration,i=t.mediaTime;return n.write(e.size(36),e.type("edts")),n.write(e.size(28),e.type("elst")),n.write(new Uint8Array([0,0,0,1,r>>24&255,r>>16&255,r>>8&255,255&r,i>>24&255,i>>16&255,i>>8&255,255&i,0,0,0,1])),n.buffer}},{key:"enca",value:function(t){var n=new DR,r=t.enca.channelCount,i=t.enca.sampleRate,a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,r,0,16,0,0,0,0,i>>8&255,255&i,0,0]),o=e.esds(t.audioConfig),s=e.sinf(t.enca);return n.write(e.size(16+a.byteLength+o.byteLength+s.byteLength),e.type("enca"),a,o,e.size(8+s.byteLength),e.type("sinf"),s),n.buffer}},{key:"encv",value:function(t){var n=new DR,r=t.width,i=t.height,a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,r>>8&255,255&r,i>>8&255,255&i,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o=new Uint8Array(t.VideoCodecConfigurationBox),s=e.btrt(),c=e.sinf(t.encv),u=e.pasp(t);return n.write(e.size(16+a.byteLength+o.byteLength+s.byteLength+u.byteLength+c.byteLength),e.type("encv"),a,o,s,e.size(8+c.byteLength),e.type("sinf"),c,u),n.buffer}},{key:"esds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[43,146,8,0],n=t.length,r=new DR,i=new Uint8Array([0,0,0,0,3,23+n,0,1,0,4,15+n,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([n]).concat(t).concat([6,1,2]));return r.write(e.size(8+i.byteLength),e.type("esds"),i),r.buffer}},{key:"frma",value:function(t){var n=new DR,r=new Uint8Array([t.data_format.charCodeAt(0),t.data_format.charCodeAt(1),t.data_format.charCodeAt(2),t.data_format.charCodeAt(3)]);return n.write(e.size(8+r.byteLength),e.type("frma"),r),n.buffer}},{key:"ftyp",value:function(t){var n=new DR;return n.write(e.size(t.size),e.type("ftyp"),new Uint8Array(t.data)),n.buffer}},{key:"hdlr",value:function(t){var n=new DR,r=[0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0];return"audio"===t&&(r.splice.apply(r,[8,4].concat([115,111,117,110])),r.splice.apply(r,[24,13].concat([83,111,117,110,100,72,97,110,100,108,101,114,0]))),n.write(e.size(8+r.length),e.type("hdlr"),new Uint8Array(r)),n.buffer}},{key:"mdat",value:function(t){var n=new DR,r=8;return t.samples.forEach((function(e){r+=e.size})),n.write(e.size(r),e.type("mdat")),t.samples.forEach((function(e){n.write(e.buffer)})),n.buffer}},{key:"mdhd",value:function(t){var n=new DR,r=new Uint8Array([0,0,0,0,217,20,37,90,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,21,199,0,0]);return n.write(e.size(12+r.byteLength),e.type("mdhd"),e.extension(0,0),r),n.buffer}},{key:"mdia",value:function(t){var n=new DR,r=8,i=e.mdhd(t.timescale),a=e.hdlr(t.type),o=e.minf(t);return[i,a,o].forEach((function(e){r+=e.byteLength})),n.write(e.size(r),e.type("mdia"),i,a,o),n.buffer}},{key:"mfhd",value:function(t){var n=new DR,r=null;return 1===t.id?(r=DR.writeUint32(e.videoSequence),e.videoSequence+=1):(r=DR.writeUint32(e.audioSequence),e.audioSequence+=1),n.write(e.size(16),e.type("mfhd"),e.extension(0,0),r),n.buffer}},{key:"minf",value:function(t){var n=new DR,r=8,i="video"===t.type?e.vmhd():e.smhd(),a=e.dinf(),o=e.stbl(t);return[i,a,o].forEach((function(e){r+=e.byteLength})),n.write(e.size(r),e.type("minf"),i,a,o),n.buffer}},{key:"moof",value:function(t){var n=new DR,r=8,i=e.mfhd(t),a=e.traf(t);return[i,a].forEach((function(e){r+=e.byteLength})),n.write(e.size(r),e.type("moof"),i,a),n.buffer}},{key:"moov",value:function(t){var n=new DR,r=8,i=e.mvhd(t.duration,t.timeScale),a=e.mvex(t.duration,t.timeScale),o=null;if(o=t.videoCodec?e.videoTrak(t):e.audioTrak(t),t.encv){t.pssh||(t.pssh={kid:t.kid});var s=e.pssh(t.pssh);[i,a,o,s].forEach((function(e){r+=e.byteLength})),n.write(e.size(r),e.type("moov"),i,a,o,s)}else[i,a,o].forEach((function(e){r+=e.byteLength})),n.write(e.size(r),e.type("moov"),i,a,o);return n.buffer}},{key:"mp4a",value:function(t){var n=new DR,r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,t.sampleRate>>8&255,255&t.sampleRate,0,0]),i=e.esds(t.audioConfig);return n.write(e.size(8+r.byteLength+i.byteLength),e.type("mp4a"),r,i),n.buffer}},{key:"mvex",value:function(t,n){var r=new DR,i=DR.writeUint32(t*n);return r.write(e.size(88),e.type("mvex"),e.size(16),e.type("mehd"),e.extension(0,0),i,e.trex1(1),e.trex2(2)),r.buffer}},{key:"mvhd",value:function(t,n){var r=new DR;t*=n;var i=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,255&n,t>>24&255,t>>16&255,t>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3]);return r.write(e.size(8+i.length),e.type("mvhd"),new Uint8Array(i)),r.buffer}},{key:"pasp",value:function(t){var n=new DR,r=t.pixelRatio[0],i=t.pixelRatio[1],a=new Uint8Array([r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i]);return n.write(e.size(8+a.byteLength),e.type("pasp"),a),n.buffer}},{key:"pssh",value:function(t){var n=new DR,r=new Uint8Array([1,0,0,0].concat([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75],[0,0,0,1],MR(t.kid),[0,0,0,0]));return n.write(e.size(8+r.byteLength),e.type("pssh"),r),n.buffer}},{key:"saio",value:function(t){var n=new DR,r=12*t.samples.length+141;2===t.id&&t.isAudioEncryption&&(r=149);var i=new Uint8Array([1,0,0,0,0,0,0,1,0,0,0,0,r>>24&255,r>>16&255,r>>8&255,255&r]);return n.write(e.size(8+i.byteLength),e.type("saio"),i),n.buffer}},{key:"saiz",value:function(t){var n=new DR,r=t.samples.length,i=new Uint8Array([0,0,0,0,16,r>>24&255,r>>16&255,r>>8&255,255&r]);return n.write(e.size(8+i.byteLength),e.type("saiz"),i),n.buffer}},{key:"sbgp",value:function(t){var n=new DR,r=new Uint8Array([114,111,108,108,0,0,0,1,0,0,1,25,0,0,0,1]);return n.write(e.size(12+r.byteLength),e.type("sbgp"),e.extension(0,0),r),n.buffer}},{key:"schi",value:function(t){var n=new DR,r=new Uint8Array([]),i=e.tenc(t);return n.write(e.size(8+r.byteLength+i.byteLength),e.type("schi"),r,i),n.buffer}},{key:"schm",value:function(t){var n=new DR,r=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]);return n.write(e.size(8+r.byteLength),e.type("schm"),r),n.buffer}},{key:"sdtp",value:function(t){var n=new DR;return n.write(e.size(12+t.samples.length),e.type("sdtp"),e.extension(0,0)),t.samples.forEach((function(e){n.write(new Uint8Array(1===t.id?[e.key?32:16]:[16]))})),n.buffer}},{key:"senc",value:function(t){var n=new DR,r=t.samples.length,i=t.sampleOffset,a=r+i,o=1===t.id?16:8,s=1===t.id?2:0,c=[],u=0;return 1===t.id?(c=t.videoSenc.slice(i,a),u=t.videoSencLength):c=t.audioSenc.slice(i,a),u=u||o*r,n.write(e.size(16+u),e.type("senc"),e.extension(0,s)),n.write(DR.writeUint32(r)),c.forEach((function(e){n.write(DR.writeUint32(e.InitializationVector[0])),n.write(DR.writeUint32(e.InitializationVector[1])),e.subsamples&&e.subsamples.length&&(n.write(DR.writeUint16(e.subsamples.length)),e.subsamples.forEach((function(e){n.write(DR.writeUint16(e.BytesOfClearData)),n.write(DR.writeUint32(e.BytesOfProtectedData))})))})),n.buffer}},{key:"sidx",value:function(t){var n=new DR,r=1===t.id?t.videoTimeScale:t.audioTimeScale,i=t.samples[0].duration,a=i*t.samples.length,o=t.sampleOffset*i,s=8;t.samples.forEach((function(e){s+=e.size}));var c=0;if(1===t.id){var u=0,l=t.samples.length,d=t.sampleOffset,f=l+d,h=t.videoSenc.slice(d,f);1===t.id&&h.forEach((function(e){u+=8,e.subsamples&&e.subsamples.length&&(u+=2,u+=6*e.subsamples.length)})),t.videoSencLength=u,c=s+141+12*t.samples.length+u,t.isAudioEncryption&&!t.isVideoEncryption&&(c=s+12*t.samples.length+84)}else c=s+104+4*t.samples.length,t.isAudioEncryption&&(c=s+169+12*t.samples.length);var p=new Uint8Array([0,0,0,0,0,0,0,255&t.id,r>>24&255,r>>16&255,r>>8&255,255&r,o>>24&255,o>>16&255,o>>8&255,255&o,0,0,0,0,0,0,0,1,0,c>>16&255,c>>8&255,255&c,a>>24&255,a>>16&255,a>>8&255,255&a,144,0,0,0]);return n.write(e.size(8+p.byteLength),e.type("sidx"),p),n.buffer}},{key:"sinf",value:function(t){var n=new DR,r=new Uint8Array([]),i=e.frma(t),a=e.schm(),o=e.schi(t);return n.write(r,i,a,o),n.buffer}},{key:"smhd",value:function(){var t=new DR;return t.write(e.size(16),e.type("smhd"),new Uint8Array([0,0,0,0,0,0,0,0])),t.buffer}},{key:"stbl",value:function(t){var n=new DR,r=8,i=e.stsd(t),a=e.stts(),o=e.stsc(),s=e.stsz(),c=e.stco();return[i,a,o,s,c].forEach((function(e){r+=e.byteLength})),n.write(e.size(r),e.type("stbl"),i,a,o,s,c),n.buffer}},{key:"stco",value:function(){var t=new DR,n=new Uint8Array([0,0,0,0,0,0,0,0]);return t.write(e.size(16),e.type("stco"),n),t.buffer}},{key:"stsc",value:function(){var t=new DR,n=new Uint8Array([0,0,0,0,0,0,0,0]);return t.write(e.size(16),e.type("stsc"),n),t.buffer}},{key:"stsd",value:function(t){var n,r=new DR;return n="audio"===t.type?t.enca?e.enca(t):e.mp4a(t):t.encv?e.encv(t):t.VideoVisualSampleEntry,r.write(e.size(16+n.byteLength),e.type("stsd"),e.extension(0,0),new Uint8Array([0,0,0,1]),n),r.buffer}},{key:"stsz",value:function(){var t=new DR,n=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);return t.write(e.size(20),e.type("stsz"),n),t.buffer}},{key:"stts",value:function(){var t=new DR,n=new Uint8Array([0,0,0,0,0,0,0,0]);return t.write(e.size(16),e.type("stts"),n),t.buffer}},{key:"styp",value:function(t){var n=new DR,r=new Uint8Array([109,115,100,104,0,0,0,0,109,115,100,104,109,115,105,120]);return n.write(e.size(8+r.byteLength),e.type("styp"),r),n.buffer}},{key:"tenc",value:function(t){var n=new DR,r=new Uint8Array([0,0,0,0,0,0,255&t.default_IsEncrypted,255&t.default_IV_size].concat(MR(t.default_KID)));return n.write(e.size(8+r.byteLength),e.type("tenc"),r),n.buffer}},{key:"tfdt",value:function(t,n){var r=new DR,i=Math.floor(n/(LR+1)),a=Math.floor(n%(LR+1));return t.isVideoEncryption||t.isAudioEncryption?r.write(e.size(16),e.type("tfdt"),e.extension(0,0),DR.writeUint32(a)):r.write(e.size(20),e.type("tfdt"),e.extension(1,0),DR.writeUint32(i),DR.writeUint32(a)),r.buffer}},{key:"tfhd",value:function(t){var n=new DR,r=16,i=t.flags;return 2&i&&(i=t.flags-2),1&i&&(r+=8),8&i&&(r+=4),16&i&&(r+=4),32&i&&(r+=4),n.write(e.size(r),e.type("tfhd")),n.write(DR.writeUint32(i)),n.write(DR.writeUint32(t.track_id)),1&i&&n.write(DR.writeUint64(t.base_data_offset)),8&i&&n.write(DR.writeUint32(t.default_sample_duration)),16&i&&n.write(DR.writeUint32(t.default_sample_size)),32&i&&n.write(DR.writeUint32(t.default_sample_flags)),n.buffer}},{key:"tkhd",value:function(t){var n=new DR,r=t.id,i=t.duration*t.timeScale,a=t.width,o=t.height,s=t.type,c=new Uint8Array([0,0,0,3,0,0,0,0,217,172,236,86,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,i>>24&255,i>>16&255,i>>8&255,255&i,0,0,0,0,0,0,0,0,0,0,0,"video"===s?1:0,"audio"===s?1:0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a>>8&255,255&a,0,0,o>>8&255,255&o,0,0]);return n.write(e.size(8+c.byteLength),e.type("tkhd"),c),n.buffer}},{key:"traf",value:function(t){var n=new DR,r=8,i=e.tfhd(t.id),a=e.tfdt(t,t.time);if(t.isVideoEncryption||t.isAudioEncryption)if(t.isVideoEncryption)if(1===t.id){var o=e.saiz(t),s=e.saio(t),c=e.trun1(t),u=e.senc(t);[i,a,o,s,c,u].forEach((function(e){r+=e.byteLength})),n.write(e.size(r),e.type("traf"),i,a,o,s,c,u)}else if(t.isAudioEncryption){var l=e.sbgp(t),d=e.saiz(t),f=e.saio(t),h=e.senc(t),p=e.trun1(t);[i,a,l,d,f,h,p].forEach((function(e){r+=e.byteLength})),n.write(e.size(r),e.type("traf"),i,a,l,d,f,h,p)}else{var v=e.sbgp(t),g=e.trun1(t);[i,a,v,g].forEach((function(e){r+=e.byteLength})),n.write(e.size(r),e.type("traf"),i,a,v,g)}else if(1===t.id){var y=e.trun1(t);[i,a,y].forEach((function(e){r+=e.byteLength})),n.write(e.size(r),e.type("traf"),i,a,y)}else{var m=e.sbgp(t),b=e.saiz(t),_=e.saio(t),k=e.senc(t),w=e.trun1(t);[i,a,m,b,_,k,w].forEach((function(e){r+=e.byteLength})),n.write(e.size(r),e.type("traf"),i,a,m,b,_,k,w)}else{var E=e.sdtp(t),T=e.trun(t,E.byteLength);[i,a,E,T].forEach((function(e){r+=e.byteLength})),n.write(e.size(r),e.type("traf"),i,a,E,T)}return n.buffer}},{key:"trex",value:function(t){var n=new DR,r=new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return n.write(e.size(8+r.byteLength),e.type("trex"),r),n.buffer}},{key:"trex1",value:function(t){var n=new DR,r=new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,2,0,0,0,0,0,0,1,0,0]);return n.write(e.size(8+r.byteLength),e.type("trex"),r),n.buffer}},{key:"trex2",value:function(t){var n=new DR,r=new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,4,0,0,0,0,0,2,0,0,0]);return n.write(e.size(8+r.byteLength),e.type("trex"),r),n.buffer}},{key:"trun",value:function(t,n){var r=t.id,i=1===r?16:12,a=new DR,o=DR.writeUint32(t.samples.length),s=DR.writeUint32(96+i*t.samples.length+n);return a.write(e.size(20+i*t.samples.length),e.type("trun"),e.extension(0,t.flags),o,s),t.samples.forEach((function(e,t){a.write(DR.writeUint32(e.duration)),a.write(DR.writeUint32(e.size)),1===r?(a.write(DR.writeUint32(e.key?33554432:16842752)),a.write(DR.writeUint32(e.offset))):a.write(DR.writeUint32(16777216))})),a.buffer}},{key:"trun1",value:function(t){var n=t.id,r=1===n?12:4,i=new DR,a=DR.writeUint32(t.samples.length),o=null;if(1===t.id){var s=0;1===t.id&&(s=t.videoSencLength),o=DR.writeUint32(12*t.samples.length+s+149),!t.isVideoEncryption&&t.isAudioEncryption&&(o=DR.writeUint32(t.samples.length*r+92))}else{var c=4*t.samples.length+120;t.isAudioEncryption&&(c=12*t.samples.length+177),o=DR.writeUint32(c)}return i.write(e.size(20+r*t.samples.length),e.type("trun"),e.extension(0,t.flags),a,o),t.samples.forEach((function(e){i.write(DR.writeUint32(e.size)),1===n&&(i.write(DR.writeUint32(e.key?33554432:65536)),i.write(DR.writeUint32(e.offset)))})),i.buffer}},{key:"vmhd",value:function(){var t=new DR;return t.write(e.size(20),e.type("vmhd"),new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])),t.buffer}},{key:"av01",value:function(t){var n=new DR,r=t.width,i=t.height,a=e.av1C(t),o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,r>>8&255,255&r,i>>8&255,255&i,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s=e.btrt(),c=e.pasp(t);return n.write(e.size(8+o.byteLength+a.byteLength+s.byteLength+c.byteLength),e.type("av01"),o,a,s,c),n.buffer}},{key:"av1C",value:function(t){var n=new DR,r=new Uint8Array(t.av1C);return n.write(e.size(8+r.byteLength),e.type("av1C"),r),n.buffer}},{key:"avc1",value:function(t){var n=new DR,r=t.width,i=t.height,a=e.avcC(t),o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,r>>8&255,255&r,i>>8&255,255&i,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s=e.btrt(),c=e.pasp(t);return n.write(e.size(8+o.byteLength+a.byteLength+s.byteLength+c.byteLength),e.type("avc1"),o,a,s,c),n.buffer}},{key:"avcC",value:function(t){var n=new DR,r=t.sps,i=t.pps,a=new Uint8Array([1,r[1],r[2],r[3],255,225].concat([r.length>>>8&255,255&r.length]).concat(r).concat(1).concat([i.length>>>8&255,255&i.length]).concat(i));return n.write(e.size(8+a.byteLength),e.type("avcC"),a),n.buffer}}]),e}();NR.videoSequence=1,NR.audioSequence=1;var UR,BR=NR,FR=function(){function e(){var t,n;qg(this,e);var r=new Promise((function(e,r){t=e,n=r}));return r.resolve=t,r.reject=n,r}return $g(e,[{key:"resolve",value:function(e){}},{key:"reject",value:function(e){}}]),e}();function jR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var HR=$g((function e(t,n,r,i,a,o){qg(this,e),this.type=t,this.codecs=n,this.visualEntryBox=r,this.configurationBox=i,this.types=a,this.logCodeType=o})),VR="avc",WR="av1";jR(UR={},VR,new HR("avc","avc1.64001E","avc1","avcC",["h264"],"h264")),jR(UR,WR,new HR("av1","av01.0.08M.08","av01","av1C",["av1"],"av1"));var GR={mse:function(){}},zR=self.crypto||self.msCrypto,XR=PA.findBox,YR=function(e,t,n){var r=null;if(e===VR&&(r=KR(t,n)),e===WR&&(r=function(e,t){var n=QR(e,t),r=n.width,i=n.height,a=n.pixelRatio,o=n.av1CBox,s=n.videoCodec,c=BR.av01({width:r,height:i,pixelRatio:a,av1C:o.data}),u=BR.av1C({av1C:o.data});return{VideoVisualSampleEntry:c,VideoCodecConfigurationBox:u,videoCodec:s}}(t,n)),!r)throw new Error("".concat(e," not support"));return r},KR=function(e,t){var n=ZR(e,t),r=n.width,i=n.height,a=n.videoCodec,o=n.sps,s=n.pps,c=n.pixelRatio;return{VideoVisualSampleEntry:BR.avc1({sps:o,pps:s,width:r,height:i,pixelRatio:c}),VideoCodecConfigurationBox:BR.avcC({sps:o,pps:s}),videoCodec:a}},ZR=function(e,t){var n,r,i,a,o,s=[1,1],c=XR(t,"avcC");"encv"===e.type&&(c=XR(e,"avcC"));var u=XR(t,"tkhd");return c?(i="".concat(e.type,".")+PA.toHex(c.profile,c.profileCompatibility,c.AVCLevelIndication).join(""),a=c.sps,s=[c.spsInfo.par_ratio.width,c.spsInfo.par_ratio.height],c.spsInfo.codec_size&&(n=c.spsInfo.codec_size.width,r=c.spsInfo.codec_size.height),o=c.pps&&c.pps.map((function(e){return Number("0x".concat(e))}))):i="".concat(e.type),u&&!n&&(n=u.width,r=u.height),{width:n,height:r,videoCodec:i,sps:a,pps:o,pixelRatio:s}};var QR=function(e,t){var n,r,i,a=[1,1],o=XR(t,"av1C");"encv"===e.type&&(n=e.width,r=e.height,o=XR(e,"av1C"));var s=XR(t,"tkhd");return o?(i="".concat(e.type,"."),a=[1,1]):i="".concat(e.type),s&&!n&&(n=s.width,r=s.height),{width:n,height:r,videoCodec:i,pixelRatio:a,av1CBox:o}},qR={decryptHeader:function(e,t){for(var n=this,r=new DR,i=null,a=null,o=0;o<e.boxes.length;o++){var s=e.boxes[o];if("ftyp"===s.type){a=s;break}}return e.boxes.forEach((function(e){if("moov"===e.type){var o=function(e,t){var n,r,i,a,o,s,c,u,l=XR(e,"mvhd"),d=XR(e,"trak"),f=XR(e,"udta"),h=XR(d,"hdlr"),p=XR(d,"mdhd");if(h&&p){var v=XR(d,"stsd"),g=XR(d,"tkhd"),y=v.subBox[0],m={};if("vide"===h.handleType&&(i=d,a=p.timescale,m=YR(t,y,d)),"soun"===h.handleType){r=d;var b=XR(d,"esds"),_=XR(d,"mp4a"),k=XR(d,5);o=p.timescale,n=b?"".concat(y.type,".")+PA.toHex(b.subBox[0].subBox[0].typeID)+".".concat(b.subBox[0].subBox[0].subBox[0].type):"".concat(y.type),k&&k.EScode&&(u=k.EScode.map((function(e){return Number("0x".concat(e))}))),_&&(s=_.channelCount,c=_.sampleRate);var w=XR(d,"enca");w&&(s=w.channelCount,c=w.sampleRate)}var E=PA.findBox(d,"stsc"),T=PA.findBox(d,"stsz"),A=PA.findBox(d,"stts"),S=PA.findBox(d,"stco"),I=l.duration;if(0===I){var R=XR(e,"mehd");R&&(I=R.fragment_duration)}return Object.assign({audioCodec:n,audioTrak:r,videoTrak:i,createTime:l.createTime,modifyTime:l.modifyTime,duration:I/l.timeScale,timeScale:l.timeScale,videoTimeScale:a,audioTimeScale:o,pixelRatio:[1,1],channelCount:s,sampleRate:c,audioConfig:u,stsc:E,stsz:T,stts:A,stco:S,udta:f,trackID:g&&g.trackID},m)}}(e,t);if(o.udta){var s=XR(o.udta,"meta");i=s&&s.vid}o.videoCodec?n.videoMeta=o:n.audioMeta=o,r.write(BR.ftyp(a)),r.write(BR.moov(o))}})),{buffer:r.buffer,vid:i}},decryptBody:function(e,t,n,r,i,a){var o=new FR;try{var s=new DR,c=null,u=null;e.boxes.forEach((function(e){if("styp"===e.type||"sidx"===e.type)s.write(BR.size(e.size)),s.write(BR.type(e.type)),s.write(new Uint8Array(e.data));else if("moof"===e.type){c=XR(e,"senc");var l=XR(e,"saio"),d=XR(e,"saiz"),f=XR(e,"tfhd");u=XR(e,"trun");var h=0;c&&c.samples.length?(h=c.data.byteLength+8,l&&l.data&&(h=h+l.data.byteLength+8),d&&d.data&&(h=h+d.data.byteLength+8)):(f&&2&f.flags&&(h=4),c=null);!function e(t){var n=t.size,r=t.type;if("saio"!==r&&"saiz"!==r&&"senc"!==r)if("moof"!==r&&"traf"!==r||(n-=h),"tfhd"===r&&2&f.flags)s.write(BR.tfhd(f));else if(s.write(BR.size(n)),s.write(BR.type(r)),t.subBox&&t.subBox.length)t.subBox.forEach((function(t){e(t)}));else if("trun"===r){var i=new DataView(t.data,0);i.setInt32(8,i.getInt32(8)-h),s.write(new Uint8Array(i.buffer))}else s.write(new Uint8Array(t.data))}(e)}else"mdat"===e.type&&(s.write(BR.size(e.size)),s.write(BR.type(e.type)),c?a?qR.decryptWithRaw(c,u,e,n,r,i).then((function(e){e?(s.write(e),o.resolve(s.buffer)):o.resolve(null)})):qR.decryptWithCryptoJsWord(c,u,e,t,n,r).then((function(e){e?(s.write(e),o.resolve(s.buffer)):o.resolve(null)})):(s.write(new Uint8Array(e.data)),o.resolve(s.buffer)))}))}catch(l){GR.mse("%c dashplayer:mse decrypt body error","color:orange"),o.resolve(null)}return o},decryptWithCryptoJsWord:function(e,t,n,r,i,a){var o=new FR;try{var s=new DR,c=new Uint8Array(n.data);e.samples.forEach((function(e,n){var i=e.InitializationVector;if(e.subsamples&&e.subsamples.length){var a=[],o=[];e.subsamples.forEach((function(e){var t=e.BytesOfClearData+e.BytesOfProtectedData,n=c.slice(0,t);a.push(n.slice(0,e.BytesOfClearData)),o.push(n.slice(e.BytesOfClearData)),c=c.slice(t)}));var u=new DR;u.write.apply(u,o);var l=qR.decryptWordArray(u.buffer,r,i);a.forEach((function(e,t){var n=o[t].length,r=l.slice(0,n);s.write(e),s.write(r),l=l.slice(n)}))}else{var d=t.samples[n];s.write(qR.decryptWordArray(c.slice(0,d),r,i)),c=c.slice(d)}}));var u=s.buffer;o.resolve(u)}catch(JR){GR.mse("%c dashplayer:mse decryptWithCryptoJsWord error","color:orange"),o.resolve(null)}return o},decryptWithRaw:function(e,t,n,r,i,a){var o=new FR,s=new DR,c=new Uint8Array(n.data),u=[];return e.samples.forEach((function(e,n){var r=e.InitializationVector;if(e.subsamples&&e.subsamples.length){var i=[],a=[];e.subsamples.forEach((function(e){var t=e.BytesOfClearData+e.BytesOfProtectedData,n=c.slice(0,t);i.push(n.slice(0,e.BytesOfClearData)),a.push(n.slice(e.BytesOfClearData)),c=c.slice(t)})),u.push({iv:r,encodeBuffers:i,encData:a})}else{var o=t.samples[n];u.push({iv:r,encData:[c.slice(0,o)]}),c=c.slice(o)}})),this.decryptSamples(u,s,o,a),o},decryptSamples:function(e,t,r,i){if(e.length>0){var a=e.shift(),o=a.encData,s=new DR;s.write.apply(s,n(o)),qR.decryptSample(s.buffer,a.iv,i).then((function(n){var s=a.encodeBuffers;if(s){var c=new Uint8Array(n);s.forEach((function(e,n){var r=o[n].length,i=c.slice(0,r);t.write(e),t.write(i),c=c.slice(r)}))}else t.write(new Uint8Array(n));qR.decryptSamples(e,t,r,i)}),(function(){r.resolve(null),GR.mse("%c dashplayer:mse decryptSamples err","color:orange")}))}else r.resolve(t.buffer)},decryptSample:function(e,t,n){var r=new Uint8Array(t);return zR.subtle.decrypt({name:"AES-CTR",counter:r.buffer,length:64},n,e)},decrypt:function(e,t,n){var r=Gy.parse(t),i=Gy.parse(PA.formatIV(n));return Km.decrypt(Zm(e),r,{iv:i,mode:qm,padding:eb}).toString()},decryptWordArray:function(e,t,n){var r=Gy.parse(t),i=Gy.parse(PA.formatIV(n)),a=Wy.create(new Uint8Array(e)),o=Km.decrypt(_m.create({ciphertext:a}),r,{iv:i,mode:qm,padding:eb});return qR.wordArrayToUint8Array(o)},wordArrayToUint8Array:function(e){for(var t=e.sigBytes,n=e.words,r=new Uint8Array(t),i=0,a=0;i!==t;){var o=n[a++];if(r[i++]=(4278190080&o)>>>24,i===t)break;if(r[i++]=(16711680&o)>>>16,i===t)break;if(r[i++]=(65280&o)>>>8,i===t)break;r[i++]=255&o}return r}};onmessage=function(e){var t=this;if("decryptBody"===e.data.method){var n=e.data.args;qR.decryptBody(n.parsed,n.keyValue,n.isVideo,n.id,n.aeskey,n.useRaw).then((function(n){t.postMessage({method:"decryptBody",id:e.data.id,args:{data:n}})}))}else if("decryptHeader"===e.data.method){var r=qR.decryptHeader(e.data.args.parsed,e.data.codecsType);this.postMessage({method:"decryptHeader",id:e.data.id,args:{data:r.buffer,vid:r.vid}})}else"log"===e.data.method&&e.data.value&&console.log&&(GR.mse=console.log)}}()}),null)}).call(this,n("fd62a254c065d2a17c3d"))},"57bbfaace4b62097c464":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r={ERROR:0,INITIAL:1,READY:2,ATTACHING:3,ATTACHED:4,NOTALLOW:5,RUNNING:6,ENDED:7,DESTROYED:8},i=["ERROR","INITIAL","READY","ATTACHING","ATTACHED","NOTALLOW","RUNNING","ENDED","DESTROYED"]},"724d463499897903d0b9":function(e,t,n){"use strict";n.d(t,"a",(function(){return J}));n("7cb145ff51d539d4bd6d"),n("e502d00ea6e2f0b47ea0"),n("765c3fe4871c97a98a7a"),n("b9c487edb4e7fbfb9158");var r=n("f8c988483231af8381d2"),i=n.n(r),a=n("cc3ba8f20ced7ad84834"),o=n.n(a),s=n("833d0deece77cf88ba93"),c=n.n(s),u=n("4b84106568f6cb3ecbe0"),l=n.n(u),d=n("f07456edab2c7b12cc0c"),f=n.n(d),h=n("f28ded8c7364f6de9abc"),p=n.n(h),v=n("e93695117ac1f764190a"),g=n.n(v),y=n("d8c910279447f3b2f170"),m=n.n(y),b=(n("fce1e10c0a59a8bd89e4"),n("d21c3f3d4c981a871761"),n("af4e4e4030596b369b13"),n("16da3d83ca2b978dbac3"),n("733fd62058ae078d16d8"),n("2f22f453e80dcd80946e"),n("99db023933d00eead7df"),n("a5b5b7a2e2288b74b453"),n("a2a80d3346615eb09116"),n("c9461f50c5d53d77beb2"),n("def7fc9a4ab8c857edaf"),n("8c975a8e48558997ef6e"),n("b82b8efbfaa040833fc3"),n("cf2c3842fd8b1c54ed12"),n("098ff896a5dab77f75b3"),n("4dae26d380810c71f7a0"),n("5d291d9463c9af975b92")),_=n.n(b),k=n("34c0f6a91c0bdd59090c"),w=n("afa39434f067edd8798c"),E=n("ab6ffd1e2d3463998345"),T=n("1dbcb949bab5b5ef954b");function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}function S(e,t){this&&this.emit&&("error"===e?this.errorHandler(e):this.emit(e,t))}function I(e,t){return function(n){var r={player:t,eventName:e,originalEvent:n,detail:n.detail||{},timeStamp:n.timeStamp,currentTime:t.currentTime,duration:t.duration,paused:t.paused,ended:t.ended,isInternalOp:!!t._internalOp[n.type],muted:t.muted,volume:t.volume,host:k.a.getHostFromUrl(t.currentSrc),vtype:t.vtype};if(t.removeInnerOP(n.type),"timeupdate"===e&&(t._currentTime=t.video&&t.video.currentTime),"durationchange"===e&&(t._duration=t.video.duration),"volumechange"===e&&(r.isMutedChange=t._lastMuted!==t.muted,t._lastMuted=t.muted),t.videoEventMiddleware[e])try{t.videoEventMiddleware[e].call(t,r,S.bind(t))}catch(i){throw S.call(t,e,r),i}else S.call(t,e,r)}}var R=function(e){f()(n,e);var t=A(n);function n(e){var r;i()(this,n),(r=t.call(this,e))._hasStart=!1,r._currentTime=0,r._duration=0,r._internalOp={},r._lastMuted=!1,r.vtype="MP4",r.videoConfig=Object.assign({},{controls:!1,autoplay:e.autoplay,playsinline:e.playsinline,"x5-playsinline":e.playsinline,"webkit-playsinline":e.playsinline,"x5-video-player-fullscreen":e["x5-video-player-fullscreen"]||e.x5VideoPlayerFullscreen,"x5-video-orientation":e["x5-video-orientation"]||e.x5VideoOrientation,airplay:e.airplay,"webkit-airplay":e.airplay,tabindex:2,mediaType:e.mediaType||"video"},e.videoConfig,e.videoAttributes);var a=e["x5-video-player-type"]||e.x5VideoPlayerType;return w.a.isWeixin&&w.a.os.isAndroid&&a&&(r.videoConfig["x5-video-player-type"]=a,delete r.videoConfig.playsinline,delete r.videoConfig["webkit-playsinline"],delete r.videoConfig["x5-playsinline"]),e.loop&&(r.videoConfig.loop="loop"),r.video=k.a.createDom(r.videoConfig.mediaType,"",r.videoConfig,""),e.defaultPlaybackRate&&(r.video.defaultPlaybackRate=r.video.playbackRate=e.defaultPlaybackRate),"Number"===k.a.typeOf(e.volume)&&(r.volume=e.volume),e.autoplayMuted&&(r.video.muted=!0,r._lastMuted=!0),e.autoplay&&(r.video.autoplay=!0),r._interval={},r.videoEventMiddleware={},r.attachVideoEvents(),r}return o()(n,[{key:"setEventsMiddleware",value:function(e){var t=this;Object.keys(e).map((function(n){t.videoEventMiddleware[n]=e[n]}))}},{key:"removeEventsMiddleware",value:function(e){var t=this;Object.keys(e).map((function(e){delete t.videoEventMiddleware[e]}))}},{key:"attachVideoEvents",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.video;this._evHandlers||(this._evHandlers=T.VIDEO_EVENTS.map((function(t){var n="on".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));return"function"==typeof e[n]&&e.on(t,e[n]),m()({},t,I(t,e))}))),this._evHandlers.forEach((function(e){var n=Object.keys(e)[0];t.addEventListener(n,e[n],!1)}))}},{key:"detachVideoEvents",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.video;this._evHandlers.forEach((function(e){var n=Object.keys(e)[0];t.removeEventListener(n,e[n],!1)})),this._evHandlers.forEach((function(t){var n=Object.keys(t)[0],r="on".concat(n.charAt(0).toUpperCase()).concat(n.slice(1));"function"==typeof e[r]&&e.off(n,e[r])})),this._evHandlers=null}},{key:"_attachSourceEvents",value:function(e,t){var n=this;e.removeAttribute("src"),t.forEach((function(e){n.video.appendChild(k.a.createDom("source","",{src:"".concat(e.src),type:"".concat(e.type||"")}))}));var r=e.children;if(r){this._videoSourceCount=r.length,!this._sourceError&&(this._sourceError=function(e){n._videoSourceCount--,0===n._videoSourceCount&&(n.videoEventMiddleware.error?n.videoEventMiddleware.error.call(n,e,(function(){n.errorHandler("error")})):n.errorHandler("error",{code:4,message:"sources load error"}))});for(var i=0;i<r.length;i++)r[i].addEventListener("error",this._sourceError)}}},{key:"_detachSourceEvents",value:function(e){var t=e.children;if(t&&0!==t.length&&this._sourceError){for(var n=0;n<t.length;n++)t[n].removeEventListener("error",this._sourceError);for(;t.length>0;)e.removeChild(t[0])}}},{key:"errorHandler",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.video&&(this.video.error||t)){var n=this.video.error||t,r=n.code?E.a[n.code]:"other";n.message;this.video.currentSrc||(n={code:6,message:"empty_src"}),this.emit(e,new E.b(this,{errorType:r,errorCode:n.code,errorMessage:n.message||"",mediaError:n}))}}},{key:"destroy",value:function(){for(var e in this.video&&(this.video.pause&&(this.video.pause(),this.video.muted=!0),this.video.removeAttribute("src"),this.video.load()),this._currentTime=0,this._duration=0,this.videoConfig=null,this._interval)clearInterval(this._interval[e]),this._interval[e]=null;this.detachVideoEvents(),this.video=null,this.videoEventMiddleware={},this.removeAllListeners()}},{key:"play",value:function(){return this.video?this.video.play():null}},{key:"pause",value:function(){this.video&&this.video.pause()}},{key:"canPlayType",value:function(e){return!!this.video&&this.video.canPlayType(e)}},{key:"getBufferedRange",value:function(e){var t=[0,0];if(!this.video)return t;e||(e=this.video.buffered);var n=this.video.currentTime;if(e)for(var r=0,i=e.length;r<i&&(t[0]=e.start(r),t[1]=e.end(r),!(t[0]<=n&&n<=t[1]));r++);return t[0]-n<=0&&n-t[1]<=0?t:[0,0]}},{key:"autoplay",get:function(){return!!this.video&&this.video.autoplay},set:function(e){this.video&&(this.video.autoplay=e)}},{key:"buffered",get:function(){return this.video?this.video.buffered:null}},{key:"buffered2",get:function(){return this.video?k.a.getBuffered2(this.video.buffered):null}},{key:"bufferedPoint",get:function(){var e={start:0,end:0};if(!this.video)return e;var t=this.video.buffered;if(!t||0===t.length)return e;for(var n=0;n<t.length;n++)if((t.start(n)<=this.currentTime||t.start(n)<.1)&&t.end(n)>=this.currentTime)return{start:t.start(n),end:t.end(n)};return e}},{key:"crossOrigin",get:function(){return this.video?this.video.crossOrigin:""},set:function(e){this.video&&(this.video.crossOrigin=e)}},{key:"currentSrc",get:function(){return this.video?this.video.currentSrc:""},set:function(e){this.video&&(this.video.currentSrc=e)}},{key:"currentTime",get:function(){return this.video?void 0!==this.video.currentTime?this.video.currentTime:this._currentTime:0},set:function(e){this.video&&(this.video.currentTime=e)}},{key:"defaultMuted",get:function(){return!!this.video&&this.video.defaultMuted},set:function(e){this.video&&(this.video.defaultMuted=e)}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return!!this.video&&this.video.ended}},{key:"error",get:function(){return this.video.error}},{key:"errorNote",get:function(){if(!this.video.error)return"";return["MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"][this.video.error.code-1]}},{key:"loop",get:function(){return!!this.video&&this.video.loop},set:function(e){this.video&&(this.video.loop=e)}},{key:"muted",get:function(){return!!this.video&&this.video.muted},set:function(e){this.video&&this.video.muted!==e&&(this._lastMuted=this.video.muted,this.video.muted=e)}},{key:"networkState",get:function(){return this.video.networkState}},{key:"paused",get:function(){return!this.video||this.video.paused}},{key:"playbackRate",get:function(){return this.video?this.video.playbackRate:0},set:function(e){this.video&&e!==1/0&&(this.video.defaultPlaybackRate=e,this.video.playbackRate=e)}},{key:"played",get:function(){return this.video?this.video.played:null}},{key:"preload",get:function(){return!!this.video&&this.video.preload},set:function(e){this.video&&(this.video.preload=e)}},{key:"readyState",get:function(){return this.video.readyState}},{key:"seekable",get:function(){return!!this.video&&this.video.seekable}},{key:"seeking",get:function(){return!!this.video&&this.video.seeking}},{key:"src",get:function(){return this.video?this.video.src:""},set:function(e){this.video&&(this.emit(T.URL_CHANGE,e),this.emit(T.WAITING),this._currentTime=0,this._duration=0,/^blob/.test(this.video.currentSrc)||/^blob/.test(this.video.src)?this.onWaiting():(this._detachSourceEvents(this.video),"Array"===k.a.typeOf(e)?this._attachSourceEvents(this.video,e):this.video.src=e,this.load()))}},{key:"volume",get:function(){return this.video?this.video.volume:0},set:function(e){e!==1/0&&this.video&&(this.video.volume=e)}},{key:"addInnerOP",value:function(e){this._internalOp[e]=!0}},{key:"removeInnerOP",value:function(e){delete this._internalOp[e]}},{key:"emit",value:function(e,t){for(var r,i=arguments.length,a=new Array(i>2?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o];(r=l()(g()(n.prototype),"emit",this)).call.apply(r,[this,e,t].concat(a))}},{key:"on",value:function(e,t){for(var r,i=arguments.length,a=new Array(i>2?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o];(r=l()(g()(n.prototype),"on",this)).call.apply(r,[this,e,t].concat(a))}},{key:"once",value:function(e,t){for(var r,i=arguments.length,a=new Array(i>2?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o];(r=l()(g()(n.prototype),"once",this)).call.apply(r,[this,e,t].concat(a))}},{key:"off",value:function(e,t){for(var r,i=arguments.length,a=new Array(i>2?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o];(r=l()(g()(n.prototype),"off",this)).call.apply(r,[this,e,t].concat(a))}},{key:"offAll",value:function(){l()(g()(n.prototype),"removeAllListeners",this).call(this)}}]),n}(_.a),O=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};i()(this,e),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=t}return o()(e,[{key:"openDB",value:function(e){var t=this,n=this,r=this.myDB.version||1,i=n.indexedDB.open(n.myDB.name,r);i.onerror=function(e){},i.onsuccess=function(r){t.myDB.db=r.target.result,e.call(n)},i.onupgradeneeded=function(e){var t=e.target.result;e.target.transaction,t.objectStoreNames.contains(n.myDB.ojstore.name)||t.createObjectStore(n.myDB.ojstore.name,{keyPath:n.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){this.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(e,t){for(var n,r=this.myDB.db.transaction(e,"readwrite").objectStore(e),i=0;i<t.length;i++)(n=r.add(t[i])).onerror=function(){},n.onsuccess=function(){}}},{key:"putData",value:function(e,t){for(var n,r=this.myDB.db.transaction(e,"readwrite").objectStore(e),i=0;i<t.length;i++)(n=r.put(t[i])).onerror=function(){},n.onsuccess=function(){}}},{key:"getDataByKey",value:function(e,t,n){var r=this,i=this.myDB.db.transaction(e,"readwrite").objectStore(e).get(t);i.onerror=function(){n.call(r,null)},i.onsuccess=function(e){var t=e.target.result;n.call(r,t)}}},{key:"deleteData",value:function(e,t){this.myDB.db.transaction(e,"readwrite").objectStore(e).delete(t)}},{key:"clearData",value:function(e){this.myDB.db.transaction(e,"readwrite").objectStore(e).clear()}}]),e}(),C=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],x=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],P=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],D=n("3b76dd97653dea47ddc2"),L=n("7367695471878cd60218"),M=(n("76778f89046144ac3189"),n("80c08e8fdbb6de44a743"),n("e270d63fe4abcc5b03f7"),function(){function e(){var t=this;if(i()(this,e),this.__handlers=[],this.timeStamp=0,this.observer=null,window.ResizeObserver)try{this.observer=new window.ResizeObserver((function(e){var n=(new Date).getTime();n-t.timeStamp<100||(t.timeStamp=n,t.__trigger(e))})),this.timeStamp=(new Date).getTime()}catch(n){console.error(n)}}return o()(e,[{key:"addObserver",value:function(e,t){if(this.observer){this.observer&&this.observer.observe(e);for(var n=this.__handlers,r=-1,i=0;i<n.length;i++)n[i]&&e===n[i].target&&(r=i);r>-1?this.__handlers[r].handler=t:this.__handlers.push({target:e,handler:t})}}},{key:"unObserver",value:function(e){var t=-1;this.__handlers.map((function(n,r){e===n.target&&(t=r)}));try{this.observer&&this.observer.unobserve(e)}catch(n){}this.observer&&this.observer.unobserve(e),t>-1&&this.__handlers.splice(t,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(e){for(var t=this.__handlers,n=0;n<t.length;n++)if(t[n]&&e===t[n].target){try{t[n].handler(e)}catch(r){console.error(r)}return!0}return!1}},{key:"__trigger",value:function(e){for(var t=0;t<e.length;t++){if(this.__runHandler(e[t].target))break}}}]),e}()),N=null;var U={init:function(e){var t,n,r=e._pluginInfoId;r||(r=(new Date).getTime(),e._pluginInfoId=r),this.pluginGroup||(this.pluginGroup={}),!e.config.closeResizeObserver&&(t=e.root,n=function(){e.resize()},N||(N=new M),N.addObserver(t,n)),0===Object.keys(this.pluginGroup).length&&(e.isUserActive=!0),this.pluginGroup[r]={_player:e,_originalOptions:e.config||{}}},checkPlayerRoot:function(e){if(this.pluginGroup){for(var t=Object.keys(this.pluginGroup),n=0;n<t.length;n++){var r=this.pluginGroup[t[n]]._player;if(r.root===e)return r}return null}return null},lazyRegister:function(e,t){var n=this,r=t.timeout||1500;return Promise.race([t.loader().then((function(t){var r;r=t&&t.__esModule?t.default:t,n.register(e,r,t.options)})),new Promise((function(e,t){setTimeout((function(){t(new Error("timeout"))}),r)}))])},register:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&t&&"function"==typeof t&&void 0!==t.prototype){var r=e._pluginInfoId;r&&this.pluginGroup&&this.pluginGroup[r]||(this.init(e),r=e._pluginInfoId),this.pluginGroup[r]._plugins||(this.pluginGroup[r]._plugins=[]);var i=this.pluginGroup[r]._plugins,a=this.pluginGroup[r]._originalOptions;n.player=this.pluginGroup[r]._player;var o=n.pluginName||t.pluginName;if(!o)throw new Error("The property pluginName is necessary");if(!t.isSupported||t.isSupported()){n.config||(n.config={});for(var s=Object.keys(a),c=0;c<s.length;c++)if(o.toLowerCase()===s[c].toLowerCase()){var u=a[s[c]];"Object"===k.a.typeOf(u)?n.config=Object.assign({},n.config,a[s[c]]):"Boolean"===k.a.typeOf(u)&&(n.config.disable=!u);break}t.defaultConfig&&Object.keys(t.defaultConfig).map((function(e){void 0===n.config[e]&&(n.config[e]=t.defaultConfig[e])})),n.root?"string"==typeof n.root&&(n.root=e[n.root]):n.root=e.root,n.index=n.config.index||0;try{i[o.toLowerCase()]&&(this.unRegister(r,o.toLowerCase()),console.warn("the is one plugin with same pluginName [".concat(o,"] exist, destroy the old instance")));var l=new t(n);return i[o.toLowerCase()]=l,i[o.toLowerCase()].func=t,l&&"function"==typeof l.afterCreate&&l.afterCreate(),l}catch(d){throw console.error(d),d}}else console.warn("not supported plugin [".concat(o,"]"))}},unRegister:function(e,t){e._pluginInfoId&&(e=e._pluginInfoId),t=t.toLowerCase();try{var n=this.pluginGroup[e]._plugins[t];n&&(n.pluginName&&n.__destroy(),delete this.pluginGroup[e]._plugins[t])}catch(r){console.error("[unRegister:".concat(t,"] cgid:[").concat(e,"] error"),r)}},deletePlugin:function(e,t){var n=e._pluginInfoId;n&&this.pluginGroup&&this.pluginGroup[n]&&this.pluginGroup[n]._plugins&&delete this.pluginGroup[n]._plugins[t]},getPlugins:function(e){var t=e._pluginInfoId;return t&&this.pluginGroup[t]?this.pluginGroup[t]._plugins:{}},findPlugin:function(e,t){var n=e._pluginInfoId;if(!this.pluginGroup||!n)return null;var r=t.toLowerCase();return this.pluginGroup[n]._plugins[r]},beforeInit:function(e){var t=this;function n(e){return e&&e.then?e:new Promise((function(e){e()}))}return new Promise((function(r){if(t.pluginGroup)return(e._loadingPlugins&&e._loadingPlugins.length?Promise.all(e._loadingPlugins):Promise.resolve()).then((function(){var i=e._pluginInfoId;if(t.pluginGroup[i]){for(var a=t.pluginGroup[i]._plugins,o=[],s=0,c=Object.keys(a);s<c.length;s++){var u=c[s];if(a[u]&&a[u].beforePlayerInit)try{var l=a[u].beforePlayerInit();o.push(n(l))}catch(d){throw o.push(n(null)),d}}Promise.all([].concat(o)).then((function(){r()})).catch((function(e){console.error(e),r()}))}else r()}))}))},afterInit:function(e){var t=e._pluginInfoId;if(this.pluginGroup&&t)for(var n=this.pluginGroup[t]._plugins,r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];n[a]&&n[a].afterPlayerInit&&n[a].afterPlayerInit()}},setLang:function(e,t){var n=t._pluginInfoId;if(this.pluginGroup&&n){var r=this.pluginGroup[n]._plugins;Object.keys(r).map((function(t){if(r[t].updateLang)r[t].updateLang(e);else try{r[t].lang=e}catch(n){console.warn("".concat(t," setLang"))}}))}},reRender:function(e){var t=e._pluginInfoId;if(t){for(var n={},r=this.pluginGroup[t]._plugins,i=0,a=Object.keys(r);i<a.length;i++){var o=a[i];n[o]={plugin:r[o].func,options:r[o]._args},this.unRegister(t,o)}for(var s=0,c=Object.keys(n);s<c.length;s++){var u=c[s];this.register(t,u,n[u].plugin,n[u].options)}}},onPluginsReady:function(e){var t=e._pluginInfoId,n=this.pluginGroup[t]._plugins;t&&n&&Object.keys(n).map((function(e){n[e].onPluginsReady&&"function"==typeof n[e].onPluginsReady&&n[e].onPluginsReady()}))},setCurrentUserActive:function(e,t){if(this.pluginGroup&&this.pluginGroup[e]){if(!t)return this.pluginGroup[e]._player.isUserActive=t,e;for(var n=Object.keys(this.pluginGroup),r=0;r<n.length;r++){var i=this.pluginGroup[n[r]];if(i&&i._player){this.pluginGroup[n[r]]._player.isUserActive=!1;break}}return this.pluginGroup[e]._player.isUserActive=t,e}},getCurrentUseActiveId:function(){if(this.pluginGroup){for(var e=Object.keys(this.pluginGroup),t=0;t<e.length;t++){var n=this.pluginGroup[e[t]];if(n&&n._player&&n._player.isUserActive)return e[t]}return null}},destroy:function(e){var t=e._pluginInfoId;if(this.pluginGroup[t]){var n,r;n=e.root,N.unObserver(n,r);for(var i=this.pluginGroup[t]._plugins,a=0,o=Object.keys(i);a<o.length;a++){var s=o[a];this.unRegister(t,s)}var c=e.isUseActive;if(delete this.pluginGroup[t],delete e._pluginInfoId,c){var u=Object.keys(this.pluginGroup);u.length>0&&this.setCurrentUserActive(u[u.length-1],!0)}}}},B=n("96a54d04afa591d8f2c9");var F=n("2bc4fe74291883f7c727"),j=n.n(F),H=n("7f3749e4140c760d27d0");function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var W=function(e){f()(n,e);var t=V(n);function n(){var e;i()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),m()(c()(e),"onMouseEnter",(function(t){var n=c()(e).player;n.userTimer&&(k.a.clearTimeout(n,n.userTimer),clearTimeout(n.userTimer))})),m()(c()(e),"onMouseLeave",(function(){c()(e).player.focus()})),e}return o()(n,[{key:"beforeCreate",value:function(e){e.config.mode||"mobile"!==w.a.device||(e.config.mode="flex"),e.player.config.marginControls&&(e.config.autoHide=!1)}},{key:"afterCreate",value:function(){var e=this,t=this.config,n=t.disable,r=t.height,i=t.mode;if(!n){"flex"===i&&this.player.addClass(B.a.FLEX_CONTROLS);var a={height:"".concat(r,"px")};Object.keys(a).map((function(t){e.root.style[t]=a[t]})),this.left=this.find("xg-left-grid"),this.center=this.find("xg-center-grid"),this.right=this.find("xg-right-grid"),this.innerRoot=this.find("xg-inner-controls"),this.on(T.MINI_STATE_CHANGE,(function(t){t?k.a.addClass(e.root,"mini-controls"):k.a.removeClass(e.root,"mini-controls")})),"mobile"!==w.a.device&&(this.bind("mouseenter",this.onMouseEnter),this.bind("mouseleave",this.onMouseLeave))}}},{key:"focus",value:function(){this.player.focus({autoHide:!1})}},{key:"focusAwhile",value:function(){this.player.focus({autoHide:!0})}},{key:"blur",value:function(){this.player.blur({ignorePaused:!0})}},{key:"recoverAutoHide",value:function(){this.config.autoHide&&k.a.addClass(this.root,B.a.CONTROLS_AUTOHIDE)}},{key:"pauseAutoHide",value:function(){k.a.removeClass(this.root,B.a.CONTROLS_AUTOHIDE)}},{key:"show",value:function(){k.a.addClass(this.root,"show")}},{key:"hide",value:function(){k.a.removeClass(this.root,"show")}},{key:"mode",get:function(){return this.config.mode}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;if(this.root){var i=e.defaultConfig||{};if(!t.root){var a=t.position?t.position:t.config&&t.config.position?t.config.position:i.position;switch(a){case D.a.CONTROLS_LEFT:t.root=this.left;break;case D.a.CONTROLS_RIGHT:t.root=this.right;break;case D.a.CONTROLS_CENTER:t.root=this.center;break;case D.a.CONTROLS:t.root=this.root;break;default:t.root=this.left}return l()(g()(n.prototype),"registerPlugin",this).call(this,e,t,r)}}}},{key:"destroy",value:function(){"mobile"!==w.a.device&&(this.unbind("mouseenter",this.onMouseEnter),this.unbind("mouseleave",this.onMouseLeave))}},{key:"render",value:function(){var e=this.config,t=e.mode,n=e.autoHide,r=e.initShow;if(!e.disable){var i=k.a.classNames({"xgplayer-controls":!0},{"flex-controls":"flex"===t},{"bottom-controls":"bottom"===t},m()({},B.a.CONTROLS_AUTOHIDE,n),{"xgplayer-controls-initshow":r||!n});return'<xg-controls class="'.concat(i,'" unselectable="on" onselectstart="return false">\n    <xg-inner-controls class="xg-inner-controls xg-pos">\n      <xg-left-grid class="xg-left-grid">\n      </xg-left-grid>\n      <xg-center-grid class="xg-center-grid"></xg-center-grid>\n      <xg-right-grid class="xg-right-grid">\n      </xg-right-grid>\n    </xg-inner-controls>\n    </xg-controls>')}}}],[{key:"pluginName",get:function(){return"controls"}},{key:"defaultConfig",get:function(){return{disable:!1,autoHide:!0,mode:"",initShow:!1}}}]),n}(D.b),G=n("ff12d07833562306368e"),z=n("7619191d4db2e0ec6dfb"),X=n("a2958fc941dc7a5e91b3"),Y=n("57bbfaace4b62097c464");function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var q=["play","pause","replay","retry"],J=function(e){f()(n,e);var t=Q(n);function n(e){var r;i()(this,n);var a=k.a.deepMerge({id:"",el:null,url:"",domEventType:"default",nullUrlStart:!1,width:600,height:337.5,fluid:!1,fitVideoSize:"fixed",videoFillMode:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,isLive:!1,zoom:1,videoInit:!0,poster:"",isMobileSimulateMode:!1,defaultPlaybackRate:1,execBeforePluginsCall:null,allowSeekAfterEnded:!0,enableContextmenu:!1,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,closeDelayBlur:!1,leavePlayerTime:3e3,closePlayVideoFocus:!1,closePauseVideoFocus:!1,closeFocusVideoFocus:!1,closeControlsBlur:!1,topBarAutoHide:!0,videoAttributes:{},startTime:0,seekedStatus:"play",miniprogress:!1,disableSwipeHandler:function(){},enableSwipeHandler:function(){},ignores:[],whitelist:[],inactive:3e3,lang:(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase(),controls:!0,marginControls:!1,fullscreenTarget:null,controlsList:[],screenShot:!1,rotate:!1,pip:!1,download:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0,presets:[],plugins:[],playbackRate:1,definition:{list:[]},playsinline:!0,customDuration:0,timeOffset:0,icons:{},i18n:[],thumbnail:null,commonStyle:{progressColor:"",playedColor:"",cachedColor:"",sliderBtnStyle:{},volumeColor:""}},e);r=t.call(this,a),Object(H.a)(c()(r),q),r.config=a,Object(G.a)(c()(r));var o=r.constructor.defaultPreset;if(r.config.presets.length){var s=r.config.presets.indexOf("default");s>=0&&o&&(r.config.presets[s]=o)}else o&&r.config.presets.push(o);if(r.userTimer=null,r.waitTimer=null,r._state=Y.a.INITIAL,r._hasStart=!1,r.isSeeking=!1,r.isCanplay=!1,r._runPending=!1,r.rotateDeg=0,r.isActive=!1,r.fullscreen=!1,r.cssfullscreen=!1,r.isRotateFullscreen=!1,r._fullscreenEl=null,r._cssfullscreenEl=null,r.curDefinition=null,r._orgCss="",r._fullScreenOffset=null,r._videoHeight=0,r._videoWidth=0,r._accPlayed={t:0,acc:0,loopAcc:0},r.innerContainer=null,r.controls=null,r.topBar=null,r.root=null,w.a.os.isAndroid&&w.a.osVersion>0&&w.a.osVersion<6&&(r.config.autoplay=!1),r.database=new O,r.isUserActive=!1,!r._initDOM())return console.error(new Error("can't find the dom which id is ".concat(r.config.id," or this.config.el does not exist"))),p()(r);var u=r.config,l=u.definition,d=void 0===l?{}:l;if(!u.url&&d.list&&d.list.length>0){var f=d.list.find((function(e){return e.definition&&e.definition===d.defaultDefinition}));f||(d.defaultDefinition=d.list[0].definition,f=d.list[0]),r.config.url=f.url,r.curDefinition=f.definition}return r._bindEvents(),r._registerPresets(),r._registerPlugins(),U.onPluginsReady(c()(r)),r.setState(Y.a.READY),r.emit(T.READY),r.onReady&&r.onReady(),(r.config.videoInit||r.config.autoplay)&&(!r.hasStart||r.state<Y.a.ATTACHED)&&r.start(),r}return o()(n,[{key:"_initDOM",value:function(){var e=this;if(this.root=this.config.id?document.getElementById(this.config.id):null,!this.root){var t=this.config.el;if(!t||1!==t.nodeType)return this.emit(T.ERROR,new E.b("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),console.error("this.confg.id or this.config.el can't be empty"),!1;this.root=t}var n=U.checkPlayerRoot(this.root);n&&(G.b.logWarn("The is an Player instance already exists in this.root, destroy it and reinitialize"),n.destroy()),this._initBaseDoms();var r=this.constructor.XgVideoProxy;if(r&&this.videoConfig.mediaType===r.mediaType){var i=this.innerContainer||this.root;this.detachVideoEvents(this.video);var a=new r(i,this.config,this.videoConfig);this.attachVideoEvents(a),this.video=a}if(this.config.controls){var o=U.register(this,W);this.controls=o}var s=this.config.isMobileSimulateMode?"mobile":w.a.device;if(this.addClass("".concat(B.a.DEFAULT," ").concat(B.a.INACTIVE," xgplayer-").concat(s," ").concat(this.config.controls?"":B.a.NO_CONTROLS)),this.config.autoplay?this.addClass(B.a.ENTER):this.addClass(B.a.NO_START),this.config.fluid){var c=this.config,u=c.width,l=c.height;"number"==typeof u&&"number"==typeof l||(u=600,l=337.5);var d={width:"100%",height:"0","max-width":"100%","padding-top":"".concat(100*l/u,"%")};Object.keys(d).forEach((function(t){e.root.style[t]=d[t]}))}else["width","height"].forEach((function(t){e.config[t]&&("number"!=typeof e.config[t]?e.root.style[t]=e.config[t]:e.root.style[t]="".concat(e.config[t],"px"))}));return!0}},{key:"_initBaseDoms",value:function(){this.topBar=k.a.createDom("xg-bar","",{"data-index":-1},"xg-top-bar"),this.leftBar=k.a.createDom("xg-bar","",{"data-index":-1},"xg-left-bar"),this.rightBar=k.a.createDom("xg-bar","",{"data-index":-1},"xg-right-bar"),this.config.marginControls&&(this.innerContainer=k.a.createDom("xg-video-container","",{"data-index":-1},"xg-video-container"),this.root.appendChild(this.innerContainer)),this.config.topBarAutoHide&&k.a.addClass(this.topBar,B.a.TOP_BAR_AUTOHIDE),this.root.appendChild(this.topBar),this.root.appendChild(this.leftBar),this.root.appendChild(this.rightBar)}},{key:"_bindEvents",value:function(){var e=this;["focus","blur"].forEach((function(t){e.on(t,e["on"+t.charAt(0).toUpperCase()+t.slice(1)])})),this.onFullscreenChange=function(t,n){var r=k.a.getFullScreenEl();if(e._fullActionFrom?e._fullActionFrom="":e.emit(T.USER_ACTION,{eventType:"system",action:"switch_fullscreen",pluginName:"player",currentTime:e.currentTime,duration:e.duration,props:[{prop:"fullscreen",from:!0,to:!1}]}),n||r&&(r===e._fullscreenEl||"VIDEO"===r.tagName))k.a.setTimeout(e,(function(){e.resize()}),100),!e.config.closeFocusVideoFocus&&e.video.focus(),e.fullscreen=!0,e.changeFullStyle(e.root,r,B.a.FULLSCREEN),e.emit(T.FULLSCREEN_CHANGE,!0,e._fullScreenOffset),e.cssfullscreen&&e.exitCssFullscreen();else if(e.fullscreen){k.a.setTimeout(e,(function(){e.resize()}),100);var i=e._fullScreenOffset;e.config.needFullscreenScroll?(window.scrollTo(i.left,i.top),k.a.setTimeout(e,(function(){e.fullscreen=!1,e._fullScreenOffset=null}),100)):(!e.config.closeFocusVideoFocus&&e.video.focus(),e.fullscreen=!1,e._fullScreenOffset=null),e.cssfullscreen?e.removeClass(B.a.FULLSCREEN):e.recoverFullStyle(e.root,e._fullscreenEl,B.a.FULLSCREEN),e._fullscreenEl=null,e.emit(T.FULLSCREEN_CHANGE,!1)}},C.forEach((function(t){document&&document.addEventListener(t,e.onFullscreenChange)})),this.__webkitbeginfullscreen=function(t){e._fullscreenEl=e.video,e.onFullscreenChange(t,!0)},this.__webkitendfullscreen=function(t){e.onFullscreenChange(t,!1)},w.a.os.isIos&&(this.video.addEventListener("webkitbeginfullscreen",this.__webkitbeginfullscreen),this.video.addEventListener("webkitendfullscreen",this.__webkitendfullscreen)),this.once(T.LOADED_DATA,this.resize),this.playFunc=function(){e.config.closeFocusVideoFocus||e.video.focus()},this.once(T.PLAY,this.playFunc)}},{key:"_unbindEvents",value:function(){var e=this;this.root.removeEventListener("mousemove",this.mousemoveFunc),C.forEach((function(t){document.removeEventListener(t,e.onFullscreenChange)})),this.playFunc&&this.off(T.PLAY,this.playFunc),this.canPlayFunc&&this.off(T.CANPLAY,this.canPlayFunc),this.video.removeEventListener("webkitbeginfullscreen",this.__webkitbeginfullscreen),this.video.removeEventListener("webkitendfullscreen",this.__webkitendfullscreen)}},{key:"_startInit",value:function(e){var t=this;if(this.video&&(e&&""!==e&&("Array"!==k.a.typeOf(e)||0!==e.length)||(e="",this.emit(T.URL_NULL),G.b.logWarn("config.url is null, please get url and run player._startInit(url)"),!this.config.nullUrlStart))){this.canPlayFunc=function(){if(t.config){var e=t.config,n=e.autoplay,r=e.startTime,i=e.defaultPlaybackRate;G.b.logInfo("player","canPlayFunc",r),r&&(t.currentTime=r>t.duration?t.duration:r,t.config.startTime=0),1!==i&&(t.playbackRate=i),n&&t.videoPlay(),t.off(T.CANPLAY,t.canPlayFunc),t.removeClass(B.a.ENTER)}},this._detachSourceEvents(this.video),"Array"===k.a.typeOf(e)?this._attachSourceEvents(this.video,e):this.video.src=e,"Number"===k.a.typeOf(this.config.volume)&&(this.volume=this.config.volume),this.loadeddataFunc&&this.once(T.LOADED_DATA,this.loadeddataFunc);var n=this.innerContainer?this.innerContainer:this.root;this.video instanceof window.Element&&!n.contains(this.video)&&n.insertBefore(this.video,n.firstChild);var r=this.video.readyState;G.b.logInfo("_startInit readyState",r),this.config.autoplay&&(!/^blob/.test(this.video.currentSrc)&&!/^blob/.test(this.video.src)&&this.load(),(w.a.os.isIpad||w.a.os.isPhone)&&this.videoPlay()),r>=2?this.canPlayFunc():this.once(T.CANPLAY,this.canPlayFunc),(!this.hasStart||this.state<Y.a.ATTACHED)&&U.afterInit(this),this.hasStart=!0,this.setState(Y.a.ATTACHED),k.a.setTimeout(this,(function(){t.emit(T.COMPLETE)}),0)}}},{key:"_registerPlugins",value:function(){var e=this;this._loadingPlugins=[];var t=this.config.ignores||[],n=this.config.plugins||[];(this.config.i18n||[]).forEach((function(e){z.a.use(e)}));var r=t.join("||").toLowerCase().split("||");n.forEach((function(t){try{var n=t.plugin?t.plugin.pluginName:t.pluginName;if(n&&r.indexOf(n.toLowerCase())>-1)return;if(t.lazy&&t.loader){var i=U.lazyRegister(e,t);return void(t.forceBeforeInit&&(i.then((function(){e._loadingPlugins.splice(e._loadingPlugins.indexOf(i),1)})).catch((function(t){G.b.logError("_registerPlugins:loadingPlugin",t),e._loadingPlugins.splice(e._loadingPlugins.indexOf(i),1)})),e._loadingPlugins.push(i)))}return e.registerPlugin(t)}catch(a){G.b.logError("_registerPlugins:",a)}}))}},{key:"_registerPresets",value:function(){var e=this;this.config.presets.forEach((function(t){var n,r,i,a,o,s,c,u,l,d,f,h,p,v;n=e,s=(r=t).preset&&r.options?new r.preset(r.options,n.config):new r({},n.config),c=s.plugins,u=void 0===c?[]:c,l=s.ignores,d=void 0===l?[]:l,f=s.icons,h=void 0===f?{}:f,p=s.i18n,v=void 0===p?[]:p,n.config.plugins||(n.config.plugins=[]),n.config.ignores||(n.config.ignores=[]),(i=n.config.plugins).push.apply(i,j()(u)),(a=n.config.ignores).push.apply(a,j()(d)),Object.keys(h).map((function(e){n.config.icons[e]||(n.config.icons[e]=h[e])})),(o=n.config.i18n).push.apply(o,j()(v))}))}},{key:"registerPlugin",value:function(e,t){var n=null,r=null;e.plugin&&"function"==typeof e.plugin?(n=e.plugin,r=e.options):(n=e,r={}),t&&(r.config=t);for(var i=Object.keys(this.config),a=0;a<i.length;a++)if(n.pluginName.toLowerCase()===i[a].toLowerCase()){var o=this.config[i[a]];"Object"===k.a.typeOf(o)&&(o.root&&(r.root=o.root),o.position&&(r.position=o.position));break}var s=r.position?r.position:r.config&&r.config.position||n.defaultConfig&&n.defaultConfig.position,c=D.b.POSITIONS;if(!r.root&&"string"==typeof s&&s.indexOf("controls")>-1)return this.controls&&this.controls.registerPlugin(n,r,n.pluginName);if(!r.root)switch(s){case c.ROOT_RIGHT:r.root=this.rightBar;break;case c.ROOT_LEFT:r.root=this.leftBar;break;case c.ROOT_TOP:r.root=this.topBar;break;default:r.root=this.innerContainer||this.root}return U.register(this,n,r)}},{key:"deregister",value:function(e){"string"==typeof e?U.unRegister(this,e):e instanceof L.a&&U.unRegister(this,e.pluginName)}},{key:"unRegisterPlugin",value:function(e){this.deregister(e)}},{key:"plugins",get:function(){return U.getPlugins(this)}},{key:"getPlugin",value:function(e){var t=U.findPlugin(this,e);return t&&t.pluginName?t:null}},{key:"addClass",value:function(e){this.root&&(k.a.hasClass(this.root,e)||k.a.addClass(this.root,e))}},{key:"removeClass",value:function(e){this.root&&k.a.removeClass(this.root,e)}},{key:"hasClass",value:function(e){if(this.root)return k.a.hasClass(this.root,e)}},{key:"setAttribute",value:function(e,t){this.root&&this.root.setAttribute(e,t)}},{key:"removeAttribute",value:function(e,t){this.root&&this.root.removeAttribute(e,t)}},{key:"start",value:function(e){var t=this;return this.hasStart||this.state>=Y.a.ATTACHING?Promise.resolve():(this.hasStart=!0,this.setState(Y.a.ATTACHING),U.beforeInit(this).then((function(){if(t.config)return e||(e=t.url||t.config.url),t._startInit(e)})).catch((function(e){throw e.fileName="player",e.lineNumber="236",G.b.logError("start:beforeInit:",e),e})))}},{key:"switchURL",value:function(e){var t=this,n=e;"Object"===k.a.typeOf(e)&&(n=e.url);var r=this.currentTime,i=this.paused;return this.src=n,new Promise((function(e){var n=function(){t.currentTime=r,i&&t.once("canplay",(function(){t.pause()})),e()};w.a.os.isAndroid?t.once("timeupdate",(function(){n()})):t.once("canplay",(function(){n()})),t.play()}))}},{key:"load",value:function(){this.video&&this.video.load()}},{key:"videoPlay",value:function(){var e=this;if(this.hasStart||!(this.state<Y.a.ATTACHED)){this.state<Y.a.RUNNING&&(this.removeClass(B.a.NO_START),!this.isCanplay&&this.addClass(B.a.ENTER));var t=l()(g()(n.prototype),"play",this).call(this);return void 0!==t&&t&&t.then?t.then((function(){e.removeClass(B.a.NOT_ALLOW_AUTOPLAY),e.addClass(B.a.PLAYING),e.state<Y.a.RUNNING&&(G.b.logInfo(">>>>playPromise.then"),e.setState(Y.a.RUNNING),e.emit(T.AUTOPLAY_STARTED))})).catch((function(t){if(G.b.logWarn(">>>>playPromise.catch",t.name),e.video&&e.video.error)return e.onError(),e.removeClass(B.a.ENTER),void e.setState(Y.a.ERROR);"NotAllowedError"===t.name&&(e._errorTimer=k.a.setTimeout(e,(function(){e._errorTimer=null,e.emit(T.AUTOPLAY_PREVENTED),e.addClass(B.a.NOT_ALLOW_AUTOPLAY),e.removeClass(B.a.ENTER),e.pause(),e.setState(Y.a.NOTALLOW)}),0))})):(G.b.logWarn("video.play not return promise"),this.state<Y.a.RUNNING&&(this.setState(Y.a.RUNNING),this.removeClass(B.a.NOT_ALLOW_AUTOPLAY),this.removeClass(B.a.NO_START),this.removeClass(B.a.ENTER),this.addClass(B.a.PLAYING),this.emit(T.AUTOPLAY_STARTED))),t}this.removeClass(B.a.NO_START),this.addClass(B.a.ENTER);var r=this.start();r&&r.then((function(t){!e.config.autoplay&&e.videoPlay()}))}},{key:"videoPause",value:function(){l()(g()(n.prototype),"pause",this).call(this)}},{key:"play",value:function(){var e=this;this.removeClass(B.a.PAUSED),Object(H.d)(this,"play",(function(){e.videoPlay()}))}},{key:"pause",value:function(){var e=this;Object(H.d)(this,"pause",(function(){l()(g()(n.prototype),"pause",e).call(e)}))}},{key:"seek",value:function(e,t){var n=this;if(this.video&&!isNaN(Number(e))){var r=this.config,i=r.isSeekedPlay,a=r.seekedStatus,o=t||(i?"play":a);e=e<0?0:e>this.duration?parseInt(this.duration,10):e,this.once(T.CANPLAY,(function(){switch(n.removeClass(B.a.ENTER),n.isSeeking=!1,o){case"play":n.play();break;case"pause":n.pause();break;default:!n.paused&&n.play()}})),this.state<Y.a.RUNNING?(this.removeClass(B.a.NO_START),this.addClass(B.a.ENTER),this.currentTime=e,"play"===o&&this.play()):this.currentTime=e}}},{key:"changeDefinition",value:function(e,t){var n=this;if(this.emit(T.DEFINITION_CHANGE,{from:t,to:e}),this.curDefinition=e.definition,this.hasStart){var r=this.switchURL(e.url);r&&r.then?r.then((function(){n.emit(T.AFTER_DEFINITION_CHANGE,{from:t,to:e})})):this.emit(T.AFTER_DEFINITION_CHANGE,{from:t,to:e})}else this.config.url=e.url}},{key:"reload",value:function(){this.load(),this.reloadFunc=function(){this.play()},this.once(T.LOADED_DATA,this.reloadFunc)}},{key:"resetState",value:function(){var e=this,t=[B.a.NOT_ALLOW_AUTOPLAY,B.a.PLAYING,B.a.NO_START,B.a.PAUSED,B.a.REPLAY,B.a.ENTER,B.a.ENDED,B.a.ERROR,B.a.LOADING];this.hasStart=!1,this.videoPause(),this._accPlayed.acc=0,this._accPlayed.t=0,this._accPlayed.loopAcc=0,t.forEach((function(t){e.removeClass(t)})),this.addClass(B.a.ENTER),this.emit(T.EMPTIED)}},{key:"destroy",value:function(){var e=this,t=this.innerContainer,r=this.root,i=this.video;if(r&&i){if(this._hasStart=!1,this.updateAcc("destroy"),this._unbindEvents(),this._detachSourceEvents(this.video),k.a.clearAllTimers(this),this.emit(T.DESTROY),U.destroy(this),Object(H.b)(this),l()(g()(n.prototype),"destroy",this).call(this),this.fullscreen&&this._fullscreenEl===this.root&&this.exitFullscreen(),t)for(var a=t.children,o=0;o<a.length;o++)t.removeChild(a[o]);!t&&i instanceof window.Node&&r.contains(i)&&r.removeChild(i),["topBar","leftBar","rightBar","innerContainer"].map((function(t){e[t]&&r.removeChild(e[t]),e[t]=null}));var s=r.className.split(" ");s.length>0?r.className=s.filter((function(e){return e.indexOf("xgplayer")<0})).join(" "):r.className="",this.removeAttribute("data-xgfill"),["isSeeking","isCanplay","isActive","cssfullscreen","fullscreen"].forEach((function(t){e[t]=!1}))}}},{key:"replay",value:function(){var e=this;this.removeClass(B.a.ENDED),this.currentTime=0,this.isSeeking=!1,Object(H.d)(this,"replay",(function(){e.once(T.CANPLAY,(function(){var t=e.videoPlay();t&&t.catch&&t.catch((function(e){console.log(e)}))})),e.play(),e.emit(T.REPLAY),e.onPlay()}))}},{key:"retry",value:function(){var e=this;this.removeClass(B.a.ERROR),this.addClass(B.a.LOADING),Object(H.d)(this,"retry",(function(){var t=e.currentTime;e.videoPause(),e.src=e.config.url,!e.config.isLive&&(e.currentTime=t),e.once(T.CANPLAY,(function(){e.videoPlay()}))}))}},{key:"changeFullStyle",value:function(e,t,n,r){e&&(r||(r=B.a.PARENT_FULLSCREEN),this._orgCss||(this._orgCss=k.a.filterStyleFromText(e)),k.a.addClass(e,n),t&&t!==e&&!this._orgPCss&&(this._orgPCss=k.a.filterStyleFromText(t),k.a.addClass(t,r)))}},{key:"recoverFullStyle",value:function(e,t,n,r){r||(r=B.a.PARENT_FULLSCREEN),this._orgCss&&(k.a.setStyleFromCsstext(e,this._orgCss),this._orgCss=""),k.a.removeClass(e,n),t&&t!==e&&this._orgPCss&&(k.a.setStyleFromCsstext(t,this._orgPCss),this._orgPCss="",k.a.removeClass(t,r))}},{key:"getFullscreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget,t=this.root,n=this.video;e||(e=t),this._fullScreenOffset={top:k.a.scrollTop(),left:k.a.scrollLeft()},this._fullscreenEl=e,this._fullActionFrom="get";var r=k.a.getFullScreenEl();if(r!==this._fullscreenEl)try{for(var i=0;i<x.length;i++){var a=x[i];if(e[a]){var o="webkitRequestFullscreen"===a?e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):e[a]();return o&&o.then?o:Promise.resolve()}}return n.fullscreenEnabled||n.webkitSupportsFullscreen?(n.webkitEnterFullscreen(),Promise.resolve()):Promise.reject(new Error("call getFullscreen fail"))}catch(s){return Promise.reject(new Error("call getFullscreen fail"))}else this.onFullscreenChange()}},{key:"exitFullscreen",value:function(e){if(this.isRotateFullscreen&&this.exitRotateFullscreen(),this._fullscreenEl||k.a.getFullScreenEl()){this.root;var t=this.video;this._fullActionFrom="exit";try{for(var n=0;n<P.length;n++){var r=P[n];if(document[r]){var i=document[r]();return i&&i.then?i:Promise.resolve()}}return t&&t.webkitSupportsFullscreen?(t.webkitExitFullScreen(),Promise.resolve()):Promise.reject(new Error("call exitFullscreen fail"))}catch(a){return Promise.reject(new Error("call exitFullscreen fail"))}}}},{key:"getCssFullscreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget;this.isRotateFullscreen?this.exitRotateFullscreen():this.fullscreen&&this.exitFullscreen();var t=e?"".concat(B.a.INNER_FULLSCREEN," ").concat(B.a.CSS_FULLSCREEN):B.a.CSS_FULLSCREEN;this.changeFullStyle(this.root,e,t);var n=this.config.fullscreen,r=void 0===n?{}:n,i=!0===r.useCssFullscreen||"function"==typeof r.useCssFullscreen&&r.useCssFullscreen();i&&(this.fullscreen=!0,this.emit(T.FULLSCREEN_CHANGE,!0)),this._cssfullscreenEl=e,this.cssfullscreen=!0,this.emit(T.CSS_FULLSCREEN_CHANGE,!0)}},{key:"exitCssFullscreen",value:function(){var e=this._cssfullscreenEl?"".concat(B.a.INNER_FULLSCREEN," ").concat(B.a.CSS_FULLSCREEN):B.a.CSS_FULLSCREEN;if(this.fullscreen){var t=this.config.fullscreen,n=void 0===t?{}:t;!0===n.useCssFullscreen||"function"==typeof n.useCssFullscreen&&n.useCssFullscreen()?(this.recoverFullStyle(this.root,this._cssfullscreenEl,e),this.fullscreen=!1,this.emit(T.FULLSCREEN_CHANGE,!1)):this.removeClass(e)}else this.recoverFullStyle(this.root,this._cssfullscreenEl,e);this._cssfullscreenEl=null,this.cssfullscreen=!1,this.emit(T.CSS_FULLSCREEN_CHANGE,!1)}},{key:"getRotateFullscreen",value:function(e){this.cssfullscreen&&this.exitCssFullscreen(e);var t=e?"".concat(B.a.INNER_FULLSCREEN," ").concat(B.a.ROTATE_FULLSCREEN):B.a.ROTATE_FULLSCREEN;this._fullscreenEl=e||this.root,this.changeFullStyle(this.root,e,t,B.a.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!0,this.fullscreen=!0,this.setRotateDeg(90),this.emit(T.FULLSCREEN_CHANGE,!0)}},{key:"exitRotateFullscreen",value:function(e){var t=this._fullscreenEl!==this.root?"".concat(B.a.INNER_FULLSCREEN," ").concat(B.a.ROTATE_FULLSCREEN):B.a.ROTATE_FULLSCREEN;this.recoverFullStyle(this.root,this._fullscreenEl,t,B.a.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!1,this.fullscreen=!1,this.setRotateDeg(0),this.emit(T.FULLSCREEN_CHANGE,!1)}},{key:"setRotateDeg",value:function(e){90===window.orientation||-90===window.orientation?this.rotateDeg=0:this.rotateDeg=e}},{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autoHide:!this.config.closePlayerBlur,delay:this.config.inactive};this.isActive?this.onFocus(e):this.emit(T.PLAYER_FOCUS,Z({paused:this.paused,ended:this.ended},e))}},{key:"blur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ignorePaused:!1};this.isActive?this.emit(T.PLAYER_BLUR,Z({paused:this.paused,ended:this.ended},e)):this.onBlur(e)}},{key:"onFocus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.autoHide,r=void 0===n?!this.config.closePlayerBlur:n,i=t.delay,a=void 0===i?this.config.inactive:i;this.isActive=!0,this.removeClass(B.a.INACTIVE),this.userTimer&&k.a.clearTimeout(this,this.userTimer),r&&(this.userTimer=k.a.setTimeout(this,(function(){e.blur()}),a))}},{key:"onBlur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ignorePaused,n=void 0!==t&&t;if(this.isActive){var r=this.config.closePauseVideoFocus;this.isActive=!1,(n||r||!this.paused&&!this.ended)&&this.addClass(B.a.INACTIVE)}}},{key:"onEmptied",value:function(){this.updateAcc("emptied")}},{key:"onCanplay",value:function(){this.state>=Y.a.RUNNING&&this.removeClass(B.a.ENTER),this.removeClass(B.a.LOADING),this.isCanplay=!0,this.waitTimer&&k.a.clearTimeout(this,this.waitTimer)}},{key:"onPlay",value:function(){this.state===Y.a.ENDED&&this.setState(Y.a.RUNNING),this.removeClass(B.a.PAUSED),this.ended&&this.removeClass(B.a.ENDED),!this.config.closePlayVideoFocus&&this.focus()}},{key:"onPause",value:function(){this.addClass(B.a.PAUSED),this.updateAcc("pause"),this.config.closePauseVideoFocus||(this.userTimer&&k.a.clearTimeout(this,this.userTimer),this.focus())}},{key:"onEnded",value:function(){this.updateAcc("ended"),this.addClass(B.a.ENDED),this.setState(Y.a.ENDED)}},{key:"onError",value:function(){this.setState(Y.a.ERROR),this.updateAcc("error"),this.removeClass(B.a.NOT_ALLOW_AUTOPLAY),this.removeClass(B.a.NO_START),this.removeClass(B.a.ENTER),this.removeClass(B.a.LOADING),this.addClass(B.a.ERROR)}},{key:"onSeeking",value:function(){this.isSeeking||this.updateAcc("seeking"),this.isSeeking=!0,this.addClass(B.a.SEEKING)}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&k.a.clearTimeout(this,this.waitTimer),this.removeClass(B.a.LOADING),this.removeClass(B.a.SEEKING)}},{key:"onWaiting",value:function(){var e=this;this.waitTimer&&k.a.clearTimeout(this,this.waitTimer),this.updateAcc("waiting"),this.waitTimer=k.a.setTimeout(this,(function(){e.addClass(B.a.LOADING),k.a.clearTimeout(e,e.waitTimer),e.waitTimer=null}),200)}},{key:"onPlaying",value:function(){var e=this;[B.a.NO_START,B.a.PAUSED,B.a.ENDED,B.a.ERROR,B.a.REPLAY,B.a.LOADING].forEach((function(t){e.removeClass(t)}))}},{key:"onTimeupdate",value:function(){!this._videoHeight&&this.resize(),(this.waitTimer||this.hasClass(B.a.LOADING))&&this.video.readyState>2&&(this.removeClass(B.a.LOADING),k.a.clearTimeout(this,this.waitTimer),this.waitTimer=null),this._accPlayed.t||this.paused||this.ended||(this._accPlayed.t=(new Date).getTime())}},{key:"onVolumechange",value:function(){"Number"===k.a.typeOf(this.config.volume)&&(this.config.volume=this.volume)}},{key:"onRatechange",value:function(){this.config.defaultPlaybackRate=this.playbackRate}},{key:"emitUserAction",value:function(e,t,n){if(this.video&&t&&e){var r="String"===k.a.typeOf(e)?e:e.type||"";n.props&&"Array"!==k.a.typeOf(n.props)&&(n.props=[n.props]),this.emit(T.USER_ACTION,Z({eventType:r,action:t,currentTime:this.currentTime,duration:this.duration,ended:this.ended,event:e},n))}}},{key:"updateAcc",value:function(e){if(this._accPlayed.t){var t=(new Date).getTime()-this._accPlayed.t;this._accPlayed.acc+=t,this._accPlayed.t=0,("ended"===e||this.ended)&&(this._accPlayed.loopAcc=this._accPlayed.acc)}}},{key:"checkBuffer",value:function(e){var t=this.video.buffered;if(!t||0===t.length||!this.duration)return!0;for(var n=e||this.video.currentTime||.2,r=t.length,i=0;i<r;i++)if(t.start(i)<=n&&t.end(i)>n)return!0;return!1}},{key:"position",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{h:0,y:0,x:0,w:0};if(this.video&&e&&e.h){var t=1/e.h,n=1!==t?"scale(".concat(t,")"):"",r=0,i=0;e.y&&(i=(100-100*e.h)/2-100*e.y),e.w&&e.x&&(r=(100-100*e.w)/2-100*e.x),n+=" translate(".concat(r,"%, ").concat(i,"%)"),this.video.style.transform=n,this.video.style.webkitTransform=n}}},{key:"setConfig",value:function(e){var t=this;e&&Object.keys(e).forEach((function(n){t.config[n]=e[n];var r=t.plugins[n.toLowerCase()];r&&"Function"===k.a.typeOf(r.setConfig)&&r.setConfig(e[n])}))}},{key:"playNext",value:function(e){this.resetState(),this.setConfig(e),this.play(),this.emit(T.PLAYNEXT,e)}},{key:"resize",value:function(){var e=this;if(this.video){var t=this.video,n=t.videoWidth,r=t.videoHeight,i=this.config,a=i.fitVideoSize,o=i.videoFillMode;if("fill"!==o&&"cover"!==o||this.setAttribute("data-xgfill",o),r&&n){this._videoHeight=r,this._videoWidth=n;var s=this.root.getBoundingClientRect(),c=this.controls&&this.innerContainer?this.controls.root.getBoundingClientRect().height:0,u=s.width,l=s.height-c,d=parseInt(n/r*1e3,10),f=parseInt(u/l*1e3,10),h=u,p=l,v={};"auto"===a&&f>d||"fixWidth"===a?(p=u/d*1e3,this.config.fluid?v.paddingTop="".concat(100*p/h,"%"):v.height="".concat(p+c,"px")):("auto"===a&&f<d||"fixHeight"===a)&&(h=d*l/1e3,v.width="".concat(h,"px")),this.fullscreen||this.cssfullscreen||Object.keys(v).forEach((function(t){e.root.style[t]=v[t]})),("fillHeight"===o&&f<d||"fillWidth"===o&&f>d)&&this.setAttribute("data-xgfill","cover");var g={videoScale:d,vWidth:h,vHeight:p,cWidth:h,cHeight:p+c};this.emit(T.VIDEO_RESIZE,g)}}}},{key:"updateObjectPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.video.updateObjectPosition?this.video.updateObjectPosition(e,t):this.video.style.objectPosition="".concat(100*e,"% ").concat(100*t,"%")}},{key:"setState",value:function(e){G.b.logInfo("setState","state from:".concat(Y.b[this.state]," to:").concat(Y.b[e])),this._state=e}},{key:"state",get:function(){return this._state}},{key:"isFullscreen",get:function(){return this.fullscreen}},{key:"isCssfullScreen",get:function(){return this.cssfullscreen}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){"boolean"==typeof e&&(this._hasStart=e,!1===e&&(this._state=Y.a.READY),this.emit("hasstart"))}},{key:"isPlaying",get:function(){return this._state===Y.a.RUNNING||this._state===Y.a.ENDED}},{key:"definitionList",get:function(){return this.config.definition.list||[]},set:function(e){var t=this,n=this.config.definition;n.list=e,this.emit("resourceReady",e);var r=null,i=null;e.forEach((function(e){t.curDefinition===e.definition&&(r=e),n.defaultDefinition===e.definition&&(i=e)})),!i&&e.length>0&&(i=e[0]),r?this.changeDefinition(r):i&&this.changeDefinition(i)}},{key:"lang",get:function(){return this.config.lang},set:function(e){0!==z.a.langKeys.filter((function(t){return t===e})).length||"zh"===e?(this.config.lang=e,U.setLang(e,this)):console.error("Sorry, set lang fail, because the language [".concat(e,"] is not supported now, list of all supported languages is [").concat(z.a.langKeys.join(),"] "))}},{key:"i18n",get:function(){var e=this.config.lang;return z.a.lang[e]||z.a.lang.en}},{key:"i18nKeys",get:function(){return z.a.textKeys||{}}},{key:"version",get:function(){return X.a}},{key:"playerId",get:function(){return this._pluginInfoId}},{key:"url",get:function(){return this.__url||this.config.url},set:function(e){this.__url=e}},{key:"poster",get:function(){return this.plugins.poster?this.plugins.poster.config.poster:this.config.poster},set:function(e){this.plugins.poster&&this.plugins.poster.update(e)}},{key:"readyState",get:function(){var e=l()(g()(n.prototype),"readyState",this);return this.i18n[e]||e}},{key:"error",get:function(){var e=l()(g()(n.prototype),"error",this);return this.i18n[e]||e}},{key:"networkState",get:function(){var e=l()(g()(n.prototype),"networkState",this);return this.i18n[e]||e}},{key:"fullscreenChanging",get:function(){return!(null===this._fullScreenOffset)}},{key:"cumulateTime",get:function(){var e=this._accPlayed;return this.updateAcc("get"),e.acc}},{key:"zoom",get:function(){return this.config.zoom},set:function(e){this.config.zoom=e}},{key:"hook",value:function(e,t){return H.c.call.apply(H.c,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,t){return H.e.call.apply(H.e,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"usePluginHooks",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];return H.f.call.apply(H.f,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"setUserActive",value:function(e,t){"boolean"==typeof t&&t!==this.muted&&(this.addInnerOP("volumechange"),this.muted=t),U.setCurrentUserActive(this.playerId,e)}}],[{key:"debugger",get:function(){return G.b.config.debug},set:function(e){G.b.config.debug=e}},{key:"getCurrentUserActivePlayerId",value:function(){return U.getCurrentUseActiveId()}},{key:"setCurrentUserActive",value:function(e,t){U.setCurrentUserActive(e,t)}},{key:"install",value:function(e,t){n.plugins||(n.plugins={}),n.plugins[e]||(n.plugins[e]=t)}},{key:"use",value:function(e,t){n.plugins||(n.plugins={}),n.plugins[e]=t}}]),n}(R);m()(J,"defaultPreset",null),m()(J,"XgVideoProxy",null)},"7367695471878cd60218":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));n("e502d00ea6e2f0b47ea0"),n("098ff896a5dab77f75b3"),n("765c3fe4871c97a98a7a"),n("b9c487edb4e7fbfb9158");var r=n("d8c910279447f3b2f170"),i=n.n(r),a=n("f8c988483231af8381d2"),o=n.n(a),s=n("cc3ba8f20ced7ad84834"),c=n.n(s),u=(n("d21c3f3d4c981a871761"),n("af4e4e4030596b369b13"),n("cf2c3842fd8b1c54ed12"),n("16da3d83ca2b978dbac3"),n("733fd62058ae078d16d8"),n("34c0f6a91c0bdd59090c")),l=n("ff12d07833562306368e"),d=n("7f3749e4140c760d27d0");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){l.b.logError("[".concat(e,"] event or callback cant be undefined or null when call ").concat(t))}var v=function(){function e(t){o()(this,e),u.a.checkIsFunction(this.beforeCreate)&&this.beforeCreate(t),Object(d.a)(this),this.__args=t,this.__events={},this.config=t.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(t)}return c()(e,[{key:"beforeCreate",value:function(e){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(e){this.player=e.player,this.playerConfig=e.player&&e.player.config,this.pluginName=e.pluginName?e.pluginName.toLowerCase():this.constructor.pluginName.toLowerCase(),this.logger=e.player&&e.player.logger}},{key:"updateLang",value:function(e){}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"domEventType",get:function(){var e=u.a.checkTouchSupport()?"touch":"mouse";return!this.playerConfig||"touch"!==this.playerConfig.domEventType&&"mouse"!==this.playerConfig.domEventType||(e=this.playerConfig.domEventType),e}},{key:"on",value:function(e,t){var n=this;e&&t&&this.player?"string"==typeof e?(this.__events[e]=t,this.player.on(e,t)):Array.isArray(e)&&e.forEach((function(e){n.__events[e]=t,n.player.on(e,t)})):p(this.pluginName,"plugin.on(event, callback)")}},{key:"once",value:function(e,t){e&&t&&this.player?this.player.once(e,t):p(this.pluginName,"plugin.once(event, callback)")}},{key:"off",value:function(e,t){var n=this;e&&t&&this.player?"string"==typeof e?(delete this.__events[e],this.player.off(e,t)):Array.isArray(e)&&e.forEach((function(r){delete n.__events[e],n.player.off(r,t)})):p(this.pluginName,"plugin.off(event, callback)")}},{key:"offAll",value:function(){var e=this;Object.keys(this.__events).map((function(t){e.__events[t]&&e.off(t,e.__events[t]),t&&delete e.__events[t]})),this.__events={}}},{key:"emit",value:function(e){var t;if(this.player){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this.player).emit.apply(t,[e].concat(r))}}},{key:"emitUserAction",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=h(h({},n),{},{pluginName:this.pluginName});this.player.emitUserAction(e,t,r)}},{key:"hook",value:function(e,t){return d.c.call.apply(d.c,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return d.e.call.apply(d.e,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(this.player)return n&&(t.pluginName=n),this.player.registerPlugin({plugin:e,options:t})}},{key:"getPlugin",value:function(e){return this.player?this.player.getPlugin(e):null}},{key:"__destroy",value:function(){var e=this,t=this.player,n=this.pluginName;this.offAll(),u.a.clearAllTimers(this),u.a.checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map((function(t){e[t]=null})),t.unRegisterPlugin(n),Object(d.b)(this)}}],[{key:"defineGetterOrSetter",value:function(e,t){for(var n in t)Object.defineProperty(e,n,t[n])}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}]),e}()},"7619191d4db2e0ec6dfb":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n("cf2c3842fd8b1c54ed12"),n("16da3d83ca2b978dbac3");var r=n("34c0f6a91c0bdd59090c"),i={},a={},o=[],s={};function c(){Object.keys(i.en).map((function(e){a[e]=e}))}function u(e){("Array"!==r.a.typeOf(e)?Object.keys(e).map((function(t){return{LANG:"zh"===t?"zh-cn":t,TEXT:e[t]}})):e).map((function(e){i[e.LANG]?r.a.deepMerge(i[e.LANG]||{},e.TEXT||{}):s[e.LANG]=e.TEXT})),c()}function l(e){var t=e.LANG,n=e.TEXT||{};i[t]||o.push(t),i[t]?r.a.deepMerge(n,i[t]):i[t]=n,s[t]&&(u([{LANG:t,TEXT:s[t]}]),delete s[t]),"zh-cn"===t&&(i.zh=i["zh-cn"]),c()}l({LANG:"en",TEXT:{ERROR_TYPES:{network:{code:1,msg:"video download error"},mse:{code:2,msg:"stream append error"},parse:{code:3,msg:"parsing error"},format:{code:4,msg:"wrong format"},decoder:{code:5,msg:"decoding error"},runtime:{code:6,msg:"grammatical errors"},timeout:{code:7,msg:"play timeout"},other:{code:8,msg:"other errors"}},HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"PIP",SCREENSHOT:"Screenshot",LIVE:"LIVE",OFF:"Off",OPEN:"Open",MINI_DRAG:"Click and hold to drag",MINISCREEN:"Miniscreen",REFRESH_TIPS:"Please Try",REFRESH:"Refresh",FORWARD:"forward",LIVE_TIP:"Live"}});var d={get textKeys(){return a},get langKeys(){return o},get lang(){var e={};return o.map((function(t){e[t]=i[t]})),e.zh=i["zh-cn"],e},extend:u,use:l}},"7f3749e4140c760d27d0":function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return c}));var r=n("2bc4fe74291883f7c727"),i=n.n(r);n("d21c3f3d4c981a871761"),n("733fd62058ae078d16d8"),n("cf2c3842fd8b1c54ed12"),n("16da3d83ca2b978dbac3");function a(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o=t.call.apply(t,[e].concat(i));n&&"function"==typeof n&&(o&&o.then?o.then((function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];n.call.apply(n,[e].concat(r))})):n.call.apply(n,[e].concat(i)))}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{pre:null,next:null};return this.__hooks||(this.__hooks={}),!this.__hooks[e]&&(this.__hooks[e]=null),function(){var r=arguments,o=this;if(n.pre)try{var s;(s=n.pre).call.apply(s,[this].concat(Array.prototype.slice.call(arguments)))}catch(l){throw l.message="[pluginName: ".concat(this.pluginName,":").concat(e,":pre error] >> ").concat(l.message),l}if(this.__hooks&&this.__hooks[e])try{var c,u=(c=this.__hooks[e]).call.apply(c,[this,this].concat(Array.prototype.slice.call(arguments)));u?u.then?u.then((function(e){!1!==e&&a.apply(void 0,[o,t,n.next].concat(i()(r)))})).catch((function(e){throw e})):a.apply(void 0,[this,t,n.next].concat(Array.prototype.slice.call(arguments))):void 0===u&&a.apply(void 0,[this,t,n.next].concat(Array.prototype.slice.call(arguments)))}catch(l){throw l.message="[pluginName: ".concat(this.pluginName,":").concat(e,"] >> ").concat(l.message),l}else a.apply(void 0,[this,t,n.next].concat(Array.prototype.slice.call(arguments)))}.bind(this)}function s(e,t){var n=this.__hooks;if(n)return n.hasOwnProperty(e)?(n&&(n[e]=t),!0):(console.warn("has no supported hook which name [".concat(e,"]")),!1)}function c(e){if(this.plugins&&this.plugins[e.toLowerCase()]){for(var t=this.plugins[e.toLowerCase()],n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.useHooks&&t.useHooks.apply(t,r)}}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.__hooks={},t&&t.map((function(t){e.__hooks[t]=null})),Object.defineProperty(e,"hooks",{get:function(){return e.__hooks&&Object.keys(e.__hooks).map((function(t){if(e.__hooks[t])return t}))}})}function l(e){e.__hooks=null}function d(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];if(!e.__hooks||!e.__hooks[t])return n.call.apply(n,[e,e].concat(i));var o,s=(o=e.__hooks[t]).call.apply(o,[e,e].concat(i));if(s&&s.then)s.then((function(t){return!1===t?null:n.call.apply(n,[e,e].concat(i))})).catch((function(e){console.warn("[runHooks]".concat(t," reject"),e.message)}));else if(!1!==s)return n.call.apply(n,[e,e].concat(i))}},"84e9431b43bf71843c85":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n("7cb145ff51d539d4bd6d");var r=n("f8c988483231af8381d2"),i=n.n(r),a=n("cc3ba8f20ced7ad84834"),o=n.n(a),s=n("f07456edab2c7b12cc0c"),c=n.n(s),u=n("f28ded8c7364f6de9abc"),l=n.n(u),d=n("e93695117ac1f764190a"),f=n.n(d),h=(n("fce1e10c0a59a8bd89e4"),n("d21c3f3d4c981a871761"),n("1dbcb949bab5b5ef954b")),p=n("3b76dd97653dea47ddc2"),v=n("ec618b62718d4965f43d"),g=n("f595bdb75185de96d993");function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var m=function(e){c()(n,e);var t=y(n);function n(){return i()(this,n),t.apply(this,arguments)}return o()(n,[{key:"afterCreate",value:function(){var e=this,t=this.player;this.config.disable||(this.initIcons(),this.btnClick=this.btnClick.bind(this),this.bind(["touchend","click"],this.btnClick),this.on(h.PAUSE,(function(){e.animate(t.paused)})),this.on(h.PLAY,(function(){e.animate(t.paused)})),this.animate(!0))}},{key:"registerIcons",value:function(){return{play:{icon:v.a,class:"xg-icon-play"},pause:{icon:g.a,class:"xg-icon-pause"}}}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.player;return this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:t.paused,to:!t.paused}),t.ended?t.replay():t.paused?(t.play(),this.animate(!1)):(t.pause(),this.animate(!0)),!1}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.play),this.appendChild(".xgplayer-icon",e.pause)}},{key:"animate",value:function(e){var t=this.i18nKeys;e?(this.setAttr("data-state","pause"),this.changeLangTextKey(this.find(".xg-tips"),t.PLAY_TIPS)):(this.setAttr("data-state","play"),this.changeLangTextKey(this.find(".xg-tips"),t.PAUSE_TIPS))}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-play">\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="'.concat(this.i18nKeys.PLAY_TIPS,'">').concat(this.i18n.PLAY_TIPS,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"play"}},{key:"defaultConfig",get:function(){return{position:p.a.CONTROLS_LEFT,index:0,disable:!1}}}]),n}(p.b)},"8ad17b2edf3b3b7b5dc8":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("e934f008ce014eda6535"),n("3001a3934397946b1a1f"),n("2424222fdd55b7282442");function r(e,t){var n;return function(r){return n=n||function(e,t){var n=function(e,t){var n=[e.toString().replace(/^function\s*.*?\s*\(\)\s*\{/,"").replace(/\}$/,"")];return t&&n.push("//# sourceMappingURL="+t+"\n"),n}(e,t),r=new Blob(n,{type:"application/javascript"});return URL.createObjectURL(r)}(e,t),new Worker(n,r)}}},"91b52644aaf37c1a441a":function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));n("7cb145ff51d539d4bd6d");var r=n("f8c988483231af8381d2"),i=n.n(r),a=n("cc3ba8f20ced7ad84834"),o=n.n(a),s=n("833d0deece77cf88ba93"),c=n.n(s),u=n("4b84106568f6cb3ecbe0"),l=n.n(u),d=n("f07456edab2c7b12cc0c"),f=n.n(d),h=n("f28ded8c7364f6de9abc"),p=n.n(h),v=n("e93695117ac1f764190a"),g=n.n(v),y=n("d8c910279447f3b2f170"),m=n.n(y),b=(n("d21c3f3d4c981a871761"),n("fce1e10c0a59a8bd89e4"),n("34c0f6a91c0bdd59090c")),_=n("afa39434f067edd8798c"),k=n("1dbcb949bab5b5ef954b"),w=n("3b76dd97653dea47ddc2");function E(){return(new DOMParser).parseFromString('<svg width="32px" height="40px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M11.2374369,14 L17.6187184,7.61871843 C17.9604272,7.27700968 17.9604272,6.72299032 17.6187184,6.38128157 C17.2770097,6.03957281 16.7229903,6.03957281 16.3812816,6.38128157 L9.38128157,13.3812816 C9.03957281,13.7229903 9.03957281,14.2770097 9.38128157,14.6187184 L16.3812816,21.6187184 C16.7229903,21.9604272 17.2770097,21.9604272 17.6187184,21.6187184 C17.9604272,21.2770097 17.9604272,20.7229903 17.6187184,20.3812816 L11.2374369,14 L11.2374369,14 Z" fill="#FFFFFF"></path>\n    </g>\n</svg>',"image/svg+xml").firstChild}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var A=function(e){f()(n,e);var t=T(n);function n(){return i()(this,n),t.apply(this,arguments)}return o()(n,[{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.onClick=function(t){t.preventDefault(),t.stopPropagation(),e.config.onClick(t)},this.bind(["click","touchend"],this.onClick)}},{key:"registerIcons",value:function(){return{screenBack:{icon:E,class:"xg-fullscreen-back"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(this.root,e.screenBack)}},{key:"show",value:function(){b.a.addClass(this.root,"show")}},{key:"hide",value:function(){b.a.removeClass(this.root,"show")}},{key:"render",value:function(){return'<xg-icon class="xgplayer-back">\n    </xg-icon>'}}],[{key:"pluginName",get:function(){return"topbackicon"}},{key:"defaultConfig",get:function(){return{position:w.a.ROOT_TOP,index:0}}}]),n}(w.b);function S(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>\n</svg>\n',"image/svg+xml").firstChild}function I(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path>\n</svg>\n',"image/svg+xml").firstChild}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var O=function(e){f()(n,e);var t=R(n);function n(){var e;i()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),m()(c()(e),"_onOrientationChange",(function(t){e.player.fullscreen&&e.config.rotateFullscreen&&(90===window.orientation||-90===window.orientation?e.player.setRotateDeg(0):e.player.setRotateDeg(90))})),e}return o()(n,[{key:"afterCreate",value:function(){var e=this,t=this.config,n=this.playerConfig;if(!t.disable){t.target&&(this.playerConfig.fullscreenTarget=this.config.target);var r=b.a.getFullScreenEl();n.fullscreenTarget===r&&this.player.getFullscreen(),this.initIcons(),this.handleFullscreen=this.hook("fullscreenChange",this.toggleFullScreen,{pre:function(t){var n=e.player.fullscreen;e.emitUserAction(t,"switch_fullscreen",{prop:"fullscreen",from:n,to:!n})}}),this.bind(".xgplayer-fullscreen",["touchend","click"],this.handleFullscreen),this.on(k.FULLSCREEN_CHANGE,(function(t){e.changeLangTextKey(e.find(".xg-tips"),t?e.i18nKeys.EXITFULLSCREEN_TIPS:e.i18nKeys.FULLSCREEN_TIPS),e.animate(t)})),this.config.needBackIcon&&(this.topBackIcon=this.player.registerPlugin({plugin:A,options:{config:{onClick:function(t){e.handleFullscreen(t)}}}})),"mobile"===_.a.device&&window.addEventListener("orientationchange",this._onOrientationChange)}}},{key:"registerIcons",value:function(){return{fullscreen:{icon:S,class:"xg-get-fullscreen"},exitFullscreen:{icon:I,class:"xg-exit-fullscreen"}}}},{key:"destroy",value:function(){this.unbind(".xgplayer-icon","mobile"===_.a.device?"touchend":"click",this.handleFullscreen),"mobile"===_.a.device&&window.removeEventListener("orientationchange",this._onOrientationChange)}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.fullscreen),this.appendChild(".xgplayer-icon",e.exitFullscreen)}},{key:"toggleFullScreen",value:function(e){e&&(e.preventDefault(),e.stopPropagation());var t=this.player,n=this.config;!0===n.useCssFullscreen||"function"==typeof n.useCssFullscreen&&n.useCssFullscreen()?(t.fullscreen?t.exitCssFullscreen():t.getCssFullscreen(),this.animate(t.fullscreen)):n.rotateFullscreen?(t.fullscreen?t.exitRotateFullscreen():t.getRotateFullscreen(),this.animate(t.fullscreen)):n.switchCallback&&"function"==typeof n.switchCallback?n.switchCallback(t.fullscreen):t.fullscreen?t.exitFullscreen():t.getFullscreen()}},{key:"animate",value:function(e){e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.topBackIcon&&(e?(this.topBackIcon.show(),this.hide()):(this.topBackIcon.hide(),this.show()))}},{key:"show",value:function(){l()(g()(n.prototype),"show",this).call(this)}},{key:"hide",value:function(){l()(g()(n.prototype),"hide",this).call(this)}},{key:"render",value:function(){if(!this.config.disable){return'<xg-icon class="xgplayer-fullscreen">\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="'.concat(this.i18nKeys.FULLSCREEN_TIPS,'">').concat(this.i18n.FULLSCREEN_TIPS,"</div>\n    </xg-icon>")}}}],[{key:"pluginName",get:function(){return"fullscreen"}},{key:"defaultConfig",get:function(){return{position:w.a.CONTROLS_RIGHT,index:0,useCssFullscreen:!1,rotateFullscreen:!1,switchCallback:null,target:null,disable:!1,needBackIcon:!1}}}]),n}(w.b)},"96a54d04afa591d8f2c9":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={DEFAULT:"xgplayer",DEFAULT_SKIN:"xgplayer-skin-default",ENTER:"xgplayer-is-enter",PAUSED:"xgplayer-pause",PLAYING:"xgplayer-playing",ENDED:"xgplayer-ended",CANPLAY:"xgplayer-canplay",LOADING:"xgplayer-isloading",ERROR:"xgplayer-is-error",REPLAY:"xgplayer-replay",NO_START:"xgplayer-nostart",ACTIVE:"xgplayer-active",INACTIVE:"xgplayer-inactive",FULLSCREEN:"xgplayer-is-fullscreen",CSS_FULLSCREEN:"xgplayer-is-cssfullscreen",ROTATE_FULLSCREEN:"xgplayer-rotate-fullscreen",PARENT_ROTATE_FULLSCREEN:"xgplayer-rotate-parent",PARENT_FULLSCREEN:"xgplayer-fullscreen-parent",INNER_FULLSCREEN:"xgplayer-fullscreen-inner",NO_CONTROLS:"no-controls",FLEX_CONTROLS:"flex-controls",CONTROLS_FOLLOW:"controls-follow",CONTROLS_AUTOHIDE:"controls-autohide",TOP_BAR_AUTOHIDE:"top-bar-autohide",NOT_ALLOW_AUTOPLAY:"not-allow-autoplay",SEEKING:"seeking",PC:"xgplayer-pc",MOBILE:"xgplayer-mobile",MINI:"xgplayer-mini"}},"997a44ee604c9ccfa8ae":function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));n("7cb145ff51d539d4bd6d");var r=n("0b165edde72ebe3f3ca5"),i=n.n(r),a=n("f8c988483231af8381d2"),o=n.n(a),s=n("cc3ba8f20ced7ad84834"),c=n.n(s),u=n("833d0deece77cf88ba93"),l=n.n(u),d=n("f07456edab2c7b12cc0c"),f=n.n(d),h=n("f28ded8c7364f6de9abc"),p=n.n(h),v=n("e93695117ac1f764190a"),g=n.n(v),y=n("d8c910279447f3b2f170"),m=n.n(y),b=(n("cf2c3842fd8b1c54ed12"),n("fce1e10c0a59a8bd89e4"),n("16da3d83ca2b978dbac3"),n("a2a80d3346615eb09116"),n("df0f8aaf4d251ab5481e"),n("b82b8efbfaa040833fc3"),n("34c0f6a91c0bdd59090c")),_=n("afa39434f067edd8798c"),k=n("1dbcb949bab5b5ef954b"),w=n("3b76dd97653dea47ddc2"),E=n("57bbfaace4b62097c464"),T=(n("a3f329b954dd33a22b7e"),n("d21c3f3d4c981a871761"),[{tag:"xg-cache",className:"xgplayer-progress-cache",styleKey:"cachedColor"},{tag:"xg-played",className:"xgplayer-progress-played",styleKey:"playedColor"}]),A=function(){function e(t){o()(this,e),this.fragments=t.fragments||[],this.focusClass="inner-focus",this.style=t.style||{playedColor:"",cachedColor:"",progressColor:""},this.duration=0,this.cachedIndex=0,this.playedIndex=0}return c()(e,[{key:"updateDuration",value:function(e){var t=this;this.duration=parseInt(1e3*e);var n=0,r=this.fragments;this.fragments=r.map((function(e){return e.start=n,e.end=n+e.percent*t.duration,e.duration=e.percent*t.duration,n+=e.percent*t.duration,e}))}},{key:"updateProgress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"played",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{newIndex:0,curIndex:0,millisecond:0},n=this.progressList,r=this.fragments,i=t.newIndex,a=t.curIndex,o=t.millisecond;i!==a&&n.map((function(t,n){n<i?t[e].style.width="100%":n>i&&(t[e].style.width=0)}));var s=r[i],c=0===o?0:(o-s.start)/s.duration;n[i][e].style.width=c<0?0:"".concat(100*c,"%")}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:void 0;if(!this.duration||parseInt(1e3*t,10)!==this.duration){if(!t&&0!==t)return;this.updateDuration(t)}var n=this.playedIndex,r=this.cachedIndex;if("Undefined"!==b.a.typeOf(e.played)){var i=this.findIndex(1e3*e.played,n);this.updateProgress("played",{newIndex:i,curIndex:n,millisecond:parseInt(1e3*e.played,10)}),this.playedIndex=i}if("Undefined"!==b.a.typeOf(e.cached)){var a=this.findIndex(1e3*e.cached,r);this.updateProgress("cached",{newIndex:a,curIndex:r,millisecond:parseInt(1e3*e.cached,10)}),this.cachedIndex=a}}},{key:"findIndex",value:function(e,t){var n=this.fragments;return 1===n.length?0:(e>n[t].start&&e<n[t].end||this.fragments.map((function(n,r){e>n.start&&e<=n.end&&(t=r)})),t)}},{key:"findHightLight",value:function(){for(var e=this.root.children,t=0;t<e.length;t++)if(b.a.hasClass(e[t],this.focusClass))return{dom:e[t],pos:e[t].getBoundingClientRect()}}},{key:"findFragment",value:function(e){var t=this.root.children;return e<0||e>=t.length?null:{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"unHightLight",value:function(){for(var e=this.root.children,t=0;t<e.length;t++)b.a.removeClass(e[t],this.focusClass)}},{key:"setHightLight",value:function(e){var t=this.root.children;if(e<t.length)return b.a.addClass(t[e],this.focusClass),{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"destroy",value:function(){this.progressList=null,this.fragments=null,this.root.innerHTML=""}},{key:"render",value:function(){var e=this,t=this.style.progressColor;return this.root=b.a.createDom("xg-inners","",{},"progress-list"),this.fragments&&(this.progressList=this.fragments.map((function(n){var r=b.a.createDom("xg-inner","",{style:t?"background:".concat(t,"; flex: ").concat(n.percent):"flex: ".concat(n.percent)},"".concat(n.isFocus?"inner-focus":""," xgplayer-progress-inner"));return e.root.appendChild(r),T.map((function(t){r.appendChild(b.a.createDom(t.tag,"",{style:t.styleKey?"background: ".concat(e.style[t.styleKey],"; width:0;"):"width:0;"},t.className))})),{cached:r.children[0],played:r.children[1]}}))),this.root}}]),e}();function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var I=function(e){f()(n,e);var t=S(n);function n(e){var r;return o()(this,n),r=t.call(this,e),m()(l()(r),"onMoveOnly",(function(e){var t=l()(r),n=t.pos,i=t.config,a=t.player;b.a.event(e);var o=b.a.getEventPos(e,a.zoom),s=90===a.rotateDeg?o.clientY:o.clientX;if(!(n.moving&&Math.abs(n.x-s)<i.miniMoveStep)){n.moving=!0,n.x=s;var c=r.computeTime(e);r.triggerCallbacks("dragmove",c,e)}})),m()(l()(r),"onBodyClick",(function(e){e.preventDefault(),e.stopPropagation()})),m()(l()(r),"_mouseDownHandler",(function(e,t){r._state.time=t.currentTime,r.updateWidth(t.currentTime,t.percent,0)})),m()(l()(r),"_mouseUpHandler",(function(e,t){l()(r).pos.moving&&r.updateWidth(t.currentTime,t.percent,2)})),m()(l()(r),"_mouseMoveHandler",(function(e,t){var n=l()(r),i=n._state,a=n.pos,o=n.config,s=n.player;i.time<t.currentTime?t.forward=!0:t.forward=!1,i.time=t.currentTime,a.isDown&&!a.moving&&(a.moving=!0,o.isPauseMoving&&s.pause(),r.triggerCallbacks("dragstart",t,e)),r.updateWidth(t.currentTime,t.percent,1),r.triggerCallbacks("dragmove",t,e)})),m()(l()(r),"onMouseDown",(function(e){var t=l()(r),n=t.player,i=t.pos,a=t.config,o=t.playerConfig,s=b.a.getEventPos(e,n.zoom),c=90===n.rotateDeg?s.clientY:s.clientX;if(!(n.isMini||a.closeMoveSeek||!o.allowSeekAfterEnded&&n.ended)){e.stopPropagation(),r.focus(),b.a.checkIsFunction(o.disableSwipeHandler)&&o.disableSwipeHandler(),b.a.checkIsFunction(a.onMoveStart)&&a.onMoveStart(),b.a.event(e),i.x=c,i.isDown=!0,i.moving=!1,n.focus({autoHide:!1}),r.isProgressMoving=!0,b.a.addClass(r.progressBtn,"active");var u=r.computeTime(e);return r._mouseDownHandlerHook(e,u),"touch"===r.domEventType?(r.root.addEventListener("touchmove",r.onMouseMove),r.root.addEventListener("touchend",r.onMouseUp)):(r.unbind("mousemove",r.onMoveOnly),document.addEventListener("mousemove",r.onMouseMove,!1),document.addEventListener("mouseup",r.onMouseUp,!1),n.root.addEventListener("click",r.onBodyClick,!1)),!0}})),m()(l()(r),"onMouseUp",(function(e){var t=l()(r),n=t.player,i=t.config,a=t.pos,o=t.playerConfig,s=t._state;e.stopPropagation(),e.preventDefault(),b.a.checkIsFunction(o.enableSwipeHandler)&&o.enableSwipeHandler(),b.a.checkIsFunction(i.onMoveEnd)&&i.onMoveEnd(),b.a.event(e),b.a.removeClass(r.progressBtn,"active");var c=r.computeTime(e);a.moving?r.triggerCallbacks("dragend",c,e):r.triggerCallbacks("click",c,e),r._mouseUpHandlerHook(e,c),a.moving=!1,a.isDown=!1,a.x=0,a.y=0,s.time=0,"touch"===r.domEventType?(r.root.removeEventListener("touchmove",r.onMouseMove),r.root.removeEventListener("touchend",r.onMouseUp),r.blur()):(document.removeEventListener("mousemove",r.onMouseMove,!1),document.removeEventListener("mouseup",r.onMouseUp,!1),n.root.removeEventListener("click",r.onBodyClick,!1),a.isEnter?!o.isMobileSimulateMode&&r.bind("mousemove",r.onMoveOnly):r.onMouseLeave(e)),b.a.setTimeout(l()(r),(function(){r.resetSeekState()}),10),n.focus()})),m()(l()(r),"onMouseMove",(function(e){var t=l()(r),n=t.pos,i=t.player,a=t.config;b.a.checkTouchSupport()&&e.preventDefault(),b.a.event(e);var o=b.a.getEventPos(e,i.zoom),s=90===i.rotateDeg?o.clientY:o.clientX,c=Math.abs(n.x-s);if(!(n.moving&&c<a.miniMoveStep||!n.moving&&c<a.miniStartStep)){n.x=s;var u=r.computeTime(e);r._mouseMoveHandlerHook(e,u)}})),m()(l()(r),"onMouseOut",(function(e){r.triggerCallbacks("mouseout",null,e)})),m()(l()(r),"onMouseOver",(function(e){r.triggerCallbacks("mouseover",null,e)})),m()(l()(r),"onMouseEnter",(function(e){var t=l()(r),n=t.player,i=t.pos;r.triggerCallbacks("mouseenter",null,e),i.isDown||i.isEnter||n.isMini||!n.config.allowSeekAfterEnded&&n.ended||(i.isEnter=!0,r.bind("mousemove",r.onMoveOnly),r.bind("mouseleave",r.onMouseLeave),r.focus())})),m()(l()(r),"onMouseLeave",(function(e){r.triggerCallbacks("mouseleave",null,e);var t=l()(r),n=t.player,i=t.pos;i.isEnter=!1,n.isMini||(r.unbind("mousemove",r.onMoveOnly),i.isDown?r.unbind("mouseleave",r.onMouseLeave):r.blur())})),r.useable=!1,r.isProgressMoving=!1,r.__dragCallBacks=[],r._state={now:-1,direc:0,time:0},r._disableBlur=!1,r}return c()(n,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"changeState",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.useable=e}},{key:"createInner",value:function(){var e=this;this.innerList=new A({fragments:this.config.fragments,style:this.playerConfig.commonStyle||{}}),this.outer.insertBefore(this.innerList.render(),this.outer.children[0]),["findHightLight","unHightLight","setHightLight","findFragment"].map((function(t){e[t]=e.innerList[t].bind(e.innerList)}))}},{key:"afterCreate",value:function(){var e=this;this.config.disable||this.playerConfig.isLive||(this.pos={x:0,y:0,moving:!1,isDown:!1,isEnter:!1},this.outer=this.find("xg-outer"),this.createInner(),"mobile"===_.a.device&&(this.config.isDragingSeek=!1,this.isMobile=!0),this.progressBtn=this.find(".xgplayer-progress-btn"),this.on(k.TIME_UPDATE,(function(){e.onTimeupdate()})),this.on(k.SEEKED,(function(){e.onTimeupdate(),e.onCacheUpdate()})),this.on(k.PROGRESS,(function(){e.onCacheUpdate()})),this.on(k.ENDED,(function(){e.onCacheUpdate(),e._state.now=0})),this.on(k.EMPTIED,(function(){e.onReset()})),this.bindDomEvents(),this.initCustomStyle())}},{key:"initCustomStyle",value:function(){var e=(this.playerConfig||{}).commonStyle.sliderBtnStyle,t=this.progressBtn;e&&("string"==typeof e?t.style.boxShadow=e:"object"===i()(e)&&Object.keys(e).map((function(n){t.style[n]=e[n]})))}},{key:"triggerCallbacks",value:function(e,t,n){this.__dragCallBacks.length>0&&this.__dragCallBacks.map((function(r){if(r&&r.handler&&r.type===e)try{r.handler(t,n)}catch(i){console.error("[XGPLAYER][triggerCallbacks] ".concat(r," error"),i)}}))}},{key:"addCallBack",value:function(e,t){t&&"function"==typeof t&&this.__dragCallBacks.push({type:e,handler:t})}},{key:"removeCallBack",value:function(e,t){var n=this.__dragCallBacks,r=-1;n.map((function(n,i){n&&n.type===e&&n.handler===t&&(r=i)})),r>-1&&n.splice(r,1)}},{key:"bindDomEvents",value:function(){var e=this.player,t=e.controls,n=e.config;this._mouseDownHandlerHook=this.hook("dragstart",this._mouseDownHandler),this._mouseUpHandlerHook=this.hook("dragend",this._mouseUpHandler),this._mouseMoveHandlerHook=this.hook("drag",this._mouseMoveHandler),"touch"===this.domEventType?(this.root.addEventListener("touchstart",this.onMouseDown),t&&(t.root&&t.root.addEventListener("touchmove",b.a.stopPropagation),t.center&&t.center.addEventListener("touchend",b.a.stopPropagation))):(this.bind("mousedown",this.onMouseDown),!n.isMobileSimulateMode&&this.bind("mouseenter",this.onMouseEnter),this.bind("mouseover",this.onMouseOver),this.bind("mouseout",this.onMouseOut))}},{key:"focus",value:function(){b.a.addClass(this.root,"active")}},{key:"blur",value:function(){this._disableBlur||(this.player.controls.recoverAutoHide(),b.a.removeClass(this.root,"active"))}},{key:"disableBlur",value:function(){this._disableBlur=!0}},{key:"enableBlur",value:function(){this._disableBlur=!1}},{key:"updateWidth",value:function(e,t,n){var r=this.config,i=this.player;if(!r.isCloseClickSeek||0!==n){var a=e>i.duration?i.duration-.2:Number(e).toFixed(1);this.updatePercent(t),this.updateTime(e),(1!==n||r.isDragingSeek&&"audio"!==i.videoConfig.mediaType)&&(this._state.now=a,this._state.direc=a>i.currentTime?0:1,i.seek(a))}}},{key:"computeTime",value:function(e){var t,n,r,i=this.player,a=this.root.getBoundingClientRect(),o=a.width,s=a.height,c=a.top,u=a.left,l=b.a.getEventPos(e,i.zoom);90===i.rotateDeg?(t=s,n=c,r=l.clientY):(t=o,n=u,r=l.clientX);var d=r-n,f=(d=d>t?t:d<0?0:d)/t;return{percent:f=f<0?0:f>1?1:f,currentTime:parseInt(f*this.duration*1e3,10)/1e3,offset:d,width:t,left:n,e:e}}},{key:"updateTime",value:function(e){var t=this.player,n=this.duration;e>n?e=n:e<0&&(e=0);var r=t.plugins.time;r&&r.updateTime(e)}},{key:"resetSeekState",value:function(){this.isProgressMoving=!1;var e=this.player.plugins.time;e&&e.resetActive()}},{key:"updatePercent",value:function(e,t){if(this.isProgressMoving=!0,!this.config.disable){e=e>1?1:e<0?0:e,this.progressBtn.style.left="".concat(100*e,"%"),this.innerList.update({played:e*this.duration},this.duration);var n=this.player.plugins.miniprogress;n&&n.update({played:e*this.duration},this.duration)}}},{key:"onTimeupdate",value:function(){var e=this.player,t=this._state,n=this.duration;if(!(e.isSeeking||this.isProgressMoving||e.state<E.a.RUNNING)){if(t.now>-1){var r=parseInt(1e3*t.now,10)-parseInt(1e3*e.currentTime,10);if(0===t.direc&&r>300||1===t.direc&&r>-300)return void(t.now=-1);t.now=-1}var i=this.timeOffset+e.currentTime;this.innerList.update({played:i},n),this.progressBtn.style.left="".concat(i/n*100,"%");var a=this.player.plugins.miniprogress;a&&a.update({played:i},n)}}},{key:"onCacheUpdate",value:function(){var e=this.player,t=this.duration,n=e.bufferedPoint;this.innerList.update({cached:n.end},t);var r=this.player.plugins.miniprogress;r&&r.update({cached:n.end},t)}},{key:"onReset",value:function(){this.innerList.update({played:0,cached:0},0);var e=this.player.plugins.miniprogress;e&&e.update({cached:0,played:0},0)}},{key:"destroy",value:function(){var e=this.player,t=e.controls;this.thumbnailPlugin=null,this.innerList.destroy(),this.innerList=null,"touch"===this.domEventType?(this.root.removeEventListener("touchstart",this.onMouseDown),this.root.removeEventListener("touchmove",this.onMouseMove),this.root.removeEventListener("touchend",this.onMouseUp),t&&(t.root&&t.root.removeEventListener("touchmove",b.a.stopPropagation),t.center&&t.center.removeEventListener("touchend",b.a.stopPropagation))):(this.unbind("mousedown",this.onMouseDown),this.unbind("mouseenter",this.onMouseEnter),this.unbind("mousemove",this.onMoveOnly),this.unbind("mouseleave",this.onMouseLeave),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),e.root.removeEventListener("click",this.onBodyClick,!1))}},{key:"render",value:function(){if(!this.config.disable&&!this.playerConfig.isLive){var e=this.player.controls?this.player.controls.config.mode:"";return'\n    <xg-progress class="xgplayer-progress '.concat("bottom"===e?"xgplayer-progress-bottom":"",'">\n      <xg-outer class="xgplayer-progress-outer">\n        <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>\n      </xg-outer>\n    </xg-progress>\n    ')}}}],[{key:"pluginName",get:function(){return"progress"}},{key:"defaultConfig",get:function(){return{position:w.a.CONTROLS_CENTER,index:0,disable:!1,isDragingSeek:!0,closeMoveSeek:!1,isPauseMoving:!1,isCloseClickSeek:!1,fragments:[{percent:1}],miniMoveStep:5,miniStartStep:2,onMoveStart:function(){},onMoveEnd:function(){}}}}]),n}(w.b)},"9a0812b9b795e3662b25":function(e,t,n){"use strict";var r=n("1dbcb949bab5b5ef954b");n.d(t,"a",(function(){return r}))},"9a6d52046a9932628ae8":function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));n("7cb145ff51d539d4bd6d"),n("e502d00ea6e2f0b47ea0"),n("098ff896a5dab77f75b3"),n("765c3fe4871c97a98a7a"),n("af4e4e4030596b369b13"),n("b9c487edb4e7fbfb9158");var r=n("f8c988483231af8381d2"),i=n.n(r),a=n("cc3ba8f20ced7ad84834"),o=n.n(a),s=n("833d0deece77cf88ba93"),c=n.n(s),u=n("f07456edab2c7b12cc0c"),l=n.n(u),d=n("f28ded8c7364f6de9abc"),f=n.n(d),h=n("e93695117ac1f764190a"),p=n.n(h),v=n("d8c910279447f3b2f170"),g=n.n(v),y=(n("d21c3f3d4c981a871761"),n("cf2c3842fd8b1c54ed12"),n("16da3d83ca2b978dbac3"),n("df0f8aaf4d251ab5481e"),n("1dbcb949bab5b5ef954b"));function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}function _(e){e.preventDefault(),e.returnValue=!1}function k(e){var t=e.tagName;return!("INPUT"!==t&&"TEXTAREA"!==t&&!e.isContentEditable)}var w=function(e){l()(n,e);var t=b(n);function n(){var e;i()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),g()(c()(e),"onBodyKeyDown",(function(t){var n=t||window.event;if(e.player&&(e.player.isUserActive||e.config.isIgnoreUserActive)&&!(e.config.disable||e.config.disableBodyTrigger||!e.checkIsVisible()||n.metaKey||n.altKey||n.ctrlKey)){var r=n.keyCode;return!(n.target!==document.body&&(!e.config.isGlobalTrigger||k(n.target))||!e.checkCode(r,!0))&&(_(n),e.handleKeyCode(r,t),!1)}})),g()(c()(e),"onKeydown",(function(t){var n=t||window.event;if(!(e.config.disable||e.config.disableRootTrigger||n.metaKey||n.altKey||n.ctrlKey)&&(e.player.isUserActive||e.config.isIgnoreUserActive)&&(e.player.isUserActive||e.config.isIgnoreUserActive)){if(!n||37!==n.keyCode&&!e.checkCode(n.keyCode)||n.target!==e.player.root&&n.target!==e.player.video&&n.target!==e.player.controls.el)return!0;_(n),e.handleKeyCode(n.keyCode,t)}})),e}return o()(n,[{key:"mergekeyCodeMap",value:function(){var e=this,t=this.config.keyCodeMap;t&&Object.keys(t).map((function(n){e.keyCodeMap[n]?["keyCode","action","disable","isBodyTarget"].map((function(r){t[n][r]&&(e.keyCodeMap[n][r]=t[n][r])})):e.keyCodeMap[n]=t[n]}))}},{key:"afterCreate",value:function(){this.config.disable=!this.playerConfig.keyShortcut;var e="function"==typeof this.config.seekStep?this.config.seekStep(this.player):this.config.seekStep;e&&"number"==typeof e&&(this.seekStep=e),this.keyCodeMap={space:{keyCode:32,action:"playPause",disable:!1,noBodyTarget:!1},up:{keyCode:38,action:"upVolume",disable:!1,noBodyTarget:!0},down:{keyCode:40,action:"downVolume",disable:!1,noBodyTarget:!0},left:{keyCode:37,action:"seekBack",disable:!1},right:{keyCode:39,action:"seek",disable:!1},esc:{keyCode:27,action:"exitFullscreen",disable:!1}},this.mergekeyCodeMap(),this.player.root.addEventListener("keydown",this.onKeydown),document.addEventListener("keydown",this.onBodyKeyDown)}},{key:"checkIsVisible",value:function(){if(!this.config.checkVisible)return!0;var e=this.player.root.getBoundingClientRect(),t=e.height,n=e.top,r=e.bottom,i=window.innerHeight;return!(n<0&&n<0-.9*t||r>0&&r-i>.9*t)}},{key:"checkCode",value:function(e,t){var n=this,r=!1;return Object.keys(this.keyCodeMap).map((function(i){n.keyCodeMap[i]&&e===n.keyCodeMap[i].keyCode&&!n.keyCodeMap[i].disable&&(r=!t||t&&!n.keyCodeMap[i].noBodyTarget)})),r}},{key:"downVolume",value:function(e){var t=this.player,n=parseFloat((t.volume-.1).toFixed(1)),r={volume:{from:t.volume,to:n}};this.emitUserAction(e,"change_volume",{props:r}),t.volume=n>=0?n:0}},{key:"upVolume",value:function(e){var t=this.player,n=parseFloat((t.volume+.1).toFixed(1)),r={volume:{from:t.volume,to:n}};this.emitUserAction(e,"change_volume",{props:r}),t.volume=n<=1?n:1}},{key:"seek",value:function(e){var t=this.player,n=t.currentTime,r=t.duration,i=n,a={currentTime:{from:n,to:i=n+this.seekStep<=r?n+this.seekStep:r-1}};this.emitUserAction(e,"seek",{props:a}),this.player.currentTime=i}},{key:"seekBack",value:function(e){var t=this.player.currentTime,n=0;t-this.seekStep>=0&&(n=t-this.seekStep);var r={currentTime:{from:t,to:n}};this.emitUserAction(e,"seek",{props:r}),this.player.currentTime=n}},{key:"playPause",value:function(e){var t=this.player;t&&(this.emitUserAction(e,"switch_play_pause"),t.paused?t.play():t.pause())}},{key:"exitFullscreen",value:function(e){var t=this.player,n=t.fullscreen,r=t.cssfullscreen;n&&(this.emitUserAction("keyup","switch_fullscreen",{prop:"fullscreen",from:n,to:!n}),t.exitFullscreen()),r&&(this.emitUserAction("keyup","switch_css_fullscreen",{prop:"cssfullscreen",from:r,to:!r}),t.exitCssFullscreen())}},{key:"handleKeyCode",value:function(e,t){var n=this;Object.keys(this.keyCodeMap).map((function(r){var i=n.keyCodeMap[r],a=i.action,o=i.keyCode,s=i.disable;o!==e||s||("function"==typeof a?a(t,n.player):"string"==typeof a&&"function"==typeof n[a]&&n[a](t,n.player),n.emit(y.SHORTCUT,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({key:r,target:t.target},n.keyCodeMap[r])))}))}},{key:"destroy",value:function(){this.player.root.removeEventListener("keydown",this.onKeydown),document.removeEventListener("keydown",this.onBodyKeyDown)}},{key:"disable",value:function(){this.config.disable=!0}},{key:"enable",value:function(){this.config.disable=!1}}],[{key:"pluginName",get:function(){return"keyboard"}},{key:"defaultConfig",get:function(){return{seekStep:10,checkVisible:!0,disableBodyTrigger:!1,disableRootTrigger:!1,isGlobalTrigger:!1,keyCodeMap:{},disable:!1,isIgnoreUserActive:!1}}}]),n}(n("7367695471878cd60218").a)},"9ab1f5c98393885582c1":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return r}));var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{}}).call(this,n("fd62a254c065d2a17c3d"))},a262c24142fa15f75e93:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));n("7cb145ff51d539d4bd6d");var r=n("f8c988483231af8381d2"),i=n.n(r),a=n("cc3ba8f20ced7ad84834"),o=n.n(a),s=n("f07456edab2c7b12cc0c"),c=n.n(s),u=n("f28ded8c7364f6de9abc"),l=n.n(u),d=n("e93695117ac1f764190a"),f=n.n(d);n("fce1e10c0a59a8bd89e4");function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var p=function(e){c()(n,e);var t=h(n);function n(){return i()(this,n),t.apply(this,arguments)}return o()(n,[{key:"afterCreate",value:function(){}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:void 0;t&&this.root&&(e.cached&&(this.find("xg-mini-progress-cache").style.width="".concat(e.cached/t*100,"%")),e.played&&(this.find("xg-mini-progress-played").style.width="".concat(e.played/t*100,"%")))}},{key:"render",value:function(){if(this.playerConfig.progress&&this.playerConfig.miniprogress)return'<xg-mini-progress class="xg-mini-progress">\n    <xg-mini-progress-cache class="xg-mini-progress-cache"></xg-mini-progress-cache>\n    <xg-mini-progress-played class="xg-mini-progress-played"></xg-mini-progress-played>\n    </xg-mini-progress>'}}],[{key:"pluginName",get:function(){return"MiniProgress"}},{key:"defaultConfig",get:function(){return{}}}]),n}(n("3b76dd97653dea47ddc2").b)},a2958fc941dc7a5e91b3:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="3.0.0-next.22"},a81749b6fb57993f107c:function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));n("7cb145ff51d539d4bd6d");var r=n("f8c988483231af8381d2"),i=n.n(r),a=n("cc3ba8f20ced7ad84834"),o=n.n(a),s=n("833d0deece77cf88ba93"),c=n.n(s),u=n("f07456edab2c7b12cc0c"),l=n.n(u),d=n("f28ded8c7364f6de9abc"),f=n.n(d),h=n("e93695117ac1f764190a"),p=n.n(h),v=n("d8c910279447f3b2f170"),g=n.n(v),y=(n("d21c3f3d4c981a871761"),n("fce1e10c0a59a8bd89e4"),n("34c0f6a91c0bdd59090c")),m=n("afa39434f067edd8798c"),b=n("1dbcb949bab5b5ef954b"),_=n("3b76dd97653dea47ddc2");function k(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n',"image/svg+xml").firstChild}function w(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n',"image/svg+xml").firstChild}function E(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M920.4 439.808l-108.544-109.056-72.704 72.704 109.568 108.544-109.056 108.544 72.704 72.704 108.032-109.568 108.544 109.056 72.704-72.704-109.568-108.032 109.056-108.544-72.704-72.704-108.032 109.568z"></path>\n</svg>\n',"image/svg+xml").firstChild}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var A=function(e){l()(n,e);var t=T(n);function n(){var e;i()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),g()(c()(e),"onBarMousedown",(function(t){var n=c()(e).player,r=e.find(".xgplayer-slider"),i=e.find(".xgplayer-bar");r.focus(),y.a.event(t);var a=i.getBoundingClientRect(),o=y.a.getEventPos(t,n.zoom),s=a.height-(o.clientY-a.top);if(o.h=s,o.barH=a.height,e.pos=o,!(s<-2))return e.updateVolumePos(s,t),document.addEventListener("mouseup",e.onBarMouseUp),e.isStart=!0,!1})),g()(c()(e),"onBarMouseMove",(function(t){if(e.isStart){var n=c()(e),r=n.pos,i=n.player;t.preventDefault(),t.stopPropagation(),y.a.event(t);var a=y.a.getEventPos(t,i.zoom);e.isMoving=!0;var o=r.h-a.clientY+r.clientY;o>r.barH||e.updateVolumePos(o,t)}})),g()(c()(e),"onBarMouseUp",(function(t){y.a.event(t),document.removeEventListener("mouseup",e.onBarMouseUp),e.isStart=!1,e.isMoving=!1})),g()(c()(e),"onMouseenter",(function(t){e._timerId&&(y.a.clearTimeout(c()(e),e._timerId),e._timerId=null),y.a.addClass(e.root,"slide-show")})),g()(c()(e),"onMouseleave",(function(t){e._timerId&&(y.a.clearTimeout(c()(e),e._timerId),e._timerId=null),e._timerId=y.a.setTimeout(c()(e),(function(){y.a.removeClass(e.root,"slide-show"),e.isStart&&e.onBarMouseUp(t),e._timerId=null}),200)})),g()(c()(e),"onVolumeChange",(function(t){if(e.player){var n=e.player,r=n.muted,i=n.volume;e.isMoving||(e.find(".xgplayer-drag").style.height=r||0===i?"4px":"".concat(100*i,"%"),e.config.showValueLabel&&e.updateVolumeValue()),e.animate(r,i)}})),e}return o()(n,[{key:"registerIcons",value:function(){return{volumeSmall:{icon:w,class:"xg-volume-small"},volumeLarge:{icon:k,class:"xg-volume"},volumeMuted:{icon:E,class:"xg-volume-mute"}}}},{key:"afterCreate",value:function(){var e=this;if(this._timerId=null,!this.config.disable){this.initIcons();var t=this.playerConfig,n=t.commonStyle,r=t.volume;n.volumeColor&&(this.find(".xgplayer-drag").style.backgroundColor=n.volumeColor),this.changeMutedHandler=this.hook("mutedChange",(function(t){e.changeMuted(t)}),{pre:function(e){e.preventDefault(),e.stopPropagation()}}),"mobile"===m.a.device||this.playerConfig.isMobileSimulateMode||(this.bind("mouseenter",this.onMouseenter),this.bind(["blur","mouseleave"],this.onMouseleave),this.bind(".xgplayer-slider","mousedown",this.onBarMousedown),this.bind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.bind(".xgplayer-slider","mouseup",this.onBarMouseUp)),this.bind(".xgplayer-icon",["touchend","click"],this.changeMutedHandler),this.on(b.VOLUME_CHANGE,this.onVolumeChange),this.once(b.LOADED_DATA,this.onVolumeChange),"Number"!==y.a.typeOf(r)&&(this.player.volume=this.config.default),this.onVolumeChange()}}},{key:"updateVolumePos",value:function(e,t){var n=this.player,r=this.find(".xgplayer-drag"),i=this.find(".xgplayer-bar");if(i&&r){var a=parseInt(e/i.getBoundingClientRect().height*1e3,10);r.style.height="".concat(e,"px");var o=Math.max(Math.min(a/1e3,1),0),s={volume:{from:n.volume,to:o}};n.muted&&(s.muted={from:!0,to:!1}),this.emitUserAction(t,"change_volume",{muted:n.muted,volume:n.volume,props:s}),n.volume=Math.max(Math.min(a/1e3,1),0),n.muted&&(n.muted=!1),this.config.showValueLabel&&this.updateVolumeValue()}}},{key:"updateVolumeValue",value:function(){var e=this.player,t=e.volume,n=e.muted,r=this.find(".xgplayer-value-label"),i=Math.max(Math.min(t,1),0);r.innerText=n?0:Math.ceil(100*i)}},{key:"changeMuted",value:function(e){e&&e.stopPropagation();var t=this.player;this.isStart&&this.onBarMouseUp(e),this.emitUserAction(e,"change_muted",{muted:t.muted,volume:t.volume,props:{muted:{from:t.muted,to:!t.muted}}}),t.volume>0&&(t.muted=!t.muted),t.volume<.01&&(t.volume=this.config.miniVolume)}},{key:"animate",value:function(e,t){e||0===t?this.setAttr("data-state","mute"):t<.5&&this.icons.volumeSmall?this.setAttr("data-state","small"):this.setAttr("data-state","normal")}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.volumeSmall),this.appendChild(".xgplayer-icon",e.volumeLarge),this.appendChild(".xgplayer-icon",e.volumeMuted)}},{key:"destroy",value:function(){this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.unbind(".xgplayer-slider","mousedown",this.onBarMousedown),this.unbind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.unbind(".xgplayer-slider","mouseup",this.onBarMouseUp),document.removeEventListener("mouseup",this.onBarMouseUp),this.unbind(".xgplayer-icon","mobile"===m.a.device?"touchend":"click",this.changeMutedHandler)}},{key:"render",value:function(){if(!this.config.disable){var e=this.config.default||this.player.volume,t=this.config.showValueLabel;return'\n    <xg-icon class="xgplayer-volume" data-state="normal">\n      <div class="xgplayer-icon">\n      </div>\n      <xg-slider class="xgplayer-slider">\n        '.concat(t?'<div class="xgplayer-value-label">'.concat(100*e,"</div>"):"",'\n        <div class="xgplayer-bar">\n          <xg-drag class="xgplayer-drag" style="height: ').concat(100*e,'%"></xg-drag>\n        </div>\n      </xg-slider>\n    </xg-icon>')}}}],[{key:"pluginName",get:function(){return"volume"}},{key:"defaultConfig",get:function(){return{position:_.a.CONTROLS_RIGHT,index:1,disable:!1,showValueLabel:!1,default:.6,miniVolume:.2}}}]),n}(_.b)},ab6ffd1e2d3463998345:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var r=n("f8c988483231af8381d2"),i=n.n(r),a=(n("cf2c3842fd8b1c54ed12"),n("16da3d83ca2b978dbac3"),n("a2958fc941dc7a5e91b3")),o={1:"network",2:"network",3:"decoder",4:"format"},s=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{errorType:"",errorCode:0,errorMessage:"",originError:"",ext:{},mediaError:null};i()(this,e);var r=t&&t.i18n?t.i18n.ERROR_TYPES:null;if(t.video){var o=n.mediaError?n.mediaError:t.video.error||{},s=t.duration,c=t.currentTime,u=t.ended,l=t.src,d=t.currentSrc,f=t.video,h=f.readyState,p=f.networkState,v={playerVersion:a.a,currentTime:c,duration:s,ended:u,readyState:h,networkState:p,src:l||d,errorType:n.errorType,errorCode:n.errorCode||o.code,message:n.errorMessage||o.message,mediaError:o,originError:n.originError?n.originError.stack:""};return n.ext&&Object.keys(n.ext).map((function(e){v[e]=n.ext[e]})),v}if(arguments.length>1){for(var g={playerVersion:a.a,domain:document.domain},y=["errorType","currentTime","duration","networkState","readyState","src","currentSrc","ended","errd","errorCode","mediaError"],m=0;m<arguments.length;m++)g[y[m]]=arguments[m];return g.ex=r?(r[arguments[0]]||{}).msg:"",g}}},afa39434f067edd8798c:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n("d21c3f3d4c981a871761"),n("098ff896a5dab77f75b3"),n("16da3d83ca2b978dbac3"),n("2f22f453e80dcd80946e"),n("99db023933d00eead7df"),n("cf2c3842fd8b1c54ed12");var r=/(Android)\s([\d.]+)/,i=/(Version)\/([\d.]+)/,a=["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"],o={get device(){return o.os.isPc?"pc":"mobile"},get browser(){if("undefined"==typeof navigator)return"";var e=navigator.userAgent.toLowerCase(),t={ie:/rv:([\d.]+)\) like gecko/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(t).filter((function(n){return t[n].test(e)})))[0]},get os(){if("undefined"==typeof navigator)return{};var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,r=/(?:Android)/.test(e),i=/(?:Firefox)/.test(e),a=/(?:iPad|PlayBook)/.test(e)||r&&!/(?:Mobile)/.test(e)||i&&/(?:Tablet)/.test(e),o=/(?:iPhone)/.test(e)&&!a,s=!(o||r||n||a),c=/(?:iPad|PlayBook)/.test(e);return{isTablet:a,isPhone:o,isIpad:c,isIos:o||c,isAndroid:r,isPc:s,isSymbian:n,isWindowsPhone:t,isFireFox:i}},get osVersion(){var e=navigator.userAgent,t="",n=(t=/(?:iPhone)|(?:iPad|PlayBook)/.test(e)?i:r)?t.exec(e):[];if(n&&n.length>=3){var a=n[2].split(".");return a.length>0?parseInt(a[0]):0}return 0},get isWeixin(){if("undefined"==typeof navigator)return!1;return!!/(micromessenger)\/([\d.]+)/.exec(navigator.userAgent.toLocaleLowerCase())||void 0},isSupportMP4:function(){if(this.supportResult)return this.supportResult;var e=document.createElement("video"),t={isSupport:!1,mime:""};return"function"==typeof e.canPlayType&&a.map((function(n){"probably"===e.canPlayType('video/mp4; codecs="'.concat(n,'"'))&&(t.isSupport=!0,t.mime+="||".concat(n))})),this.supportResult=t,e=null,t}},s=o},bb49792cce51cc2eac20:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));n("7cb145ff51d539d4bd6d");var r=n("f8c988483231af8381d2"),i=n.n(r),a=n("cc3ba8f20ced7ad84834"),o=n.n(a),s=n("f07456edab2c7b12cc0c"),c=n.n(s),u=n("f28ded8c7364f6de9abc"),l=n.n(u),d=n("e93695117ac1f764190a"),f=n.n(d),h=n("3b76dd97653dea47ddc2");function p(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="-5 -5 110 110">\n  <path d="M100,50A50,50,0,1,1,50,0" stroke-width="5" stroke="#ddd" stroke-dasharray="236" fill="none"></path>\n</svg>\n',"image/svg+xml").firstChild}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var g=function(e){c()(n,e);var t=v(n);function n(){return i()(this,n),t.apply(this,arguments)}return o()(n,[{key:"registerIcons",value:function(){return{loadingIcon:p}}},{key:"afterCreate",value:function(){this.appendChild("xg-loading-inner",this.icons.loadingIcon)}},{key:"render",value:function(){return'\n    <xg-loading class="xgplayer-loading">\n      <xg-loading-inner></xg-loading-inner>\n    </xg-loading>'}}],[{key:"pluginName",get:function(){return"loading"}},{key:"defaultConfig",get:function(){return{position:h.a.ROOT}}}]),n}(h.b)},c8c315dc775fdfc7c489:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n("f8c988483231af8381d2"),i=n.n(r),a=n("cc3ba8f20ced7ad84834"),o=n.n(a),s=n("f07456edab2c7b12cc0c"),c=n.n(s),u=n("f28ded8c7364f6de9abc"),l=n.n(u),d=n("e93695117ac1f764190a"),f=n.n(d),h=(n("cf2c3842fd8b1c54ed12"),n("16da3d83ca2b978dbac3"),n("7cb145ff51d539d4bd6d"),n("34c0f6a91c0bdd59090c")),p=n("1dbcb949bab5b5ef954b"),v=n("3b76dd97653dea47ddc2"),g=n("57bbfaace4b62097c464"),y=n("ec618b62718d4965f43d"),m=n("f595bdb75185de96d993");function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var _={};var k=function(e){c()(n,e);var t=b(n);function n(e){var r;return i()(this,n),(r=t.call(this,e)).autoPlayStart=!1,r}return o()(n,[{key:"afterCreate",value:function(){var e=this,t=this.player,n=this.playerConfig;this.initIcons(),this.once(p.READY,(function(){n&&(n.lang&&"en"===n.lang?h.a.addClass(t.root,"lang-is-en"):"jp"===n.lang&&h.a.addClass(t.root,"lang-is-jp"))})),this.on(p.AUTOPLAY_STARTED,(function(){var t="auto"===e.config.mode?"auto-hide":"hide";h.a.addClass(e.root,t),e.autoPlayStart=!0,e.onPlayPause("play")})),n.autoplay||this.show(),this.on(p.AUTOPLAY_PREVENTED,(function(){var t="auto"===e.config.mode?"auto-hide":"hide";e.setAttr("data-state","play"),h.a.removeClass(e.root,t),e.show()})),this.on(p.PLAY,(function(){e.onPlayPause("play")})),this.on(p.PAUSE,(function(){e.onPlayPause("pause")})),this.clickHandler=this.hook("startClick",this.switchPausePlay,{pre:function(t){t.cancelable&&t.preventDefault(),t.stopPropagation();var n=e.player.paused;e.emitUserAction(t,"switch_play_pause",{props:"paused",from:n,to:!n})}}),this.bind(["click","touchend"],this.clickHandler)}},{key:"preventDefault",value:function(e){}},{key:"registerIcons",value:function(){return{startPlay:{icon:y.a,class:"xg-icon-play"},startPause:{icon:m.a,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild("xg-start-inner",e.startPlay),this.appendChild("xg-start-inner",e.startPause)}},{key:"hide",value:function(){h.a.addClass(this.root,"hide")}},{key:"show",value:function(){h.a.removeClass(this.root,"hide")}},{key:"focusHide",value:function(){h.a.addClass(this.root,"focus-hide")}},{key:"recover",value:function(){h.a.removeClass(this.root,"focus-hide")}},{key:"switchStatus",value:function(e){e?this.setAttr("data-state",this.player.paused?"pause":"play"):this.setAttr("data-state",this.player.paused?"play":"pause")}},{key:"animate",value:function(e){var t=this;!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{start:null,end:null};_[e]&&window.clearTimeout(_[e].id),_[e]={},n.start&&n.start(),_[e].id=window.setTimeout((function(){n.end&&n.end(),window.clearTimeout(_[e].id),delete _[e]}),t)}("pauseplay",400,{start:function(){h.a.addClass(t.root,"interact"),t.show(),t.switchStatus(!0)},end:function(){h.a.removeClass(t.root,"interact"),!e&&t.hide()}})}},{key:"switchPausePlay",value:function(e){var t=this.player;(e.cancelable&&e.preventDefault(),e.stopPropagation(),t.state<g.a.READY)||(this.player.paused||t.state!==g.a.RUNNING?t.play():t.pause())}},{key:"onPlayPause",value:function(e){var t=this.config,n=this.player;if(!(n.state<g.a.RUNNING)&&this.autoPlayStart){if("show"===t.mode)return this.switchStatus(),void this.show();if("auto"!==t.mode){if(t.isShowPause&&n.paused&&!n.ended||t.isShowEnd&&n.ended)return this.switchStatus(),void this.show();if(t.disableAnimate)return this.switchStatus(),void this.hide();if("play"===e)this.autoPlayStart?this.animate():this.hide();else{if(!this.autoPlayStart||n.ended)return;this.animate()}}else this.switchStatus()}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.clickHandler),Object.keys(_).map((function(e){window.clearTimeout(_[e].id),delete _[e]}))}},{key:"render",value:function(){var e=this.playerConfig.autoplay?"auto"===this.config.mode?"auto-hide":"hide":"";return'\n    <xg-start class="xgplayer-start '.concat(e,'">\n    <xg-start-inner></xg-start-inner>\n    </xg-start>')}}],[{key:"pluginName",get:function(){return"start"}},{key:"defaultConfig",get:function(){return{isShowPause:!1,isShowEnd:!1,disableAnimate:!1,mode:"hide"}}}]),n}(v.b)},d5ea19a4a43e93540347:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return Mn}));var r={};n.r(r),n.d(r,"AV1MimeTypes",(function(){return ge})),n.d(r,"checkWebAssemblySupport",(function(){return pe})),n.d(r,"getDrmServerUrl",(function(){return we})),n.d(r,"isAV1Supported",(function(){return me})),n.d(r,"isCodecSupported",(function(){return ye})),n.d(r,"isEMESupported",(function(){return be})),n.d(r,"isEncryptSupported",(function(){return ke})),n.d(r,"isSupported",(function(){return _e}));var i={};n.r(i),n.d(i,"CACHE_TYPES",(function(){return Ce})),n.d(i,"DOWN_STATES",(function(){return xe})),n.d(i,"MEDIA_FORMAT",(function(){return Ie})),n.d(i,"MEDIA_TYPES",(function(){return Re})),n.d(i,"ONE_STEP_DONE",(function(){return Se})),n.d(i,"PRELOAD_NEXT",(function(){return Ee})),n.d(i,"PRELOAD_SEG_DONE",(function(){return Te})),n.d(i,"PRELOAD_TYPES",(function(){return Oe})),n.d(i,"STATES",(function(){return Ae})),n.d(i,"VTYPES",(function(){return Pe}));n("c93a3409710bc0c7e7f7"),n("96e657875a3e8636f3a2"),n("3001a3934397946b1a1f"),n("562804f2026cdb551686"),n("35cb213607f0dbaa33a3"),n("7cb145ff51d539d4bd6d");var a=n("f8c988483231af8381d2"),o=n.n(a),s=n("cc3ba8f20ced7ad84834"),c=n.n(s),u=n("833d0deece77cf88ba93"),l=n.n(u),d=n("f07456edab2c7b12cc0c"),f=n.n(d),h=n("f28ded8c7364f6de9abc"),p=n.n(h),v=n("e93695117ac1f764190a"),g=n.n(v),y=n("d8c910279447f3b2f170"),m=n.n(y),b=(n("d21c3f3d4c981a871761"),n("80e6d69186a0d6260a46"),n("ceb1a9531391eaeaea3e"),n("79bbd5077cad2d6c4d8a"),n("98d1f6ec77c5e8016a58"),n("c9461f50c5d53d77beb2"),n("af4e4e4030596b369b13"),n("16da3d83ca2b978dbac3"),n("659871ac4bcffb14987f"),n("9a0812b9b795e3662b25")),_=n("7367695471878cd60218"),k=(n("a909ca3296d499985c89"),n("1c4b8d4085d28a8b83d7"),n("587ee3767cae257489e4"),n("714667d626fd04a26548"),n("4dae26d380810c71f7a0"),n("de3e4d1249ca86a17021"),n("4722dbe9f15b5babb16b"),n("76b8e50caed67dc25b3c"),n("2f22f453e80dcd80946e"),n("99db023933d00eead7df"),n("a5b5b7a2e2288b74b453"),n("cf2c3842fd8b1c54ed12"),n("098ff896a5dab77f75b3"),n("a2a80d3346615eb09116"),n("c49057134b5d49bf5a77"),n("1ca0836fe18fe3c02126")),w=n.n(k),E=n("547d0a53ed7f6f6e57d7"),T=n.n(E);n("d74f5f93f73b1ae4b424");n("c1503f9ed9eb382d6c63");var A=function(){function e(){o()(this,e),this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,"undefined"!=typeof window&&window.performance&&window.performance.now?this._now=window.performance.now.bind(window.performance):this._now=Date.now}return c()(e,[{key:"reset",value:function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0}},{key:"addBytes",value:function(e){0===this._firstCheckpoint?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=e,this._totalBytes+=e):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=e,this._totalBytes+=e):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=e,this._totalBytes+=e,this._lastCheckpoint=this._now())}},{key:"currentKBps",get:function(){this.addBytes(0);var e=(this._now()-this._lastCheckpoint)/1e3;return 0===e&&(e=1),this._intervalBytes/e/1024}},{key:"lastSecondKBps",get:function(){return this.addBytes(0),0!==this._lastSecondBytes?this._lastSecondBytes/1024:this._now()-this._lastCheckpoint>=500?this.currentKBps:0}},{key:"averageKBps",get:function(){var e=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/e/1024}}]),e}(),S=n("0b165edde72ebe3f3ca5"),I=n.n(S),R={data:1e3,runtime:1002,parse:1004,other:9999,notSupport:1005,canplay:1006,bufferbreak:1007,network:1003,pdnetwork:1008,licetwork:1009,media:1010},O=c()((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;o()(this,e);var a={errorType:t,errorTypeCode:R[t],errorCode:n,playerVersion:"3.0.28"};return r&&"object"===I()(r)&&Object.keys(r).map((function(e){return a[e]=r[e],e})),i&&(a.currentTime=i.currentTime||0,a.duration=i.duration||0,a.ended=i.ended?0:1,a.vtype="dash"===i.playerType?"DASH":"LOWER_MP4",i.config&&(a.vid=i.config.vid),i.error&&(a.videoError=i.error)),a}));O.NETWORK="network",O.PD_NETWORK="pdnetwork",O.LIC_NETWORK="licetwork",O.MSE="mse",O.PARSE="parse",O.FORMAT="format",O.DECODER="decoder",O.RUNTIME="runtime",O.CANPLAY="canplay",O.BUFFERBREAK="bufferbreak",O.TIMEOUT="timeout",O.OTHER="other",O.MEDIA="media",O.NETEORK_ERROR_CODES={timeout:-499895,401:-499898,403:-499897,404:-499898},O.MPD_PARSE_ERROR=-499970,O.MSE_PARSE_ERROR=-499971,O.DUR_PARSE_ERROR=-499972,O.SEG_PARSE_ERROR=-499973,O.LIC_PARSE_ERROR=-499974,O.SID_PARSE_ERROR=-499975,O.HEADER_PARSE_ERROR=-499976,O.BUF_PARSE_ERROR=-499977,O.BYTE_PARSE_ERROR=-499978,O.BOX_KEY_ERROR=-499983,O.NO_CANPLAY_ERROR=-499985,O.BUFFERBREAK_ERROR=-499986,O.NETWORK_DISCONNECT=-499900,O.CDM_LICENSE_ERROR=-499901,O.MSE_MEDIA_TYPES_NOT_SUPPORTED=-499902,O.INIT_SEGMENT_ERROR=-499903,O.MSE_APPEND_ERROR=-499904;var C=O,x=(n("e8d406fbf48a3be73a29"),n("76778f89046144ac3189"),n("f9c16fa83151a7ade7e2"),n("94c73b648b240a4f9b86"),n("97a8a667bf94e5abe694"),n("6c1733d000d4ddc9b02a"),n("91b145656735dbbdf4c6"),n("507db941def4a6cde719"),n("851304c34f53cac9aa18"),n("f966e012187be89dcf0d"),n("72ac94665262d465c57d"),n("9fa366d9f3d0156241ec"),n("edd9422b26baf2106794"),n("57e342038c62a6ed3d52"),n("24b6b92d3ac1907f3b62"),n("54e5bc717a06fce1eb48"),n("7e919f1723251ef84254"),n("d0737752acc25b869356"),n("dac5d24ea3663cd63aeb"),n("4a43f81358bb42a59f91"),n("7643943a2b3305d73d3d"),n("2f2c7777f90f3b1a632c"),n("e49762a4305f2f08a7d8"),n("1eb8dd5c8c5d803a9bd8"),n("d4e8a10491229c4b5485"),n("586a4360b113fd5097d8"),[413,416]),P={"x-cache":"x_cache","x-response-sinfo":"server_ip"},D={"360p":.45,"480p":.75,"720p":1.6,"1080p":5,"2k":7.5,"4k":12.5},L=0,M=1,N=2,U=0,B=1,F=2,j={MAIN:"0",BACK:"1"},H={INIT:"init",ERR:"error"},V="currentDashType",W=new Uint8Array([91,104,69,75,156,171,238,71,202,4,244,5]).buffer,G=(n("abe57333ca79dc15d3f8"),n("281981c6b99b2a82c28b"),n("7c7754eaac87446b00ec"),n("fc3363cb05869232e380"),n("17d091243b0d38080c9b"),n("e934f008ce014eda6535"),n("2424222fdd55b7282442"),n("49c77cfe9861eb5430df"),n("9ba26f6b662448d8bc59"),n("733fd62058ae078d16d8"),n("f70171f22d45e54deaec"),n("b82b8efbfaa040833fc3"),n("df0f8aaf4d251ab5481e"),n("def7fc9a4ab8c857edaf"),n("f3450c438b59a609692a"),n("242d8a87221617b4ac29"),{ArrayBufferToString:function(e){for(var t="",n=new Uint8Array(e),r=0;r<n.length;r++)t+=String.fromCharCode(n[r]);return t},StringToArrayBuffer:function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return t},Base64ToHex:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=window.atob(e.replace(/-/g,"+").replace(/_/g,"/"));if(t){for(var r=[],i=0;i<n.length;i++)r.push(n.charCodeAt(i));return new Uint8Array(r).buffer}for(var a="",o=0;o<n.length;o++)a+=("0"+n.charCodeAt(o).toString(16)).substr(-2);return a},HexToBase64:function(e){for(var t="",n=0;n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return window.btoa(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},findBox:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e.type!==t){if(e&&e.subBox){var r=e.subBox.filter((function(e){return e.type===t}));r.length?r.forEach((function(e){return n.push(e)})):e.subBox.forEach((function(e){return G.findBox(e,t,n)}))}}else n.push(e);return(n=[].concat(n)).length>1?n:n[0]},padStart:function(e,t,n){for(var r=String(n),i=t>>0,a=Math.ceil(i/r.length),o=[],s=String(e);a--;)o.push(r);return o.join("").substring(0,i-s.length)+s},durationConvert:function(e){var t=0,n=0,r=0;return(e=e.slice(e.indexOf("PT")+2)).indexOf("H")>-1&&e.indexOf("M")>-1&&e.indexOf("S")>-1?(t=parseFloat(e.slice(0,e.indexOf("H"))),n=parseFloat(e.slice(e.indexOf("H")+1,e.indexOf("M"))),r=parseFloat(e.slice(e.indexOf("M")+1,e.indexOf("S")))):e.indexOf("H")>-1&&e.indexOf("M")>-1&&e.indexOf("S")<0?(t=parseFloat(e.slice(0,e.indexOf("H"))),n=parseFloat(e.slice(e.indexOf("H")+1,e.indexOf("M")))):e.indexOf("H")<0&&e.indexOf("M")>-1&&e.indexOf("S")>-1?(n=parseFloat(e.slice(0,e.indexOf("M"))),r=parseFloat(e.slice(e.indexOf("M")+1,e.indexOf("S")))):e.indexOf("H")>-1&&e.indexOf("M")<0&&e.indexOf("S")>-1?(t=parseFloat(e.slice(0,e.indexOf("H"))),r=parseFloat(e.slice(e.indexOf("H")+1,e.indexOf("S")))):e.indexOf("H")<0&&e.indexOf("M")<0&&e.indexOf("S")>-1?r=parseFloat(e.slice(0,e.indexOf("S"))):e.indexOf("H")<0&&e.indexOf("M")>-1&&e.indexOf("S")<0&&(n=parseFloat(e.slice(0,e.indexOf("M")))),3600*t+60*n+r},preFixInterge:function(e,t){return(Array(t).join(0)+e).slice(-t)},toHex:function(){for(var e=[],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e.push(G.padStart(Number(t).toString(16),2,0))})),e},sum:function(){for(var e=0,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e+=t})),e},toUTF8:function(e){for(var t=encodeURIComponent(e),n=unescape(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r.buffer},fromHex:function(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2)t[n/2]=parseInt(e.substr(n,2),16);return t},fromCharCode:function(e){for(var t="",n=0;n<e.length;n+=16e3){var r=e.subarray(n,n+16e3);t+=String.fromCharCode.apply(null,r)}return t},toBase64:function(e,t){var n=G.fromCharCode(e);t=void 0===t||t;var r=window.btoa(n).replace(/\+/g,"-").replace(/\//g,"_");return t?r:r.replace(/=*$/,"")},str2hex:function(e){if(""===e)return"";for(var t=[],n=0;n<e.length;n++)t.push(e.charCodeAt(n));return t},bufferToString:function(e){return("0"+Number(e).toString(16)).slice(-2).toUpperCase()},stringToBuffer:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e[n]+e[n+1],16));return new Uint8Array(t)}});G.toHex=function(){for(var e=[],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e.push(G.padStart(Number(t).toString(16),2,0))})),e},G.formatIV=function(e){var t="";return e.forEach((function(e){t+=G.bufferToString(e)})),t},G.round=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Number(e.toFixed(t))},G.isSogou=function(){return window.navigator.userAgent.toLowerCase().indexOf("metasr")>-1},G.isEdge=function(){var e=window.navigator.userAgent.toLowerCase();return e.indexOf("edge")>-1||e.indexOf("edg/")>-1},G.offInDestroy=function(e,t,n,r){e.once(r,(function i(){e.off(t,n),e.off(r,i)}))},G.on=function(e,t,n,r){if(r)e.on(t,n),G.offInDestroy(e,t,n,r);else{e.on(t,(function r(i){n(i),e.off(t,r)}))}},G.once=function(e,t,n,r){if(r)e.once(t,n),G.offInDestroy(e,t,n,r);else{e.once(t,(function r(i){n(i),e.off(t,r)}))}},G.promisePolyfill=function(){Promise.prototype.finally||(Promise.prototype.finally={finally:function(e){var t=function(t){return Promise.resolve(e()).then(t)};return this.then((function(e){return t((function(){return e}))}),(function(e){return t((function(){return Promise.reject(e)}))}))}}.finally)},G.transformHeaders=function(e,t){var n=Object.assign({},e);return Object.keys(t).forEach((function(r){var i=t[r];e&&e[r]&&(n[i]=e[r],delete n[r])})),n},G.generateUniqueKey=function(e){var t=e.vid,n=e.start,r=e.end,i=e.mediaType,a=e.definition,o=e.codecType,s=e.format;return n=n||0,r=r||0,o=o||"h264",s=s||"dash",t&&i?a?"".concat(t,"#").concat(i,"#").concat(a,"#").concat(n,"#").concat(r,"#").concat(o,"#").concat(s):"".concat(t,"#").concat(i,"#").concat(n,"#").concat(r,"#").concat(o,"#").concat(s):null},G.getDefinition=function(e){if(!e)return null;var t=e.split("#");return t.length>2?t[2]:null},G.exchangeListUrl=function(e){if(e&&0!==e.length)for(var t=0;t<e.length;t++)G.exchangeUrl(e[t])},G.exchangeUrl=function(e){if(e&&e.main_url&&e.backup_url_1){var t=e.main_url,n=e.backup_url_1,r=t.split("?");2===r.length&&-1===n.indexOf("?")?(e.main_url=n+"?"+r[1],e.backup_url_1=r[0]):(e.main_url=n,e.backup_url_1=t)}},G.validateFragment=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e instanceof ArrayBuffer){try{var n=new Uint8Array(e,4,4),r=String.fromCharCode.apply(null,n);if(2===t.length){var i=t[1]-t[0]+1;if(!(e.byteLength===i))return}if("moof"!==r&&"styp"!==r&&"ftyp"!==r)return!1}catch(a){return!1}return!0}return!1},G.validateUrlRange=function(e,t){var n=e||[];if(n.length>0)for(var r=0;r<n.length;r++){var i=n[r];if(/([0-9.\-A-Za-z]+)/.test(i)&&t.indexOf(i)>-1)return!0}return!1},G.isBase64=function(e){return/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/.test(e)};var z,X,Y,K,Z=(z="vodTimestampSalt",X=function(e){return e.split("").map((function(e){return e.charCodeAt(0)}))},Y=function(e){return("0"+Number(e).toString(16)).substr(-2)},K=function(e){return X(z).reduce((function(e,t){return e^t}),e)},function(e){return e.split("").map(X).map(K).map(Y).join("")}),Q=function(e){var t=function(t){return(n=e,n.split("").map((function(e){return e.charCodeAt(0)}))).reduce((function(e,t){return e^t}),t);var n};return function(e){return e.match(/.{1,2}/g).map((function(e){return parseInt(e,16)})).map(t).map((function(e){return String.fromCharCode(e)})).join("")}}("vodTimestampSalt");G.getUnionInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(e).concat(Z((new Date).getTime().toString()))},G.checkUnionInfoExpired=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;if(0===t.indexOf(e)){var r=parseInt(Q(t.slice(e.length))),i=(new Date).getTime()-r;if(i>0&&i<=1e3*n)return!0}return!1},G.getCookieValue=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document.cookie.split(";"),n=0;n<t.length;n++){var r=t[n].trim().split("=");if(r[0]===e)return r[1]}return null},G.nowTime=function(){try{return parseInt(performance.now(),10)}catch(e){return(new Date).getTime()}},G.getBitrateItem=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=t,a=G.getSelectorList(e,n),o=i.getSuitableBitrate?i.getSuitableBitrate(a,r):i.bitRateAdapter.select(a);return o},G.getSelectorList=function(e,t){for(var n=e.dynamic_video_list,r=[],i=0;i<n.length;i++){var a=n[i];r.push({bitrate:a.bitrate,definition:a.definition,duration:t})}return r};var q=G,J=(n("dff888e2b4b8e178d0a9"),n("855dcee857e19ece4220"),$&&!function(){try{return localStorage.setItem("_localstorage_support_test",!0),localStorage.removeItem("_localstorage_support_test"),!1}catch(e){return!0}}());function $(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}var ee={length:J?localStorage.length:0,clear:function(e){try{for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}}catch(r){}},getItem:function(e){try{return localStorage.getItem(e)}catch(t){return null}},key:function(e){try{return localStorage.key(e)}catch(t){return null}},setItem:function(e,t){try{localStorage.setItem(e,t)}catch(n){}},removeItem:function(e){try{localStorage.removeItem(e)}catch(t){}},isSupport:J},te="undefined"!=typeof window&&(window.location.search.indexOf("log=true")>-1||!!ee.getItem("abrdebug")),ne={};for(var re in{log:"log",network:"network",abr:"abr",encrypt:"encrypt",segment:"segment",definition:"definition",content:"content",mse:"mse",media:"media",time:"time",preload:"preload",gap:"gap"})ne[re]=te?console.log.bind(window,"".concat(re,":")):function(){};var ie=ne;function ae(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};r.connectTime=e.connectCostTime,r.loaded=e.loaded;var i=q.transformHeaders(e.headers,P),a=Object.assign({},r,i);e.emit("progress_event",{costTime:parseInt(n,10),pos:e.loaded,cdnUrl:e.realUrl,range:e.range||[],speed:e.speed,headers:e.headers,status:e.status,type:t,ext:a})}function oe(){return parseInt(performance.now(),10)}var se=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e4,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{limitSizeM:1/0},c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6?arguments[6]:void 0;o()(this,e),w()(this);var l=this;l.url=t,l.realUrl=t,l.running=!1,l.loaded=0,l.startTime=0,l.startConnectTime=0,l.startDownloadTime=0,l.lastTime=oe(),l.range=r,l.speed=0,l.status=0,l.headers={},l.cacheKey=s.cacheKey||q.generateUniqueKey(s),l.useUrlRange=s.useUrlRange||!1,l.canceled=!1,l.preloadManager=u,l.isCache=c,l.pendingCallbacks=[],l.cacheKey&&l.preloadManager?l.preloadManager.getItem(l.cacheKey).then((function(e){if(ie.preload(l.cacheKey,"getItem cost",oe()-l.lastTime,"ms","hit cache",e),e){if(ie.preload("hit cache",l.cacheKey,"cancel",l.canceled),!l.canceled&&e.res instanceof ArrayBuffer){l.emit("getHeaders",e.headers),l.emit(c?"PRELOAD_CACHED":"PRELOAD_HIT",l.cacheKey);var o=e.res.byteLength;l.emit("TASK_PREOGRESS",{total:o,loaded:o,cacheKey:l.cacheKey}),i(e.res,e.headers,e.status,4,!0),l.executePendingCallback(e.res,e.headers,e.status),T()(n)}}else l.initialize(t,r,i,a,s,c)})).catch((function(){l.initialize(t,r,i,a,s,c)})):l.initialize(t,r,i,a,s,c)}return c()(e,[{key:"executePendingCallback",value:function(e,t,n){for(var r=0;r<this.pendingCallbacks.length;r++)this.pendingCallbacks[r](e,t,n);this.pendingCallbacks=[]}},{key:"initialize",value:function(t,n,r,i,a,o){for(var s=this,c=this,u=0;u<e.queue.length;u++){var l=e.queue[u];if(l.url===t&&JSON.stringify(l.range)===JSON.stringify(n))return l.isCache?(l.pendingCallbacks.push(r),ie.log("task cache repeat")):r("repeat"),T()(this),void ie.log("preload repeat",c.cacheKey,"isCache",c.isCache)}var d=c.useUrlRange;d&&n&&n.length>1&&(t=t+(t.split("?")[1]?"&":"?")+"range=".concat(n[0],"-").concat(n[1]),c.realUrl=t);var f=new XMLHttpRequest;f.target=c,f.responseType="arraybuffer",f.open("get",t),i>0&&(f.timeout=i),n&&n.length>1&&!d&&(c.range=n,c.id=n.join("-"),f.setRequestHeader("Range","bytes=".concat(n[0],"-").concat(n[1]))),f.onreadystatechange=function(e){2===f.readyState&&(c.headers=function(e){var t={};if(e instanceof window.XMLHttpRequest)try{e.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach((function(e){var n=e.split(": "),r=n.shift(),i=n.join(": ");t[r]=i}))}catch(n){}return t}(f),c.emit("getHeaders",c.headers),c.status=f.status,c.startDownloadTime=oe()),1===f.readyState&&(c.lastTime=oe())},f.onload=function(e){if(c.loaded=e.loaded,c.speed=Math.floor(c.loaded/c.costTime/1024*1e3),200===f.status||206===f.status){if(c.emit("TASK_PREOGRESS",{total:e.total,loaded:e.loaded,cacheKey:c.cacheKey}),r&&r instanceof Function&&(r(f.response,c.headers,f.status),c.executePendingCallback(f.response,c.headers,f.status)),o&&q.validateFragment(f.response,n)&&c.preloadManager&&(c.preloadManager.setItem(c.cacheKey,{res:f.response,headers:c.headers,status:f.status}).catch((function(){})),c.emit("PRELOAD_CACHED",c.cacheKey)),a.isVideo){var i=!!(n&&n.length>1),s=i?n[1]-n[0]+1:0,u=i?s:f.response?f.response.byteLength:0,l=8*u/a.bitrate;l>a.ratio&&u/1048576>a.limitSizeM&&ae(c,"oversize",c.costTime,{start:n&&n[0]||-1,end:n&&n[1]||-1,segment_resolution:a.segment_resolution,segment_ratio:l,segment_bitrate:a.bitrate,segment_size:f.response.byteLength,segment_size_total:e.total,segment_range_size:s}),i&&f&&f.response&&s!==f.response.byteLength&&ae(c,"oversizecdn",c.costTime,{start:n&&n[0]||-1,end:n&&n[1]||-1,segment_resolution:a.segment_resolution,segment_ratio:l,segment_bitrate:a.bitrate,segment_size:f.response.byteLength,segment_size_total:e.total,segment_range_size:s})}}else 404===f.status?(c._emitCancel(),r&&r instanceof Function&&r("Not Found")):(c._emitCancel(),c.emit("error",new C(C.NETWORK,C.NETEORK_ERROR_CODES[f&&f.status?f.status:"timeout"],{line:40,handle:"[DASH] task",msg:"task_request_expired",url:t,headers:c.headers,status:f&&f.status})));var d=200===f.status||206===f.status?"success":"error";a.isVideo&&ae(c,d,c.costTime,{start:n&&n.length>1?n[0]:0,end:n&&n.length>1?n[1]:e.total}),f.target.remove()},f.onerror=function(){c._emitCancel();var e="error";navigator&&!navigator.onLine&&(e="network"),r(e,c.headers||{},f.status,f.readyState),0===c.status&&(c.status=-1),a.isVideo&&ae(c,"error",c.costTime,{}),f.target.remove()},f.onabort=function(){c._emitCancel(),a.isVideo&&ae(c,"abort",c.costTime,{}),f.target.remove()},f.ontimeout=function(){a.isVideo&&ae(c,"timeout",c.costTime,{start:n&&n.length>1?n[0]:-1,end:n&&n.length>1?n[1]:-1}),c._emitCancel(),r("timeout",c.headers||{},f.status),f.target.remove()},f.onprogress=function(t){var n=t.loaded-c.loaded;if(n>0&&oe()-s.startTime>500){s.startTime=oe();var r=e.speedSampler.currentKBps;e.speedCallBacks.map((function(e){return e(r)}))}var i=oe();if(i-c.lastTime>100||t.lengthComputable&&t.loaded===t.total){var a=n/((i-c.lastTime)/1e3)/1024;c.speed=a,e.historySpeed.length>=20&&e.historySpeed.shift(),e.historySpeed.push(a),c.lastTime=i}c.loaded=t.loaded,o||e.speedSampler.addBytes(n),c.emit("TASK_PREOGRESS",{total:t.total,loaded:t.loaded,cacheKey:c.cacheKey})},c.canceled||(c.xhr=f,e.queue.push(c)),c.update()}},{key:"cancel",value:function(){this.running&&this.xhr.abort(),this._emitCancel(),this.remove(),this.canceled=!0}},{key:"_emitCancel",value:function(){this.emit("CANCEL")}},{key:"remove",value:function(){var t=this,n=this;n.running=!1,e.queue.filter((function(r,i){return r.url===t.url&&JSON.stringify(r.range)===JSON.stringify(t.range)&&(e.queue.splice(i,1),r.pendingCallbacks=[],T()(n),!0)})),this.update()}},{key:"update",value:function(){var t=e.queue,n=t.filter((function(e){return e.running})),r=t.filter((function(e){return!e.running})),i=e.limit-n.length;r.forEach((function(e,t){t<i&&e.run()}))}},{key:"run",value:function(){1===this.xhr.readyState?(this.running=!0,this.lastTime=oe(),this.xhr.send(),this.startTime=oe(),this.startDownloadTime=oe(),this.startConnectTime=oe()):this.remove()}},{key:"costTime",get:function(){return 0===this.startDownloadTime?oe()-this.startConnectTime:oe()-this.startDownloadTime}},{key:"connectCostTime",get:function(){return this.startDownloadTime>0?this.startDownloadTime-this.startConnectTime:0}}],[{key:"clear",value:function(){e.queue.forEach((function(e){e.cancel()})),e.queue.length=0,e.speedSampler.reset()}},{key:"currentSpeed",get:function(){return e.speedSampler.lastSecondKBps}},{key:"historyAvspeed",get:function(){var t=e.historySpeed.reduce((function(e,t){return e+t}),0);return 0===e.historySpeed.length?0:t/e.historySpeed.length}}]),e}();se.queue=[],se.limit=4,se.speedCallBacks=[],se.speedSampler=new A,se.historySpeed=[];var ce=se;n("eeb592f0f2d79d2a1570");function ue(){var e=window.navigator.userAgent,t=e.indexOf("MSIE "),n=e.indexOf("Trident/");return t>0||n>0}function le(){return window.navigator.userAgent.toLowerCase().indexOf("qqbrowser")>-1}function de(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function fe(){return navigator.userAgent.indexOf("Edge")>0||navigator.userAgent.indexOf("Edg/")>0}function he(){var e,t=de(),n=ue(),r=(e=window.navigator.userAgent,!(window.location.search.indexOf("firefox_dash=true")>-1||ee.getItem("firefox_dash"))&&e.toLowerCase().indexOf("firefox")>-1),i=fe();return t||n||r||i}function pe(){try{if("object"===("undefined"==typeof WebAssembly?"undefined":I()(WebAssembly))&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(t){console.log(t)}return!1}function ve(){var e=window.MediaSource=window.MediaSource||window.WebKitMediaSource;return e&&"function"==typeof e.isTypeSupported}var ge=['video/mp4; codecs="av01.0.01M.08,mp4a.40.5"'];function ye(e){if(!ve())return!1;for(var t=0;t<e.length;t++){var n=e[t];if(MediaSource.isTypeSupported(n))return!0}return!1}function me(){return ye(ge)}function be(){return!!navigator.requestMediaKeySystemAccess&&!he()}function _e(){return pe()&&ve()&&!ue()}function ke(){return pe()&&ve()&&!ue()&&!le()}function we(e){return new Promise((function(t,n){pe()&&ve()&&navigator.requestMediaKeySystemAccess||t(void 0);de();var r=navigator.userAgent.toLowerCase().indexOf("chrome")>-1,i=fe();r&&!le()?navigator.requestMediaKeySystemAccess("com.widevine.alpha",[{initDataTypes:["keyids","webm"],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"'}],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42c01e"'}]}]).then((function(n){t("https://".concat(e,"/video/drm/v1/widevine?aid=32&kid="))}),(function(){t(void 0)})):t(i?"https://".concat(e,"/video/drm/v1/playready?aid=32&kid="):void 0)}))}n("4d29b26999e97f1d28ec"),n("80c08e8fdbb6de44a743"),n("e270d63fe4abcc5b03f7");var Ee="PRELOAD_NEXT",Te="PRELOAD_SEG_DONE",Ae={PREPARE:"PREPARE",IDLE:"IDLE",PRELOADING:"PRELOADING",FINISH:"FINISH"},Se="ONE_STEP_DONE",Ie={DASH:0,MP4:1},Re={VIDEO:0,AUDIO:1,MIXED:2},Oe={DURATION:0,SIZE:1},Ce={INDEXDB:0,MEMORY:1},xe={FAIL:-1,SUCCESS:0,DOWNLOADING:1},Pe={MP4:"MP4",DASH:"DASH",HLS:"HLS"},De=Pe,Le=(n("ec4afba946234cc5c416"),n("9e3c44d76479bd9cad6b"),n("e2a049807982af34ed2b"),n("2a4caaf47e7721820648"),function(){function e(){var t,n;o()(this,e);var r=new Promise((function(e,r){t=e,n=r}));return r.resolve=t,r.reject=n,r}return c()(e,[{key:"resolve",value:function(e){}},{key:"reject",value:function(e){}}]),e}()),Me=function(){function e(t,n,r,i,a){o()(this,e),w()(this),this.state=Ae.PREPARE,this.options=t||{},this.logger=t.logger||function(){},this._preloadManager=n,this.player=n.player;var s=r.handlers,c=r.predictInst,u=r.readyPromise;this._predictInst=c,this._handlers=s,this._predictInstReadyPromise=u,this._toLoadList=[],this.retryCount=0,this._cachedHandler=i,this._cachedDataHanlder=a}return c()(e,[{key:"start",value:function(){var e=this,t=new Le;return this._handlers.start(this.options).then((function(n){n.onObtain().then((function(r){e._predictInstReadyPromise.then((function(){e._predictInst.updateMediaInfos(r);var i=e._predictInst.preloadPredict(e.options),a=e._predictInst.cachedData;e._cachedDataHanlder(Object.assign({vid:e.options.vid},{data:a}));var o=Object.assign(i,e.options);n.onTransform(o).then((function(n){e._toLoadList=n,t.resolve(n)}))}))}))})).catch((function(e){t.reject(new Error("preload unit start error"))})),t}},{key:"preloadSeg",value:function(){var e=this;if(0===this._toLoadList.length)return this.state=Ae.FINISH,void this.emit(Te,!0);this.state="PRELOADING";var t=this._toLoadList.shift();this._handlers.onRequest(t,(function(n){var r=Object.assign({},t.extData,n);e._cachedHandler(r)})).then((function(){e.state=Ae.IDLE,e.emit(Te)})).catch((function(t){e.requestError(),e.emit(Te,!1)}))}},{key:"requestError",value:function(){this.retryCount++,this.state=Ae.IDLE,this.retryCount>=10&&(this.state=Ae.FINISH),this.emit(Se),this.logger("preload request error")}},{key:"cancelLoading",value:function(){this._toLoadList=[]}}]),e}();n("eef23a05705d8b46f87b"),n("8c975a8e48558997ef6e");var Ne=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){}}();function Ue(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function Be(e){return"string"!=typeof e&&(console.warn("".concat(e," used as a key, but it is not a string.")),e=String(e)),e}var Fe={};function je(e){var t=Fe[e.name],n={};n.promise=new Promise((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function He(e,t){return new Promise((function(n,r){if(Fe[e.name]=Fe[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return n(e.db);je(e),e.db.close()}var i=[e.name];t&&i.push(e.version);var a=Ne.open.apply(Ne,i);t&&(a.onupgradeneeded=function(t){var n=a.result;try{n.createObjectStore(e.storeName)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),a.onerror=function(e){e.preventDefault(),r(a.error)},a.onsuccess=function(){n(a.result),function(e){var t=Fe[e.name].deferredOperations.pop();if(t)t.resolve(),t.promise}(e)}}))}function Ve(e){return He(e,!1)}function We(e){return He(e,!0)}function Ge(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,i=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||n){if(n){var a=e.db.version+1;a>e.version&&(e.version=a)}return!0}return!1}function ze(e){je(e);for(var t=Fe[e.name],n=t.forages,r=0;r<n.length;r++){var i=n[r];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,Ve(e).then((function(t){return e.db=t,Ge(e)?We(e):t})).then((function(r){e.db=t.db=r;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=r})).catch((function(t){throw function(e,t){var n=Fe[e.name].deferredOperations.pop();if(n)n.reject(t),n.promise}(e,t),t}))}function Xe(e,t,n,r){void 0===r&&(r=1);try{var i=e.db.transaction(e.storeName,t);n(null,i)}catch(a){if(r>0&&(!e.db||"InvalidStateError"===a.name||"NotFoundError"===a.name))return Promise.resolve().then((function(){if(!e.db||"NotFoundError"===a.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),We(e)})).then((function(){return ze(e).then((function(){Xe(e,t,n,r-1)}))})).catch(n);n(a)}}var Ye=function(){function e(){o()(this,e)}return c()(e,[{key:"ready",value:function(){return this._ready}},{key:"_initStorage",value:function(e){var t=this;t._defaultConfig=e;var n={db:null};if(e)for(var r in e)n[r]=e[r];var i=Fe[n.name];i||(i={forages:[],db:null,dbReady:null,deferredOperations:[]},Fe[n.name]=i),i.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=t._fullyReady);var a=[];function o(){return Promise.resolve()}for(var s=0;s<i.forages.length;s++){var c=i.forages[s];c!==t&&a.push(c._initReady().catch(o))}var u=i.forages.slice(0);return t._ready=Promise.all(a).then((function(){return n.db=i.db,Ve(n)})).then((function(e){return n.db=e,Ge(n,t._defaultConfig.version)?We(n):e})).then((function(e){n.db=i.db=e,t._dbInfo=n;for(var r=0;r<u.length;r++){var a=u[r];a!==t&&(a._dbInfo.db=n.db,a._dbInfo.version=n.version)}})),t._ready}},{key:"probeSupport",get:function(){return function(){try{if(!Ne||!Ne.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(n){return!1}}()}},{key:"getItem",value:function(e,t){var n=this;e=Be(e);var r=new Promise((function(t,r){n.ready().then((function(){Xe(n._dbInfo,"readonly",(function(i,a){if(i)return r(i);try{var o=a.objectStore(n._dbInfo.storeName).get(e);o.onsuccess=function(){var e=o.result;void 0===e&&(e=null),t(e)},o.onerror=function(){r(o.error)}}catch(s){r(s)}}))})).catch(r)}));return Ue(r,t),r}},{key:"setItem",value:function(e,t,n){var r=this;e=Be(e);var i=new Promise((function(n,i){r.ready().then((function(){return t})).then((function(t){Xe(r._dbInfo,"readwrite",(function(a,o){if(a)return i(a);try{var s=o.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var c=s.put(t,e);o.oncomplete=function(){void 0===t&&(t=null),n(t)},o.onabort=o.onerror=function(){var e=c.error?c.error:c.transaction.error;i(e)}}catch(u){i(u)}}))})).catch(i)}));return Ue(i,n),i}},{key:"removeItem",value:function(e,t){var n=this;e=Be(e);var r=new Promise((function(t,r){n.ready().then((function(){Xe(n._dbInfo,"readwrite",(function(i,a){if(i)return r(i);try{var o=a.objectStore(n._dbInfo.storeName).delete(e);a.oncomplete=function(){t()},a.onerror=function(){r(o.error)},a.onabort=function(){var e=o.error?o.error:o.transaction.error;r(e)}}catch(s){r(s)}}))})).catch(r)}));return Ue(r,t),r}},{key:"clear",value:function(e){var t=this,n=new Promise((function(e,n){t.ready().then((function(){Xe(t._dbInfo,"readwrite",(function(r,i){if(r)return n(r);try{var a=i.objectStore(t._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=a.error?a.error:a.transaction.error;n(e)}}catch(o){n(o)}}))})).catch(n)}));return Ue(n,e),n}},{key:"length",value:function(e){var t=this,n=new Promise((function(e,n){t.ready().then((function(){Xe(t._dbInfo,"readonly",(function(r,i){if(r)return n(r);try{var a=i.objectStore(t._dbInfo.storeName).count();a.onsuccess=function(){e(a.result)},a.onerror=function(){n(a.error)}}catch(o){n(o)}}))})).catch(n)}));return Ue(n,e),n}},{key:"all",value:function(e){var t=this,n=new Promise((function(e,n){t.ready().then((function(){Xe(t._dbInfo,"readonly",(function(r,i){if(r)return n(r);try{var a=i.objectStore(t._dbInfo.storeName).openCursor(),o=[];a.onsuccess=function(){var t=a.result;t?(o.push({key:t.key,value:t.value}),t.continue()):e(o)},a.onerror=function(){n(a.error)}}catch(s){n(s)}}))})).catch(n)}));return Ue(n,e),n}},{key:"_fullyReady",value:function(e){var t=this,n=t._initReady().then((function(){var e=Fe[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return function(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}(n,e,e),n}}]),e}(),Ke=function(){function e(){o()(this,e)}return c()(e,[{key:"_initStorage",value:function(e){var t=e.name+"_"+e.storeName;return this.key=t,window[t]&&"object"===I()(window[t])||(window[t]={}),this.store=window[t],Promise.resolve()}},{key:"getItem",value:function(e,t){var n=this.store[e];return void 0===n&&(n=null),this._internalPromise(t,n)}},{key:"setItem",value:function(e,t,n){return this.store[e]=t,this._internalPromise(n)}},{key:"removeItem",value:function(e,t){return delete this.store[e],this._internalPromise(t)}},{key:"clear",value:function(e){return this.store={},window[this.key]={},this._internalPromise(e)}},{key:"length",value:function(e){var t=Object.keys(this.store).length;return this._internalPromise(e,t)}},{key:"_internalPromise",value:function(e,t){var n=t?Promise.resolve(t):Promise.resolve();return Ue(n,e),n}},{key:"all",value:function(e){for(var t=[],n=Object.keys(this.store),r=0;r<n.length;r++){var i=n[r];t.push({key:i,value:this.store[i]})}return this._internalPromise(e,t)}},{key:"probeSupport",value:function(){return!0}}]),e}(),Ze={description:"",name:"__PRE_CACHE__",storeName:"keyvaluepairs",version:1},Qe=function(){function e(t,n){o()(this,e);var r=n===Ce.MEMORY?Ke:Ye;this._driver=new r,this._driver._initStorage(Ze).catch((function(){})),this._hasIdbForbidden=!1,this._maxCache=!t||t<=0?200:t,this.setMaxCache(this._maxCache),this._allCachedKeys={},this._allCachedTimeKeys={},this.getCachedKeysFromLocal(),this._readyPromise=new Le,this.init()}return c()(e,[{key:"getCachedKeysFromLocal",value:function(){var e=ee.getItem("__PRE_CACHE__KEYS");if(e)for(var t=e.split("|"),n=0;n<t.length;n++){var r=t[n],i=this._getCacheKeyInfos(r),a=i.time,o=i.cachedKey;this._allCachedKeys[o]=1,this._allCachedTimeKeys[o]=a}}},{key:"_getCacheKeyInfos",value:function(e){var t,n=e.split("$");return 2===n.length&&(t=n[0],e=n[1]),{time:t,cachedKey:e}}},{key:"writeCachedKeysToLocal",value:function(e){var t=[];this._allCachedKeys={},this._allCachedTimeKeys={};for(var n=0;n<e.length;n++){var r=e[n].key,i=this._getCacheKeyInfos(r),a=i.time,o=i.cachedKey;this._allCachedKeys[o]=1,this._allCachedTimeKeys[o]=a,t.push(r)}var s=t.join("|");ee.setItem("__PRE_CACHE__KEYS",s)}},{key:"init",value:function(){var e=this;this._driver.setItem("test","test").then((function(){})).catch((function(){e._hasIdbForbidden=!0})).finally((function(){e._driver.removeItem("test").catch((function(){})),e._hasIdbForbidden&&(e._driver=new Ke,e._driver._initStorage(Ze)),e._getAll(),e._readyPromise.resolve()}))}},{key:"_getAll",value:function(){var e=this;this._driver.all().then((function(t){e._cachedLength=t.length;var n=t.length-e._maxCache,r=t;if(n>0){var i=t.slice(0,n);r=t.slice(n);for(var a=0;a<i.length;a++)e.removeItem(i[a].key).then((function(){}))}e.writeCachedKeysToLocal(r)})).catch((function(){}))}},{key:"getItem",value:function(e,t){if(!this.hasItem(e))return Promise.resolve(!1);var n=this._getTimeKey(e).timeKey;return this._driver.getItem(n,t)}},{key:"setItem",value:function(e,t,n){var r=this;this._getTimeKey(e).timeKey&&this.removeItem(e);var i=(new Date).getTime();this._allCachedKeys[e]=1,this._allCachedTimeKeys[e]=i;var a=this._genTimeKey(e,i);return n=n?function(){r._getAll(),n()}:function(){r._getAll()},this._driver.setItem(a,t,n)}},{key:"_getTimeKey",value:function(e){var t=this._allCachedTimeKeys[e],n=e;return t&&(n=this._genTimeKey(e,t)),{timeKey:n,time:t}}},{key:"_genTimeKey",value:function(e,t){return"".concat(t).concat("$").concat(e)}},{key:"removeItem",value:function(e,t){var n=this._getTimeKey(e).timeKey,r=this._driver.removeItem(n,t);return delete this._allCachedKeys[e],delete this._allCachedTimeKeys[e],r}},{key:"hasItem",value:function(e){return!!this._allCachedKeys[e]}},{key:"clear",value:function(e){return this._driver.clear(e)}},{key:"length",value:function(e){return this._driver.length(e)}},{key:"setMaxCache",value:function(e){"number"==typeof e&&e>0&&(this._maxCache=e)}}]),e}(),qe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;o()(this,e),w()(this),this._preloadDataList=[],this._currentPreloadInst=null,this._dashPreloadList=[],this.autoPreload=t.autoPreload||!1,this._onPreloadNext=this.onPreloadNextReady.bind(this),this.on(Ee,this._onPreloadNext),this._preloaderConfigs={},this.update(t,n,r),this._cacheInst=new Qe(t.preloadMaxCacheCount,t.preloadCacheType),this._preloadCacheProgress={},this._ptag_=!0,this._cachedDatas={}}return c()(e,[{key:"_getProloaderKey",value:function(e){return e.vtype?e.vtype:"DEFAULT"}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!n)throw new Error("PreloaderManager predictInst is null");var r=this._getProloaderKey(e);this._preloaderConfigs[r]={predictInst:n,readyPromise:n.init(e),handlers:t}}},{key:"cachedDatas",get:function(){return this._cachedDatas}},{key:"onCacheSegment",value:function(e){var t=e.vid,n=e.format,r=e.cacheKey,i=e.total,a=e.loaded,o=e.isInitSegment,s=e.mediaType,c=this.getProgressCacheKey(t,n,s),u=this._preloadCacheProgress[c];u||(u=this._preloadCacheProgress[c]={}),u[r]={total:i,loaded:a,isInitSegment:o}}},{key:"onCachePredict",value:function(e){var t=e.vid,n=e.data;t&&n&&(this._cachedDatas[t]=n)}},{key:"getProgressCacheKey",value:function(e,t,n){return"".concat(e,"-").concat(t,"-").concat(n)}},{key:"onPreloadNextReady",value:function(){this.onPreloadNext()}},{key:"onPreloadSegDone",value:function(){this.autoPreload&&this.emit(Ee)}},{key:"onPreloadNext",value:function(){var e=this;if(null==this._currentPreloadInst&&this._preloadDataList.length>0){if(this._preloadDataList.length>0){var t=this._preloadDataList.shift().data;if(t.payload){var n=this._getProloaderKey(t),r=this._preloaderConfigs[n];if(!r)return void console.warn("need to set vtype, no preloader",t);this._currentPreloadInst=new Me(t,this,r,(function(t){e.onCacheSegment(t)}),(function(t){e.onCachePredict(t)})),this._currentPreloadInst.on(Te,this.onPreloadSegDone.bind(this)),this._currentPreloadInst.start().then((function(){e._currentPreloadInst.preloadSeg()})).catch((function(){e._currentPreloadInst=null}))}}}else null!=this._currentPreloadInst&&(this._currentPreloadInst.state===Ae.IDLE?this._currentPreloadInst.preloadSeg():this._currentPreloadInst.state===Ae.FINISH&&(this._currentPreloadInst=null))}},{key:"addDashPreloader",value:function(e){e&&e.data&&(this._preloadDataList.push(e),this.sort(this._preloadDataList),this.autoPreload&&this.emit(Ee))}},{key:"_addDashPreloader",value:function(e){e&&e.data&&this._preloadDataList.push(e)}},{key:"addDashPreloaderList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.sort(e);for(var t=0;t<e.length;t++)this._addDashPreloader(e[t])}},{key:"sort",value:function(e){e.sort((function(e,t){return void 0===e.order&&void 0===e.order||e.order<t.order?-1:1}))}},{key:"destroy",value:function(){this.off(Ee,this._onPreloadNext)}},{key:"cancelLoading",value:function(){this._currentPreloadInst&&(this._currentPreloadInst.cancelLoading(),this._currentPreloadInst=null),this._preloadDataList=[]}},{key:"preloadCacheProgress",value:function(e){var t=e.vid,n=e.format,r=e.mediaType,i=e.prelaodType,a=e.bitrate,o=e.set_duration,s=e.set_size,c=e.media_type,u=e.start_time,l=this.getProgressCacheKey(t,n,r),d=this._preloadCacheProgress[l];if(d){for(var f=Object.values(d),h=0,p=0,v=0,g=0,y=0,m=0;m<f.length;m++){var b=f[m];b.isInitSegment&&(h=b.total,v=b.loaded,g=b.loaded===b.total?xe.SUCCESS:xe.DOWNLOADING),p+=b.total,y+=b.loaded}return{media_type:c,preload_type:i,stream_bitrate:a,header_size:h,content_total_size:p,start_time:u||-1,state_info:{set_duration:o,set_size:s,current_header_download_size:v,current_content_download_size:y,header_download_state:g,content_download_state:y===p?xe.SUCCESS:xe.DOWNLOADING}}}return null}},{key:"getPreloadTaskInfos",value:function(){}},{key:"getItem",value:function(e,t){return this._cacheInst.getItem(e,t)}},{key:"setItem",value:function(e,t,n){return this._cacheInst.setItem(e,t,n)}},{key:"removeItem",value:function(e,t){return this.removeItem(e,t)}}],[{key:"getInstance",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=e.GLOBAL_KEY+(t.globalKey?t.globalKey:""),a=window[i];if(a&&a._ptag_)return a.update(t,n,r),a;var o=new e(t,n,r);return window[i]=o,o}}]),e}();qe.GLOBAL_KEY="__preloadcontext__";var Je=qe,$e=function(){function e(t){o()(this,e),w()(this),this.options=t,this.promisePolyfill(),this.before(),this.check(),this._preloadManager=Je.getInstance(t,this.handlers,this.predictInst),this.loadingTasks=[]}return c()(e,[{key:"promisePolyfill",value:function(){Promise.prototype.finally||(Promise.prototype.finally={finally:function(e){var t=function(t){return Promise.resolve(e()).then(t)};return this.then((function(e){return t((function(){return e}))}),(function(e){return t((function(){return Promise.reject(e)}))}))}}.finally)}},{key:"before",value:function(){throw new Error("need")}},{key:"check",value:function(){if(!this.handlers)throw new Error("handlers null");if(!this.handlers.start||!this.handlers.onRequest)throw new Error("handlers callback null");if(!this.predictInst)throw new Error("predictInst null");if(!this.predictInst.__p__)throw new Error("predictInst need extends predictbase")}},{key:"preloadNext",value:function(){this._preloadManager.emit(Ee)}},{key:"preloadManager",get:function(){return this._preloadManager}},{key:"start",value:function(e){throw new Error("start need implment, return Promise")}},{key:"cancelLoading",value:function(){for(var e=0;e<this.loadingTasks.length;e++)try{var t=this.loadingTasks[e];"function"==typeof t.cancel&&t.cancel()}catch(n){}this.loadingTasks=[],this._preloadManager.cancelLoading()}},{key:"addTasker",value:function(e){this.loadingTasks.push(e)}},{key:"removeTasker",value:function(e){var t=this;setTimeout((function(){for(var n=t.loadingTasks.length-1;n>-1;n--)if(t.loadingTasks[n]===e){t.loadingTasks.splice(n,1);break}}))}},{key:"addDashPreloader",value:function(e){this._preloadManager.addDashPreloader(e)}},{key:"addDashPreloaderList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this._preloadManager.addDashPreloaderList(e)}}]),e}(),et=n("9515e22976d5658afd14"),tt=n.n(et),nt=n("34af799544048fa3fc68"),rt=n.n(nt),it=(n("e4a44e1fcc60dbcb4a0d"),n("5d3290d64ce7536a9a70"),c()((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.url,r=t.method,i=void 0===r?"GET":r,a=t.type,s=void 0===a?"arraybuffer":a,c=t.data,u=void 0===c?{}:c;return o()(this,e),new Promise((function(e,t){var r=new window.XMLHttpRequest,a=i.toUpperCase(),o=[];for(var c in s&&(r.responseType=s),u)o.push("k=".concat(u[c]));if("GET"===a)r.open(a,"".concat(n,"?").concat(o.join("&"))),r.send();else{if("POST"!==a)throw new Error("xhr ".concat(a," is not supported"));r.open(a,n,!0),r.setRequestHeader("Content-Type","application/json"),r.send(JSON.stringify(u))}r.onload=function(){200===r.status||206===r.status?e(r):t(r)},r.onerror=function(){t(r)}}))}))),at=(n("50956165734b52dfae17"),n("fce1e10c0a59a8bd89e4"),n("94afee241505f6632c39"),function(){function e(t){if(o()(this,e),!(t instanceof ArrayBuffer))throw new C(C.PARSE,C.BUF_PARSE_ERROR,{line:9,handle:"[Stream] constructor",msg:"data is valid"});this.buffer=t,this.dataview=new DataView(t),this.dataview.position=0}return c()(e,[{key:"position",get:function(){return this.dataview.position},set:function(e){this.dataview.position=e}},{key:"skip",value:function(t){for(var n=Math.floor(t/4),r=t%4,i=0;i<n;i++)e.readByte(this.dataview,4);r>0&&e.readByte(this.dataview,r)}},{key:"readUint8",value:function(){return e.readByte(this.dataview,1)}},{key:"readUint16",value:function(){return e.readByte(this.dataview,2)}},{key:"readUint24",value:function(){return e.readByte(this.dataview,3)}},{key:"readUint32",value:function(){return e.readByte(this.dataview,4)}},{key:"readUint64",value:function(){return e.readByte(this.dataview,8)}},{key:"readInt8",value:function(){return e.readByte(this.dataview,1,!0)}},{key:"readInt16",value:function(){return e.readByte(this.dataview,2,!0)}},{key:"readInt32",value:function(){return e.readByte(this.dataview,4,!0)}},{key:"readString",value:function(e){if(this.position+e<=this.buffer.byteLength){for(var t="",n=0;n<e;n++)t+=String.fromCharCode(this.readUint8());return t}throw new C(C.PARSE,C.BYTE_PARSE_ERROR,{line:124,handle:"[Stream] readString",msg:"readstring error"})}}],[{key:"readByte",value:function(e,t,n){var r;switch(t){case 1:r=n?e.getInt8(e.position):e.getUint8(e.position);break;case 2:r=n?e.getInt16(e.position):e.getUint16(e.position);break;case 3:if(n)throw new Error("not supported for readByte 3");r=e.getUint8(e.position)<<16,r|=e.getUint8(e.position+1)<<8,r|=e.getUint8(e.position+2);break;case 4:r=n?e.getInt32(e.position):e.getUint32(e.position);break;case 8:if(n)throw new C(C.PARSE,C.BYTE_PARSE_ERROR,{line:73,handle:"[Stream] readByte",msg:"not supported for readBody 8"});r=e.getUint32(e.position)<<32,r|=e.getUint32(e.position+4);break;default:r=""}return e.position+=t,r}}]),e}()),ot=function(){function e(){o()(this,e),this.headSize=8,this.size=0,this.type="",this.subBox=[],this.start=-1}return c()(e,[{key:"readHeader",value:function(e){if(this.start=e.position,this.size=e.readUint32(),this.type=String.fromCharCode(e.readUint8(),e.readUint8(),e.readUint8(),e.readUint8()),1===this.size)this.size=e.readUint64();else if(0===this.size&&"mdat"!==this.type)throw new C(C.PARSE,C.HEADER_PARSE_ERROR,{line:20,handle:"[Box] readHeader",msg:"parse mp4 mdat box failed"});if("uuid"===this.type)for(var t=[],n=0;n<16;n++)t.push(e.readUint8())}},{key:"readBody",value:function(t){var n,r=this.size-t.position+this.start,i=this.type;this.data=t.buffer.slice(t.position,t.position+r),t.position+=this.data.byteLength,(n=e.containerBox.find((function(e){return e===i}))?e.containerParser:e[i])&&n instanceof Function&&n.call(this)}},{key:"read",value:function(e){this.readHeader(e),this.readBody(e)}}],[{key:"containerParser",value:function(){for(var t=new at(this.data),n=t.buffer.byteLength;t.position<n;){var r=new e;r.readHeader(t),this.subBox.push(r),r.readBody(t)}delete this.data,t=null}},{key:"parseSampleFlags",value:function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}}}]),e}();ot.containerBox=["moov","trak","edts","mdia","minf","dinf","stbl","mvex","moof","traf","mfra","udta"];var st=ot,ct=n("3948548f6a2986388996"),ut=n.n(ct);n("089dc5659e8a25b93276"),n("5b0b11fbcef5a42d7649");var lt=function(){function e(t){o()(this,e),this.TAG="Golomb",this._buffer=t,this._bufferIndex=0,this._totalBytes=t.byteLength,this._totalBits=8*t.byteLength,this._currentWord=0,this._currentWordBitsLeft=0}return c()(e,[{key:"destroy",value:function(){this._buffer=null}},{key:"_fillCurrentWord",value:function(){var e=this._totalBytes-this._bufferIndex,t=Math.min(4,e),n=new Uint8Array(4);n.set(this._buffer.subarray(this._bufferIndex,this._bufferIndex+t)),this._currentWord=new DataView(n.buffer).getUint32(0),this._bufferIndex+=t,this._currentWordBitsLeft=8*t}},{key:"readBits",value:function(e){var t=Math.min(this._currentWordBitsLeft,e),n=this._currentWord>>>32-t;if(e>32)throw new Error("Cannot read more than 32 bits at a time");return this._currentWordBitsLeft-=t,this._currentWordBitsLeft>0?this._currentWord<<=t:this._totalBytes-this._bufferIndex>0&&this._fillCurrentWord(),(t=e-t)>0&&this._currentWordBitsLeft?n<<t|this.readBits(t):n}},{key:"readBool",value:function(){return 1===this.readBits(1)}},{key:"readByte",value:function(){return this.readBits(8)}},{key:"_skipLeadingZero",value:function(){var e;for(e=0;e<this._currentWordBitsLeft;e++)if(0!=(this._currentWord&2147483648>>>e))return this._currentWord<<=e,this._currentWordBitsLeft-=e,e;return this._fillCurrentWord(),e+this._skipLeadingZero()}},{key:"readUEG",value:function(){var e=this._skipLeadingZero();return this.readBits(e+1)-1}},{key:"readSEG",value:function(){var e=this.readUEG();return 1&e?e+1>>>1:-1*(e>>>1)}}]),e}(),dt=function(){function e(){o()(this,e)}return c()(e,null,[{key:"_ebsp2rbsp",value:function(e){for(var t=e,n=t.byteLength,r=new Uint8Array(n),i=0,a=0;a<n;a++)a>=2&&3===t[a]&&0===t[a-1]&&0===t[a-2]||(r[i]=t[a],i++);return new Uint8Array(r.buffer,0,i)}},{key:"parseSPS",value:function(t){var n=e._ebsp2rbsp(t),r=new lt(n);r.readByte();var i=r.readByte();r.readByte();var a=r.readByte();r.readUEG();var o=e.getProfileString(i),s=e.getLevelString(a),c=1,u=420,l=8;if((100===i||110===i||122===i||244===i||44===i||83===i||86===i||118===i||128===i||138===i||144===i)&&(3===(c=r.readUEG())&&r.readBits(1),c<=3&&(u=[0,420,422,444][c]),l=r.readUEG()+8,r.readUEG(),r.readBits(1),r.readBool()))for(var d=3!==c?8:12,f=0;f<d;f++)r.readBool()&&(f<6?e._skipScalingList(r,16):e._skipScalingList(r,64));r.readUEG();var h=r.readUEG();if(0===h)r.readUEG();else if(1===h){r.readBits(1),r.readSEG(),r.readSEG();for(var p=r.readUEG(),v=0;v<p;v++)r.readSEG()}r.readUEG(),r.readBits(1);var g=r.readUEG(),y=r.readUEG(),m=r.readBits(1);0===m&&r.readBits(1),r.readBits(1);var b=0,_=0,k=0,w=0;r.readBool()&&(b=r.readUEG(),_=r.readUEG(),k=r.readUEG(),w=r.readUEG());var E=1,T=1,A=0,S=!0,I=0,R=0;if(r.readBool()){if(r.readBool()){var O=r.readByte();O>0&&O<16?(E=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][O-1],T=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][O-1]):255===O&&(E=r.readByte()<<8|r.readByte(),T=r.readByte()<<8|r.readByte())}if(r.readBool()&&r.readBool(),r.readBool()&&(r.readBits(4),r.readBool()&&r.readBits(24)),r.readBool()&&(r.readUEG(),r.readUEG()),r.readBool()){var C=r.readBits(32),x=r.readBits(32);S=r.readBool(),A=(I=x)/(R=2*C)}}var P=1;1===E&&1===T||(P=E/T);var D=0,L=0;0===c?(D=1,L=2-m):(D=3===c?1:2,L=(1===c?2:1)*(2-m));var M=16*(g+1),N=16*(y+1)*(2-m);M-=(b+_)*D,N-=(k+w)*L;var U=Math.ceil(M*P);return r.destroy(),r=null,{profile_string:o,level_string:s,bit_depth:l,chroma_format:u,chroma_format_string:e.getChromaFormatString(u),frame_rate:{fixed:S,fps:A,fps_den:R,fps_num:I},par_ratio:{width:E,height:T},codec_size:{width:M,height:N},present_size:{width:U,height:N}}}},{key:"_skipScalingList",value:function(e,t){for(var n=8,r=8,i=0;i<t;i++)0!==r&&(r=(n+e.readSEG()+256)%256),n=0===r?n:r}},{key:"getProfileString",value:function(e){switch(e){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}}},{key:"getLevelString",value:function(e){return(e/10).toFixed(1)}},{key:"getChromaFormatString",value:function(e){switch(e){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}}},{key:"toVideoMeta",value:function(e){var t={};e&&e.codec_size&&(t.codecWidth=e.codec_size.width,t.codecHeight=e.codec_size.height,t.presentWidth=e.present_size.width,t.presentHeight=e.present_size.height),t.profile=e.profile_string,t.level=e.level_string,t.bitDepth=e.bit_depth,t.chromaFormat=e.chroma_format,t.parRatio={width:e.par_ratio.width,height:e.par_ratio.height},t.frameRate=e.frame_rate;var n=t.frameRate.fps_den,r=t.frameRate.fps_num;t.refSampleDuration=Math.floor(t.timescale*(n/r))}}]),e}();var ft=function(){function e(){o()(this,e);var t=new Date;t.setFullYear(1904),t.setMonth(0),t.setDate(1),t.setHours(0),t.setMinutes(0),t.setSeconds(0),this.time=t}return c()(e,[{key:"setTime",value:function(e){return this.time.setTime(this.time.getTime()+Number(e)),this.time.toLocaleString()}}]),e}();n("9719731fbecce0b796a9"),n("eae0a09a38343ad491d5");var ht=q.findBox;st.MP4DecConfigDescrTag=function(e){var t,n=new st;return n.type=e.readUint8(),128===(t=e.readUint8())?(n.extend=!0,e.skip(2),t=e.readUint8()+5):t+=2,n.size=t,n.typeID=e.readUint8(),n.streamUint=e.readUint8(),n.bufferSize=at.readByte(e.dataview,3),n.maximum=e.readUint32(),n.average=e.readUint32(),n.subBox.push(st.MP4DecSpecificDescrTag(e)),n},st.MP4DecSpecificDescrTag=function(e){var t,n,r=new st;r.type=e.readUint8(),128===(t=e.readUint8())?(r.extend=!0,e.skip(2),n=(t=e.readUint8()+5)-5):(n=t,t+=2),r.size=t;for(var i=[],a=0;a<n;a++)i.push(Number(e.readUint8()).toString(16).padStart(2,"0"));return r.EScode=i,delete r.subBox,r},st.MP4ESDescrTag=function(e){var t,n=new st;return n.type=e.readUint8(),128===(t=e.readUint8())?(n.extend=!0,e.skip(2),t=e.readUint8()+5):t+=2,n.size=t,n.esID=e.readUint16(),n.priority=e.readUint8(),n.subBox.push(st.MP4DecConfigDescrTag(e)),n.subBox.push(st.SLConfigDescriptor(e)),n},st.SLConfigDescriptor=function(e){var t,n=new st;return n.type=e.readUint8(),128===(t=e.readUint8())?(n.extend=!0,e.skip(2),t=e.readUint8()+5):t+=2,n.size=t,n.SL=e.readUint8(),delete n.subBox,n},st.av01=function(){var e=new at(this.data);for(this.version=e.readUint8(),this.flag=at.readByte(e.dataview,3),e.skip(2),this.data_reference_index=e.readUint16(),e.skip(16),this.width=e.readUint16(),this.height=e.readUint16(),e.skip(50);e.position<e.buffer.byteLength;){var t=new st;t.readHeader(e),this.subBox.push(t),t.readBody(e)}delete this.data,e=null},st.av1C=function(){var e=new at(this.data),t=e.readUint8();this.marker=t>>7&1,console.assert(1===this.marker,"maker should 1"),this.version=127&t,console.assert(1===this.version,"version shoud 1"),t=e.readUint8(),this.seq_profile=t>>5&7,this.seq_level_idx_0=31&t,t=e.readUint8(),this.seq_tier_0=t>>7&1,this.high_bitdepth=t>>6&1,this.twelve_bit=t>>5&1,this.monochrome=t>>4&1,this.chroma_subsampling_x=t>>3&1,this.chroma_subsampling_y=t>>2&1,this.chroma_sample_position=3&t,t=e.readUint8(),this.initial_presentation_delay_present=t>>4&1,this.initial_presentation_delay_present&&(this.initial_presentation_delay_minus_one=15&t),this.configOBUs=new Uint8Array(e.buffer.slice(e.position))},st.avc1=function(){var e=new at(this.data);e.skip(6),this.dataReferenceIndex=e.readUint16(),e.skip(16),this.width=e.readUint16(),this.height=e.readUint16(),this.horizresolution=e.readUint32(),this.vertresolution=e.readUint32(),e.skip(4),this.frameCount=e.readUint16(),e.skip(1);for(var t=0;t<31;t++)String.fromCharCode(e.readUint8());for(this.depth=e.readUint16(),e.skip(2);e.position<e.buffer.byteLength;){var n=new st;n.readHeader(e),this.subBox.push(n),n.readBody(e)}delete this.data,e=null},st.avcC=function(){var e=new at(this.data);this.configVersion=e.readUint8(),this.profile=e.readUint8(),this.profileCompatibility=e.readUint8(),this.AVCLevelIndication=e.readUint8(),this.lengthSizeMinusOne=1+(3&e.readUint8()),this.numOfSequenceParameterSets=31&e.readUint8();var t=e.readUint16();this.sequenceLength=t;for(var n=[],r=0;r<t;r++)n.push(e.readUint8());this.spsInfo=dt.parseSPS(new Uint8Array(n)),this.ppsCount=e.readUint8();var i=e.readUint16();this.ppsLength=i;for(var a=[],o=0;o<i;o++)a.push(Number(e.readUint8()).toString(16));this.pps=a,this.sps=n;for(var s=[],c=e.dataview.byteLength;e.position<c;)s.push(e.readUint8());this.last=s,delete this.subBox,delete this.data,e=null},st.btrt=function(){var e=new at(this.data);this.bufferSizeDB=e.readUint32(),this.maxBitrate=e.readUint32(),this.avgBitrate=e.readUint32(),delete this.subBox,delete this.data,e=null},st.co64=function(){var e=new at(this.data);this.version=e.readUint8(),this.flag=at.readByte(e.dataview,3),this.count=e.readUint32();var t=[];this.entries=t;for(var n=0,r=this.count;n<r;n++)t.push(e.readUint64());delete this.subBox,delete this.data,e=null},st.ctts=function(){var e=new at(this.data);this.version=e.readUint8(),this.flag=at.readByte(e.dataview,3),this.entryCount=e.readUint32();var t=[];this.entry=t;for(var n=0,r=this.entryCount;n<r;n++)t.push({count:e.readUint32(),offset:e.readUint32()});delete this.subBox,delete this.data,e=null},st.dref=function(){var e=new at(this.data);this.version=e.readUint8(),this.flag=at.readByte(e.dataview,3);var t=e.readUint32();this.entryCount=t;for(var n=0;n<t;n++){var r=new st;this.subBox.push(r),r.read(e)}delete this.data,e=null},st.elst=function(){var e=new at(this.data);this.version=e.readUint8(),this.flag=at.readByte(e.dataview,3);var t=[],n=e.readUint32();this.entries=t;for(var r=0;r<n;r++){var i={};t.push(i),1===this.version?(i.segment_duration=e.readUint64(),i.media_time=e.readUint64()):(i.segment_duration=e.readUint32(),i.media_time=e.readInt32()),i.media_rate_integer=e.readInt16(),i.media_rate_fraction=e.readInt16()}delete this.subBox,e=null},st.enca=function(){var e=new at(this.data);for(e.readUint16(),e.readUint16(),e.readUint16(),this.data_reference_index=e.readUint16(),e.readUint32(),e.readUint32(),this.channelCount=e.readUint16(),this.samplesize=e.readUint16(),e.readUint16(),e.readUint16(),this.sampleRate=e.readUint32()/65536;e.position<e.buffer.byteLength;){var t=new st;t.readHeader(e),this.subBox.push(t),t.readBody(e)}e=null},st.encv=function(){var e=new at(this.data);for(e.readUint16(),e.readUint16(),e.readUint16(),e.readUint16(),e.skip(16),this.width=e.readUint16(),this.height=e.readUint16(),this.horizresolution=e.readUint32(),this.vertresolution=e.readUint32(),e.readUint32(),this.frame_count=e.readUint16(),e.skip(32),this.depth=e.readUint16(),e.readUint16();e.position<e.buffer.byteLength;){var t=new st;t.readHeader(e),this.subBox.push(t),t.readBody(e)}e=null},st.esds=function(){var e=new at(this.data);this.version=e.readUint8(),this.flag=at.readByte(e.dataview,3);var t=st.MP4ESDescrTag(e);this.subBox.push(t),delete this.data,e=null},st.frma=function(){var e=new at(this.data);this.data_format="";for(var t=0;t<4;t++)this.data_format+=String.fromCharCode(e.readUint8())},st.ftyp=function(){},st.hdlr=function(){var e=new at(this.data);this.version=e.readUint8(),this.flag=at.readByte(e.dataview,3),e.skip(4),this.handleType="".concat(String.fromCharCode(e.readUint8())).concat(String.fromCharCode(e.readUint8())).concat(String.fromCharCode(e.readUint8())).concat(String.fromCharCode(e.readUint8())),e.skip(12);for(var t=[];e.position<this.size-8;)t.push(String.fromCharCode(e.readUint8()));this.name=t.join(""),delete this.subBox,e=null},st.iods=function(){var e=new at(this.data);this.version=e.readUint8(),this.flag=at.readByte(e.dataview,3);for(var t=[],n=e.buffer.byteLength;e.position<n;)t.push(e.readUint8());this.content=t,delete this.subBox,delete this.data,e=null},st.mdhd=function(){var e=new at(this.data);this.version=e.readUint8(),this.flag=at.readByte(e.dataview,3),1===this.version?(this.create=e.readUint64(),this.modify=e.readUint64(),this.createTime=(new ft).setTime(1e3*this.create),this.modifyTime=(new ft).setTime(1e3*this.modify),this.timescale=e.readUint32(),this.duration=e.readUint64()):(this.create=e.readUint32(),this.modify=e.readUint32(),this.createTime=(new ft).setTime(1e3*this.create),this.modifyTime=(new ft).setTime(1e3*this.modify),this.timescale=e.readUint32(),this.duration=e.readUint32()),this.language=e.readUint16(),e.readUint16(),delete this.subBox,e=null},st.mehd=function(){var e=new at(this.data);e.skip(4),this.fragment_duration=e.readUint32()},st.mp4a=function(){var e=new at(this.data);e.skip(6),this.dataReferenceIndex=e.readUint16(),e.skip(8),this.channelCount=e.readUint16(),this.sampleSize=e.readUint16(),e.skip(4),this.sampleRate=e.readUint32()>>16;var t=new st;t.readHeader(e),this.subBox.push(t),t.readBody(e),delete this.data,e=null},st.mvhd=function(){var e=new at(this.data);this.version=e.readUint8(),this.flag=at.readByte(e.dataview,3),this.create=e.readUint32(),this.modify=e.readUint32(),this.createTime=(new ft).setTime(1e3*this.create),this.modifyTime=(new ft).setTime(1e3*this.modify),this.timeScale=e.readUint32(),this.duration=e.readUint32(),this.rate=e.readUint16()+"."+e.readUint16(),this.volume=e.readUint8()+"."+e.readUint8(),at.readByte(e.dataview,8),at.readByte(e.dataview,2);for(var t=[],n=0;n<9;n++)t.push(e.readUint16()+"."+e.readUint16());this.matrix=t,at.readByte(e.dataview,24),this.nextTrackID=e.readUint32(),delete this.subBox},st.pasp=function(){var e=new at(this.data);this.hSpacing=e.readUint32(),this.vSpacing=e.readUint32(),e=null},st.pssh=function(){var e=new at(this.data);this.version=e.readUint8(),this.flags=e.readUint24();for(var t=[],n=[],r=0;r<16;r++)n.push(q.toHex(e.readUint8()));if(this.version>0)for(var i=e.readUint32(),a=0;a<String(i).length;a++)for(var o=0;o<16;o++){var s=e.readUint8();t.push(q.toHex(s))}var c=e.readUint32();this.data_size=c,e.skip(c),this.kid=t,this.system_id=n,this.buffer=e.buffer,e=null},st.saio=function(){var e=new at(this.data);this.entry_count=e.readUint32(),e=null},st.saiz=function(){var e=new at(this.data);this.default_sample_info_size=e.readUint8(),e.readUint32(),this.sample_info_size=e.readUint32(),e=null},st.schm=function(){var e=new at(this.data);this.scheme_version=e.readUint32(),this.scheme_type="";for(var t=0;t<4;t++)this.scheme_type+=String.fromCharCode(e.readUint8());if(1&this.flags){this.scheme_uri="";for(var n=0;n<this.size-this.hdr_size-8;n++)this.scheme_uri+=String.fromCharCode(e.readUint8())}},st.senc=function(){var e=new at(this.data);this.version=e.readUint8(),this.flags=e.readUint24();var t=e.readUint32();if(this.samples=[],t)for(var n=0;n<t;n++){var r={},i=2&this.flags;if(i&&Math.floor(this.data.byteLength/t)<=16?r.InitializationVector=[e.readUint8(),e.readUint8(),e.readUint8(),e.readUint8(),e.readUint8(),e.readUint8(),e.readUint8(),e.readUint8()]:r.InitializationVector=[e.readUint8(),e.readUint8(),e.readUint8(),e.readUint8(),e.readUint8(),e.readUint8(),e.readUint8(),e.readUint8(),e.readUint8(),e.readUint8(),e.readUint8(),e.readUint8(),e.readUint8(),e.readUint8(),e.readUint8(),e.readUint8()],i){r.subsamples=[];for(var a=e.readUint16(),o=0;o<a;o++){var s={};s.BytesOfClearData=e.readUint16(),s.BytesOfProtectedData=e.readUint32(),r.subsamples.push(s)}}this.samples.push(r)}},st.sidx=function(){var e=new at(this.data);this.version=e.readUint8(),this.flag=at.readByte(e.dataview,3),this.reference_ID=e.readUint32(),this.timescale=e.readUint32(),0===this.version?(this.earliest_presentation_time=e.readUint32(),this.first_offset=e.readUint32()):(this.earliest_presentation_time=e.readUint64(),this.first_offset=e.readUint64()),e.readUint16(),this.references=[];for(var t=e.readUint16(),n=0;n<t;n++){var r={};this.references.push(r);var i=e.readUint32();r.reference_type=i>>31&1,r.referenced_size=2147483647&i,r.subsegment_duration=e.readUint32(),i=e.readUint32(),r.starts_with_SAP=i>>31&1,r.SAP_type=i>>28&7,r.SAP_delta_time=268435455&i}e=null},st.smhd=function(){var e=new at(this.data);this.version=e.readUint8(),this.flag=at.readByte(e.dataview,3),this.balance=e.readInt8()+"."+e.readInt8(),delete this.subBox,delete this.data,e=null},st.stco=function(){var e=new at(this.data);this.version=e.readUint8(),this.flag=at.readByte(e.dataview,3),this.count=e.readUint32();var t=[];this.entries=t;for(var n=0,r=this.count;n<r;n++)t.push(e.readUint32());delete this.subBox,delete this.data,e=null},st.stsc=function(){var e=new at(this.data);this.version=e.readUint8(),this.flag=at.readByte(e.dataview,3),this.count=e.readUint32();var t=[];this.entries=t;for(var n=0,r=this.count;n<r;n++)t.push({first_chunk:e.readUint32(),samples_per_chunk:e.readUint32(),sample_desc_index:e.readUint32()});for(var i,a,o=0,s=this.count;o<s-1;o++)i=t[o],a=t[o-1],i.chunk_count=t[o+1].first_chunk-i.first_chunk,i.first_sample=0===o?1:a.first_sample+a.chunk_count*a.samples_per_chunk;if(1===this.count){var c=t[0];c.first_sample=1,c.chunk_count=0}else if(this.count>1){var u=t[this.count-1],l=t[this.count-2];u.first_sample=l.first_sample+l.chunk_count*l.samples_per_chunk,u.chunk_count=0}delete this.subBox,delete this.data,e=null},st.stsd=function(){var e=new at(this.data);this.version=e.readUint8(),this.flag=at.readByte(e.dataview,3),this.entryCount=e.readUint32();var t=new st;t.readHeader(e),this.subBox.push(t),t.readBody(e),delete this.data,e=null},st.stss=function(){var e=new at(this.data);this.version=e.readUint8(),this.flag=at.readByte(e.dataview,3),this.count=e.readUint32();var t=[];this.entries=t;for(var n=0,r=this.count;n<r;n++)t.push(e.readUint32());delete this.subBox,delete this.data,e=null},st.stsz=function(){var e=new at(this.data);this.version=e.readUint8(),this.flag=at.readByte(e.dataview,3),this.sampleSize=e.readUint32(),this.count=e.readUint32();var t=[];this.entries=t;for(var n=0,r=this.count;n<r;n++)this.sampleSize?t.push(this.sampleSize):t.push(e.readUint32());delete this.subBox,delete this.data,e=null},st.stts=function(){var e=new at(this.data);this.version=e.readUint8(),this.flag=at.readByte(e.dataview,3),this.count=e.readUint32();for(var t=[],n=0,r=this.count;n<r;n++)t.push({sampleCount:e.readUint32(),sampleDuration:e.readUint32()});this.entry=t,delete this.subBox,delete this.data,e=null},st.tenc=function(){var e=new at(this.data);e.skip(6),this.default_IsEncrypted=e.readUint8(),this.default_IV_size=e.readUint8(),this.default_KID=[];for(var t=0;t<16;t++)this.default_KID.push(q.toHex(e.readUint8()))},st.tfhd=function(){var e=new at(this.data);this.version=e.readUint8(),this.flags=e.readUint24(),e.skip(3),this.track_id=e.readUint8(),this.hdr_size=16,this.size>this.hdr_size&&1&this.flags?(this.base_data_offset=e.readUint64(),this.hdr_size=this.hdr_size+8):this.base_data_offset=0,this.size>this.hdr_size&&2&this.flags?(this.default_sample_description_index=e.readUint32(),this.hdr_size=this.hdr_size+4):this.default_sample_description_index=0,this.size>this.hdr_size&&8&this.flags?(this.default_sample_duration=e.readUint32(),this.hdr_size=this.hdr_size+4):this.default_sample_duration=0,this.size>this.hdr_size&&16&this.flags?(this.default_sample_size=e.readUint32(),this.hdr_size=this.hdr_size+4):this.default_sample_size=0,this.size>this.hdr_size&&32&this.flags?(this.default_sample_flags=e.readUint32(),this.hdr_size=this.hdr_size+4):this.default_sample_flags=0},st.tkhd=function(){var e=new at(this.data);this.version=e.readUint8(),this.flag=at.readByte(e.dataview,3,0),1===this.version?(this.create=e.readUint64(),this.modify=e.readUint64(),this.createTime=(new ft).setTime(1e3*this.create),this.modifyTime=(new ft).setTime(1e3*this.modify),this.trackID=e.readUint32(),this.reserverd=e.readUint32(),this.duration=e.readUint64()):(this.create=e.readUint32(),this.modify=e.readUint32(),this.createTime=(new ft).setTime(1e3*this.create),this.modifyTime=(new ft).setTime(1e3*this.modify),this.trackID=e.readUint32(),this.reserverd=e.readUint32(),this.duration=e.readUint32()),e.readUint64(),this.layer=e.readInt16(),this.alternate_group=e.readInt16(),this.volume=e.readInt16()>>8,e.readUint16();for(var t=[],n=0;n<9;n++)t.push(e.readUint16()+"."+e.readUint16());this.matrix=t,this.width=e.readUint16()+"."+e.readUint16(),this.height=e.readUint16()+"."+e.readUint16(),delete this.subBox,e=null},st.trun=function(){var e=new at(this.data);this.version=e.readUint8(),this.flags=e.readUint24(),this.samples=[],this.sampleInfos=[];var t,n,r=1&this.flags,i=4&this.flags,a=256&this.flags,o=512&this.flags,s=1024&this.flags,c=2048&this.flags,u=e.readUint32();for(r&&(this.dataOffset=e.readUint32()),i&&u&&(n=st.parseSampleFlags([e.readUint8(),e.readUint8(),e.readUint8(),e.readUint8()]));u>0;)u--,t={},a&&(t.duration=e.readUint32()),o&&(t.size=e.readUint32()),s&&(t.flags=st.parseSampleFlags([e.readUint8(),e.readUint8(),e.readUint8(),e.readUint8()])),c&&(t.compositionTimeOffset=e.readUint32()),this.samples.push(t.size),this.sampleInfos.push(t);n&&this.sampleInfos.length>0&&(this.sampleInfos[0].flags=n),delete this.subBox,e=null},st.udta=function(){},st.meta=function(){var e=new at(this.data),t=e.buffer.byteLength;for(this.version=e.readUint8(),this.flag=at.readByte(e.dataview,3);e.position<t;){var n=new st;n.readHeader(e),this.subBox.push(n),n.readBody(e)}this.vid=null;var r=ht(this,"keys"),i=ht(this,"ilst");if(r&&i){var a=r.metaKeys.indexOf("comment");if(a>-1){var o=i.datas[a];"string"==typeof o&&o.indexOf("vid")>-1&&(this.vid=o.split(":")[1])}}if(!this.vid&&i)for(var s=0;s<i.datas.length;s++){var c=i.datas[s];if("string"==typeof c&&c.indexOf("vid")>-1){this.vid=c.split(":")[1];break}}delete this.data,e=null},st.ilst=function(){var e=new at(this.data),t=e.buffer.byteLength;for(this.datas=[];e.position<t;){e.skip(4);var n=e.readUint32()-1,r=e.readUint32();if("data"!==e.readString(4))e.skip(r-8);else{e.skip(8);var i=e.readString(r-16);this.datas[n]=i}}e=null},st.keys=function(){var e=new at(this.data);e.skip(4),this.count=e.readUint32(),this.metaKeys=[];for(var t=0;t<this.count;t++){var n=e.readUint32();n-=8,"mdta"!==e.readString(4)&&e.skip(n);var r=e.readString(n);this.metaKeys.push(r)}e=null},st.vmhd=function(){var e=new at(this.data);this.version=e.readUint8(),this.flag=[e.readUint8(),e.readUint8(),e.readUint8()],this.graphicsmode=e.readUint16(),this.opcolor=[e.readUint16(),e.readUint16(),e.readUint16()],delete this.subBox,e=null};var pt,vt=c()((function e(t){o()(this,e),this.buffer=null,this.boxes=[],this.nextBox=null,this.start=0;this.buffer?ut()(Uint8Array,this.buffer,t):this.buffer=t;var n=t.byteLength;t.position=0;for(var r=new at(t);n-r.position>=8;){var i=new st;if(i.readHeader(r),i.size-8<=n-r.position)i.readBody(r),this.boxes.push(i);else{if("mdat"!==i.type){this.nextBox=i,r.position-=8;break}i.readBody(r),this.boxes.push(i)}}this.buffer=new Uint8Array(this.buffer.slice(r.position))})),gt=function(){function e(){o()(this,e)}return c()(e,null,[{key:"parse",value:function(t){var n=e.parseXmlString(t);return null!==n?e.parseDOMChildren(n):null}},{key:"parseXmlString",value:function(e){if(void 0===e)return null;var t,n=new window.DOMParser;try{(t=n.parseFromString(e,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(t=null)}catch(r){t=null}return t}},{key:"parseDOMChildren",value:function(t,n){if(t.nodeType===Node.DOCUMENT_NODE){for(var r={},i=t.childNodes,a=0;a<i.length;a++){var o=i[a];o.nodeType===Node.ELEMENT_NODE&&(r=e.parseDOMChildren(o))}return r}if(t.nodeType===Node.ELEMENT_NODE){for(var s={__cnt:0},c=[],u=t.childNodes,l=0;l<u.length;l++){var d=u[l],f=e.getNodeLocalName(d);if(d.nodeType!==Node.COMMENT_NODE){var h=n+"."+f;if(s.__cnt++,null==s[f]){var p=e.parseDOMChildren(d,h);if("#text"!==f||/[^\s]/.test(p)){var v={};v[f]=p,c.push(v)}s[f]=p,e.toArrayAccessForm(s,f)}else{null!=s[f]&&(s[f]instanceof Array||(s[f]=[s[f]],e.toArrayAccessForm(s,f,h)));var g=e.parseDOMChildren(d,h);if("#text"!==f||/[^\s]/.test(g)){var y={};y[f]=g,c.push(y)}s[f][s[f].length]=g}}}for(var m=0;m<t.attributes.length;m++){var b=t.attributes[m];s.__cnt++;var _=b.value;s[b.name]=_}var k=t.prefix;return null!=k&&""!==k&&(s.__cnt++,s.__prefix=k),null!=s["#text"]&&(s.__text=s["#text"],s.__text instanceof Array&&(s.__text=s.__text.join("\n")),delete s["#text"],delete s["#text_asArray"]),null!=s["#cdata-section"]&&(s.__cdata=s["#cdata-section"],delete s["#cdata-section"],delete s["#cdata-section_asArray"]),1===s.__cnt&&null!=s.__text?s=s.__text:1===s.__cnt&&null!=s.__cdata&&(s=s.__cdata),delete s.__cnt,s}if(t.nodeType===Node.TEXT_NODE||t.nodeType===Node.CDATA_SECTION_NODE)return t.nodeValue}},{key:"getNodeLocalName",value:function(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!==t||(t=e.nodeName),t}},{key:"toArrayAccessForm",value:function(e,t){e[t]instanceof Array||(e[t]=[e[t]])}}]),e}(),yt=c()((function e(t,n,r,i,a,s){o()(this,e),this.type=t,this.codecs=n,this.visualEntryBox=r,this.configurationBox=i,this.types=a,this.logCodeType=s})),mt="avc",bt="av1",_t=(pt={},m()(pt,mt,new yt("avc","avc1.64001E","avc1","avcC",["h264"],"h264")),m()(pt,bt,new yt("av1","av01.0.08M.08","av01","av1C",["av1"],"av1")),pt),kt=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;o()(this,e),w()(this),this.url=t,this.options=r,this.dash=i,this.mediaList={video:[],audio:[]},this.retryMax=10,this.retry=0,this.type="live",this.isEnd=!1,this.duration=0,this.videoCodecType=null,this.videoCodecs=null,setTimeout((function(){n.init(t)}))}var t;return c()(e,[{key:"calcVideoCodeType",value:function(e,t){if((e||t)&&!this.videoCodecType){var n=null;t?n=t.split(".")[0]:e&&(n=e.split(".")[0]);for(var r=Object.keys(_t),i=0;i<r.length;i++){var a=r[i],o=_t[a];if(o.types.concat(o.visualEntryBox).indexOf(n)>-1){this.videoCodecType=a,this.videoCodecs=o.codecs;break}}ie.log("mpd dataType:",e,"codecs:",t,"cal type:",this.videoCodecType,"videoCodecs",this.videoCodecs),this.videoCodecType||(this.videoCodecType=mt,this.videoCodecs=_t[mt].codecs,console.warn("calcVideoCodeType default")),this.dash&&this.dash._pluginInst&&this.dash._pluginInst.setCodeInfo(this.videoCodecType)}}},{key:"fetch",value:(t=tt()(rt.a.mark((function t(n){var r,i,a,o=this;return rt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this,i={TYPE:"LIVE",ENDLIST:""},a=[],t.abrupt("return",new Promise((function(t,s){new it({type:"",url:n}).then((function(c){var u=c.responseText;if(u){var l=e.parseMPD(u);l||s(new Error("parse mpd error"));var d=[];"static"===l.type&&(i.TYPE="VOD"),l.minBufferTime&&(i.minBufferTime=q.durationConvert(l.minBufferTime)),l.maxSegmentDuration&&(i.maxSegmentDuration=q.durationConvert(l.maxSegmentDuration)),l.mediaPresentationDuration&&(r.duration=q.durationConvert(l.mediaPresentationDuration));var f="";l.BaseURL&&(f=l.BaseURL[0]);var h=l.Period[0];!r.duration&&h&&h.duration&&(r.duration=q.durationConvert(h.duration)),i.duration=r.duration,h.AdaptationSet&&h.AdaptationSet.length>1&&h.AdaptationSet.forEach((function(e){var t="video/mp4",i="avc1.64001E",a="640",s="360",c="25",u="1:1",l="1",h="588633";e.mimeType&&("video/mp4"===(t=e.mimeType)?(i=e.codecs,a=parseFloat(e.width),s=parseFloat(e.height),c=parseFloat(e.frameRate),u=e.sar,l=e.startWithSAP,h=parseFloat(e.bandwidth),r.calcVideoCodeType(null,i)):"audio/mp4"===t&&(i=e.codecs,l=e.startWithSAP,h=parseFloat(e.bandwidth))),e.Representation.forEach((function(p){d.indexOf(p.id)>-1&&(p.id=(parseInt(d[d.length-1],10)+1).toString()),d.push(p.id);var v,g="",y=[],m=0,b=0,_=n.slice(0,n.lastIndexOf("/")+1)+f;p.mimeType&&(t=p.mimeType),p.mimeType&&(t=p.mimeType),"video/mp4"===t?(p.codecs&&(i=p.codecs,r.calcVideoCodeType(null,i)),p.width&&(a=parseFloat(p.width)),p.height&&(s=parseFloat(p.height)),p.frameRate&&(c=parseFloat(p.frameRate)),p.sar&&(u=p.sar),p.startWithSAP&&(l=p.startWithSAP),p.bandwidth&&(h=parseFloat(p.bandwidth))):"audio/mp4"===t&&(p.codecs&&(i=p.codecs),p.startWithSAP&&(l=p.startWithSAP),p.bandwidth&&(h=parseFloat(p.bandwidth))),p.BaseURL&&p.BaseURL.length>0&&(_+=p.BaseURL[0]),e.SegmentTemplate&&e.SegmentTemplate.length>0&&(v=e.SegmentTemplate[0]),p.SegmentTemplate&&p.SegmentTemplate.length>0&&(v=p.SegmentTemplate[0]);var k=!1;if((e.ContentProtection||p.ContentProtection)&&(k=!0),v){g=v.initialization,m=parseFloat(v.timescale),b=parseFloat(v.duration);for(var w=Math.round(b/m),E=parseInt(v.startNumber,10),T=E+Math.ceil(r.duration/w)-1,A=E;A<=T;A++){var S=w*(A-E),I=w*(A-E+1);A===T&&(w=r.duration-w*(T-E),I=r.duration),y.push({idx:A,start:Math.round(S),end:Math.round(I),url:_+v.media.replace("$RepresentationID$",p.id).replace("$Number%04d$",q.preFixInterge(A,4)),downloaded:0,segmentDuration:w,height:s})}}if(h=1e3*parseInt(h/1e3,10),"video/mp4"===t){var R,O;if(o.options.dynamic_video&&o.options.dynamic_video.dynamic_video_list)for(var C=0;C<o.options.dynamic_video.dynamic_video_list.length;C++){var x=o.options.dynamic_video.dynamic_video_list[C];x.bitrate===h&&(R=x.size,O=x.definition)}r.mediaList.video.push({id:p.id,baseURL:_,initSegment:_+g.replace("$RepresentationID$",p.id),inited:!1,mediaSegments:y,mimeType:t,codecs:i,width:a,height:s,size:R,frameRate:c,sar:u,startWithSAP:l,bandwidth:h,timescale:m,duration:b,encrypted:k,definition:O})}else if("audio/mp4"===t){var P;if(o.options.dynamic_video&&o.options.dynamic_video.dynamic_audio_list)for(var D=0;D<o.options.dynamic_video.dynamic_audio_list.length;D++)o.options.dynamic_video.dynamic_audio_list[D].bitrate===h&&(P=o.options.dynamic_video.dynamic_audio_list[D].size);r.mediaList.audio.push({id:p.id,baseURL:_,initSegment:_+g.replace("$RepresentationID$",p.id),inited:!1,mediaSegments:y,mimeType:t,codecs:i,startWithSAP:l,bandwidth:h,size:P,timescale:m,duration:b,encrypted:k})}}))})),["video","audio"].forEach((function(e){r.mediaList[e].length>0&&(r.mediaList[e].selectedIdx="video"===e&&r.dash.selectedIdx||0,r.mediaList[e].sort((function(t,n){return"video"===e?n.height-t.height:n.bandwidth-t.bandwidth})))})),0===r.mediaList.video.length&&0===r.mediaList.audio.length&&setTimeout((function(){r.dash.player&&r.dash.player.emit("NO_MEDIALIST",{dynamic_type:"segment_template"})})),t({meta:i,segments:a})}else r.dash.emit("error",new C(C.PARSE,C.MPD_PARSE_ERROR,{line:253,handle:"[MPD] parse",msg:"mpd segment template Parse error",url:n},r.dash.player)),s()})).catch((function(e){var t=403===e.status?"task_request_expired":"mpd Request error";r.dash.emit("error",new C(C.PD_NETWORK,C.NETEORK_ERROR_CODES[e&&e.status?e.status:"timeout"],{line:258,handle:"[MPD] xhr",msg:t,url:n},r.dash.player)),s(e)}))})));case 4:case"end":return t.stop()}}),t,this)}))),function(e){return t.apply(this,arguments)})},{key:"init",value:function(e){var t=this,n=t.options;if(n.dynamic_video.dynamic_type&&"segment_template"!==n.dynamic_video.dynamic_type){t.dashType="segment_base";var r=0;n.duration;var i=n.dynamic_video;["dynamic_video_list","dynamic_audio_list"].forEach((function(e){var a="dynamic_audio_list"===e;i[e].forEach((function(i){var o=parseInt(i.init_range.split("-")[0],10),s=parseInt(i.init_range.split("-")[1],10),c=parseInt(i.index_range.split("-")[0],10),u=parseInt(i.index_range.split("-")[1],10);a||t.calcVideoCodeType(i.codec_type),t.mediaList["dynamic_audio_list"===e?"audio":"video"].push({id:("dynamic_audio_list"===e?0:r++).toString(),baseURL:i.main_url,initSegment:i.main_url,initSegmentRange:[o,s],sidxRange:[c,u],inited:!1,hasSidx:!1,mediaSegments:[],mimeType:a?"audio/mp4":"video/mp4",codecs:a?"mp4a.40.2":i.codec_type&&i.codec_type.indexOf("h265")>-1?"hev1.1.6.L93.B0":t.videoCodecs,width:i.vwidth,height:i.vheight,bandwidth:1e3*parseInt(i.bitrate/1e3,10),size:i.size,timescale:-1,duration:n.duration,encrypted:i.encrypt,kid:i.kid,definition:i.definition,sidxRes:void 0})}))})),t.type="vod",["video","audio"].forEach((function(e){t.mediaList[e].length>0&&(t.mediaList[e].selectedIdx="video"===e&&t.dash.selectedIdx||0,t.mediaList[e].sort((function(t,n){return"video"===e?n.height-t.height:n.bandwidth-t.bandwidth})))})),0===t.mediaList.video.length&&0===t.mediaList.audio.length&&t.dash&&t.dash.player&&setTimeout((function(){t.dash.player.emit("NO_MEDIALIST",{dynamic_type:"segment_base"})})),t.emit("ready")}else t.dashType="segment_template",t.fetch(n.dynamic_video.main_url).then((function(e){t.type=e.meta.TYPE.toLocaleLowerCase(),t.emit("ready")}),(function(){["video","audio"].forEach((function(e){t.mediaList[e]=[]})),t.retry++,t.retry,t.retryMax}))}},{key:"getSidx",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"video",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=this,a=i.mediaList[t][n],o=a.sidxRange[1];a.sidxFetching=!0;try{new vt(e).boxes.every((function(t){if("sidx"===t.type){var n=[],i=0,s=0,c=o+1,u=c-1;return t.references.forEach((function(e,r){s+=e.subsegment_duration,u+=e.referenced_size,n.push({idx:r+1,url:a.initSegment,start:Math.round(i/t.timescale),end:Math.round(s/t.timescale),range:[c,u],downloaded:0,segmentDuration:Math.round(e.subsegment_duration/t.timescale),reference_type:e.reference_type,starts_with_SAP:e.starts_with_SAP,SAP_type:e.SAP_type,SAP_delta_time:e.SAP_delta_time}),i=s+1,c=u+1})),n[0].startTime_=0,a.mediaDuration=0,n.forEach((function(e,t){a.mediaDuration+=e.segmentDuration,t>0&&(e.startTime_=n[t-1].startTime_+n[t-1].segmentDuration),t===n.length-1&&r&&(e.end=r)})),a.hasSidx=!0,a.mediaSegments=n,a.timescale=t.timescale,a.sidxRes=e,!1}return!0})),a.sidxFetching=!1}catch(s){throw a.sidxFetching=!1,i.dash.reportMonitorEvent("sidx_exception"),new C(C.PARSE,C.SID_PARSE_ERROR,{line:398,handle:"[MPD] getSidx",msg:"mpd segment base Parse getSidx error"},i.dash.player)}}},{key:"checkInBuffered",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=this.dash.mse.buffered(e);if(!i)return!1;for(var a=0;a<i.length;a++){var o=q.round(i.start(a)),s=q.round(i.end(a));if(q.round(t)+r>=o&&q.round(n)-r<=s)return!0}return!1}},{key:"seek",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U;ie.log("mpd seek: ".concat(e));var r=this,i={};function a(){["video","audio"].forEach((function(t){if(r.mediaList[t].length<1)return!0;var a=r.mediaList[t][r.mediaList[t].selectedIdx].mediaSegments;i[t]=a.filter((function(i,o){if(i.downloaded===N){if(r.checkInBuffered(t,i.start,i.end,0))return!1;if(i.incomplete)return!1;ie.log("".concat(t," ").concat(o," start:").concat(i.start," end:").concat(i.end," segment downloaded set false")),i.downloaded=L}if(i.start<=e&&e<i.end&&i.downloaded===L)return i.downloaded=M,!0;if(n===U)for(var s=1;s<(r.dash.config.reqSegNum||1);s++)if(o-s>=0&&a[o-s].start<=e&&e<a[o-s].end&&!i.downloaded)return i.downloaded=M,!0;return!1}))}))}return new Promise((function(n,r){"vod"===t.type||void 0!==e?(a(),n(i)):r("media error2")}))}},{key:"clearBuffer",value:function(e,t){var n=this;"vod"===n.type&&["video","audio"].forEach((function(r){n.mediaList[r].length>0&&n.mediaList[r][n.mediaList[r].selectedIdx].mediaSegments.forEach((function(n,i){n.downloaded&&(n.end<e||n.start>t||(ie.log("".concat(r," ").concat(i," start:").concat(n.start," end:").concat(n.end," segment downloaded set false")),n.downloaded=L))}))}))}}],[{key:"parseMPD",value:function(e){var t;if("string"==typeof e&&(t=e),e instanceof ArrayBuffer){var n=new Uint8Array(e);t=String.fromCharCode.apply(null,n)}if(!t)return null;var r=performance.now();return t=t.replace(/<(\/)?(\w+:)+(\w+)/g,"<$1$3"),ie.log("MPD cost",performance.now()-r),gt.parse(t)}},{key:"parseTime",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=e.getAttribute(n);i&&(t[r||n]=q.durationConvert(i))}}]),e}(),wt=function(){function e(){o()(this,e),this.bandwidth2item={},this._mediaInfos=null,this.__p__=!0}return c()(e,[{key:"init",value:function(){throw new Error("init func not implement, return promise")}},{key:"preloadPredict",value:function(e){throw new Error("preloadPredict error",e)}},{key:"updateMediaInfos",value:function(e){if(this._mediaInfos=e,this.bandwidth2item={},this.dynamic_video=e&&e.dynamic_video_list,this.dynamic_video&&this.dynamic_video.length>0)for(var t=0;t<this.dynamic_video.length;t++){var n=this.dynamic_video[t];this.bandwidth2item[n.bitrate||n.bandwidth]=n}}},{key:"getIdx",value:function(e,t){var n=0;return e.forEach((function(e,r){e.definition===t&&(n=r)})),n}},{key:"cachedData",get:function(){return null}}]),e}();n("2312ec4111cf86654f63"),n("c92b7fb4dd6fa9135767");var Et=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{logger:function(){},openLog:!1};o()(this,e),this.bitrate=n,this.segment_duration=i||5e3,this.logger=a.logger,this.openLog=a.openLog,this.cdnHost=t.cdnHost,this._loadedPromise=new Le,this._wasmPromise=new Le,this.config=t,this.autoBitrateOpts=t.autoBitrateOpts||{},this.stall_penalty=this.autoBitrateOpts.stall_penalty||11,this.switch_penalty=this.autoBitrateOpts.switch_penalty||4,this.interval=this.autoBitrateOpts.interval||1e3;var s=t.progressTimer||1e3,c=this.autoBitrateOpts.startInterval||s;this.initInterval=.8*c,this._prealodMethod=t.preloadmethod||0,this._videoWidth=0,this._videoHeight=0,this._hasDeviceInfoChanged=!0,this.updateMediaInfos(r,!1)}return c()(e,[{key:"onLoadWasm",value:function(){var e=this,t=this.module={onRuntimeInitialized:function(){e._wasmPromise.resolve()}};return(0,this.autoBitrateOpts.module)(t),this._wasmPromise}},{key:"updateMediaInfos",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._heightToDefitionConfig=new Map,this._bitrateToDefitionConfig=new Map,e?(this.mediaInfos=e,this.mediaInfos.dynamic_video_list.forEach((function(e){t._heightToDefitionConfig.set(e.vheight,e),t._bitrateToDefitionConfig.set(e.bitrate,e)}))):n&&console.error("baseAbr mediaInfos null")}},{key:"parseMPD",value:function(){if(this.setDebugModel(this.openLog),this.mediaInfos){this.logger("mediaInfos",this.mediaInfos);try{for(var e=[],t=this.mediaInfos.dynamic_video_list,n=0;n<t.length;n++){var r=t[n];e.push({stream_id:"s".concat(n),bandwidth:r.bitrate||r.bandwidth,width:r.vwidth||r.width,height:r.vheight||r.height,codec:r.codecs||r.codec_type||"h264",frame_rate:Number(r.fps)||-1,segment_duration:this.segment_duration})}var i={v_adaptation:e},a=JSON.stringify(i);this.module.ccall("parseMPD","null",["string"],[a])}catch(o){}}else console.warn("mediaInfos is null")}},{key:"_getDefautSpeed",value:function(e){var t=0,n=window.navigator.connection;if(n&&n.downlink)t=1024*navigator.connection.downlink/8,this.logger("initSpeed connect",t);else try{t=parseFloat(ee.getItem("danger_d_speed"))||0,this.logger("initSpeed connect",t)}catch(r){}return 0===t&&(t=e&&e.historyAvspeed||0,this.logger("initSpeed history",t)),t}},{key:"setDebugModel",value:function(e){this.module._setDebugModel(e)}},{key:"updateBitrate",value:function(e){this.bitrate=e}},{key:"_updatePreloadSupplier",value:function(e,t){this.module._updatePreloadSupplier(e,t)}},{key:"updatePreloadSupplier",value:function(e){var t=this._getDefautSpeed();this._updatePreloadSupplier(t,e)}},{key:"getPreloadBitrate",value:function(){var e,t=null,n=[];try{this.logger("preloadMethod",this._prealodMethod),e=this.module._getPreloadBitrate(this._prealodMethod);for(var r=0;r<5;r++)n.push(this.module.HEAP32[e/Int32Array.BYTES_PER_ELEMENT+r]);var i={bitrate:n[0],pduration:n[1],preloadType:n[2],size:n[3],mediaType:n[4]};return this.logger("getPreloadBitrate",i),i}catch(a){t=null,console.log("getPreloadBitrate",a)}finally{this.module._free(e)}return t}},{key:"_updateDeviceInfo",value:function(e){try{if(this._hasDeviceInfoChanged){var t=window.devicePixelRatio||1;this.module._updateDeviceInfo(this._videoWidth||Number(this.config.width),this._videoHeight||Number(this.config.height),t,e||-1)}this._hasDeviceInfoChanged=!1}catch(n){console.log("_updateDeviceInfo")}}},{key:"preload",value:function(e){this.parseMPD(),this.updatePreloadSupplier(e),this._updateDeviceInfo(-1);var t=window.devicePixelRatio||1;return this.logger("baseAbr updateDeviceInfo width",this._videoWidth||Number(this.config.width),"height",this._videoHeight||Number(this.config.height),"dpr",t),this.getPreloadBitrate()}}]),e}();function Tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}Et.SPPED_CACHE="danger_d_speed";var At=i.MEDIA_TYPES,St=function(e){f()(n,e);var t=Tt(n);function n(e,r,i,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{logger:function(){},openLog:!1};return o()(this,n),t.call(this,e,r,i,a,s)}return c()(n,[{key:"init",value:function(){return this.onLoadWasm()}},{key:"preloadPredict",value:function(){return this.preload(At.VIDEO)}}]),n}(Et);function It(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var Rt=function(e){f()(n,e);var t=It(n);function n(e){var r;return o()(this,n),(r=t.call(this)).loggerConfig=e,r._isWasmSupport=pe(),r}return c()(n,[{key:"init",value:function(e){var t=e.autoBitrateOpts||{},n=t.module;return this.isOpenAbr=t.isOpenAutoDefi,this.isOpenAbr&&!n&&(console.warn("if open abr, need [module], abr open change to close"),this.isOpenAbr=!1),this._isWasmSupport&&n&&this.isOpenAbr?(this._abrPreloadInst=new St(e,0,null,5,this.loggerConfig),this._abrPreloadInst.init()):Promise.resolve()}},{key:"preloadPredict",value:function(e){var t=this._mediaInfos,n=0,r=0;if(this._isWasmSupport&&this.isOpenAbr&&(e.useAbr||void 0===e.useAbr)){this._abrPreloadInst.updateMediaInfos(this._mediaInfos);var i=this._abrPreloadPredict();n=i.videoIdx,r=i.time}else n=this.getIdx(t.dynamic_video_list,e.defaultDefinition),this._cachedData=null;var a=t.dynamic_video_list[n]||t.dynamic_video_list[0];return{bandwidth:a.bitrate||a.bandwidth,executeTime:r}}},{key:"_abrPreloadPredict",value:function(){var e=this._abrPreloadInst.preloadPredict();this._cachedData=e;var t=e.bitrate,n=0,r=this.bandwidth2item[t];if(r){var i=r.definition;n=this.getIdx(this._mediaInfos.dynamic_video_list,i)}return{videoIdx:n,time:e.pduration}}},{key:"cachedData",get:function(){return this._cachedData}}]),n}(wt);function Ot(e){e.duration=e.dashOpts.Data.Duration,e.dashOpts.dynamic_video=e.dashOpts.Data,e.dashOpts.dynamic_video.dynamic_video_list=[],e.dashOpts.dynamic_video.dynamic_audio_list=[],e.dashOpts.dynamic_video.dynamic_type=e.dashOpts.Data.AdaptiveInfo.AdaptiveType,e.dashOpts.dynamic_video.main_url=e.dashOpts.Data.AdaptiveInfo.MainPlayUrl;for(var t=0;t<e.dashOpts.Data.PlayInfoList.length;t++){var n=e.dashOpts.Data.PlayInfoList[t],r={backup_url_1:n.BackupPlayUrl,bitrate:e.dashOpts.Data.VideoID?n.Bitrate:1e3*n.Bitrate,check_info:n.CheckInfo,codec_type:n.Codec,definition:n.Definition,encrypt:!(!n.PlayAuth||!n.PlayAuthID&&!n.PlayAuthId),file_hash:n.FileHash||n.Md5,file_id:n.FileID,index_range:n.IndexRange,init_range:n.InitRange,kid:n.PlayAuthID||n.PlayAuthId,logo_type:n.Logo||n.LogoType,main_url:n.MainPlayUrl,preload_interval:n.PreloadInterval,preload_max_step:n.PreloadMaxStep,preload_min_step:n.PreloadMinStep,preload_size:n.PreloadSize,quality:n.Quality,size:n.Size,spade_a:n.PlayAuth,vheight:n.Height,vtype:n.Format,vwidth:n.Width};"video"===n.MediaType||"video"===n.FileType?e.dashOpts.dynamic_video.dynamic_video_list.push(r):"audio"!==n.MediaType&&"audio"!==n.FileType||e.dashOpts.dynamic_video.dynamic_audio_list.push(r)}}function Ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var xt=null,Pt=function(e){f()(n,e);var t=Ct(n);function n(e,r,i){var a;return o()(this,n),r.vtype=De.DASH,(a=t.call(this,r)).player=e,a.logger=i||function(){},a}return c()(n,[{key:"before",value:function(){var e=this;this.handlers={start:function(t){return e.start(t)},onRequest:function(t,n){var r=t.url,i=t.range,a=t.extData;return e.getData(r,i,a,n)}},this.loggerConfig={logger:function(){},openLog:!1};try{!!localStorage.getItem("abrdebug")&&(this.loggerConfig.logger=console.log,this.loggerConfig.openLog=!0)}catch(t){}this.predictInst=new Rt(this.loggerConfig)}},{key:"start",value:function(e){var t=this,r=new Le,i=e.payload;if("TOP"===e.playInfoType){var a={dashOpts:e.payload};Ot(a),i=a.dashOpts.dynamic_video}var o=new kt("anytext",{dynamic_video:i},this),s={mediaInfos:{dynamic_video_list:[],dynamic_audio_list:[]},onObtain:function(e){var t=new Le;return t.resolve(s.mediaInfos),t},onTransform:function(r){var a=new Le;if(n.BitRateAdapter){var s=t.options.userSelectDefinition||t.player&&t.player.config.userSelectDefinition||null,c=q.getSelectorList(i,e.duration),u=n.BitRateAdapter.getSuitableBitrate(c,s);t.logger("[xgplayer-encrypt] preloader getSuitableBitrate",u,"userSelectDefinition",s),console.log("[xgplayer-encrypt] preloader getSuitableBitrate",u,"userSelectDefinition",s),u&&(r.bandwidth=1e3*parseInt(u.bitrate/1e3,10))}var l=o.mediaList.video||[],d=o.mediaList.audio||[],f=e.vid;if("segment_template"===o.dashType)t._calRequests(o,r,a,e,!0);else{var h=[];if(d&&d.length>0){var p=t.makeInitBaseSegemntRequest(o,e.duration,"audio",0,void 0,f);h.push(p)}if(l&&l.length>0){var v=t._calVideoItemIdx(l,r.bandwidth)||0,g=l[v].definition,y=t.makeInitBaseSegemntRequest(o,e.duration,"video",v,g,f);h.push(y)}Promise.all(h).then((function(){t._calRequests(o,r,a,e)})).catch((function(e){console.warn&&console.warn("catch no reqeuset",e),a.resolve([])}))}return a}};return o.once("ready",(function(){s.type=o.type,s.mediaInfos.dynamic_video_list=o.mediaList.video||[],s.mediaInfos.dynamic_audio_list=o.mediaList.audio||[],r.resolve(s)})),r}},{key:"_calRequests",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=[],o=t.bandwidth,s=t.time,c=t.executeTime,u=e.mediaList.video||[],l=e.mediaList.audio||[],d=r.vid;if(l&&l.length>0){var f=this._calUrls(l[0],s,c,"audio",d,null,i);a=a.concat(f)}if(u&&u.length>0){var h=this._calVideoItemIdx(u,o)||0,p=u[h],v=this._calUrls(p,s,c,"video",d,p.definition,i);a=a.concat(v)}0===a.length&&console.warn&&console.warn("no reqeusts from preloader"),n.resolve(a)}},{key:"_calUrls",value:function(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=[];if(e){var c=e;o&&s.push({url:c.initSegment,range:c.initSegmentRange||[],extData:{cacheKey:q.generateUniqueKey({vid:i,mediaType:r,codecType:c.codec_type,format:"dash"}),vid:i,format:"dash",isInitSegment:!0,mediaType:r,useUrlRange:q.validateUrlRange(this.options.url_range_domains,c.initSegment)}});var u=e.mediaSegments,l=this._calStartEnd(u,t,n),d=u[l];s.push({url:d.url,range:d.range||[],extData:{cacheKey:q.generateUniqueKey({vid:i,mediaType:r,codecType:c.codec_type,format:"dash",start:d.start,end:d.end,definition:a}),vid:i,format:"dash",isInitSegment:!1,mediaType:r,useUrlRange:q.validateUrlRange(this.options.url_range_domains,d.url)}})}return s}},{key:"_calStartEnd",value:function(e,t,n){for(var r=-1,i=0;i<e.length;i++){var a=e[i],o=t||0;if(a.start>=o&&o<a.end){r=i;break}}return-1===r&&(r=0),r}},{key:"_calVideoItemIdx",value:function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r&&r.bandwidth===t)return n}return null}},{key:"getData",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0,a=this;return a.currentTask=null,new Promise((function(o,s){var c=new ce(e,n,(function(e,t){a.currentTask=null,o({res:e,headers:t})}),r.isInitSegment?-1:t.options.timeout,r,!0,t.preloadManager);c.once("CANCEL",(function(e){a.currentTask=null,s(e)}));c.once("PRELOAD_CACHED",(function(e){a.emitPreloadCached(e)})),c.on("TASK_PREOGRESS",(function(e){i&&i(e)}))}))}},{key:"makeInitBaseSegemntRequest",value:function(e,t,n,r,i,a){var o=this,s=new Le,c=e.mediaList[n][r],u=[c.initSegmentRange[0],c.sidxRange[1]],l=c.initSegment,d={mediaType:n,vid:a,definition:i,useUrlRange:q.validateUrlRange(this.options.url_range_domains,l),timeout:-1,isInitSegment:!0};return this.getData(l,u,d,(function(e){var t=Object.assign({},e,{vid:a,mediaType:n,isInitSegment:!0,format:"dash"});o._preloadManager.onCacheSegment(t)}),-1).then((function(i){var a=i.res;a?o.handleInitData(a,u,c.sidxRange).then((function(i){i.sidxSegmentRes&&e.getSidx(i.sidxSegmentRes,n,r,t),q.validateFragment(i.initSegmentRes,u)?s.resolve(i.initSegmentRes):(s.reject({mediaType:n,index:r,initSegmentRange:u,url:l,rejected:!0}),o.logger("initSegmentRequest \u5206\u7247\u6821\u9a8c\u5931\u8d25"))})).catch((function(e){s.reject({mediaType:n,index:r,initSegmentRange:u,url:l,rejected:!0}),o.logger("initSegmentRequest error",e)})):s.reject({mediaType:n,index:r,initSegmentRange:u,url:l,rejected:!0})})).catch((function(e){s.reject({mediaType:n,index:r,initSegmentRange:u,url:l,rejected:!0}),o.logger("initSegmentRequest error",e)})),s}},{key:"handleInitData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=new Le,i=e instanceof ArrayBuffer;if(i){var a=0===t.length?e:e.slice(t[0],t[1]+1),o=null===n?null:e.slice(n[0],n[1]+1);r.resolve({initSegmentRes:a,sidxSegmentRes:o})}else;return r}},{key:"emitPreloadCached",value:function(e){this.logger("cachedLog",e),this.player&&this.player.emit("log",{type:"onetemp",action:"append",data:{preload_cached:e+"|"}})}},{key:"addPreloader",value:function(e){e.data&&(e.data.vtype||(e.data.vtype=De.DASH),this.addDashPreloader(e))}},{key:"addPreloaderList",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;t<e.length;t++)this.addPreloader(e[t])}}],[{key:"BitRateAdapter",get:function(){return xt},set:function(e){xt=e}}]),n}($e);Pt.encryptUtils=r;n("366b089b5a8649d3c218");var Dt=n("afa39434f067edd8798c"),Lt=n("34c0f6a91c0bdd59090c"),Mt=(n("4ea9a2360f1f9dff21ee"),n("e27353d76bdab012b9c1"),n("645393b5322020a2f522"),n("84e0a0c8a6be71b33470"),n("e502d00ea6e2f0b47ea0"),n("765c3fe4871c97a98a7a"),n("b9c487edb4e7fbfb9158"),n("6a793917dc2021a2fd0a"),n("b08a684f42886b58505a"),n("154bae253424b7e51c97"),n("25d13e189ad5b9bfa51d"),n("fe0fdc51a50afd99ddb0"),n("ae035431439108a31577"),"video"),Nt="audio",Ut="MS_OP_FAIL",Bt="MSE_DESTROY",Ft=function(){function e(t,n){o()(this,e),this.mediaSource=new window.MediaSource(t),this.url=window.URL.createObjectURL(this.mediaSource),this.queue=[],this._hasDestroyed=!1,this._sourceOpenPromise=new Le,this._onSourceOpen=this._onSourceOpen.bind(this),this._onSourceBufferError=this._onSourceBufferError.bind(this),this._onSourceBufferUpdateEnd=this._onSourceBufferUpdateEnd.bind(this),this.mediaSource.addEventListener("sourceopen",this._onSourceOpen),this.opQueues={},this.sourceBuffers={},this.updateHanders={},this.errorHandlers={},this.logger=n||function(){},this._sourceOpenDonePromise=new Le}return c()(e,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m()({},Mt,{mimeType:"video/mp4",codec:'video/mp4; codecs="avc1.64001E, mp4a.40.5"'});this.contentTypes=t;var n=Object.keys(this.contentTypes);return this._sourceOpenPromise.then((function(){for(var t=0;t<n.length;t++)try{!function(){var r=n[t],i=e.contentTypes[r].codec,a=e.mediaSource.addSourceBuffer(i),o=function(){return e._onSourceBufferError(r)};a.addEventListener("error",o);var s=function(){return e._onSourceBufferUpdateEnd(r)};a.addEventListener("updateend",s),e.updateHanders={},e.sourceBuffers[r]=a,e.opQueues[r]=[],e.updateHanders[r]=s,e.errorHandlers[r]=o}()}catch(r){e._sourceOpenDonePromise.reject(r)}e.logger("[debug mse] mse init ready, readyState",e.mediaSource.readyState),e._sourceOpenDonePromise.resolve()})),this._sourceOpenDonePromise}},{key:"sourceOpenPromise",value:function(){return this._sourceOpenPromise}},{key:"_onSourceOpen",value:function(){this.mediaSource.removeEventListener("sourceopen",this._onSourceOpen),this._sourceOpenPromise.resolve()}},{key:"_onSourceBufferError",value:function(e){this._hasDestroyed||(this.logger("[debug mse] sourceBuffer error, contentType",e,"readyState",this.mediaSource.readyState),this.opQueues[e][0].p.reject(new Error(Ut)))}},{key:"_onSourceBufferUpdateEnd",value:function(e){if(!this._hasDestroyed){var t=this.opQueues[e][0];t&&(t.p.resolve(),this.pop(e))}}},{key:"state",get:function(){return this.mediaSource.readyState}},{key:"duration",get:function(){return this.mediaSource.duration}},{key:"setDuration",value:function(e){var t=this;return this.mediaSource.duration>e?Promise.resolve():this.enqueueBlockOp((function(){t.ended()?t.logger("[debug mse] setDuration ended"):(t.logger("[debug mse] setDuration"),t.mediaSource.duration=e)}),"setDuration")}},{key:"appendBuffer",value:function(e,t){var n=this;return this.enqueueOp(e,(function(){return n._append(e,t)}),"appendBuffer")}},{key:"_append",value:function(e,t){this.logger("[real append], len = ",t.byteLength),this.sourceBuffers[e].appendBuffer(t)}},{key:"enqueueOp",value:function(e,t,n){var r=this;if(this._hasDestroyed)return Promise.reject(new Error(Bt)).catch((function(){}));var i={handler:t,p:new Le,name:n};return this._sourceOpenDonePromise.then((function(){if(r._hasDestroyed)return i.p.reject(new Error(Bt)).catch((function(){}));r.opQueues[e]||(r.opQueues[e]=[]),r.opQueues[e].push(i),1===r.opQueues[e].length&&r.handleOp(e)})),i.p}},{key:"enqueueBlockOp",value:function(e,t){var n=this;if(this._hasDestroyed)return Promise.reject(new Error(Bt));var r=new Le;return this._sourceOpenDonePromise.then((function(){if(n._hasDestroyed)return r.reject(new Error(Bt));for(var i=[],a=Object.keys(n.contentTypes),o=function(e){var r=a[e],o=new Le,s={handler:function(){return o.resolve()},p:o,name:t};n.opQueues[r]||(n.opQueues[r]=[]),n.opQueues[r].push(s),i.push(o),1===n.opQueues[r].length&&s.handler()},s=0;s<a.length;s++)o(s);Promise.all(i).then((function(){try{e()}catch(o){console.log(o)}finally{for(var t=0;t<a.length;t++){var i=a[t];n.pop(i)}r.resolve()}})).catch((function(e){console.log("waiting cath",e)}))})),r}},{key:"handleOp",value:function(e){if(!this._hasDestroyed){var t=this.opQueues[e][0];if(t)try{t.handler()}catch(n){t.p.reject(new Error(n.name)),this.pop(e)}}}},{key:"pop",value:function(e){this._hasDestroyed||(this.opQueues[e].shift(),this.handleOp(e))}},{key:"clearEnqueAndRemoveBuffer",value:function(e,t,n){n<=t?this._onSourceBufferUpdateEnd(e):(this.opQueues[e]=this.opQueues[e].slice(0,1),this.removeBuffer(e,t,n))}},{key:"removeBuffer",value:function(e,t,n){var r=this;return this.enqueueOp(e,(function(){return r._remove(e,t,n)}),"removeBuffer")}},{key:"_remove",value:function(e,t,n){n<=t?this._onSourceBufferUpdateEnd(e):this.sourceBuffers[e].remove(t,n)}},{key:"endOfStream",value:function(){var e=this;return this.enqueueBlockOp((function(){e.ended()||e._hasDestroyed||e.mediaSource.endOfStream()}),"endOfStream")}},{key:"ended",value:function(){return!this.mediaSource||"ended"===this.mediaSource.readyState}},{key:"isMediaSourceOpen",value:function(){return!!this.mediaSource&&"open"===this.mediaSource.readyState}},{key:"abort",value:function(e){var t=this;return this.isMediaSourceOpen()?this.enqueueOp(e,(function(){t.sourceBuffers[e].abort(),t._onSourceBufferUpdateEnd(e)}),"abort"):Promise.resolve()}},{key:"reuse",value:function(e,t){for(var n=Object.keys(this.contentTypes),r=0;r<n.length;r++){var i=n[r];this.removeBuffer(i,e,t)}}},{key:"_forceAbort",value:function(){try{for(var e=Object.keys(this.contentTypes),t=0;t<e.length;t++){var n=e[t];this.sourceBuffers[n].abort()}}catch(r){console.log("forceAbort error")}}},{key:"destroy",value:function(){if(this.logger("[debug mse] destroy execute"),!this._hasDestroyed){this._forceAbort(),this._hasDestroyed=!0,window.URL.revokeObjectURL(this.url),this.mediaSource&&(this.mediaSource.removeEventListener("sourceclose",this._onMediaSourceClose),this.mediaSource.removeEventListener("sourceopen",this._onSourceOpen));for(var e=Object.keys(this.contentTypes),t=0;t<e.length;t++){var n=e[t],r=this.sourceBuffers[n];if(r){var i=this.errorHandlers[n];r.removeEventListener("error",i);var a=this.updateHanders[n];r.removeEventListener("updateend",a)}}this.opQueues={},this.sourceBuffers={}}}},{key:"buffered",value:function(e){return this.sourceBuffers[e]&&this.sourceBuffers[e].buffered}},{key:"sourceBuffer",value:function(e){return this.sourceBuffers[e]}},{key:"removeSourceBuffer",value:function(e){var t=this.sourceBuffer(e);if(t){this.mediaSource.removeSourceBuffer(t);var n=this.errorHandlers[e];t.removeEventListener("error",n);var r=this.updateHanders[e];t.removeEventListener("updateend",r),delete this.errorHandlers[e],delete this.sourceBuffers[e],delete this.updateHanders[e]}}},{key:"setTimeoffset",value:function(e,t){var n=this;return this.enqueueOp(e,(function(){t<0&&(t+=.001),n.sourceBuffers[e].timestampOffset=t,n._onSourceBufferUpdateEnd(e)}),"setTimeoffset")}}],[{key:"isSupported",value:function(e){return window.MediaSource&&window.MediaSource.isTypeSupported(e)}}]),e}(),jt=(n("40593390d2a56c9000c3"),n("c689672aab188aed17bd"),function(){function e(t){o()(this,e),this.drm=t,this.KEYSYSTEM_TYPE="",this.keys={},this.drm.clearKeys?(this.KEYSYSTEM_TYPE="org.w3.clearkey",this.keys=this.drm.clearKeys):this.drm.widevine?(this.KEYSYSTEM_TYPE="com.widevine.alpha",this.keys=this.drm.widevine):this.drm.playready&&(this.KEYSYSTEM_TYPE="com.microsoft.playready",this.keys=this.drm.playready),this.options=[],this.ensurePromise=void 0,this.licenseStep=0,w()(this)}return c()(e,[{key:"bail",value:function(e){}},{key:"getLicenseRequestFromMessage",value:function(e){if("com.microsoft.playready"===this.KEYSYSTEM_TYPE){var t=null,n=new DOMParser,r=new Uint16Array(e),i=String.fromCharCode.apply(null,r),a=n.parseFromString(i,"application/xml");if(!a.getElementsByTagName("PlayReadyKeyMessage")[0])return e;var o=a.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return o&&(t=window.atob(o)),t}return new Uint8Array(e)}},{key:"parseServerResponse",value:function(e){var t="http://schemas.xmlsoap.org/soap/envelope/";if(window.DOMParser){var n=this.uintToString(e),r=(new window.DOMParser).parseFromString(n,"text/xml"),i=r?r.getElementsByTagNameNS(t,"Envelope")[0]:null,a=i?i.getElementsByTagNameNS(t,"Body")[0]:null;if(a?a.getElementsByTagNameNS(t,"Fault")[0]:null)return null}return e}},{key:"uintToString",value:function(e){var t=String.fromCharCode.apply(null,new Uint8Array(e));return decodeURIComponent(escape(t))}},{key:"licenseRequestReady",value:function(e){var t=this,n=new XMLHttpRequest;n.open("GET",this.keys.serverURL),n.onreadystatechange=function(){if(4===n.readyState){var r=e.message,i=n.response;"com.microsoft.playready"===t.KEYSYSTEM_TYPE&&(i=JSON.parse(n.response),i="".concat(i.licenseAcquisitionUrl,"?ExpressPlayToken=").concat(i.token));var a=new XMLHttpRequest;a.keySession=e.target,a.responseType="arraybuffer",a.withCredentials=!1,a.open("POST",String(i)),"com.microsoft.playready"===t.KEYSYSTEM_TYPE&&a.setRequestHeader("Content-type","text/xml"),a.onreadystatechange=function(){if(4===a.readyState){if(200!==a.status)return void t.emit("CDM_LICENSE_ERROR",{data:t.licenseStep});var e;t.emit("CDM_LICENSE_SUCCESS",{data:t.licenseStep}),t.licenseStep++,e="com.microsoft.playready"===t.KEYSYSTEM_TYPE?t.parseServerResponse(a.response):new Uint8Array(a.response),a.keySession.update(e).catch(console.error.bind(console,"update() failed"))}},a.send(t.getLicenseRequestFromMessage(r))}},n.send()}},{key:"UpdateSessionFunc",value:function(e){var t=this;return function(n){var r=[],i=[];Object.keys(e).forEach((function(t){var n=e[t],a=q.fromHex(t),o=q.fromHex(n),s={kty:"oct",kid:q.toBase64(a,!1),k:q.toBase64(o,!1)};r.push(s),i.push(s.kid)}));var a={keys:r},o=JSON.stringify(a);n.target.update(q.StringToArrayBuffer(o)).then((function(){}),t.bail(" MediaKeySession update failed"))}}},{key:"KeysChange",value:function(e){}},{key:"EnsureMediaKeysCreated",value:function(e,t){return this.ensurePromise||(this.ensurePromise=navigator.requestMediaKeySystemAccess(t,[{initDataTypes:["keyids","webm"],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"'}],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42c01e"'}]}]).then((function(e){return e.createMediaKeys()}),this.bail(" Failed to request key system access.")).then((function(t){return e.setMediaKeys(t)}),this.bail(" failed to create MediaKeys object"))),this.ensurePromise}},{key:"SetupEME",value:function(e,t){var n=this,r=this;e.sessions=[];q.on(this,"encrypted",(function(t){var i,a,o;"org.w3.clearkey"===n.KEYSYSTEM_TYPE?(i="keyids",a=JSON.stringify({kids:["0123456789abcdef0123456789abcdef"]}),o=new Uint8Array(q.toUTF8(a))):"com.widevine.alpha"===n.KEYSYSTEM_TYPE?(i="cenc",o=t&&new Uint8Array(t.initData)||new Uint8Array([0,0,0,67,112,115,115,104,0,0,0,0,237,239,139,169,121,214,74,206,163,200,39,220,213,29,33,237,0,0,0,35,8,1,18,16,51,51,51,51,51,51,51,51,51,51,51,51,0,0,0,0,26,10,105,110,116,101,114,116,114,117,115,116,34,1,42])):"com.microsoft.playready"===n.KEYSYSTEM_TYPE&&(i="cenc",o=t&&new Uint8Array(t.initData)||new Uint8Array([0,0,2,38,112,115,115,104,0,0,0,0,154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149,0,0,2,6,6,2,0,0,1,0,1,0,252,1,60,0,87,0,82,0,77,0,72,0,69,0,65,0,68,0,69,0,82,0,32,0,120,0,109,0,108,0,110,0,115,0,61,0,34,0,104,0,116,0,116,0,112,0,58,0,47,0,47,0,115,0,99,0,104,0,101,0,109,0,97,0,115,0,46,0,109,0,105,0,99,0,114,0,111,0,115,0,111,0,102,0,116,0,46,0,99,0,111,0,109,0,47,0,68,0,82,0,77,0,47,0,50,0,48,0,48,0,55,0,47,0,48,0,51,0,47,0,80,0,108,0,97,0,121,0,82,0,101,0,97,0,100,0,121,0,72,0,101,0,97,0,100,0,101,0,114,0,34,0,32,0,118,0,101,0,114,0,115,0,105,0,111,0,110,0,61,0,34,0,52,0,46,0,48,0,46,0,48,0,46,0,48,0,34,0,62,0,60,0,68,0,65,0,84,0,65,0,62,0,60,0,80,0,82,0,79,0,84,0,69,0,67,0,84,0,73,0,78,0,70,0,79,0,62,0,60,0,75,0,69,0,89,0,76,0,69,0,78,0,62,0,49,0,54,0,60,0,47,0,75,0,69,0,89,0,76,0,69,0,78,0,62,0,60,0,65,0,76,0,71,0,73,0,68,0,62,0,65,0,69,0,83,0,67,0,84,0,82,0,60,0,47,0,65,0,76,0,71,0,73,0,68,0,62,0,60,0,47,0,80,0,82,0,79,0,84,0,69,0,67,0,84,0,73,0,78,0,70,0,79,0,62,0,60,0,75,0,73,0,68,0,62,0,77,0,122,0,77,0,122,0,77,0,122,0,77,0,122,0,77,0,122,0,77,0,122,0,77,0,122,0,77,0,122,0,65,0,65,0,65,0,65,0,65,0,65,0,61,0,61,0,60,0,47,0,75,0,73,0,68,0,62,0,60,0,67,0,72,0,69,0,67,0,75,0,83,0,85,0,77,0,62,0,65,0,49,0,53,0,66,0,89,0,87,0,68,0,52,0,113,0,115,0,73,0,61,0,60,0,47,0,67,0,72,0,69,0,67,0,75,0,83,0,85,0,77,0,62,0,60,0,47,0,68,0,65,0,84,0,65,0,62,0,60,0,47,0,87,0,82,0,77,0,72,0,69,0,65,0,68,0,69,0,82,0,62,0])),r.EnsureMediaKeysCreated(e,r.KEYSYSTEM_TYPE).then((function(){var t=e.mediaKeys.createSession();return e.sessions.push(t),"org.w3.clearkey"===r.KEYSYSTEM_TYPE?t.addEventListener("message",r.UpdateSessionFunc(r.keys)):("com.widevine.alpha"===r.KEYSYSTEM_TYPE||"com.microsoft.playready"===r.KEYSYSTEM_TYPE)&&t.addEventListener("message",r.licenseRequestReady.bind(r)),t.addEventListener("keystatuseschange",r.KeysChange),t.generateRequest(i,o.buffer)}),r.bail(" failed to ensure MediaKeys on HTMLMediaElement")).then((function(){}),r.bail(" Failed to generate request."))}),"destroy")}},{key:"destroy",value:function(){T()(this)}}]),e}());function Ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wt=function(){function e(t,n,r){o()(this,e),w()(this),this._pluginInst=n,this.__dash__=r;var i=n.config,a=n.player,s=n._kernal;this.kernal=s,this.mse=void 0,this.config=i,this.player=a,this.url=t,this.inited=!1,this.loadingTasks=[],this.keyValue=void 0,this.dynamic_video=this.config.dashOpts.dynamic_video,this.useEME=this.config.useEME,this.intertrustServerURL=this.config.intertrustServerURL,this.taskErrorList=[],this.defaultDefinition=this.config.defaultDefinition,this.selectedIdx=0,this.getLicenseUrl=this.config.getLicenseUrl,this.egleIds={},this.first_segment_request={video:{request:!1,ext:{fromCache:!1}},audio:{request:!1,ext:{fromCache:!1}}},this.segment_request={video:[],audio:[]}}return c()(e,[{key:"getData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this;return new Promise((function(i,a){var o=new ce(e,t,(function(e,t,n,r,a){i({res:e,headers:t,status:n,readyState:r,fromCache:a})}),n.timeout||r.config.timeout,n,!1,r._pluginInst.preloadManager);q.once(o,"error",(function(e){403===e.status&&a({status:403})}));q.once(o,"progress_event",(function(e){r.player&&r.player.emit("progress_event",e)}));q.once(o,"PRELOAD_HIT",(function(e){r.emitPreloadHit(e)}))}))}},{key:"playWithKeyValue",value:function(e,t){var n,r=this;n=r.__dash__.awManager.openBox(t);var i=new Le;return new Promise((function(e,t){var i=q.getCookieValue("volcvui");r.config.useUnionInfoDRM&&q.checkUnionInfoExpired(r.player.unionID,i,r.config.keyTokenExpiredDuration)?r.__dash__.awManager.transformWithUnionInfo(n,i).then((function(t){e(t)})):e(n)})).then((function(t){t||r.player.emit("DRM_ERROR",new C(C.PARSE,C.BOX_KEY_ERROR)),r.config.dashOpts.drm={clearKeys:m()({},e,t)},r.keyValue=t,(r.__dash__.dashVideoEncrypted||r.__dash__.dashAudioEncrypted)&&!1===r.useEME&&r.__dash__.crypto?function(){var e=new Le,t=window.crypto||window.msCrypto;if(!t)return e.resolve(!1),e;var n=new Uint8Array(16),r=new Uint8Array([1]),i=null;try{t.subtle.generateKey({name:"AES-CTR",length:256},!1,["encrypt","decrypt"]).then((function(e){return i=e,t.subtle.encrypt({name:"AES-CTR",counter:n,length:128},e,r)})).then((function(e){return t.subtle.decrypt({name:"AES-CTR",counter:n,length:128},i,e)})).then((function(t){var n=new Uint8Array(t);e.resolve(n[0]===r[0])})).catch((function(){e.resolve(!1)}))}catch(a){e.resolve(!1)}return e}().then((function(e){ie.encrypt("importKeys useRaw",e),r.useRawCrypto=e,e?r.__dash__.crypto.importKeys(r.keyValue).then(i.resolve):i.resolve()})):(ie.log("no importKeys"),i.resolve())})),i}},{key:"_getCryptInfos",value:function(){var e="",t="";if(this.dynamic_video.dynamic_video_list&&this.dynamic_video.dynamic_video_list.length>0){for(var n=0;n<this.dynamic_video.dynamic_video_list.length;n++)if(this.dynamic_video.dynamic_video_list[n].kid){e=this.dynamic_video.dynamic_video_list[n].kid,t=this.dynamic_video.dynamic_video_list[n].spade_a;break}}else if(this.dynamic_video.dynamic_audio_list)for(var r=0;r<this.dynamic_video.dynamic_audio_list.length;r++)if(this.dynamic_video.dynamic_audio_list[r].kid){e=this.dynamic_video.dynamic_audio_list[r].kid,t=this.dynamic_video.dynamic_audio_list[r].spade_a;break}return{keyId:e,spade_a:t}}},{key:"init",value:function(e){this._initStartMs=Date.now(),this.kernal.setNodeTime("initdash","newplayer_start");var t=this._getCryptInfos(),n=t.keyId,r=t.spade_a,i=this;return i.config.dashOpts&&i.config.dashOpts.drm&&!i.useEME&&!i.keyValue&&(i.keyValue=Object.values(i.config.dashOpts.drm.clearKeys)[0],ie.log("initDash kv")),new Promise((function(t,a){if(n)if(i.player.emit("drmTypeChange",1),i.intertrustServerURL){var o=window.navigator.userAgent.toLocaleLowerCase().indexOf("chrome")>-1?"widevine":"playready";i.config.dashOpts.drm=m()({},o,{serverURL:i.intertrustServerURL+n}),i.initDash(e,t,a)}else if(i.config.usePlaySpade)setTimeout((function(){i.playWithKeyValue(n,r).then((function(){ie.encrypt("playWithKeyValue resolve"),i.initDash(e,t,a)}))}),0);else if(i.config.keyToken&&i.config.playDomain){var s=i.config.playDomain,c=q.isBase64(i.config.keyToken)?window.atob(i.config.keyToken):i.config.keyToken;new it({type:"json",method:"GET",url:"//".concat(s,"?").concat(c,"&DrmType=").concat(i.config.useUnionInfoDRM?"webdevice":"22","&PlayAuthIds=").concat(n,"&ssl=true")}).then((function(o){var u=o.response;u&&u.Result&&u.Result.PlayAuthInfoList?(r=u.Result.PlayAuthInfoList[0].PlayAuthContent,i.playWithKeyValue(n,r).then((function(){ie.encrypt("playWithKeyValue resolve"),i.initDash(e,t,a)}))):(i.player.emit("DRM_ERROR",new C(C.PARSE,C.LIC_PARSE_ERROR,{url:i.getLicenseUrl,data:{host:s,keyToken:c}})),a({}))})).catch((function(e){void 0!==e.status&&i.player.emit("DRM_ERROR",new C(C.LIC_NETWORK,C.NETEORK_ERROR_CODES[e&&e.status?e.status:"timeout"],{url:i.getLicenseUrl,data:{host:s,keyToken:c}})),a(e)}))}else{var u={drm_type:"22",license_request:[{vid:i.config.vid||"",kids:[].concat(n)}]};new it({type:"json",method:"POST",url:i.getLicenseUrl,data:u}).then((function(o){var s=o.response;s&&s.play_licenses?(r=s.play_licenses[i.config.vid][n],i.playWithKeyValue(n,r).then((function(){ie.encrypt("playWithKeyValue resolve"),i.initDash(e,t,a)}))):(i.player.emit("DRM_ERROR",new C(C.PARSE,C.LIC_PARSE_ERROR,{url:i.getLicenseUrl,data:u})),a({error:"DRM_ERROR"}))})).catch((function(e){void 0!==e.status&&i.player.emit("DRM_ERROR",new C(C.LIC_NETWORK,C.NETEORK_ERROR_CODES[e&&e.status?e.status:"timeout"],{url:i.getLicenseUrl,data:u})),a(e)}))}else i.initDash(e,t,a)}))}},{key:"_handleIncompleSegment",value:function(e,t){e.incomplete=!0,this.__dash__&&(this.__dash__._minDuration=Math.min(t,this.__dash__._minDuration))}},{key:"initDash",value:function(e,t,n){var r,i,a,o=this;this._pluginInst.info({msg:"dash init",data:"dash init",startMs:this._initStartMs,profile:!0}),this.kernal.setNodeTime("initdashdone","initdash");var s=this;s.config.dashOpts&&s.config.dashOpts.drm&&s.useEME&&(s.eme=new jt(s.config.dashOpts.drm),s.eme.on("CDM_LICENSE_ERROR",(function(e){o.player&&o.player.emit("log",Vt({type:"oneevent",end_type:"CDM_LICENSE_ERROR",ua:navigator.userAgent},e)),o.player.errorHandler(new C(C.LIC_NETWORK,C.CDM_LICENSE_ERROR,{line:1021,handle:"",msg:"CDM license reject"}))})),s.eme.on("CDM_LICENSE_SUCCESS",(function(e){o.player&&o.player.emit("log",Vt({type:"oneevent",end_type:"CDM_LICENSE_SUCCESS",ua:navigator.userAgent},e))}))),this.kernal.setNodeTime("initmpd");var c=new kt(e,s.config.dashOpts,s);s.mpd=c;var u=Date.now();q.once(c,"ready",(function(){ie.log("mpd ready"),o.kernal.setNodeTime("initmpddone"),o._pluginInst.info({msg:"mpd ready",name:"mpd ready",startMs:u,profile:!0}),s.type=c.type,i=c.mediaList.video,a=c.mediaList.audio;var e=s.config?s.config.defaultDefinition:null,n=o._pluginInst.getPreloadStat(),l=!1;if(n.video){var d=Object.keys(n.video)[0],f=q.getDefinition(d);f&&(e=f,l=!0)}if(l&&o.player.config.userSelectDefinition&&o.config.focusUserDefinition&&e!==o.player.config.userSelectDefinition&&(l=!1),o._pluginInst.bitRateAdapter&&!l){var h=o.player?o.player.config.userSelectDefinition:null,p=q.getBitrateItem(s.config.dashOpts.dynamic_video,o._pluginInst.bitRateAdapter,s.config.duration,h);ie.log("[xgplayer-encrypt] onReady",s.config.vid,"item",p),p&&(e=p.definition)}ie.log("[xgplayer-encrypt] onReady",s.config.vid,"video definition",e);var v=!1;e&&i.forEach((function(t,n){t.definition===e&&(o.config.defaultDefinition=e,i.selectedIdx=n,v=!0)})),v||(i.selectedIdx=0),s.eme&&s.useEME&&s.eme.SetupEME(s.player.video),ie.segment(i),ie.segment(a);var g=Date.now();o.kernal.setNodeTime("initmse_sbopen"),r=new Ft(s.config&&s.config.mediaType,void 0);var y=!!(i.length>0&&i[i.selectedIdx])&&s.config&&!s.config.dashOpts.audioOnly,m=!!(a.length>0&&a[a.selectedIdx]),b=c.mediaList.audio,_=c.mediaList.video,k={};m&&(k[Nt]={mimeType:"audio/mp4",codec:'audio/mp4; codecs="'.concat(b[b.selectedIdx].codecs,'"')}),y&&(k[Mt]={mimeType:"video/mp4",codec:'video/mp4; codecs="'.concat(_[_.selectedIdx].codecs,'"')}),r.init(k).then((function(){o.kernal.setNodeTime("initmse_sbopendone"),o._pluginInst.info({msg:"mse init success",name:"mseInit",startMs:g,profile:!0});var e=[];s.config&&!s.config.dashOpts.audioOnly&&i&&i.length>0&&i[i.selectedIdx]&&i[i.selectedIdx].initSegment&&e.push(s.__dash__._makeInitSegemntRequestWithRetry("video",i.selectedIdx,!0)),a[a.selectedIdx]&&a[a.selectedIdx].initSegment&&e.push(s.__dash__._makeInitSegemntRequestWithRetry("audio",a.selectedIdx,!0)),Promise.all(e).then((function(e){var t,n,r;t=e,n=-1,r=[],(s.config&&s.config.dashOpts.audioOnly?["audio"]:["video","audio"]).forEach((function(e){var i=c.mediaList[e];if(!(i.length<1)&&i[i.selectedIdx]&&i[i.selectedIdx].mimeType){n++;var a=t[n];if(!a.initSegmentRes)return ie.abr("initSegment null, task request error, stop"),void s.emit("error",new C(C.PARSE,C.SEG_PARSE_ERROR,{line:180,handle:"[DASH] addBuffer",msg:"wrapperData.initSegmentRes is null"},s.player));r.push(s.__dash__._appendInitSegment(e,a,i.selectedIdx))}})),Promise.all(r).then((function(){o.kernal.setNodeTime("metaready_initsegend"),s.inited=!0,(y&&(i[i.selectedIdx].encrypted||i[i.selectedIdx].kid)||m&&(a[a.selectedIdx].encrypted||a[a.selectedIdx].kid))&&s.eme&&s.eme.emit("encrypted"),"vod"===s.type&&(s.seek(0,F),s.emit("start_play"))})).catch((function(e){s.player.errorHandler(new C(C.MSE,C.MSE_APPEND_ERROR,{line:329,msg:"mse append error ".concat(e.message?e.message:e)}))}))})).catch((function(e){s.player.errorHandler(e)}))})).catch((function(e){s.player.errorHandler(new C(C.MSE,C.MSE_MEDIA_TYPES_NOT_SUPPORTED,{line:329,msg:"mse init fail"}))})),s.mse=r,t(r)}))}},{key:"seek",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U,n=this;this.mpd.seek(e,t).then((function(e){var t=n.mpd.mediaList.video,r=n.mpd.mediaList.audio,i=!!(t.length>0&&t[t.selectedIdx]),a=!!(r.length>0&&r[r.selectedIdx]);i&&a&&2*t[t.selectedIdx].mediaDuration<r[r.selectedIdx].mediaDuration?n.emit("error",new C(C.PARSE,C.DUR_PARSE_ERROR,{line:261,handle:"[DASH] seek",msg:"the video.mediaDuration not match audio.mediaDuration"},n.player)):(ie.log("seekResult: ",e),(n.config.dashOpts&&n.config.dashOpts.audioOnly?["audio"]:["video","audio"]).forEach((function(t){e[t]&&e[t].length>0&&(e[t].length<=1||e[t].some((function(e){return e.downloaded===N})))&&e[t].every((function(e){return e.downloaded===N||(e.bufferInCache?(ie.log("append\u7f13\u5b58buffer"),ie.log("append ".concat(t," ").concat(e.start," ").concat(e.end)),n.appendSegment(t,e.bufferInCache.res,e,e.bufferInCache.headers||{},e.bufferInCache.extData)):n.makeSegmentRequestWithRetry(t,e).then((function(r){var i=r.res,a=r.headers,o=r.extData;n.updateItemState(e,!0),ie.log("append ".concat(t," ").concat(e.start," ").concat(e.end)),n.appendSegment(t,i,e,a||{},o)}))),!0}))})))}))}},{key:"makeSegmentRequestWithRetry",value:function(e,t){var n=this,r=new Le;return n.makeSegmentRequest(e,t).then((function(e){var t=e.res,n=e.headers,i=e.extData;r.resolve({res:t,headers:n,extData:i})})).catch((function(e){n.updateItemState(t),console.log("err",e)})),r}},{key:"makeSegmentRequest",value:function(e,t){var n=this,r=new Le;void 0===t.range&&(t.range=[]);var i=this.first_segment_request[e],a=!i.request;a&&(this.first_segment_request[e].request=!0);var o=this.segment_request[e];"video"===e&&ie.network("http get video start: ".concat(t.start,", end: ").concat(t.end," ,range: ").concat(t.range));var s=!1;n.player&&n.__dash__._checkUrlRange(t.url);var c={limitSizeM:1/0,segment_resolution:"",isVideo:"video"===e,ratio:n.config.segmentRatio||7.5,vid:n.config.vid,mediaType:e,start:t.start,end:t.end,useUrlRange:n.config.useUrlRange},u=1/0;if("video"===e){try{var l=n.mpd.mediaList[e],d=l[l.selectedIdx],f=d.definition||n.__dash__.bandwidth2item[d.bandwidth].definition;u=D[f.toLowerCase()],c.segment_resolution=f.toLowerCase(),c.definition=c.segment_resolution,c.bitrate=d.bandwidth}catch(p){u=1/0}c.limitSizeM=u}a&&(i.task=q.nowTime());var h=new ce(t.url,t.range,(function(u,l,d,f,p){var v=u instanceof ArrayBuffer;a&&(i.taskfinish=q.nowTime(),i.ext.fromCache=p,i.ext.mediaType=e,i.ext.definition=c.definition,v?i.ext.byteLength=u.byteLength:i.ext.error=u),v||o.push({mediaType:e,definition:t.definition,start:t.start}),t.realUrl=h.realUrl;var g=h.realUrl||t.url;if("Not Found"!==u){if("network"===u)return n.updateItemState(t),void n.emit("error",new C(C.NETWORK,C.NETWORK_DISCONNECT,{line:326,handle:"[DASH] task",url:g,range:t.range,headers:l},n.player));if("error"===u&&n.reportMonitorEvent("segment_request_expired",g,t.range[0],t.range[1],l,{status:d,segment_resolution:c.segment_resolution}),"timeout"===u||"error"===u)return n.removeTask(h),void n.updateItemState(t);if(n&&n.player&&n.__dash__&&n.__dash__.errorNeedTryRefresh&&(n.__dash__.errorNeedTryRefresh=!1),"repeat"===u)return s=!0,n.updateItemState(t),void ie.log(t.url,t.range,"repeat");n.removeTask(h),u instanceof ArrayBuffer?(r.resolve({res:u,headers:l,extData:{status:d,segment_resolution:c.segment_resolution}}),n.mseLog("task loadsucc",t,e)):(n.mseLog("task loaderror",t,e),n.updateItemState(t))}else{var y=n.mse.buffered(e);if(y&&y.length>0){var m=y.end(y.length-1);n._handleIncompleSegment(t,m)}}}),n.config.timeout,c,!1,n._pluginInst.preloadManager);q.once(h,"error",(function(e){if(e[status]&&x.includes(e[status])){var r=e.headers||{};r.segment_resolution=c.segment_resolution,n.reportMonitorEvent("segment_exception",t.realUrl||t.url,t.range[0],t.range[1],r)}}));q.once(h,"getHeaders",(function(r){if("video"===e&&n.player){var i=n.mpd.mediaList[e],a=i[i.selectedIdx].definition;n.__dash__.curReqVideoSegInfo={url:t.realUrl||t.url,start:t.start,end:t.end,range:t.range,definition:a,headers:r}}}));q.once(h,"progress_event",(function(e){try{e.vid=n.player.vid||n.config.vid,n.player.emit("progress_event",e)}catch(p){console.log(p)}}));q.once(h,"CANCEL",(function(){n.updateItemState(t),n.mseLog("task cancel",t,e)}));return q.once(h,"PRELOAD_HIT",(function(e){n.emitPreloadHit(e)})),s||n.loadingTasks.push(h),r}},{key:"reportMonitorEvent",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=this,s=o.getReportData(n,r,i,a),c=i.eagleid;if(c){if(!this.egleIds||this.egleIds[c])return;this.egleIds[c]=1}o.player&&o.player.emit("log",{type:"oneevent",end_type:e,cdnUrl:t,ext:s})}},{key:"getReportData",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=q.transformHeaders(n,P),a=Object.assign({},{start:e||-1,end:t||-1},i,r);return a}},{key:"reportMenuEvent",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=this._pluginInst.player,o=this.getReportData(t,n,r,i);o.url=e,a.emit("menusegment",o)}},{key:"appendSegment",value:function(e,t,n,r,i){var a=this;if(!this._hasDestroyed&&a.mpd){var o,s=i.status,c=i.segment_resolution,u=a.mpd.mediaList[e],l=u.selectedIdx,d=0,f=-1,h=n.realUrl||n.url;if(t instanceof ArrayBuffer)try{f=t.byteLength;var p=new Uint8Array(t,4,4),v=String.fromCharCode.apply(null,p);if("moof"!==v&&"styp"!==v&&(ie.media("segment content error",n,r),d=1,a.reportMonitorEvent("media_exception",h,n.range[0],n.range[1],r,{segment_size:t.byteLength,status:s,segment_resolution:c,box_type:v,step:d,segment_origin_size:f})),"ftyp"===v&&200===s&&2===n.range.length){d=2;var g=n.range[0];t=t.slice(g,n.range[1]+1)}}catch(y){a.reportMonitorEvent("media_exception",h,n.range[0],n.range[1],r,{segment_size:t.byteLength,status:s,segment_resolution:c,step:d,box_type:"error",segment_origin_size:f}),ie.media("segment content catch",n,y)}a.reportMenuEvent(h,n.range[0],n.range[1],r,{segment_size:t.byteLength,status:s,segment_resolution:c}),a.keyValue&&(a.__dash__.dashVideoEncrypted||a.__dash__.dashAudioEncrypted)&&!1===a.useEME&&a.__dash__.crypto?(o=performance.now(),a.mseLog("decryptBody start",n,e),a.__dash__.crypto.decryptBody(t,this.keyValue,"video"===e,a.useRawCrypto).then((function(t){var r=t.data,i=t.id,s=t.headerId;if(r){var c=performance.now();if(a.encryptTotalAll||(a.encryptTotalAll=0),a.encryptTotalAll+=c-o,ie.encrypt("encryptTotalAll:".concat(a.encryptTotalAll)),a.mseLog("decryptBody succ",n,e),"video"===e&&(a.encryptTotal||(a.encryptTotal=0),a.encryptTotal+=c-o,ie.encrypt("encryptVideo:".concat(a.encryptTotal)),i<s))return a.updateItemState(n),void console.warn("decrytbody discard, id:".concat(i,", headerId:").concat(s,", index:").concat(l,",  url:").concat(n.url,", start:").concat(n.start));a.doAppendSegment(e,u,r,n,l)}else a.updateItemState(n)}))):a.doAppendSegment(e,u,t,n,l)}}},{key:"doAppendSegment",value:function(e,t,n,r,i){var a=this,o={start:r.start,end:r.end,index:i,bandwidth:t[t.selectedIdx].bandwidth,fps:t[t.selectedIdx].fps,mediaType:e,sequence:r.idx};e!==Mt||-1===this.__dash__.curVideoInitSegmentIdx||i===this.__dash__.curVideoInitSegmentIdx?a.mse.appendBuffer(e,new Uint8Array(n)).then((function(){a.updateItemState(r,!0),"video"===e&&(a.player.emit("addVideoBufferEnd",o),a.__dash__.bufferingGoalScale+=.1,a.__dash__.bufferingGoalScale=Math.min(1,a.__dash__.bufferingGoalScale),1===a.__dash__.bufferingGoalScale&&(a.config.progressTimer=1e3));var t=a.mse,n=a.mpd;if(t&&o.start>=0){var i=t.buffered(e),s=i.end(i.length-1),c=n.mediaList[e][o.index].mediaSegments[o.sequence-1],u=c.segmentDuration;u-s%u>.1&&0!==s%u&&s<=o.end&&(a._handleIncompleSegment(c,s),ie.log("extData",o))}})).catch((function(e){if(console.log("err",e),a.updateItemState(r,!1),"QuotaExceededError"===e.message){ie.log("bufferingSacleChange",a.__dash__.bufferingGoalScale);var t=Math.round(100*a.__dash__.bufferingGoalScale);t>50?a.__dash__.bufferingGoalScale=.2:t>10?a.__dash__.bufferingGoalScale/=2:a.__dash__.bufferingGoalScale=.1,a.__dash__&&a.__dash__.clearBuffer(!0)}e&&e.message===Ut&&a.player.emit(new C(C.MSE,C.MSE_PARSE_ERROR,{line:800,handle:"[DASH] appendInit",msg:e.message}))})):ie.log("init \u4e0e segment\u4e0d\u5339\u914d")}},{key:"abortLoadingTasks",value:function(){try{this.loadingTasks.forEach((function(e){e.cancel()}))}catch(e){ie.log("type-video abort error",e)}ce.queue=[],this.loadingTasks=[],ie.log("preload abortLoadingTasks")}},{key:"removeTask",value:function(e){try{var t=this.loadingTasks.indexOf(e);t>-1&&this.loadingTasks.splice(t,1)}catch(n){ie.log("type-video remove error",n)}}},{key:"updateItemState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[];e.length>0?n=e:n.push(e),n.forEach((function(e){e.downloaded=t?N:L}))}},{key:"mseLog",value:function(e,t,n){ie.mse("type-".concat(n,"-start-").concat(t.start,"-end-").concat(t.end,"-").concat(e,",range:").concat(JSON.stringify(t.range)))}},{key:"emitPreloadHit",value:function(e){ie.preload("emit preloadhit",e),this.player&&this.player.emit("log",{type:"onetemp",action:"append",data:{preload_hit:e+"|"}})}},{key:"destroy",value:function(){this._hasDestroyed=!0}}]),e}(),Gt=n("2bc4fe74291883f7c727"),zt=n.n(Gt),Xt=function(){function e(){o()(this,e)}return c()(e,null,[{key:"install",value:function(){if(window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame,!window.requestAnimationFrame){var e=Date.now();window.requestAnimationFrame=function(t){var n=Date.now(),r=Math.max(16.7-(n-e),0),i=setTimeout(t,r);return e=n+r,i}}window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}}]),e}(),Yt=function(){function e(){o()(this,e),this.fps=0,this.isStoped=!0,this.ticks=[],this.isSupport=!0,this.maxFps=0,this.step=this._step.bind(this),this.rafId=null}return c()(e,[{key:"_step",value:function(e){var t=this.ticks;if(t.unshift(e),t.length>10){var n=t.pop();n&&(this.fps=Math.floor(1e4/(e-n)),this.updateFpsInfo())}this.isStoped||(this.rafId=window.requestAnimationFrame(this.step))}},{key:"updateFpsInfo",value:function(){this.fps>this.maxFps&&(this.maxFps=this.fps)}},{key:"start",value:function(){void 0!==window.requestAnimationFrame&&(this.isStoped=!1,this.rafId=window.requestAnimationFrame(this.step))}},{key:"stop",value:function(){window.cancelAnimationFrame(this.rafId),this.isStoped=!0}}],[{key:"install",value:function(){Xt.install()}}]),e}();function Kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var Zt="ABR_CHANGE_A",Qt="UPDATE_AUTO_DESC",qt="ABR_START_PROGRESS",Jt="MAX_BUFFER_CHANGE",$t=0,en=1,tn=-1,nn=0,rn=1,an={PLAYBACK_BITRATE:"avg_play_bitrate",DOWNLOAD_BITRATE:"avg_download_bitrate",DOWNLOAD_NETWORK_SPEED:"avg_download_speed",PREDICT_NETWORK_SPEED:"avg_predict_speed",BUFFER_LENGTH:"avg_buffer_length",QOE:"avg_qoe"},on=function(e){f()(n,e);var t=Kt(n);function n(e,r,i,a,s){var c,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{logger:function(){},openLog:!1};o()(this,n),(c=t.call(this,r,i,a,s,u)).player=e,c.timerId=0,c.isOpenAutoDefi=!!c.autoBitrateOpts.isOpenAutoDefi,c.onPlayrateChange=c._onPlayrateChange.bind(l()(c)),c.onPlay=c._onPlay.bind(l()(c)),c._stop=c.stop.bind(l()(c)),c._bufferRange=new Map,c._sortedBufferRange=[],c._lastCheckResolutionStamp=0,c._currentDefinition=null,c._isSeeking=!1,c._waitingStartTime=0,c._stallCount=0,c._seekState=$t,c._stallState=nn,c._videoCurrentTime=0,c.listeners=[{evt:"playbackrateChange",handler:c.onPlayrateChange},{evt:"ended",handler:c._stop},{evt:"error",handler:c._stop},{evt:"timeupdate",handler:c._onTimeUpdate.bind(l()(c))},{evt:"addVideoBufferEnd",handler:c._bufferRangeUpdate.bind(l()(c))},{evt:"canplay",handler:c._updateAutoDesc.bind(l()(c))},{evt:"play",handler:c._onplayStart.bind(l()(c))},{evt:Jt,handler:c._onMaxBufferChange.bind(l()(c))},{evt:"seeking",handler:c._onSeeking.bind(l()(c))},{evt:"seeked",handler:c._onSeekEnd.bind(l()(c))},{evt:"waiting",handler:c._onWaiting.bind(l()(c))},{evt:"playing",handler:c._onPlaying.bind(l()(c))}],c._hasStart=!1,c.listeners.forEach((function(e){var t=e.evt,n=e.handler;c.player.on(t,n)})),c._isPaused=!1,c._hasAddFrament=!1,c._eventInfo={local_time_ms:0,internet_speed:0,buffer_length:0,last_bitrate:0,now_bitrate:0,play_speed:1},c._bitrateSet=[],c._generalInfo={},c._currentInAbr=!1,c._hasCalcTimelineLog=!1,c._abr_play_info={start_play_time_ms:0,is_hint:0,playback_info:{internet_speed_record:[],play_bitrate_record:[],buffer_length_record:[],play_speed_record:[],qoe_record:[],qoe_a_record:[],qoe_b_record:[],qoe_c_record:[]}},c._abrMethod=c.autoBitrateOpts.method||0,c.logger("abr: constructor"),c._loopInterval=c.initInterval,c._tickCount=0,c._fps=30,Yt.install(),c.startTime=performance.now(),c.logger("time abr",(new Date).getTime()),c._maxCacheTimeVideo=c.config.maxBufferLength||c.config.preloadTime||50,c._maxCacheTimeAudio=c._maxCacheTimeVideo,c._prevDefinitionItem=null,c._currentItem=null,c._switchCount=0,c._switchBitrate=0,c._avgStatItems={};for(var d=Object.keys(an),f=0;f<d.length;f++){var h=d[f],p=an[h];c._avgStatItems[p]=new sn}return c._qoeArgs=[0,0,0,0],c._abrUsed=-1,c._abrAlwaysOn=1,c._prelaodInfo=null,c._hasLogStartInfo=!1,c._hasExecuteAbrAlgo=!1,c._lastExecuteTimeInMs=0,c}return c()(n,[{key:"init",value:function(e){return this._mediaList=e,this.isOpenAutoDefi?this.onLoadWasm():this._wasmPromise.resolve(),this._wasmPromise}},{key:"execute",value:function(){return this.listenSize(),this.initFps(),this.onWinElemSizeChange(),this.onPlay()}},{key:"_onSeeking",value:function(){this._isSeeking=!0,this.player.currentTime<this._videoCurrentTime?this._seekState=tn:this._seekState=en,this.logger("seekState",this._seekState)}},{key:"_onSeekEnd",value:function(){this._isSeeking=!1}},{key:"_onWaiting",value:function(){var e=this;this._isSeeking||this._waitingStartTime>0||(this._waitingStartTime=(new Date).getTime(),this._stallId=setTimeout((function(){clearTimeout(e._stallId),e._stallCount++,e._stallState=rn}),200))}},{key:"_onPlaying",value:function(){this._waitingStartTime=0,this._stallState=nn,clearTimeout(this._stallId)}},{key:"initFps",value:function(){this.fpsDetection=new Yt,this.fpsDetection.start(),this._fps=this.fpsDetection.fps,this._hasDeviceInfoChanged=!0}},{key:"listenSize",value:function(){var e,t,n,r;this.mediaElem=this.player.video,this._onWinSizeChange=(e=this.onWinElemSizeChange.bind(this),t=1e3,n=!1,function(){var i=this,a=arguments,o=function(){r=null,n||e.apply(i,a)},s=n&&!r;clearTimeout(r),r=setTimeout(o,t),s&&e.apply(i,a)}),window.addEventListener("resize",this._onWinSizeChange)}},{key:"onWinElemSizeChange",value:function(){if(this.mediaElem){var e=this.mediaElem.getBoundingClientRect();this._videoWidth=Math.floor(e.width),this._videoHeight=Math.floor(e.height),this._hasDeviceInfoChanged=!0}}},{key:"_onMaxBufferChange",value:function(e){var t=e.videoCacheTime,n=e.audioCacheTime;this._maxCacheTimeAudio=n,this._maxCacheTimeVideo=t}},{key:"_onTimeUpdate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._sortedBufferRange&&0!==this._sortedBufferRange.length&&this._currentInAbr){this._videoCurrentTime=this.player.currentTime;var n=Date.now();if(!(n-this._lastCheckResolutionStamp<1e3&&0!==this._lastCheckResolutionStamp)||t){this._lastCheckResolutionStamp=n;for(var r=this.player.currentTime,i=0,a=this._sortedBufferRange.length-1,o=null;i<=a;){var s=Math.floor(i+(a-i)/2),c=this._sortedBufferRange[s];if(r<c.start)a=s-1;else{if(!(r>=c.end)){o=c;break}i=s+1}}if(o){var u=this._bitrateToDefitionConfig.get(o.bandwidth),l=u&&u.definition;if(this._currentDefinition===l&&!t||!l)return void(l||this.logger("error defintion, mpd\u914d\u7f6e\u4e0e\u63a5\u53e3\u914d\u7f6e\u4e0d\u4e00\u81f4"));this._currentDefinition=l,this._prevDefinitionItem=this._currentItem,this._currentFps=u.fps,this._currentItem=u,this._emitAutoDescChange(l,!1,this._currentFps,u)}}}}},{key:"_emitAutoDescChange",value:function(e,t,n,r){console.log("[ABR],emitAutoDescChange, definition, ",e,",item,",r,",pre_item,",this._prevDefinitionItem),this.player.emit(Qt,{definition:e,reset:t,fps:n,item:r,pre_item:this._prevDefinitionItem})}},{key:"_onplayStart",value:function(){this._hasStart=!0,this.logger("onplaystart")}},{key:"_updateAutoDesc",value:function(){var e=this;this._currentInAbr&&this._currentDefinition&&(this._updateId=setTimeout((function(){clearTimeout(e._updateId),e._emitAutoDescChange(e._currentDefinition,!1,e._currentFps,e._currentItem)}),0))}},{key:"_bufferRangeUpdate",value:function(e){if(void 0!==e.start){null===this._currentItem&&this._onTimeUpdate(null,!0);var t=e.start;this._hasAddFrament=!0,this._bufferRange.set(t,e);var n=zt()(this._bufferRange.values());this._sortedBufferRange=n.sort((function(e,t){return e.start-t.start})),this.avgStat(an.DOWNLOAD_BITRATE,e.bandwidth)}}},{key:"_onPlayrateChange",value:function(){this.module&&this.updateBufferInfo()}},{key:"_onPlay",value:function(){var e=this;if(!this.isOpenAutoDefi)return this.logger("onPlay"),0;var t=0;try{this.logger("abr: loadeddata"),this.updateSwitchInfo(),this.parseMPD(),this.updateDeviceInfo();var r=n.getIsPlayAutoDefi(this.autoBitrateOpts);if(this.isOpenAutoDefi&&r){this._abrUsed=1;var i=this._getDefautSpeed(this.player);t=this._loopAbr(i),this.start(),this.logger("time abr start prgress",(new Date).getTime()),this.logger("time abr costTime",performance.now()-this.startTime),this.logger("abr onplay"),this.startTimer=setTimeout((function(){e._loopInterval=e.interval,clearTimeout(e.startTimer),e.logger("interval change")}),5e3)}}catch(a){this.logger("abr: loadeddata error",a),this.logger("time abr costTime err",performance.now()-this.startTime)}return t}},{key:"start",value:function(){if(this.logger("abr: start"),this._isPaused=!1,!this._hasCalcTimelineLog){var e=1===Math.floor(100*Math.random());this._abr_play_info.is_hint=e?1:0}this._hasCalcTimelineLog=!0,this._loop()}},{key:"_loop",value:function(){var e=this;this._isPaused||(clearTimeout(this.timerId),this.timerId=setTimeout((function(){if(!e.player.paused||!e.player.config.autoplay&&!e._hasStart){var t=e._hasAddFrament?void 0:e._getDefautSpeed(e.player);e._loopAbr(t)}e._loop()}),this._loopInterval))}},{key:"updateDeviceInfo",value:function(){try{if(this.fpsDetection){var e=this.fpsDetection.fps;e!==this._fps&&(this._fps=e,this._hasDeviceInfoChanged=!0)}this._updateDeviceInfo(this._fps)}catch(t){}}},{key:"updateBufferInfo",value:function(e){var t=this.player.playbackRate,n=this.bufferLength,r=e||Math.floor(this.player.downloadSpeed);return this._tickCount<5&&0===r&&(r=this._getDefautSpeed(this.player),this.logger("initSpeed fix")),this.logger("maxCacheTimeAudio:",this._maxCacheTimeAudio,"maxCacheVideoTime",this._maxCacheTimeVideo,"seekState",this._seekState,"stallState",this._stallState),this.module._updateBufferInfo(t,this._maxCacheTimeAudio,this._maxCacheTimeVideo,n,n,r,this._seekState,this.player.currentTime,this._stallState),this._seekState=$t,this._eventInfo={internet_speed:r,buffer_length:n,last_bitrate:this.bitrate,play_speed:t},this.logger("playRate:",t,"buff:",n,"downloadSpeed:",r),{buffer:n,downloadSpeed:r}}},{key:"updateSwitchInfo",value:function(){var e=(new Date).getTime();this._openTimeMs=e,this._abr_play_info.start_play_time_ms=e;var t,n,r=this.player.config.preloadTime||50,i=(n=(t=e).toString(16)).length<=8?{high:0,low:t}:{high:parseInt(n.substr(0,n.length-8),16),low:parseInt(n.substr(n.length-8),16)},a=this.autoBitrateOpts.noStallCheckTime||5,o=this.openLog;this.logger("openTime:",e,"this.logger",o),this.module._updateSwitchInfo(i.low,i.high,a,o,this.stall_penalty,this.switch_penalty);var s=this._mediaList.video,c=s.map((function(e){var t=e.bandwidth,n=e.bitrate;return t||n}));this._bitrateSet=c.map((function(e,t){return{bitrate:e,codecs:s[t].codecs||s[t].codec_type}})),this._generalInfo={max_cache_time:r,bitrate_set:this._bitrateSet,segment_duration:this.segment_duration,preload_info:{},startup_info:{}}}},{key:"updatePreloadCacheInfo",value:function(e){try{this._prelaodInfo=e,this.logger("update preloadInfo",e),e&&e.item_num!==e.items.length&&(this.logger("preloadInfo invalid"),this._prelaodInfo=null)}catch(t){this.logger("updatePreloadCacheInfo",t),this._prelaodInfo=null}}},{key:"updatePreloadLogInfo",value:function(e){this._generalInfo.preload_info=e||{}}},{key:"_updatePreloadInfo",value:function(){try{var e=this.player.getPreloadInfos();if(e){var t=e.preloadInfo,n=e.abr;this.updatePreloadLogInfo(t),n&&this.updatePreloadCacheInfo(t)}if(this.logger("_updatePreloadInfo preloadinfos",e),null!=this._prelaodInfo){var r=JSON.stringify(this._prelaodInfo);this.module.ccall("updatePreloadInfo","null",["string"],[r])}else this.logger("_updatePreloadInfo preloadinfo null, no preload")}catch(i){this.logger("_updatePreloadInfo err",i)}}},{key:"_loopAbr",value:function(e){var t;this._tickCount++;var n=[];try{this.updateDeviceInfo();var r=this.updateBufferInfo(e),i=r.downloadSpeed,a=r.buffer;t=this.module._getPredictedBitrate(this.bitrate,this._abrMethod);for(var o=0;o<7;o++)n.push(this.module.HEAP32[t/Int32Array.BYTES_PER_ELEMENT+o]);var s=n[0],c=1===n[1];this._eventInfo.now_bitrate=s,this._eventInfo.local_time_ms=(new Date).getTime();var u=0;if(s!==this.bitrate&&0!==s){var l=this.bitrate;u=Math.abs(l-s);for(var d=[],f=this.player.video.buffered,h=0;h<f.length;h++)d.push({start:f.start(h),end:f.end(h)});var p=this._videoWidth||Number(this.config.width),v=this._videoHeight||Number(this.config.height),g=(new Date).getTime(),y={speed:"".concat(i," KB/s"),buffer_length:"".concat(a," s"),video_pos:this.player.currentTime,all_buffers:d,seek_state:this._seekState,stall_state:this._stallState,screen_width:p,screen_height:v,dpr:window&&window.devicePixelRatio,playbackRate:this.player.playbackRate,bitrateSet:this._bitrateSet,abrMethod:this._abrMethod,delta:this._hasExecuteAbrAlgo?g-this._lastExecuteTimeInMs:0};this._lastExecuteTimeInMs=g,this._hasExecuteAbrAlgo=!0,this.player.emit(Zt,this.bitrate,s,c,JSON.stringify(y)),this.logger("abr loop predicte:",s,"willStall:",c,"switchBitrate",u,"cur",l),this.bitrate=s}this._hasLogStartInfo||(this._hasLogStartInfo=!0,this._generalInfo.startup_info={predict_bitrate:s,download_speed:i,screen_width:this._videoWidth||Number(this.config.width),screen_height:this._videoHeight||Number(this.config.height),device_pixel_ratio:window&&window.devicePixelRatio,screen_fps:this._fps,startup_method:this._abrMethod}),this.player.emit("ABR_LOOP"),this.onAbrLoop(i,n[2],u,n.slice(3))}catch(m){this.logger("abr error",m),console.log("error",m)}finally{this.module._free(t)}return this.bitrate}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!0===e&&(this._abrAlwaysOn=-1),clearTimeout(this.timerId),this._isPaused=!0,this.logger("abr: stop")}},{key:"destroy",value:function(){var e=this;this._stop(),this.listeners.forEach((function(t){var n=t.evt,r=t.handler;e.player.off(n,r)})),this.player=null,this._heightToDefitionConfig=null,this._bitrateToDefitionConfig=null,this._bufferRange=null,this._sortedBufferRange=null,this.module=null,clearTimeout(this._stallId),clearTimeout(this._updateId),clearTimeout(this.startTimer),window.removeEventListener("resize",this._onWinSizeChange),this.fpsDetection&&this.fpsDetection.stop(),this.player=null}},{key:"eventInfo",get:function(){return this._eventInfo}},{key:"generalInfo",get:function(){return this._generalInfo}},{key:"bufferLength",get:function(){var e=this.player.getBufferedRange(),t=this.player.video.currentTime,n=e[1]-Math.max(e[0],t);return n=Math.max(0,n).toFixed(2),parseFloat(n)}},{key:"downloadSpeed",get:function(){return Math.floor(this.player.downloadSpeed)}},{key:"nowBitrate",get:function(){return this.bitrate}},{key:"openTimeMs",get:function(){return this._openTimeMs}},{key:"isCurrentInAbr",get:function(){return this._currentInAbr},set:function(e){this._currentInAbr=e}},{key:"onAbrLoop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(this._qoeArgs=r,this._currentItem&&this.avgStat(an.PLAYBACK_BITRATE,this._currentItem.bitrate),this.avgStat(an.DOWNLOAD_NETWORK_SPEED,1e3*e*8),this.avgStat(an.PREDICT_NETWORK_SPEED,t),this.avgStat(an.BUFFER_LENGTH,this.bufferLength),this.avgStat(an.QOE,this.getQoeRelValue(0)),n>0&&(this._switchCount++,this._switchBitrate+=n),this._abr_play_info.is_hint){var i=this,a=((new Date).getTime()-this.openTimeMs)/1e3;a=parseFloat(a.toFixed(2)),this._abr_play_info.playback_info.internet_speed_record.push([a,i.downloadSpeed]),this._abr_play_info.playback_info.play_bitrate_record.push([a,i.nowBitrate]),this._abr_play_info.playback_info.buffer_length_record.push([a,i.bufferLength]),this._abr_play_info.playback_info.play_speed_record.push([a,this.player.playbackRate]),this._abr_play_info.playback_info.qoe_record.push([a,this.getQoeRelValue(0)]),this._abr_play_info.playback_info.qoe_a_record.push([a,this.getQoeRelValue(1)]),this._abr_play_info.playback_info.qoe_b_record.push([a,this.getQoeRelValue(2)]),this._abr_play_info.playback_info.qoe_c_record.push([a,this.getQoeRelValue(3)])}}},{key:"getQoeRelValue",value:function(e){return this._qoeArgs[e]/100}},{key:"avgStat",value:function(e,t){var n=this._avgStatItems[e];n&&n.add(t)}},{key:"getAbrPlayInfo",value:function(){return this._abr_play_info}},{key:"updateAbrMethod",value:function(e){this._abrMethod=e}},{key:"getAbrMethod",value:function(){return this._abrMethod}},{key:"getAbrVVStats",value:function(){for(var e={},t=Object.keys(an),n=0;n<t.length;n++){var r=t[n],i=an[r],a=this._avgStatItems[i];e[i]=a.avg()}return e.switch_counts=this._switchCount,e.avg_switch_bitrate=0===this._switchCount?0:this._switchBitrate/this._switchCount,e.abr_qoe=this.getQoeRelValue(0),e.abr_qoe_a=this.getQoeRelValue(1),e.abr_qoe_b=this.getQoeRelValue(2),e.abr_qoe_c=this.getQoeRelValue(3),e.abr_method=this._abrMethod,e.abr_used=this._abrUsed,e.abr_always_on=this._abrAlwaysOn,this.logger("abrVVStats",e),e}}],[{key:"getIsPlayAutoDefi",value:function(e){return!!e.isPlayAutoDefi}}]),n}(Et),sn=function(){function e(){o()(this,e),this.total=0,this.count=0}return c()(e,[{key:"add",value:function(e){this.total+=e,this.count++}},{key:"avg",value:function(){if(0===this.count)return 0;var e=this.total/this.count;return Math.floor(e)}}]),e}(),cn=n("561d05ff0d1178722f25"),un=function(){function e(){o()(this,e),w()(this),this.workerList=[],this.bodyId=0,this.isSwitchHeader=!1,this.workerIndex=0,this.init(),this.headerId=0,this.crypto=window.crypto||window.msCrypto,this.aeskey=null}return c()(e,[{key:"init",value:function(){for(var e=this,t=0;t<3;t++){var n=new cn.a;n.onmessage=function(t){e.emit(t.data.method,t.data)},n.postMessage({method:"log",value:te}),this.workerList.push(n)}}},{key:"importKeys",value:function(e){var t=this,n=new Le,r=q.fromHex(e);return this.crypto.subtle.importKey("raw",r.buffer,{name:"AES-CTR",length:e.length},!1,["decrypt"]).then((function(e){t.aeskey=e,n.resolve()})),n}},{key:"updateHeaderId",value:function(){var e=this.bodyId+1;this.headerId=e,this.bodyId=e}},{key:"destroy",value:function(){this.workerList.forEach((function(e){e.terminate()})),this.workerList=[]}},{key:"decryptHeader",value:function(e,t){var n=this;return this.updateHeaderId(),new Promise((function(r){var i=new vt(e),a=Math.floor(1e3*Math.random());n.workerList[0]&&n.workerList[0].postMessage({method:"decryptHeader",id:a,codecsType:t,args:{buf:e,parsed:i}});n.on("decryptHeader",(function e(t){t.id===a&&(n.off("decryptHeader",e),r({data:t.args.data,vid:t.args.vid}))}))}))}},{key:"decryptBody",value:function(e,t,n,r){var i=this,a=new vt(e),o=i.bodyId+1;return i.bodyId=o,new Promise((function(e){i.on("decryptBody",(function t(n){n.id===o&&(i.off("decryptBody",t),e({data:n.args.data,id:o,headerId:i.headerId}))})),i.workerList[i.workerIndex]&&i.workerList[i.workerIndex].postMessage({method:"decryptBody",id:o,args:{parsed:a,keyValue:t,isVideo:n,id:i.workerIndex,aeskey:i.aeskey,useRaw:r}}),i.workerIndex=i.workerIndex+1,i.workerIndex>=3&&(i.workerIndex=0)}))}}]),e}(),ln=(n("06a2848a1ac9fe42cbab"),n("4ae9548107096fa68936"),n("4e9566162c13b75a7670"),n("41484d8a26324d97b7e6"),n("03f19a5a35b3604c3ba8"),n("4fe1cfddaf90ec59b1fe"),n("9d0ca8b6b4ed29afaea1"),n("e3e20c2233a726c5030d"),n("0d50ea7bf61f95bd27a3"),n("a9a0574c493a10fa7b56"),n("a1c9567e919d8ae0bc47"),n("d1799df9e353a0d47813"),n("974e81cef6e79cf00cef"),n("c974a96236d95aa53e63"),n("625d90a0447d54b65069"),n("49e41284780e7bc4447b"),n("4b591d9d67e3580a2018"),n("f23c70cb3c4e23514fd3"),n("af32c5729234ae5d2c05"),n("f51d6d4e9ebd259f4737"),n("d2cca4fd0ed64e6e2484"),{exports:{}});!function(e,t){var n,r=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(e){var t,r=void 0!==(e=e||{})?e:{},i={};for(t in r)r.hasOwnProperty(t)&&(i[t]=r[t]);if(r.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -s ENVIRONMENT=web or -s ENVIRONMENT=node)");var a="";if(document.currentScript&&(a=document.currentScript.src),n&&(a=n),a=0!==a.indexOf("blob:")?a.substr(0,a.lastIndexOf("/")+1):"","object"!==("undefined"==typeof window?"undefined":I()(window))&&"function"!=typeof importScripts)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");var o,s=r.print||console.log.bind(console),c=r.printErr||console.warn.bind(console);for(t in i)i.hasOwnProperty(t)&&(r[t]=i[t]);function u(e){u.shown||(u.shown={}),u.shown[e]||(u.shown[e]=1,c(e))}i=null,r.arguments,Object.getOwnPropertyDescriptor(r,"arguments")||Object.defineProperty(r,"arguments",{configurable:!0,get:function(){F("Module.arguments has been replaced with plain arguments_")}}),r.thisProgram,Object.getOwnPropertyDescriptor(r,"thisProgram")||Object.defineProperty(r,"thisProgram",{configurable:!0,get:function(){F("Module.thisProgram has been replaced with plain thisProgram")}}),r.quit,Object.getOwnPropertyDescriptor(r,"quit")||Object.defineProperty(r,"quit",{configurable:!0,get:function(){F("Module.quit has been replaced with plain quit_")}}),p(void 0===r.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),p(void 0===r.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),p(void 0===r.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),p(void 0===r.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),p(void 0===r.read,"Module.read option was removed (modify read_ in JS)"),p(void 0===r.readAsync,"Module.readAsync option was removed (modify readAsync in JS)"),p(void 0===r.readBinary,"Module.readBinary option was removed (modify readBinary in JS)"),p(void 0===r.setWindowTitle,"Module.setWindowTitle option was removed (modify setWindowTitle in JS)"),Object.getOwnPropertyDescriptor(r,"read")||Object.defineProperty(r,"read",{configurable:!0,get:function(){F("Module.read has been replaced with plain read_")}}),Object.getOwnPropertyDescriptor(r,"readAsync")||Object.defineProperty(r,"readAsync",{configurable:!0,get:function(){F("Module.readAsync has been replaced with plain readAsync")}}),Object.getOwnPropertyDescriptor(r,"readBinary")||Object.defineProperty(r,"readBinary",{configurable:!0,get:function(){F("Module.readBinary has been replaced with plain readBinary")}}),ce=function(){F("cannot use the stack before compiled code is ready to run, and has provided stack access")},r.wasmBinary&&(o=r.wasmBinary),Object.getOwnPropertyDescriptor(r,"wasmBinary")||Object.defineProperty(r,"wasmBinary",{configurable:!0,get:function(){F("Module.wasmBinary has been replaced with plain wasmBinary")}}),r.noExitRuntime,Object.getOwnPropertyDescriptor(r,"noExitRuntime")||Object.defineProperty(r,"noExitRuntime",{configurable:!0,get:function(){F("Module.noExitRuntime has been replaced with plain noExitRuntime")}});var l,d={Memory:function(e){return{buffer:new ArrayBuffer(65536*e.initial),grow:function(e){var t=this.buffer,n=le(e);return p(this.buffer!==t),n}}},Table:function(e){var t=new Array(e.initial);return t.grow=function(e){t.length>=1&&F("Unable to grow wasm table. Use a higher value for RESERVED_FUNCTION_POINTERS or set ALLOW_TABLE_GROWTH."),t.push(null)},t.set=function(e,n){t[e]=n},t.get=function(e){return t[e]},t},Module:function(e){return{}},Instance:function(e,t){return{exports:function(e,t,n){return function(e,t,r){var i=t.memory,a=n,o=new e.Int8Array(r);new e.Int16Array(r);var s=new e.Int32Array(r),c=new e.Uint8Array(r);new e.Uint16Array(r);var u=new e.Uint32Array(r);new e.Float32Array(r),new e.Float64Array(r);var l=e.Math.imul;e.Math.fround,e.Math.abs,e.Math.clz32,e.Math.min,e.Math.max,e.Math.floor,e.Math.ceil,e.Math.sqrt,t.abort,e.NaN,e.Infinity;var d=t.emscripten_memcpy_big,f=t.emscripten_resize_heap,h=t.__unlock,p=t.__lock,v=9744;function g(e){var t,n=0;return t=w(),(e=(n=s[388])+e|0)>>>0<=t<<16>>>0||f(0|e)?(s[388]=e,n):(s[256]=48,-1)}function y(e){var t,n=0,r=0,i=0,a=0,o=0,l=0,d=0,f=0,h=0,p=0,y=0,m=0;v=t=v-16|0;e:{t:{n:{r:{i:{a:{o:{s:{c:{u:{l:{if((e|=0)>>>0<=244){if(3&(n=(o=s[261])>>>(e=(l=e>>>0<11?16:e+11&-8)>>>3))){e=(n=s[1092+(a=(r=e+(1&(-1^n))|0)<<3)>>2])+8|0,(0|(i=s[n+8>>2]))!=(0|(a=a+1084|0))?(s[i+12>>2]=a,s[a+8>>2]=i):(y=1044,m=k(r)&o,s[y>>2]=m),r<<=3,s[n+4>>2]=3|r,s[4+(n=n+r|0)>>2]=1|s[n+4>>2];break e}if(l>>>0<=(f=s[263])>>>0)break l;if(n){r=n=(e=(0-(e=(0-(r=2<<e)|r)&n<<e)&e)-1|0)>>>12&16,r|=n=(e>>>=n)>>>5&8,r|=n=(e>>>=n)>>>2&4,n=s[1092+(i=(r=((r|=n=(e>>>=n)>>>1&2)|(n=(e>>>=n)>>>1&1))+(e>>>n)|0)<<3)>>2],(0|(e=s[n+8>>2]))!=(0|(i=i+1084|0))?(s[e+12>>2]=i,s[i+8>>2]=e):(o=k(r)&o,s[261]=o),e=n+8|0,s[n+4>>2]=3|l,a=(r<<=3)-l|0,s[4+(d=n+l|0)>>2]=1|a,s[n+r>>2]=a,f&&(n=1084+((r=f>>>3)<<3)|0,i=s[266],(r=1<<r)&o?r=s[n+8>>2]:(s[261]=r|o,r=n),s[n+8>>2]=i,s[r+12>>2]=i,s[i+12>>2]=n,s[i+8>>2]=r),s[266]=d,s[263]=a;break e}if(!(p=s[262]))break l;for(r=n=(e=(p&0-p)-1|0)>>>12&16,r|=n=(e>>>=n)>>>5&8,r|=n=(e>>>=n)>>>2&4,n=s[1348+(((r|=n=(e>>>=n)>>>1&2)|(n=(e>>>=n)>>>1&1))+(e>>>n)<<2)>>2],i=(-8&s[n+4>>2])-l|0,r=n;(e=s[r+16>>2])||(e=s[r+20>>2]);)i=(r=(a=(-8&s[e+4>>2])-l|0)>>>0<i>>>0)?a:i,n=r?e:n,r=e;if(h=s[n+24>>2],(0|(a=s[n+12>>2]))!=(0|n)){e=s[n+8>>2],s[e+12>>2]=a,s[a+8>>2]=e;break t}if(!(e=s[(r=n+20|0)>>2])){if(!(e=s[n+16>>2]))break u;r=n+16|0}for(;d=r,a=e,(e=s[(r=e+20|0)>>2])||(r=a+16|0,e=s[a+16>>2]););s[d>>2]=0;break t}if(l=-1,!(e>>>0>4294967231)&&(l=-8&(n=e+11|0),f=s[262])){r=0-l|0,o=0,(n>>>=8)&&(o=31,l>>>0>16777215||(o=28+((e=((o=(n<<=i=n+1048320>>>16&8)<<(e=n+520192>>>16&4))<<(n=o+245760>>>16&2)>>>15)-(n|e|i)|0)<<1|l>>>e+21&1)|0));d:{f:{if(i=s[1348+(o<<2)>>2])for(n=l<<(31==(0|o)?0:25-(o>>>1)|0),e=0;;){if(!((d=(-8&s[i+4>>2])-l|0)>>>0>=r>>>0||(a=i,r=d))){r=0,e=i;break f}if(d=s[i+20>>2],i=s[16+((n>>>29&4)+i|0)>>2],e=d?(0|d)==(0|i)?e:d:e,n<<=0!=(0|i),!i)break}else e=0;if(!(e|a)){if(!(e=(0-(e=2<<o)|e)&f))break l;i=n=(e=(e&0-e)-1|0)>>>12&16,i|=n=(e>>>=n)>>>5&8,i|=n=(e>>>=n)>>>2&4,e=s[1348+(((i|=n=(e>>>=n)>>>1&2)|(n=(e>>>=n)>>>1&1))+(e>>>n)<<2)>>2]}if(!e)break d}for(;r=(n=(i=(-8&s[e+4>>2])-l|0)>>>0<r>>>0)?i:r,a=n?e:a,e=(n=s[e+16>>2])||s[e+20>>2];);}if(!(!a|r>>>0>=s[263]-l>>>0)){if(d=s[a+24>>2],(0|a)!=(0|(n=s[a+12>>2]))){e=s[a+8>>2],s[e+12>>2]=n,s[n+8>>2]=e;break n}if(!(e=s[(i=a+20|0)>>2])){if(!(e=s[a+16>>2]))break c;i=a+16|0}for(;o=i,n=e,(e=s[(i=e+20|0)>>2])||(i=n+16|0,e=s[n+16>>2]););s[o>>2]=0;break n}}}if((n=s[263])>>>0>=l>>>0){e=s[266],(r=n-l|0)>>>0>=16?(s[263]=r,i=e+l|0,s[266]=i,s[i+4>>2]=1|r,s[e+n>>2]=r,s[e+4>>2]=3|l):(s[266]=0,s[263]=0,s[e+4>>2]=3|n,s[4+(n=e+n|0)>>2]=1|s[n+4>>2]),e=e+8|0;break e}if((i=s[264])>>>0>l>>>0){n=i-l|0,s[264]=n,r=(e=s[267])+l|0,s[267]=r,s[r+4>>2]=1|n,s[e+4>>2]=3|l,e=e+8|0;break e}if(e=0,r=a=l+47|0,s[379]?n=s[381]:(s[382]=-1,s[383]=-1,s[380]=4096,s[381]=4096,s[379]=t+12&-16^1431655768,s[384]=0,s[372]=0,n=4096),(r=(o=r+n|0)&(d=0-n|0))>>>0<=l>>>0)break e;if((n=s[371])&&(h=(f=s[369])+r|0)>>>0<=f>>>0|h>>>0>n>>>0)break e;if(4&c[1488])break a;l:{d:{if(n=s[267])for(e=1492;;){if((f=s[e>>2])+s[e+4>>2]>>>0>n>>>0&&f>>>0<=n>>>0)break d;if(!(e=s[e+8>>2]))break}if(-1==(0|(n=g(0))))break o;if(o=r,(i=(e=s[380])+-1|0)&n&&(o=(r-n|0)+(n+i&0-e)|0),o>>>0<=l>>>0|o>>>0>2147483646)break o;if((e=s[371])&&(d=(i=s[369])+o|0)>>>0<=i>>>0|d>>>0>e>>>0)break o;if((0|n)!=(0|(e=g(o))))break l;break i}if((o=d&o-i)>>>0>2147483646)break o;if((0|(n=g(o)))==(s[e>>2]+s[e+4>>2]|0))break s;e=n}if(n=e,!(l+48>>>0<=o>>>0|o>>>0>2147483646|-1==(0|e))){if((e=(e=s[381])+(a-o|0)&0-e)>>>0>2147483646)break i;if(-1!=(0|g(e))){o=e+o|0;break i}g(0-o|0);break o}if(-1!=(0|n))break i;break o}a=0;break t}n=0;break n}if(-1!=(0|n))break i}s[372]=4|s[372]}if(r>>>0>2147483646)break r;if((n=g(r))>>>0>=(e=g(0))>>>0|-1==(0|n)|-1==(0|e))break r;if((o=e-n|0)>>>0<=l+40>>>0)break r}e=s[369]+o|0,s[369]=e,e>>>0>u[370]&&(s[370]=e);i:{a:{o:{if(r=s[267]){for(e=1492;;){if(((i=s[e>>2])+(a=s[e+4>>2])|0)==(0|n))break o;if(!(e=s[e+8>>2]))break}break a}for(n>>>0>=(e=s[265])>>>0&&e||(s[265]=n),e=0,s[374]=o,s[373]=n,s[269]=-1,s[270]=s[379],s[376]=0;i=1084+(r=e<<3)|0,s[r+1092>>2]=i,s[r+1096>>2]=i,32!=(0|(e=e+1|0)););i=(e=o+-40|0)-(r=n+8&7?-8-n&7:0)|0,s[264]=i,r=n+r|0,s[267]=r,s[r+4>>2]=1|i,s[4+(e+n|0)>>2]=40,s[268]=s[383];break i}if(!(8&c[e+12|0]|n>>>0<=r>>>0|i>>>0>r>>>0)){s[e+4>>2]=a+o,n=(e=r+8&7?-8-r&7:0)+r|0,s[267]=n,e=(i=s[264]+o|0)-e|0,s[264]=e,s[n+4>>2]=1|e,s[4+(r+i|0)>>2]=40,s[268]=s[383];break i}}n>>>0<(a=s[265])>>>0&&(s[265]=n,a=0),i=n+o|0,e=1492;a:{o:{s:{c:{u:{l:{for(;;){if((0|i)!=s[e>>2]){if(e=s[e+8>>2])continue;break l}break}if(!(8&c[e+12|0]))break u}for(e=1492;;){if((i=s[e>>2])>>>0<=r>>>0&&(a=i+s[e+4>>2]|0)>>>0>r>>>0)break c;e=s[e+8>>2]}}if(s[e>>2]=n,s[e+4>>2]=s[e+4>>2]+o,s[4+(h=(n+8&7?-8-n&7:0)+n|0)>>2]=3|l,e=((n=i+(i+8&7?-8-i&7:0)|0)-h|0)-l|0,d=l+h|0,(0|n)==(0|r)){s[267]=d,e=s[264]+e|0,s[264]=e,s[d+4>>2]=1|e;break o}if(s[266]==(0|n)){s[266]=d,e=s[263]+e|0,s[263]=e,s[d+4>>2]=1|e,s[e+d>>2]=e;break o}if(1==(3&(r=s[n+4>>2]))){p=-8&r;u:if(r>>>0<=255){if(a=r>>>3,r=s[n+8>>2],(0|(i=s[n+12>>2]))==(0|r)){y=1044,m=s[261]&k(a),s[y>>2]=m;break u}s[r+12>>2]=i,s[i+8>>2]=r}else{if(f=s[n+24>>2],(0|(o=s[n+12>>2]))==(0|n))if((l=s[(i=n+20|0)>>2])||(l=s[(i=n+16|0)>>2])){for(;r=i,o=l,(l=s[(i=l+20|0)>>2])||(i=o+16|0,l=s[o+16>>2]););s[r>>2]=0}else o=0;else r=s[n+8>>2],s[r+12>>2]=o,s[o+8>>2]=r;if(f){r=s[n+28>>2];l:{if(s[(i=1348+(r<<2)|0)>>2]==(0|n)){if(s[i>>2]=o,o)break l;y=1048,m=s[262]&k(r),s[y>>2]=m;break u}if(s[f+(s[f+16>>2]==(0|n)?16:20)>>2]=o,!o)break u}s[o+24>>2]=f,(r=s[n+16>>2])&&(s[o+16>>2]=r,s[r+24>>2]=o),(r=s[n+20>>2])&&(s[o+20>>2]=r,s[r+24>>2]=o)}}n=n+p|0,e=e+p|0}if(s[n+4>>2]=-2&s[n+4>>2],s[d+4>>2]=1|e,s[e+d>>2]=e,e>>>0<=255){e=1084+((n=e>>>3)<<3)|0,(r=s[261])&(n=1<<n)?n=s[e+8>>2]:(s[261]=n|r,n=e),s[e+8>>2]=d,s[n+12>>2]=d,s[d+12>>2]=e,s[d+8>>2]=n;break o}if(n=0,(i=e>>>8)&&(n=31,e>>>0>16777215||(n=28+((n=((l=(i<<=a=i+1048320>>>16&8)<<(n=i+520192>>>16&4))<<(i=l+245760>>>16&2)>>>15)-(i|n|a)|0)<<1|e>>>n+21&1)|0)),s[(r=d)+28>>2]=n,s[d+16>>2]=0,s[d+20>>2]=0,r=1348+(n<<2)|0,(i=s[262])&(a=1<<n)){for(i=e<<(31==(0|n)?0:25-(n>>>1)|0),n=s[r>>2];;){if(r=n,(-8&s[n+4>>2])==(0|e))break s;if(n=i>>>29,i<<=1,!(n=s[16+(a=(4&n)+r|0)>>2]))break}s[a+16>>2]=d}else s[262]=i|a,s[r>>2]=d;s[d+24>>2]=r,s[d+12>>2]=d,s[d+8>>2]=d;break o}for(d=(e=o+-40|0)-(i=n+8&7?-8-n&7:0)|0,s[264]=d,i=n+i|0,s[267]=i,s[i+4>>2]=1|d,s[4+(e+n|0)>>2]=40,s[268]=s[383],s[(i=(e=(a+(a+-39&7?39-a&7:0)|0)-47|0)>>>0<r+16>>>0?r:e)+4>>2]=27,e=s[376],s[i+16>>2]=s[375],s[i+20>>2]=e,e=s[374],s[i+8>>2]=s[373],s[i+12>>2]=e,s[375]=i+8,s[374]=o,s[373]=n,s[376]=0,e=i+24|0;s[e+4>>2]=7,n=e+8|0,e=e+4|0,n>>>0<a>>>0;);if((0|r)==(0|i))break i;if(s[i+4>>2]=-2&s[i+4>>2],a=i-r|0,s[r+4>>2]=1|a,s[i>>2]=a,a>>>0<=255){e=1084+((n=a>>>3)<<3)|0,(i=s[261])&(n=1<<n)?n=s[e+8>>2]:(s[261]=n|i,n=e),s[e+8>>2]=r,s[n+12>>2]=r,s[r+12>>2]=e,s[r+8>>2]=n;break i}if(s[r+16>>2]=0,s[r+20>>2]=0,e=0,(i=a>>>8)&&(e=31,a>>>0>16777215||(e=28+((e=((d=(i<<=o=i+1048320>>>16&8)<<(e=i+520192>>>16&4))<<(i=d+245760>>>16&2)>>>15)-(i|e|o)|0)<<1|a>>>e+21&1)|0)),s[(n=r)+28>>2]=e,n=1348+(e<<2)|0,(i=s[262])&(o=1<<e)){for(e=a<<(31==(0|e)?0:25-(e>>>1)|0),n=s[n>>2];;){if(i=n,(0|a)==(-8&s[n+4>>2]))break a;if(n=e>>>29,e<<=1,!(n=s[16+(o=i+(4&n)|0)>>2]))break}s[o+16>>2]=r,s[r+24>>2]=i}else s[262]=i|o,s[n>>2]=r,s[r+24>>2]=n;s[r+12>>2]=r,s[r+8>>2]=r;break i}e=s[r+8>>2],s[e+12>>2]=d,s[r+8>>2]=d,s[d+24>>2]=0,s[d+12>>2]=r,s[d+8>>2]=e}e=h+8|0;break e}e=s[i+8>>2],s[e+12>>2]=r,s[i+8>>2]=r,s[r+24>>2]=0,s[r+12>>2]=i,s[r+8>>2]=e}if(!((e=s[264])>>>0<=l>>>0)){n=e-l|0,s[264]=n,r=(e=s[267])+l|0,s[267]=r,s[r+4>>2]=1|n,s[e+4>>2]=3|l,e=e+8|0;break e}}s[256]=48,e=0;break e}n:if(d){e=s[a+28>>2];r:{if(s[(i=1348+(e<<2)|0)>>2]==(0|a)){if(s[i>>2]=n,n)break r;f=k(e)&f,s[262]=f;break n}if(s[d+(s[d+16>>2]==(0|a)?16:20)>>2]=n,!n)break n}s[n+24>>2]=d,(e=s[a+16>>2])&&(s[n+16>>2]=e,s[e+24>>2]=n),(e=s[a+20>>2])&&(s[n+20>>2]=e,s[e+24>>2]=n)}n:if(r>>>0<=15)e=r+l|0,s[a+4>>2]=3|e,s[4+(e=e+a|0)>>2]=1|s[e+4>>2];else if(s[a+4>>2]=3|l,s[4+(i=a+l|0)>>2]=1|r,s[r+i>>2]=r,r>>>0<=255)e=1084+((n=r>>>3)<<3)|0,(r=s[261])&(n=1<<n)?n=s[e+8>>2]:(s[261]=n|r,n=e),s[e+8>>2]=i,s[n+12>>2]=i,s[i+12>>2]=e,s[i+8>>2]=n;else{e=0,(l=r>>>8)&&(e=31,r>>>0>16777215||(e=28+((e=((d=(l<<=o=l+1048320>>>16&8)<<(e=l+520192>>>16&4))<<(l=d+245760>>>16&2)>>>15)-(l|e|o)|0)<<1|r>>>e+21&1)|0)),s[(n=i)+28>>2]=e,s[i+16>>2]=0,s[i+20>>2]=0,n=1348+(e<<2)|0;r:{if((l=1<<e)&f){for(e=r<<(31==(0|e)?0:25-(e>>>1)|0),l=s[n>>2];;){if((-8&s[(n=l)+4>>2])==(0|r))break r;if(l=e>>>29,e<<=1,!(l=s[16+(o=(4&l)+n|0)>>2]))break}s[o+16>>2]=i}else s[262]=l|f,s[n>>2]=i;s[i+24>>2]=n,s[i+12>>2]=i,s[i+8>>2]=i;break n}e=s[n+8>>2],s[e+12>>2]=i,s[n+8>>2]=i,s[i+24>>2]=0,s[i+12>>2]=n,s[i+8>>2]=e}e=a+8|0;break e}t:if(h){e=s[n+28>>2];n:{if(s[(r=1348+(e<<2)|0)>>2]==(0|n)){if(s[r>>2]=a,a)break n;y=1048,m=k(e)&p,s[y>>2]=m;break t}if(s[h+(s[h+16>>2]==(0|n)?16:20)>>2]=a,!a)break t}s[a+24>>2]=h,(e=s[n+16>>2])&&(s[a+16>>2]=e,s[e+24>>2]=a),(e=s[n+20>>2])&&(s[a+20>>2]=e,s[e+24>>2]=a)}i>>>0<=15?(e=i+l|0,s[n+4>>2]=3|e,s[4+(e=e+n|0)>>2]=1|s[e+4>>2]):(s[n+4>>2]=3|l,s[4+(l=n+l|0)>>2]=1|i,s[i+l>>2]=i,f&&(e=1084+((r=f>>>3)<<3)|0,a=s[266],(r=1<<r)&o?r=s[e+8>>2]:(s[261]=r|o,r=e),s[e+8>>2]=a,s[r+12>>2]=a,s[a+12>>2]=e,s[a+8>>2]=r),s[266]=l,s[263]=i),e=n+8|0}return v=t+16|0,0|e}function m(e){var t=0,n=0,r=0,i=0,a=0,o=0,c=0,l=0,d=0;e:if(e|=0){a=(r=e+-8|0)+(e=-8&(n=s[e+-4>>2]))|0;t:if(!(1&n)){if(!(3&n))break e;if((r=r-(n=s[r>>2])|0)>>>0<u[265])break e;if(e=e+n|0,s[266]==(0|r)){if(3==(3&(n=s[a+4>>2])))return s[263]=e,s[a+4>>2]=-2&n,s[r+4>>2]=1|e,void(s[e+r>>2]=e)}else{if(n>>>0<=255){if(i=s[r+8>>2],n>>>=3,(0|(t=s[r+12>>2]))==(0|i)){l=1044,d=s[261]&k(n),s[l>>2]=d;break t}s[i+12>>2]=t,s[t+8>>2]=i;break t}if(c=s[r+24>>2],(0|r)==(0|(n=s[r+12>>2])))if((t=s[(i=r+20|0)>>2])||(t=s[(i=r+16|0)>>2])){for(;o=i,(t=s[(i=(n=t)+20|0)>>2])||(i=n+16|0,t=s[n+16>>2]););s[o>>2]=0}else n=0;else t=s[r+8>>2],s[t+12>>2]=n,s[n+8>>2]=t;if(!c)break t;i=s[r+28>>2];n:{if(s[(t=1348+(i<<2)|0)>>2]==(0|r)){if(s[t>>2]=n,n)break n;l=1048,d=s[262]&k(i),s[l>>2]=d;break t}if(s[c+(s[c+16>>2]==(0|r)?16:20)>>2]=n,!n)break t}if(s[n+24>>2]=c,(t=s[r+16>>2])&&(s[n+16>>2]=t,s[t+24>>2]=n),!(t=s[r+20>>2]))break t;s[n+20>>2]=t,s[t+24>>2]=n}}if(!(a>>>0<=r>>>0)&&1&(n=s[a+4>>2])){t:{if(!(2&n)){if(s[267]==(0|a)){if(s[267]=r,e=s[264]+e|0,s[264]=e,s[r+4>>2]=1|e,s[266]!=(0|r))break e;return s[263]=0,void(s[266]=0)}if(s[266]==(0|a))return s[266]=r,e=s[263]+e|0,s[263]=e,s[r+4>>2]=1|e,void(s[e+r>>2]=e);e=(-8&n)+e|0;n:if(n>>>0<=255){if(n>>>=3,(0|(t=s[a+8>>2]))==(0|(i=s[a+12>>2]))){l=1044,d=s[261]&k(n),s[l>>2]=d;break n}s[t+12>>2]=i,s[i+8>>2]=t}else{if(c=s[a+24>>2],(0|a)==(0|(n=s[a+12>>2])))if((t=s[(i=a+20|0)>>2])||(t=s[(i=a+16|0)>>2])){for(;o=i,(t=s[(i=(n=t)+20|0)>>2])||(i=n+16|0,t=s[n+16>>2]););s[o>>2]=0}else n=0;else t=s[a+8>>2],s[t+12>>2]=n,s[n+8>>2]=t;if(c){i=s[a+28>>2];r:{if(s[(t=1348+(i<<2)|0)>>2]==(0|a)){if(s[t>>2]=n,n)break r;l=1048,d=s[262]&k(i),s[l>>2]=d;break n}if(s[c+(s[c+16>>2]==(0|a)?16:20)>>2]=n,!n)break n}s[n+24>>2]=c,(t=s[a+16>>2])&&(s[n+16>>2]=t,s[t+24>>2]=n),(t=s[a+20>>2])&&(s[n+20>>2]=t,s[t+24>>2]=n)}}if(s[r+4>>2]=1|e,s[e+r>>2]=e,s[266]!=(0|r))break t;return void(s[263]=e)}s[a+4>>2]=-2&n,s[r+4>>2]=1|e,s[e+r>>2]=e}if(e>>>0<=255)return n=1084+((e>>>=3)<<3)|0,(t=s[261])&(e=1<<e)?e=s[n+8>>2]:(s[261]=e|t,e=n),s[n+8>>2]=r,s[e+12>>2]=r,s[r+12>>2]=n,void(s[r+8>>2]=e);s[r+16>>2]=0,s[r+20>>2]=0,t=0,(i=e>>>8)&&(t=31,e>>>0>16777215||(t=i,t<<=i=i+1048320>>>16&8,t=28+((t=((t<<=c=t+520192>>>16&4)<<(o=t+245760>>>16&2)>>>15)-(o|i|c)|0)<<1|e>>>t+21&1)|0)),s[(n=r)+28>>2]=t,o=1348+(t<<2)|0;t:if((i=s[262])&(n=1<<t)){i=e<<(31==(0|t)?0:25-(t>>>1)|0),n=s[o>>2];n:{for(;;){if(t=n,(-8&s[n+4>>2])==(0|e))break n;if(n=i>>>29,i<<=1,!(n=s[16+(o=t+(4&n)|0)>>2]))break}s[o+16>>2]=r,s[r+12>>2]=r,s[r+24>>2]=t,s[r+8>>2]=r;break t}e=s[t+8>>2],s[e+12>>2]=r,s[t+8>>2]=r,s[r+24>>2]=0,s[r+12>>2]=t,s[r+8>>2]=e}else s[262]=n|i,s[o>>2]=r,s[r+12>>2]=r,s[r+24>>2]=o,s[r+8>>2]=r;if(e=s[269]+-1|0,s[269]=e,!e){for(r=1500;r=(e=s[r>>2])+8|0,e;);s[269]=-1}}}}function b(e){var t,n=0;return u[e+20>>2]<=u[e+28>>2]||(a[s[e+36>>2]](e,0,0),s[e+20>>2])?((n=s[e+4>>2])>>>0<(t=s[e+8>>2])>>>0&&(n=n-t|0,a[s[e+40>>2]](e,n,n>>31,1)),s[e+28>>2]=0,s[e+16>>2]=0,s[e+20>>2]=0,s[e+4>>2]=0,s[e+8>>2]=0,0):-1}function _(e){for(var t=0,n=0;n=t,e;)e&=e-1,t=t+1|0;return n}function k(e){var t;return(-1>>>(t=31&e)&-2)<<t|(-1<<(e=0-e&31)&-2)>>>e}function w(){return r.byteLength/65536|0}return{__wasm_call_ctors:function(){},malloc:y,openBox:function(e,t){e|=0,t|=0;var n,r,i,a=0;return v=n=v-16|0,s[n+12>>2]=0,s[n+8>>2]=0,s[n+4>>2]=0,s[n>>2]=0,function(e,t,n,r,i,a){var u,l,d=0,f=0,h=0,p=0;if(d=(c[e+2|0]^c[e+1|0]^c[0|e])<<24>>24,s[a>>2]=d+-48,d=47+(t-d|0)|0,s[r>>2]=d,u=n,l=y(d),s[u>>2]=l,f=s[a>>2],h=y(f),s[i>>2]=h,(0|f)>0)for(d=f;;){if(h=(f-d|0)+h|0,f=(t-f|0)+e|0,o[0|h]=c[(t-d|0)+e|0]^c[f+-1|0]^c[f+-2|0],(0|(d=d+-1|0))<1){d=s[r>>2];break}h=s[i>>2],f=s[a>>2]}if((0|d)>0)for(;t=s[n>>2]+p|0,p=p+1|0,o[0|t]=c[p+e|0],(0|p)<s[r>>2];);}(e,t,n+12|0,n+4|0,n+8|0,n),function(e,t){var n=0,r=0,i=0,a=0,s=0,u=0,l=0;if((0|t)>=1)for(i=85,a=250;r=_(n),s=c[0|(u=e+n|0)],l=r,r=1&n,o[0|u]=l+(21+((s^(r?i:a))<<24>>24)|0),a=r?a:s,i=r?s:i,(0|(n=n+1|0))!=(0|t););}(e=s[n+12>>2],t=s[n+4>>2]),r=function(e){var t;return(255&(t=e+-48|0))>>>0<=9?t<<24>>24:((e+-97&255)>>>0<26?e+-87|0:-1)<<24>>24}(o[0|e]),s[n>>2]=r,i=y(a=t-r|0),o[i+(a=a+-1|0)|0]=0,(0|a)>=1&&function(e,t,n){var r,i=0;if(n>>>0>=8192)d(0|e,0|t,0|n);else{r=e+n|0;e:if(3&(e^t))if(r>>>0<4)n=e;else if((i=r+-4|0)>>>0<e>>>0)n=e;else for(n=e;o[0|n]=c[0|t],o[n+1|0]=c[t+1|0],o[n+2|0]=c[t+2|0],o[n+3|0]=c[t+3|0],t=t+4|0,(n=n+4|0)>>>0<=i>>>0;);else{t:if((0|n)<1)n=e;else if(3&e)for(n=e;;){if(o[0|n]=c[0|t],t=t+1|0,(n=n+1|0)>>>0>=r>>>0)break t;if(!(3&n))break}else n=e;if(!((e=-4&r)>>>0<64||n>>>0>(i=e+-64|0)>>>0))for(;s[n>>2]=s[t>>2],s[n+4>>2]=s[t+4>>2],s[n+8>>2]=s[t+8>>2],s[n+12>>2]=s[t+12>>2],s[n+16>>2]=s[t+16>>2],s[n+20>>2]=s[t+20>>2],s[n+24>>2]=s[t+24>>2],s[n+28>>2]=s[t+28>>2],s[n+32>>2]=s[t+32>>2],s[n+36>>2]=s[t+36>>2],s[n+40>>2]=s[t+40>>2],s[n+44>>2]=s[t+44>>2],s[n+48>>2]=s[t+48>>2],s[n+52>>2]=s[t+52>>2],s[n+56>>2]=s[t+56>>2],s[n+60>>2]=s[t+60>>2],t=t- -64|0,(n=n- -64|0)>>>0<=i>>>0;);if(n>>>0>=e>>>0)break e;for(;s[n>>2]=s[t>>2],t=t+4|0,(n=n+4|0)>>>0<e>>>0;);}if(n>>>0<r>>>0)for(;o[0|n]=c[0|t],t=t+1|0,(0|r)!=(0|(n=n+1|0)););}}(i,e+1|0,t+(-1^r)|0),m(e),m(s[n+8>>2]),v=n+16|0,0|i},free:m,__errno_location:function(){return 1024},fflush:function e(t){var n=0;if(t|=0)return s[t+76>>2],0|b(t);if(s[260]&&(n=e(s[260])),p(1028),t=s[259])for(;u[t+20>>2]>u[t+28>>2]&&(n=b(t)|n),t=s[t+56>>2];);return h(1028),0|n},setThrew:function(e,t){e|=0,t|=0,s[385]||(s[386]=t,s[385]=e)},stackSave:function(){return 0|v},stackAlloc:function(e){return v=e=v-(e|=0)&-16,0|e},stackRestore:function(e){v=e|=0},__growWasmMemory:function(t){return 0|function(t){t|=0;var n=0|w(),a=n+t|0;if(n<a&&a<65536){var d=new ArrayBuffer(l(a,65536)),f=new e.Int8Array(d);f.set(o),o=f,o=new e.Int8Array(d),new e.Int16Array(d),s=new e.Int32Array(d),c=new e.Uint8Array(d),new e.Uint16Array(d),u=new e.Uint32Array(d),new e.Float32Array(d),new e.Float64Array(d),r=d,i.buffer=d}return n}(0|(t|=0))}}}({Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:1/0,Math:Math},e,t.buffer)}(Y,l,f)}},instantiate:function(e,t){return{then:function(n,r){n({instance:new d.Instance(new d.Module(e,t))})}}},RuntimeError:Error};o=[],"object"!==I()(d)&&F("No WebAssembly support found. Build with -s WASM=0 to target JavaScript instead.");var f=new d.Table({initial:1,maximum:1,element:"anyfunc"}),h=!1;function p(e,t){e||F("Assertion failed: "+t)}var v,g,y,m,b,_="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function k(e,t,n,r){if(!(r>0))return 0;for(var i=n,a=n+r-1,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o)),s<=127){if(n>=a)break;t[n++]=s}else if(s<=2047){if(n+1>=a)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=a)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=a)break;s>=2097152&&u("Invalid Unicode code point 0x"+s.toString(16)+" encountered when serializing a JS string to an UTF-8 string on the asm.js/wasm heap! (Valid unicode code points should be in range 0-0x1FFFFF)."),t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-i}function w(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}function E(e,t){return e%t>0&&(e+=t-e%t),e}function T(e){v=e,r.HEAP8=g=new Int8Array(e),r.HEAP16=new Int16Array(e),r.HEAP32=m=new Int32Array(e),r.HEAPU8=y=new Uint8Array(e),r.HEAPU16=new Uint16Array(e),r.HEAPU32=b=new Uint32Array(e),r.HEAPF32=new Float32Array(e),r.HEAPF64=new Float64Array(e)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le"),p(!0,"stack must start aligned"),p(!0,"heap must start aligned"),r.TOTAL_STACK&&p(8192===r.TOTAL_STACK,"the stack size can no longer be determined at runtime");var A=r.TOTAL_MEMORY||65536;function S(){p(!0),b[429]=34821223,b[430]=2310721022,m[0]=1668509029}function R(){var e=b[429],t=b[430];34821223==e&&2310721022==t||F("Stack overflow! Stack cookie has been overwritten, expected hex dwords 0x89BACDFE and 0x02135467, but received 0x"+t.toString(16)+" "+e.toString(16)),1668509029!==m[0]&&F("Runtime error: The application has corrupted its heap memory area (address zero)!")}function O(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?r.dynCall_v(n):r.dynCall_vi(n,t.arg):n(void 0===t.arg?null:t.arg)}else t()}}Object.getOwnPropertyDescriptor(r,"TOTAL_MEMORY")||Object.defineProperty(r,"TOTAL_MEMORY",{configurable:!0,get:function(){F("Module.TOTAL_MEMORY has been replaced with plain INITIAL_TOTAL_MEMORY")}}),p(A>=8192,"TOTAL_MEMORY should be larger than TOTAL_STACK, was "+A+"! (TOTAL_STACK=8192)"),p("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&void 0!==Int32Array.prototype.subarray&&void 0!==Int32Array.prototype.set,"JS engine does not provide full typed array support"),(l=r.wasmMemory?r.wasmMemory:new d.Memory({initial:A/65536}))&&(v=l.buffer),p((A=v.byteLength)%65536==0),T(v),m[388]=9904,function(){var e=new Int16Array(1),t=new Int8Array(e.buffer);if(e[0]=25459,115!==t[0]||99!==t[1])throw"Runtime error: expected the system to be little-endian!"}();var C=[],x=[],P=[],D=[],L=!1;p(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),p(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),p(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),p(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var M=0,N=null,U=null,B={};function F(e){throw r.onAbort&&r.onAbort(e),s(e+=""),c(e),h=!0,e="abort("+e+") at "+(t=function(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}(),r.extraStackTrace&&(t+="\n"+r.extraStackTrace()),t.replace(/\b_Z[\w\d_]+/g,(function(e){var t,n=(t=e,u("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),t);return e===n?e:n+" ["+e+"]"}))),new d.RuntimeError(e);var t}r.preloadedImages={},r.preloadedAudios={};var j={error:function(){F("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with  -s FORCE_FILESYSTEM=1")},init:function(){j.error()},createDataFile:function(){j.error()},createPreloadedFile:function(){j.error()},createLazyFile:function(){j.error()},open:function(){j.error()},mkdev:function(){j.error()},registerDevice:function(){j.error()},analyzePath:function(){j.error()},loadFilesFromDB:function(){j.error()},ErrnoError:function(){j.error()}};r.FS_createDataFile=j.createDataFile,r.FS_createPreloadedFile=j.createPreloadedFile;var H="data:application/octet-stream;base64,";function V(e){return String.prototype.startsWith?e.startsWith(H):0===e.indexOf(H)}var W,G="aw.wasm";function z(){try{if(o)return new Uint8Array(o);var e=function(e){if(V(e))return function(e){try{for(var t=X(e),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}catch(i){throw new Error("Converting base64 string to bytes failed.")}}(e.slice(H.length))}(G);if(e)return e;throw"both async and sync fetching of the wasm failed"}catch(c){F(c)}}V(G)||(W=G,G=r.locateFile?r.locateFile(W,a):a+W),x.push({func:function(){oe()}});var X="function"==typeof atob?atob:function(e){var t,n,r,i,a,o,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",u=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{t=s.indexOf(e.charAt(u++))<<2|(i=s.indexOf(e.charAt(u++)))>>4,n=(15&i)<<4|(a=s.indexOf(e.charAt(u++)))>>2,r=(3&a)<<6|(o=s.indexOf(e.charAt(u++))),c+=String.fromCharCode(t),64!==a&&(c+=String.fromCharCode(n)),64!==o&&(c+=String.fromCharCode(r))}while(u<e.length);return c},Y={__lock:function(){},__unlock:function(){},emscripten_memcpy_big:function(e,t,n){y.set(y.subarray(t,t+n),e)},emscripten_resize_heap:function(e){var t=g.length;if(p(e>t),e>2147418112)return c("Cannot enlarge memory, asked to go up to "+e+" bytes, but the limit is 2147418112 bytes!"),!1;for(var n=Math.max(t,16777216);n<e;)(n=n<=536870912?E(2*n,65536):Math.min(E((3*n+2147483648)/4,65536),2147418112))===t&&u("Cannot ask for more memory since we reached the practical limit in browsers (which is just below 2GB), so the request would have failed. Requesting only "+g.length);return function(e){try{return l.grow(e-v.byteLength+65535>>16),T(l.buffer),1}catch(t){console.error("emscripten_realloc_buffer: Attempted to grow heap from "+v.byteLength+" bytes to "+e+" bytes, but got error: "+t)}}(n)?(c("Warning: Enlarging memory arrays, this is not fast! "+[t,n]),!0):(c("Failed to grow the heap from "+t+" bytes to "+n+" bytes, not enough memory!"),!1)},memory:l,table:f},K=function(){var e,t={env:Y,wasi_unstable:Y};function n(e,t){var n=e.exports;r.asm=n,function(e){if(M--,r.monitorRunDependencies&&r.monitorRunDependencies(M),e?(p(B[e]),delete B[e]):c("warning: run dependency removed without ID"),0==M&&(null!==N&&(clearInterval(N),N=null),U)){var t=U;U=null,t()}}("wasm-instantiate")}e="wasm-instantiate",M++,r.monitorRunDependencies&&r.monitorRunDependencies(M),e?(p(!B[e]),B[e]=1,null===N&&"undefined"!=typeof setInterval&&(N=setInterval((function(){if(h)return clearInterval(N),void(N=null);var e=!1;for(var t in B)e||(e=!0,c("still waiting on run dependencies:")),c("dependency: "+t);e&&c("(end of list)")}),1e4))):c("warning: run dependency added without ID");var i=r;function a(e){p(r===i,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),i=null,n(e.instance)}function s(e){return(o||"function"!=typeof fetch?new Promise((function(e,t){e(z())})):fetch(G,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+G+"'";return e.arrayBuffer()})).catch((function(){return z()}))).then((function(e){return d.instantiate(e,t)})).then(e,(function(e){c("failed to asynchronously prepare wasm: "+e),F(e)}))}if(r.instantiateWasm)try{return r.instantiateWasm(t,n)}catch(u){return c("Module.instantiateWasm callback failed with error: "+u),!1}return function(){if(o||"function"!=typeof d.instantiateStreaming||V(G)||"function"!=typeof fetch)return s(a);fetch(G,{credentials:"same-origin"}).then((function(e){return d.instantiateStreaming(e,t).then(a,(function(e){c("wasm streaming compile failed: "+e),c("falling back to ArrayBuffer instantiation"),s(a)}))}))}(),{}}(),Z=K.__wasm_call_ctors;K.__wasm_call_ctors=function(){return p(L,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),p(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Z.apply(null,arguments)};var Q=K.malloc;K.malloc=function(){return p(L,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),p(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Q.apply(null,arguments)};var q=K.openBox;K.openBox=function(){return p(L,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),p(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),q.apply(null,arguments)};var J=K.free;K.free=function(){return p(L,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),p(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),J.apply(null,arguments)};var $=K.__errno_location;K.__errno_location=function(){return p(L,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),p(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),$.apply(null,arguments)};var ee=K.fflush;K.fflush=function(){return p(L,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),p(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),ee.apply(null,arguments)};var te=K.setThrew;K.setThrew=function(){return p(L,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),p(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),te.apply(null,arguments)};var ne=K.stackSave;K.stackSave=function(){return p(L,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),p(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),ne.apply(null,arguments)};var re=K.stackAlloc;K.stackAlloc=function(){return p(L,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),p(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),re.apply(null,arguments)};var ie=K.stackRestore;K.stackRestore=function(){return p(L,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),p(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),ie.apply(null,arguments)};var ae=K.__growWasmMemory;K.__growWasmMemory=function(){return p(L,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),p(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),ae.apply(null,arguments)},r.asm=K;var oe=r.___wasm_call_ctors=function(){return p(L,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),p(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),r.asm.__wasm_call_ctors.apply(null,arguments)},se=r._malloc=function(){return p(L,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),p(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),r.asm.malloc.apply(null,arguments)};r._openBox=function(){return p(L,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),p(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),r.asm.openBox.apply(null,arguments)},r._free=function(){return p(L,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),p(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),r.asm.free.apply(null,arguments)},r.___errno_location=function(){return p(L,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),p(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),r.asm.__errno_location.apply(null,arguments)},r._fflush=function(){return p(L,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),p(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),r.asm.fflush.apply(null,arguments)},r._setThrew=function(){return p(L,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),p(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),r.asm.setThrew.apply(null,arguments)};var ce=r.stackSave=function(){return p(L,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),p(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),r.asm.stackSave.apply(null,arguments)};r.stackAlloc=function(){return p(L,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),p(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),r.asm.stackAlloc.apply(null,arguments)},r.stackRestore=function(){return p(L,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),p(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),r.asm.stackRestore.apply(null,arguments)};var ue,le=r.__growWasmMemory=function(){return p(L,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),p(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),r.asm.__growWasmMemory.apply(null,arguments)};function de(e){function t(){ue||(ue=!0,h||(R(),p(!L),L=!0,O(x),R(),O(P),r.onRuntimeInitialized&&r.onRuntimeInitialized(),p(!r._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),function(){if(R(),r.postRun)for("function"==typeof r.postRun&&(r.postRun=[r.postRun]);r.postRun.length;)e=r.postRun.shift(),D.unshift(e);var e;O(D)}()))}M>0||(S(),function(){if(r.preRun)for("function"==typeof r.preRun&&(r.preRun=[r.preRun]);r.preRun.length;)e=r.preRun.shift(),C.unshift(e);var e;O(C)}(),M>0||(r.setStatus?(r.setStatus("Running..."),setTimeout((function(){setTimeout((function(){r.setStatus("")}),1),t()}),1)):t(),R()))}if(r.asm=K,r.intArrayFromString=function(e,t,n){var r=n>0?n:w(e)+1,i=new Array(r),a=k(e,i,0,i.length);return t&&(i.length=a),i},Object.getOwnPropertyDescriptor(r,"intArrayToString")||(r.intArrayToString=function(){F("'intArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"ccall")||(r.ccall=function(){F("'ccall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"cwrap")||(r.cwrap=function(){F("'cwrap' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"setValue")||(r.setValue=function(){F("'setValue' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"getValue")||(r.getValue=function(){F("'getValue' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"allocate")||(r.allocate=function(){F("'allocate' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"getMemory")||(r.getMemory=function(){F("'getMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(r,"AsciiToString")||(r.AsciiToString=function(){F("'AsciiToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"stringToAscii")||(r.stringToAscii=function(){F("'stringToAscii' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"UTF8ArrayToString")||(r.UTF8ArrayToString=function(){F("'UTF8ArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),r.UTF8ToString=function(e,t){return e?function(e,t,n){for(var r=t+n,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.subarray&&_)return _.decode(e.subarray(t,i));for(var a="";t<i;){var o=e[t++];if(128&o){var s=63&e[t++];if(192!=(224&o)){var c=63&e[t++];if(224==(240&o)?o=(15&o)<<12|s<<6|c:(240!=(248&o)&&u("Invalid UTF-8 leading byte 0x"+o.toString(16)+" encountered when deserializing a UTF-8 string on the asm.js/wasm heap to a JS string!"),o=(7&o)<<18|s<<12|c<<6|63&e[t++]),o<65536)a+=String.fromCharCode(o);else{var l=o-65536;a+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else a+=String.fromCharCode((31&o)<<6|s)}else a+=String.fromCharCode(o)}return a}(y,e,t):""},Object.getOwnPropertyDescriptor(r,"stringToUTF8Array")||(r.stringToUTF8Array=function(){F("'stringToUTF8Array' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"stringToUTF8")||(r.stringToUTF8=function(){F("'stringToUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"lengthBytesUTF8")||(r.lengthBytesUTF8=function(){F("'lengthBytesUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"UTF16ToString")||(r.UTF16ToString=function(){F("'UTF16ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"stringToUTF16")||(r.stringToUTF16=function(){F("'stringToUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"lengthBytesUTF16")||(r.lengthBytesUTF16=function(){F("'lengthBytesUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"UTF32ToString")||(r.UTF32ToString=function(){F("'UTF32ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"stringToUTF32")||(r.stringToUTF32=function(){F("'stringToUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"lengthBytesUTF32")||(r.lengthBytesUTF32=function(){F("'lengthBytesUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),r.allocateUTF8=function(e){var t=w(e)+1,n=se(t);return n&&k(e,g,n,t),n},Object.getOwnPropertyDescriptor(r,"stackTrace")||(r.stackTrace=function(){F("'stackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"addOnPreRun")||(r.addOnPreRun=function(){F("'addOnPreRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"addOnInit")||(r.addOnInit=function(){F("'addOnInit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"addOnPreMain")||(r.addOnPreMain=function(){F("'addOnPreMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"addOnExit")||(r.addOnExit=function(){F("'addOnExit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"addOnPostRun")||(r.addOnPostRun=function(){F("'addOnPostRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"writeStringToMemory")||(r.writeStringToMemory=function(){F("'writeStringToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"writeArrayToMemory")||(r.writeArrayToMemory=function(){F("'writeArrayToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"writeAsciiToMemory")||(r.writeAsciiToMemory=function(){F("'writeAsciiToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"addRunDependency")||(r.addRunDependency=function(){F("'addRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(r,"removeRunDependency")||(r.removeRunDependency=function(){F("'removeRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(r,"ENV")||(r.ENV=function(){F("'ENV' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"FS")||(r.FS=function(){F("'FS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"FS_createFolder")||(r.FS_createFolder=function(){F("'FS_createFolder' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(r,"FS_createPath")||(r.FS_createPath=function(){F("'FS_createPath' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(r,"FS_createDataFile")||(r.FS_createDataFile=function(){F("'FS_createDataFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(r,"FS_createPreloadedFile")||(r.FS_createPreloadedFile=function(){F("'FS_createPreloadedFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(r,"FS_createLazyFile")||(r.FS_createLazyFile=function(){F("'FS_createLazyFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(r,"FS_createLink")||(r.FS_createLink=function(){F("'FS_createLink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(r,"FS_createDevice")||(r.FS_createDevice=function(){F("'FS_createDevice' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(r,"FS_unlink")||(r.FS_unlink=function(){F("'FS_unlink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(r,"GL")||(r.GL=function(){F("'GL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"dynamicAlloc")||(r.dynamicAlloc=function(){F("'dynamicAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"loadDynamicLibrary")||(r.loadDynamicLibrary=function(){F("'loadDynamicLibrary' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"loadWebAssemblyModule")||(r.loadWebAssemblyModule=function(){F("'loadWebAssemblyModule' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"getLEB")||(r.getLEB=function(){F("'getLEB' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"getFunctionTables")||(r.getFunctionTables=function(){F("'getFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"alignFunctionTables")||(r.alignFunctionTables=function(){F("'alignFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"registerFunctions")||(r.registerFunctions=function(){F("'registerFunctions' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"addFunction")||(r.addFunction=function(){F("'addFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"removeFunction")||(r.removeFunction=function(){F("'removeFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"getFuncWrapper")||(r.getFuncWrapper=function(){F("'getFuncWrapper' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"prettyPrint")||(r.prettyPrint=function(){F("'prettyPrint' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"makeBigInt")||(r.makeBigInt=function(){F("'makeBigInt' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"dynCall")||(r.dynCall=function(){F("'dynCall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"getCompilerSetting")||(r.getCompilerSetting=function(){F("'getCompilerSetting' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"stackSave")||(r.stackSave=function(){F("'stackSave' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"stackRestore")||(r.stackRestore=function(){F("'stackRestore' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"stackAlloc")||(r.stackAlloc=function(){F("'stackAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"establishStackSpace")||(r.establishStackSpace=function(){F("'establishStackSpace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"print")||(r.print=function(){F("'print' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"printErr")||(r.printErr=function(){F("'printErr' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"getTempRet0")||(r.getTempRet0=function(){F("'getTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"setTempRet0")||(r.setTempRet0=function(){F("'setTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"callMain")||(r.callMain=function(){F("'callMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"abort")||(r.abort=function(){F("'abort' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),r.Pointer_stringify=function(e,t){F("this function has been removed - you should use UTF8ToString(ptr, maxBytesToRead) instead!")},Object.getOwnPropertyDescriptor(r,"warnOnce")||(r.warnOnce=function(){F("'warnOnce' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),r.writeStackCookie=S,r.checkStackCookie=R,r.abortStackOverflow=function(e){F("Stack overflow! Attempted to allocate "+e+" bytes on the stack, but stack has only "+(1712-ce()+e)+" bytes available!")},Object.getOwnPropertyDescriptor(r,"intArrayFromBase64")||(r.intArrayFromBase64=function(){F("'intArrayFromBase64' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"tryParseAsDataURI")||(r.tryParseAsDataURI=function(){F("'tryParseAsDataURI' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(r,"ALLOC_NORMAL")||Object.defineProperty(r,"ALLOC_NORMAL",{configurable:!0,get:function(){F("'ALLOC_NORMAL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(r,"ALLOC_STACK")||Object.defineProperty(r,"ALLOC_STACK",{configurable:!0,get:function(){F("'ALLOC_STACK' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(r,"ALLOC_DYNAMIC")||Object.defineProperty(r,"ALLOC_DYNAMIC",{configurable:!0,get:function(){F("'ALLOC_DYNAMIC' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(r,"ALLOC_NONE")||Object.defineProperty(r,"ALLOC_NONE",{configurable:!0,get:function(){F("'ALLOC_NONE' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(r,"calledRun")||Object.defineProperty(r,"calledRun",{configurable:!0,get:function(){F("'calledRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}}),r.then=function(e){if(ue)e(r);else{var t=r.onRuntimeInitialized;r.onRuntimeInitialized=function(){t&&t(),e(r)}}return r},U=function e(){ue||de(),ue||(U=e)},r.run=de,r.preInit)for("function"==typeof r.preInit&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return de(),e});e.exports=r}(ln);var dn=ln.exports,fn=n("9ab1f5c98393885582c1"),hn={exports:{}};!function(e,t){fn.a,e.exports={decrypt:function(e,t){return"string"==typeof t&&(t=JSON.parse(t)),(n=e,window.crypto.subtle.importKey("raw",n,"AES-GCM",!0,["encrypt","decrypt"])).then((function(e){return new Promise((function(n,r){window.crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(t.iv),tagLength:128},e,t.encrypted).then((function(e){return new TextDecoder("utf-8").decode(e)})).then(n).catch((function(e){"OperationError"===String(e)&&(e="Wrong Password."),r(e)}))})).catch((function(e){throw e}))}));var n}}}(hn);var pn=hn.exports,vn=n("7df0fa4e98d9cc62388c"),gn=n.n(vn),yn=function(){function e(){o()(this,e)}return c()(e,[{key:"init",value:function(){var e=this;return new Promise((function(t){e.module={onRuntimeInitialized:function(){t()}},dn(e.module)}))}},{key:"openBox",value:function(e){var t=window.atob(e),n=q.str2hex(t),r=this.module._malloc(Number(n.length));this.module.HEAP8.set(n,r);var i=this.module._openBox(Number(r),n.length),a=this.module.UTF8ToString(i);return this.module._free(r),a}},{key:"transformWithUnionInfo",value:function(e,t){return new Promise((function(n,r){var i=q.StringToArrayBuffer(gn.a.hash(t)),a={encrypted:q.Base64ToHex(e,!0),iv:W};pn.decrypt(i,a).then((function(e){n(e)}))}))}}]),e}(),mn=(n("0c01d645f07121d537ce"),n("838044a868a10df84908"),function(){function e(){o()(this,e),this.timeID=null,this.func=null}return c()(e,[{key:"repeat",value:function(e,t){this.timeID=1,this.repeatInterval(e,t)}},{key:"repeatInterval",value:function(e,t){var n=this;this.timeID&&(null===this.func&&(this.func=e),this.func===e&&(this.timeID&&clearTimeout(this.timeID),this.timeID=null,this.timeID=setTimeout((function(){e(),n.repeatInterval(e,t)}),t)))}},{key:"clear",value:function(){clearTimeout(this.timeID),this.timeID=null}}]),e}()),bn=function(){function e(t,n){o()(this,e),this.player=t,this.mediaElem=t.video,this.config=n,this.timer=new mn,this.prevReadyState=this.mediaElem.readyState,this.didFireLargeGap=!1,this.seekingEventReceived=!1,this.segmentAppended=!1,this.onWaitFunc=this._onWaiting.bind(this),this.onPlayFunc=this._onPlay.bind(this),this.isSafari=/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),!1!==this.config.useGapJump&&this._start(),this.hasPlayed=!1}return c()(e,[{key:"_onWaiting",value:function(){this.onGapJump()}},{key:"_onPlay",value:function(){this.hasPlayed=!0}},{key:"_start",value:function(){var e=this;this.mediaElem.addEventListener("waiting",this.onWaitFunc),this.mediaElem.addEventListener("play",this.onPlayFunc),this.timer.repeat((function(){e.onGapJump()}),250)}},{key:"onSegmentAppend",value:function(){this.segmentAppended=!0,this.onGapJump()}},{key:"onSeeking",value:function(){this.seekingEventReceived=!0,this.segmentAppended=!1,this.didFireLargeGap=!1}},{key:"onGapJump",value:function(){if(this.mediaElem.readyState!==HTMLMediaElement.HAVE_NOTHING){if(this.mediaElem.seeking){if(!this.seekingEventReceived)return}else this.seekingEventReceived=!1;if(!this.mediaElem.paused||0===this.mediaElem.currentTime||!this.hasPlayed){this.mediaElem.readyState!==this.prevReadyState&&(this.didFireLargeGap=!1,this.prevReadyState=this.mediaElem.readyState);var t=this.mediaElem.buffered,n=this.config.smallGapLimit||.5,r=this.config.gapDetectionThreshold||.1,i=this.mediaElem.currentTime,a=this._getIndex(t,i,r);if(null!==a&&(0!==a||this.segmentAppended)){var o=t.start(a);if(!(o>this.mediaElem.duration)){var s=o-i,c=s<=n;s<e.BROWSER_GAP_TOLERANCE||c&&(this.mediaElem.currentTime=this.isSafari?o+.1:o,ie.gap("gapJump gapIndex",a,"isGapSamll",c,"jumpLargeGap",!1,"currentTime",this.mediaElem.currentTime),.08!==o&&this.player&&this.player.emit("log",{type:"oneevent",end_type:"gap",vid:this.config.vid,ext:{video_postion:Math.floor(1e3*o)}}))}}}}}},{key:"_getIndex",value:function(e,t,n){if(!e||!e.length)return null;if(1===e.length&&e.end(0)-e.start(0)<1e-6)return null;for(var r=this._getBuffered(e),i=null,a=0;a<r.length;a++){if(r[a].start>t&&(0===a||r[a-1].end-t<=n)){i=a;break}}return i}},{key:"_getBuffered",value:function(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}},{key:"destroy",value:function(){this.mediaElem.removeEventListener("waiting",this.onWaitFunc),this.mediaElem.removeEventListener("play",this.onPlayFunc),this.timer.clear(),this.timer=null}}]),e}();bn.BROWSER_GAP_TOLERANCE=.001;var _n=i.PRELOAD_NEXT,kn=H,wn=function(){function e(t){var n=this;o()(this,e),m()(this,"_onDestroyAll",(function(){n.player.emit("dashDestroy")})),m()(this,"startProgressTimer",(function(){n._pluginInst.info({msg:"startProgressTimer"});var e=n,t=n.player,r=n.config;if(e&&e.isDashCanUse&&e.dash.mse){var i=0;e.dash.mse.progressTimer=new mn,e.dash.mse.progressTimer.repeat((function(){e&&e.isDashCanUse&&e.dash.mse&&e.dash.mse.progressTimer&&(e.handleUrlExpire(),++i*(r.progressTimer||1e3)/1e3>10&&(e.clearBuffer&&e.clearBuffer(),i=0),r.disableBufferBreakCheck||(t.currentTime-(e.lastCurrentTime||0)>.1||t.paused?1!==e.dashBufferBreak&&2!==e.dashBufferBreak||(ie.log("\u89c6\u9891\u6ca1\u6709\u5361\u6b7b\uff0c\u91cd\u7f6e\u5361\u6b7b\u6807\u8bb0"),e.dashBufferBreak=0,clearTimeout(e.dashBufferBreakTimer),e.dashBufferBreakTimer=null):e.dashBufferBreak||(e.dashBufferBreak=1,ie.log("\u5361\u6b7b\u8ba1\u65f6\u5f00\u59cb\uff01\u6301\u7eed".concat(2e4,"\u6beb\u79d2\u5219\u786e\u8ba4\u5361\u6b7b")),e.dashBufferBreakTimer=setTimeout((function(){1===e.dashBufferBreak&&(e.dashBufferBreak=2,ie.log("\u786e\u8ba4\u5361\u6b7b\uff01\uff01\uff01"),e.dash.emit("error",new C(C.BUFFERBREAK,C.BUFFERBREAK_ERROR,{line:1e3,handle:"[DASH] buffer break",msg:"buffer break"}))),e.dashBufferBreakTimer=null}),2e4)),e.lastCurrentTime=t.currentTime),e.loadData(void 0,e.dashSeeking?B:U),e.isEnded())}),r.progressTimer||1e3)}})),m()(this,"_onAutoDescChange",(function(e){var t=e.definition,r=e.reset,i=e.fps,a=e.item;n.updateAutoDefiDesc(t,r,i,a)})),this._pluginInst=t.pluginInst;var r=this._pluginInst,i=r.player,a=r.config;this._minDuration=1/0,this.player=i,this.config=a,this.startTimestamp=(new Date).getTime(),this.lastDefiIdx=void 0,this.__isDashCanUse=!1,this.preloadBufferThreshold=this.config.preloadBufferThreshold||.5,this.abrInstance=null,this.definitions=[];var s=this.config.autoBitrateOpts||{};this.isPlayAutoDefi=on.getIsPlayAutoDefi(s),this.isOpenAutoDefi=!!s.isOpenAutoDefi,this.isCurrentAutoDefi=this.isOpenAutoDefi&&this.isPlayAutoDefi,this.bitrateMap={},this.curBitrate=0,this.defiIdMap={},this.definition2item={},this.bandwidth2item={},(this.preloadBufferThreshold<=0||this.preloadBufferThreshold>1)&&(this.preloadBufferThreshold=.5),this.bufferingGoalScale=1,this.curVideoInitSegmentIdx=-1,this.getPlayInfoTimestamp=this.startTimestamp/1e3,a.dashOpts.dynamic_video.dynamic_video_list&&a.dashOpts.dynamic_video.dynamic_video_list.length>0?this.urlExpireTimestamp=a.dashOpts.dynamic_video.dynamic_video_list[0].url_expire||0:a.dashOpts.dynamic_video.dynamic_audio_list&&a.dashOpts.dynamic_video.dynamic_audio_list.length>0&&(this.urlExpireTimestamp=a.dashOpts.dynamic_video.dynamic_audio_list[0].url_expire||0),this.gapJumpInst=new bn(i,a),q.on(i,"addVideoBufferEnd",(function(){n.gapJumpInst.onSegmentAppend()}),"dashDestroy")}var t;return c()(e,[{key:"initDash",value:function(e){var t=this;this.dash=e,this.bindPlayInterfaceEvent();var n=this.config;n.dashOpts.dynamic_video.dynamic_video_list.length>0&&(this.initAbr(),n.dashOpts.dynamic_video.dynamic_video_list.sort((function(e,t){return t.vheight-e.vheight})),n.dashOpts.dynamic_video.dynamic_video_list.forEach((function(e,r){e.definition===n.defaultDefinition&&(t.dash.selectedIdx=r)})),this.dashVideoEncrypted=n.dashOpts.dynamic_video.dynamic_video_list.some((function(e){return!!e.kid}))),n.dashOpts.dynamic_video.dynamic_audio_list.length>0&&(this.dashAudioEncrypted=n.dashOpts.dynamic_video.dynamic_audio_list.some((function(e){return!!e.kid})))}},{key:"isDashCanUse",get:function(){return this.__isDashCanUse},set:function(e){this.__isDashCanUse=e}},{key:"bindPlayInterfaceEvent",value:function(){var e=this._pluginInst,t=e.player,n=e.config;q.on(t,"DRM_ERROR",(function(){t.emit("playInterfaceInfo",n.dashOpts||{})}),"dashDestroy");q.on(t,"NO_MEDIALIST",(function(){t.emit("playInterfaceInfo",n.dashOpts||{})}),"dashDestroy")}},{key:"isEnded",value:function(){var e=this.dash,t=this.player,n=this.mse,r=this.config;if("vod"===e.type)if(t.ended)ie.log("player.ended === true"),"safari"===Dt.a.browser&&(t.pause(),t.emit("ended"));else{var i=r.duration||t.duration||e.mpd.duration;if(t.duration&&(i=Math.min(i,t.duration)),e.mpd.duration&&(i=Math.min(i,e.mpd.duration)),i-this._minDuration<10&&(i=Math.min(i,this._minDuration)),i>0&&i-t.currentTime<1){var a=this._findRangeForPlaybackTime(t.currentTime)||{start:0,end:0};ie.log("range",a,"current",t.currentTime,"duration",i);var o=Math.min(a.end,t.duration),s=t.currentTime-o>=0,c=o-t.currentTime<1;(s||c)&&(ie.log("isEnded execute, isOver",s,"isClosed",c),n.endOfStream(),this.clearProgressTimer())}}}},{key:"dashDestroy",value:function(){var e=this.player,t=this.dash;for(var n in t&&t.mse&&t.mse.destroy(),t&&t.eme&&(t.eme.emit("destroy"),t.eme.destroy()),t&&e.errorHandler&&(t.abortLoadingTasks(),t.emit("destroy")),t&&t.mpd&&t.mpd.timer&&(clearTimeout(t.mpd.timer),t.mpd.timer=null),this.crypto&&this.crypto.destroy(),t&&t.destroy(),this.clearCheckCanplayTimer(),this.clearProgressTimer(),this.destroyAbr(),this.gapJumpInst&&this.gapJumpInst.destroy(),e&&(this.player.off("destroy",this._onDestroyAll),e.__dash__=null,this._pluginInst.unloadVideo(),"function"==typeof e.video.setMediaKeys&&e.video.setMediaKeys(null)),t)delete t[n];for(var r in this)delete this[r]}},{key:"bindComEvent",value:function(){var e=this;this._lastSeekTime=null;var t=this.player,n=this.config;q.on(t,"error",e.clearProgressTimer.bind(e),"dashDestroy"),q.on(t,"ended",e.clearProgressTimer.bind(e),"dashDestroy");q.on(t,"timeupdate",(function(){e.isDashCanUse&&n.dashOpts&&e.mse&&e.isEnded()}),"dashDestroy");q.on(t,"seeking",(function(){if(ie.log("dash onSeeking"),e.isDashCanUse&&n.dashOpts)if(t.ended)"function"==typeof t.replayFunc&&t.replayFunc();else{var r=n.useDurationBackoff||!1,i=Date.now()/1e3,a=t.duration-t.currentTime<1;r&&a&&(!this._lastSeekTime||this._lastSeekTime<i-1)&&(this._lastSeekTime=i,t.currentTime=t.duration-1),e.dashSeeking=!0,e.gapJumpInst&&e.gapJumpInst.onSeeking()}}),"dashDestroy");q.on(t,"seeked",(function(){ie.log("dash onSeeked"),e.dashSeeking=!1,e.isEnded()}),"dashDestroy"),q.on(t,"dashDestroy",e.dashDestroy.bind(this)),t.on("destroy",this._onDestroyAll)}},{key:"getMetaData",value:function(){var e=this,t={};return["video","audio"].forEach((function(n){var r=e.dash.mpd.mediaList[n],i=r[r.selectedIdx];t[n]={bandwidth:i.bandwidth,mimeType:i.mimeType,codecs:i.codecs,definition:i.definition,width:i.width,height:i.height,mediaDuration:i.mediaDuration,timescale:i.timescale}})),t}},{key:"_findRangeForPlaybackTime",value:function(e){var t,n=this.player,r=this.config;if(r.useBuffered2){var i=r.maxHoleDuration;if(!(t=n.buffered2))return;for(var a=0;a<t.length;a++){var o=t.start(a),s=t.end(a);if(e+i>=o&&e<s)return{start:o,end:s}}}else{if(!(t=n.buffered))return;for(var c=0;c<t.length;c++)if(q.round(t.start(c))<=q.round(e)&&q.round(t.end(c))>=q.round(e))return{start:q.round(t.start(c)),end:q.round(t.end(c))}}}},{key:"loadData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U,n=this,r=this.player,i=this.config;if(!n.switching&&n.dash){var a=i.maxBufferLength||i.preloadTime||50;a*=this.bufferingGoalScale;var o,s=n.dash.mpd.mediaList.video;if(s&&s.length>0&&s[s.selectedIdx]){var c=s[s.selectedIdx].bandwidth;c<6e6&&(a*=2),o=s[s.selectedIdx].definition||this.bandwidth2item[c].definition}if(i.dynamicPreloadTimeOpts&&o){var u=i.dynamicPreloadTimeOpts[o];u&&(a=u)}n.preloadTime!==a&&(n.preloadTime=a,ie.log("maxCacheTimeAudio change",a),r.emit(Jt,{videoCacheTime:a,audioCacheTime:a})),e||(e=r.currentTime);var l=this._findRangeForPlaybackTime(e),d=r.duration+100;if(l&&l.end&&!n.isCurrentInAbr()){var f=n.dash.mpd.mediaList;["video","audio"].forEach((function(t){if(f[t].length<1)return!0;for(var n=f[t][f[t].selectedIdx].mediaSegments,r=0;r<n.length;r++)if(!(n[r].end<=e||n[r].start>=l.end||n[r].downloaded)&&d>n[r].start){d=n[r].start;break}}))}var h=d<=r.duration?d:l&&Math.ceil(l.end)||Math.floor(e),p=r.duration<i.minBufferLength,v=r.currentTime+(p?r.duration/3:i.minBufferLength);i.preloadTime&&(v=r.currentTime+i.preloadTime*i.preloadBufferThreshold);var g=!1;if(this._pluginInst.preloadManager){var y=this._pluginInst.preloadManager;g=y._preloadDataList.length>0||null!==y._currentPreloadInst}h>v&&g&&r.emit(_n);var m=i.preloadCancelTime;h<e+m&&g&&r.emit("PRELOAD_CANCEL"),h>e+a||n.dash.seek(h,t)}}},{key:"startCheckCanplayTimer",value:function(){var e=this,t=this.player,n=this.config;if(t&&e&&!n.disableCanplayCheck){e.checkCanplayTimer=new mn,e.checkCanplayTimer.repeat((function(){t&&e&&e.isDashCanUse&&e.checkCanplayTimer&&t.errorHandler&&(t.enterIsHide?(ie.log("\u89c6\u9891\u5df2\u8d77\u64ad\uff0c\u91cd\u7f6e\u6807\u8bb0"),e.dashNoCanplay=0,e.clearCheckCanplayTimer()):e.dashNoCanplay||"visible"!==document.visibilityState||(e.dashNoCanplay=1,ie.log("\u672a\u8d77\u64ad\u8ba1\u65f6\u5f00\u59cb\uff01\u6301\u7eed".concat(6e3,"\u6beb\u79d2\u6ca1\u6709\u83b7\u53d6\u5230init\u5206\u7247\u5219\u786e\u8ba4\u6ca1\u6709\u8d77\u64ad")),e.dashNoCanplayTimer=setTimeout((function(){e.dashNoCanplayTimer=null,1===e.dashNoCanplay&&!1===t.enterIsHide&&("start_play"!==t.dashState?(e.dashNoCanplay=2,ie.log("\u786e\u8ba4\u672a\u83b7\u53d6\u5230init\u5206\u7247\uff0c\u6ca1\u6709\u8d77\u64ad\uff01\uff01\uff01"),e.clearCheckCanplayTimer(),t.errorHandler(new C(C.CANPLAY,C.NO_CANPLAY_ERROR,{line:1021,handle:"[DASH] start play",msg:"start play no canplay"}))):n.disableDashNoCanplayCheck||(ie.log("\u672a\u8d77\u64ad\u8ba1\u65f6\u5f00\u59cb\uff01\u6301\u7eed".concat(1e4,"\u6beb\u79d2\u5219\u786e\u8ba4\u6ca1\u6709\u8d77\u64ad")),e.dashNoCanplayTimer=setTimeout((function(){e.dashNoCanplayTimer=null,1===e.dashNoCanplay&&!1===t.enterIsHide&&(e.dashNoCanplay=2,ie.log("\u786e\u8ba4\u6ca1\u6709\u8d77\u64ad\uff01\uff01\uff01"),e.clearCheckCanplayTimer(),t.errorHandler(new C(C.CANPLAY,C.NO_CANPLAY_ERROR,{line:1021,handle:"[DASH] start play",msg:"start play no canplay"})))}),1e4)))}),6e3)))}),n.progressTimer||1e3)}}},{key:"clearCheckCanplayTimer",value:function(){this&&(this&&this.checkCanplayTimer&&(this.checkCanplayTimer.clear(),this.checkCanplayTimer=null),this.dashNoCanplayTimer&&(clearTimeout(this.dashNoCanplayTimer),this.dashNoCanplayTimer=null,this.dashNoCanplay=void 0))}},{key:"handleUrlExpire",value:function(){this._pluginInst.handleUrlExpire(this)}},{key:"clearBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,n=this.player,r=this.config;if(t.isDashCanUse&&t.mse){ie.log("clearBuffer");var i=t.dash.mpd.mediaList.video;if(i&&i.length>0&&i[i.selectedIdx].bandwidth<6e6)e&&n.currentTime>12&&(ie.log("low bandwidth remove buffer initiatively"),t.clearBufferByTime(0,n.currentTime-12));else{n.currentTime>12&&t.clearBufferByTime(0,n.currentTime-12);var a=r.preloadTime||50;n.currentTime+a+6<n.duration&&t.clearBufferByTime(n.currentTime+a+6,n.duration),e&&n.currentTime+a/2<n.duration&&(ie.log("high bandwidth remove buffer initiatively"),t.clearBufferByTime(n.currentTime+a/2,n.duration))}}}},{key:"clearBufferByTime",value:function(e,t){ie.log("clearBufferByTime start: ".concat(e," end: ").concat(t)),this.dash.mpd.mediaList.video.length>0&&this.mse.removeBuffer(Mt,e,t).catch((function(){})),this.dash.mpd.mediaList.audio.length>0&&this.mse.removeBuffer(Nt,e,t).catch((function(){})),this.dash.mpd.clearBuffer(e,t)}},{key:"clearProgressTimer",value:function(){this&&(this.isDashCanUse&&this.dash.mse&&this.dash.mse.progressTimer&&(this.dash.mse.progressTimer.clear(),this.dash.mse.progressTimer=null),this.dashBufferBreakTimer&&(clearTimeout(this.dashBufferBreakTimer),this.dashBufferBreakTimer=null,this.dashBufferBreak=void 0))}},{key:"emitMenuResolutionChange",value:function(){var e=this.player;try{var t=this.dash.mpd.mediaList.video;if(t){var n=t[t.selectedIdx],r={width:n.width,height:n.height};e.emit("RESOLUTION_UPDATE",r)}else e.emit("RESOLUTION_UPDATE")}catch(i){e.emit("RESOLUTION_UPDATE")}}},{key:"updateDashType",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=ee.getItem(V),r=j;e=t||n===r.BACK?r.MAIN:r.BACK,ee.setItem(V,e)}},{key:"changeMainBackUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn.INIT,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t&&this._pluginInst){var n=this._pluginInst.config,r=ee.getItem(V),i=!1,a=j;if((e===kn.INIT&&r===a.BACK||e===kn.ERR)&&(i=!0),ie.log("curDashType",r,"changeState",e,"needChange",i),i){var o=n.dashOpts.dynamic_video.main_url,s=n.dashOpts.dynamic_video.backup_url_1;n.dashOpts.dynamic_video.main_url=s,n.dashOpts.dynamic_video.backup_url_1=o,q.exchangeListUrl(n.dashOpts.dynamic_video.dynamic_video_list),q.exchangeListUrl(n.dashOpts.dynamic_video.dynamic_audio_list)}var c=n.dashOpts.dynamic_video.main_url;return this._checkUrlRange(c),n}}},{key:"_checkUrlRange",value:function(e){var t=this._pluginInst.config,n=t.url_range_domains||[],r=q.validateUrlRange(n,e);t.useUrlRange=r}},{key:"updateAutoDefiDesc",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=this.player,a=this.config,o=a.autoBitrateOpts||{},s=o.autoDefiText||"auto";i.emit("ABR_AUTO_DESC_CHANGE",s,t?void 0:e,n,r),t||this._pluginInst.setCurrentDefitionInfos("\u81ea\u52a8 ".concat(e),r)}},{key:"_startLoadInitSegment",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new Le,i=this,a=this.dash,o=this.config,s=a.mpd.mediaList.video,c=s.selectedIdx;return s.every((function(u,l){if(u.id===e){t.abrInstance.updateBitrate(i.defiIdMap[e].bitrate),n&&(t.lastDefiIdx=e),c=l,i.selectedIdx=l,o.defaultDefinition=s[i.selectedIdx].definition,i.switching=!0,a.abortLoadingTasks();var d=s[c].wrapperData;return d?((i.dashVideoEncrypted||i.dashAudioEncrypted)&&!1===o.useEME&&i.crypto&&i.crypto.updateHeaderId(),r.resolve(d)):i._makeInitSegemntRequestWithRetry("video",c).then((function(e){r.resolve(e)})),!1}return!0})),r}},{key:"abrSwitchURL",value:function(e){var t=this;this._pluginInst.info({msg:"abr switch",data:e});var n=this.dash,r=this.player,i=this.config;e=e.split("/")[e.split("/").length-1],this._startLoadInitSegment(e).then((function(e){var a=n.mpd.mediaList.video,o=t._switch(e.newIdx),s=r.getBufferedRange(i.useBuffered2?r.buffered2:r.buffered)[1],c=a[o].mediaSegments.find((function(e){return e.start-s>=0}));if(c){var u=0===s?r.currentTime:(c.start+c.end)/2;t._appendInitSegment("video",e,e.newIdx).then((function(){t.switching=!1,t.loadData(u,B)}))}}))}},{key:"_switch",value:function(e){var t=this.dash,n=t.mpd.mediaList.video,r=n.selectedIdx;n.selectedIdx=e,this.mse.abort(Mt),t.abortLoadingTasks(),n[r].mediaSegments.every((function(e){return e.downloaded=L,!0}));var i=t.mpd.mediaList.audio;i[i.selectedIdx]&&i[i.selectedIdx].mediaSegments&&i[i.selectedIdx].mediaSegments.forEach((function(e){e.downloaded===M&&(e.downloaded=L)}));return r}},{key:"_handleInitData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=this.dash,a=new Le,o=e instanceof ArrayBuffer;if(o){var s=0===t.length?e:e.slice(t[0],t[1]+1),c=null===n?null:e.slice(n[0],n[1]+1),u=i.mpd.videoCodecType;!1===i.useEME&&this.crypto?this.crypto.decryptHeader(s,u).then((function(t){var n=i.useEME?s:t.data;a.resolve({initSegmentRes:n,data:e,sidxSegmentRes:c,vid:t.vid,headers:r})})):a.resolve({initSegmentRes:s,data:e,sidxSegmentRes:c,vid:null,headers:r})}else;return a}},{key:"_appendInitSegment",value:function(e,t,n){var r=this,i=this.player,a=this.config.duration;this.dash.mpd.duration>0&&(a=this.dash.mpd.duration);var o=new Le,s=this.dash.mpd.mediaList[e],c=t.initSegmentRes,u=t.sidxSegmentRes;return t.fromCache||(t.fromCache=!0,s[s.selectedIdx].wrapperData=t,u&&this.dash.mpd.getSidx(u,e,n,a)),this.mse.appendBuffer(e,c).then((function(){r._pluginInst.info({msg:"appendInitSegment",data:{mediaType:e,index:n}}),s[s.selectedIdx].inited=!0,o.resolve(),"video"===e&&(r.curVideoInitSegmentIdx=n)})).catch((function(e){e&&e.message===Ut&&i.emit(new C(C.MSE,C.MSE_PARSE_ERROR,{line:800,handle:"[DASH] appendInit",msg:e.message}))})),o}},{key:"_makeInitSegemntRequest",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"video",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.dash,a=this.config,o=new Le,s=i.mpd&&i.mpd.mediaList[t][n],c=[],u="";if(!s)return o.reject({mediaType:t,index:n,initSegmentRange:c,url:u,rejected:!0}),ie.log("initSegmentRequest error"),o;c=(s.initSegmentRange||[]).concat();var l="segment_base"===i.mpd.dashType;l&&(c[1]=s.sidxRange[1]),u=s.initSegment,r&&(u="https:"+u,ie.log("forceHttps:",u));var d="video"===t&&(s.definition||this.bandwidth2item[s.bandwidth].definition);this._checkUrlRange(u);var f={mediaType:t,vid:a.vid,definition:"video"===t?d:void 0,useUrlRange:a.useUrlRange,timeout:-1};return i.getData(u,c,f).then((function(r){var i=r.res,a=r.headers,d=r.status,h=r.readyState,p=r.fromCache;i&&"error"!==i?e._handleInitData(i,s.initSegmentRange,l?s.sidxRange:null,a).then((function(e){e.newIdx=n,e.mediaType=t,e.initSegmentRange=c,e.cache=p,e.definition=f.definition,o.resolve(e)})):o.reject({mediaType:t,index:n,initSegmentRange:c,url:u,rejected:!0,reason:i,status:d,readyState:h})})).catch((function(e){o.reject({mediaType:t,index:n,initSegmentRange:c,url:u,rejected:!0,status:e&&e.status}),ie.log("initSegmentRequest error",e)})),o}},{key:"_makeInitSegemntRequestWithRetry",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"video",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.handleUrlExpire();var i=new Le;return r&&this._pluginInst._kernal.setNodeTime("init".concat(t,"_metastart")),this._makeInitSegemntRequest(t,n).then((function(a){e._pluginInst.info({msg:"initSegmentRequest succ"}),r&&e._pluginInst._kernal.setNodeTime("init".concat(t,"_metadone"),"init".concat(t,"_metastart"),{fromCache:a.cache,byteLength:a.data.byteLength,mediaType:t,index:n,definition:a.definition}),i.resolve(a)}),(function(e){i.reject(new C(C.NETWORK,C.INIT_SEGMENT_ERROR,{line:329,msg:"initsegment fail",mediaType:t,index:n,error:e.message?e.message:e}))})).catch((function(e){i.reject(new C(C.NETWORK,C.INIT_SEGMENT_ERROR,{msg:"initsegment fail",error:e.message,mediaType:t,index:n}))})),i}},{key:"updateAbrCacheData",value:function(e,t,n){var r=this.dash,i=this.config,a=i.autoBitrateOpts||{},o=r.mpd.mediaList.video,s=n.definition,c=i.definitionText&&i.definitionText[s]||s,u=o[e],l=n.bitrate;this.bitrateMap[l]={url:u.id,definition:s,definitionName:c},this.defiIdMap[u.id]={bitrate:l,definition:s},e===o.length-1&&this.isOpenAutoDefi&&this.definitions.push({name:a.autoDefiText||"auto",url:"__auto__",selected:t,definition:"\u81ea\u52a8",fps:void 0})}},{key:"destroyAbr",value:function(){var e=this.player;this.abrInstance&&(e&&e.off(Qt,this._onAutoDescChange),this.abrInstance.destroy(),this.abrInstance=null)}},{key:"initAbr",value:(t=tt()(rt.a.mark((function e(){var t,n,r,i;return rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this,n=this.player,r=this.config,q.on(n,Qt,this._onAutoDescChange,"dashDestroy"),this.bitrateMap={},this.defiIdMap={},i=te,t.abrInstance=new on(n,r,0,r.dashOpts.dynamic_video,5e3,{logger:ie.abr,openLog:i}),q.once(n,qt,this.startProgressTimer,"dashDestroy"),t.abrInstance.onAbrChange=function(e,r,i,a){var o=t.bitrateMap[e],s=t.bitrateMap[r],c=o.definition,u=s.definition;ie.abr("abr change prevD:",c,"curDef:"+u),c!==u&&(t.abrSwitchURL(s.url),n.emit("ABR_CHANGE",{prev:c,cur:u,prevName:o.definitionName,curName:s.definitionName,abrInfo:a}))},q.on(n,Zt,t.abrInstance.onAbrChange,"dashDestroy"),t.abrInstance.isCurrentInAbr=this.isCurrentAutoDefi;case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"isCurrentInAbr",value:function(){return!!this.abrInstance&&this.abrInstance.isCurrentInAbr}}]),e}(),En=H,Tn=function(){function e(t){var n=this;o()(this,e),m()(this,"start",function(){var e=tt()(rt.a.mark((function e(t){var r,i,a,o,s,c;return rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setNodeTime("newplayer_start"),r=Date.now(),i=n.__dash__,a=n._pluginInst,o=a.player,s=a.config,o.dashState="player_start",o.emit("dashStateChange","player_start"),t||(t=o.config.url="anytext"),c=new Wt(t,n._pluginInst,i),i.initDash(c),!i.dashVideoEncrypted&&!i.dashAudioEncrypted){e.next=21;break}return ie.log("\u52a0\u5bc6\u89c6\u9891"),s.useEME=be(),s.useEME||(i.crypto=new un),s.intertrustServerURL&&(s.useEME=!0),c.useEME=s.useEME,i.awManager=new yn,e.next=18,i.awManager.init();case 18:n._info({msg:"encrypt video ready useEME ".concat(c.useEME)}),e.next=23;break;case 21:ie.log("\u975e\u52a0\u5bc6\u89c6\u9891"),n._info({msg:" no encrypt video ready"});case 23:return o.dashState="wasm_start",o.emit("dashStateChange","wasm_start"),e.next=27,n._onWasmReady({url:t});case 27:n._info({msg:"info player start execute",startMs:r,name:"start",profile:!0});case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),m()(this,"_errorHandler",(function(e){var t=n._pluginInst,r=t.player,i=t.config,a=e;if("string"==typeof e){if(r.video.error&&2===r.video.error.code)e=new C(C.NETWORK,C.NETEORK_ERROR_CODES.timeout,{},r);else{var o=r.video.error&&r.video.error.code||0;e=new C(o>0?C.MEDIA:C.OTHER,o,{},r)}e.msg=a,r.video.error&&(e.msg+=";code"+r.video.error.code+"; details: "+r.video.error.message)}if(n._info({msg:"dashKernal error",data:e,add:!0}),("network"!==e.errorType||!i.disableNetworkError)&&e&&"error_handler"!==r.dashState){r.dashState="error_handler",e.vid=i.vid,e.url=r.src;var s=n.__dash__,c=s&&s.isCurrentAutoDefi;if(e.errd&&"object"===I()(e.errd)&&s&&s.dash&&(e.errd.url=s.dash.url,e.url=s.dash.url),e.url&&e.url.indexOf("blob:")>-1&&i.dashOpts&&i.dashOpts.dynamic_video&&(e.url=i.dashOpts.dynamic_video.main_url),e&&e.errorCode===C.NETWORK_DISCONNECT)r.emit("error",e);else{if(r.emit("DATA_REPORT",e),e&&e.errorCode===C.CDM_LICENSE_ERROR)return n._pluginInst.destroyKernal(),void r.emit("error",e);if(e&&e.errorCode===C.MSE_MEDIA_TYPES_NOT_SUPPORTED)n._handleDegradeToMp4(e);else{if(e.segmentExpired||"task_request_expired"===e.msg)return s&&s.abrInstance&&"function"==typeof s.abrInstance._stop&&(s.abrInstance._stop(),ie.abr("error stop","expired",e.segmentExpired,e.ex)),void n._pluginInst.emitExpireEvent(e);if(!e.curReqVideoSegInfo&&s&&(e.curReqVideoSegInfo=JSON.parse(JSON.stringify(s.curReqVideoSegInfo||{}))),e.headers||(e.headers=e.curReqVideoSegInfo.headers||{}),!!i.useBackUrl&&!n._pluginInst._hasUsedBackUrl&&i.dashOpts&&i.dashOpts.dynamic_video&&s){ie.log("backup replay");var u=s.changeMainBackUrl(En.ERR,n._pluginInst._hasUsedBackUrl);return s.updateDashType(),c?u.autoBitrateOpts&&(u.autoBitrateOpts.isPlayAutoDefi=!0):(n.currentDefitionFromPlayer&&(u.defaultDefinition=n.currentDefitionFromPlayer.definition),u.autoBitrateOpts&&(u.autoBitrateOpts.isPlayAutoDefi=!1)),n._pluginInst._hasUsedBackUrl=!0,n._pluginInst.next(r.currentTime,"REPLAY",u,!0),void r.emit("playCatch","dash2dash_backup",e)}s&&s.updateDashType(!0),n._handleDegradeToMp4(e)}}}})),this._pluginInst=t,this._initProfile(),this._proxyPlayer(),this._initialize()}var t;return c()(e,[{key:"_initProfile",value:function(){this.firstFrameTime={newplayer_initkernel:{now:q.nowTime(),cost:0,t:1},newplayer_start:{now:-1,cost:-1,t:2},initmpd:{now:-1,cost:-1,t:3},initmpddone:{now:-1,cost:-1,t:4},initmse_sbopen:{now:-1,cost:-1,t:5},initmse_sbopendone:{now:-1,cost:-1,t:6},initvideo_metastart:{now:-1,cost:-1,t:7,i:!0},initvideo_metadone:{now:-1,cost:-1,t:8,i:!0},initaudio_metastart:{now:-1,cost:-1,t:7,i:!0},initaudio_metadone:{now:-1,cost:-1,t:8,i:!0},metaready_initsegend:{now:-1,cost:-1,t:7},initvideo_segstart:{now:-1,cost:-1,t:8,i:!0},initvideo_segdone:{now:-1,cost:-1,t:9,i:!0},initaudio_segstart:{now:-1,cost:-1,t:8,i:!0},initaudio_segdone:{now:-1,cost:-1,t:9,i:!0},initdash:{now:-1,cost:-1,t:9,i:!0},initdashdone:{now:-1,cost:-1,t:9,i:!0}},this.firstFrameTimeTypeMap={};for(var e=Object.keys(this.firstFrameTime),t=0;t<e.length;t++){var n=this.firstFrameTime[e[t]];n.key=e[t],n.i||(this.firstFrameTimeTypeMap[n.t]=n)}}},{key:"setNodeTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.firstFrameTime[e];if(r&&(r.now=q.nowTime(),n&&(r.extData=n),r.t>1)){var i=t?this.firstFrameTime[t]:this.firstFrameTimeTypeMap[r.t-1];r.cost=r.now-i.now}}},{key:"_proxyPlayer",value:function(){var e=this._pluginInst.player;this._originSwitchURL=e.switchURL,this._originErrorHandler=e.errorHandler,e.switchURL=this._switchURL.bind(this),e._startInit=this.start,e.dash=!0,e.errorHandler=this._errorHandler}},{key:"_info",value:function(e){this._pluginInst.info(e)}},{key:"_onWasmReady",value:(t=tt()(rt.a.mark((function e(t){var n,r,i,a,o,s,c,u,l,d,f,h,p,v,g=this;return rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=this._pluginInst,i=r.player,a=r.config,o=this.__dash__,s=o.dash,i.dashState="wasm_ready",i.emit("dashStateChange","wasm_ready"),ie.log("\u76d1\u542c\u5230wasm_ready"),this._info({msg:"wasm_ready"}),q.on(s,"error",this._errorHandler,"destroy"),o.bindComEvent(),e.prev=10,e.next=13,s.init(n);case 13:if(c=e.sent,ie.time("initReady cost",(new Date).getTime()-o.startTimestamp),i.dashState="init_finished",i.emit("dashStateChange","init_finished"),ie.log("dash init\u5b8c\u6210"),s.mpd.mediaList.video.length>0){for(a.defaultDefinition||(a.defaultDefinition=a.dashOpts.dynamic_video.dynamic_video_list[0].definition,o.lastDefiIdx=0),o.isOpenAutoDefi||(o.isCurrentAutoDefi=!1,o.abrInstance.isCurrentInAbr=!1),u=a.dashOpts.dynamic_video.dynamic_video_list,l=0;l<u.length;l++)d=u[l],o.bandwidth2item[d.bitrate]=d,o.definition2item[d.definition]=d;s.mpd.mediaList.video.sort((function(e,t){return t.height-e.height})),s.mpd.mediaList.video.forEach((function(e,t){var n=o.bandwidth2item[e.bandwidth],r=n.definition,c=!(r!==a.defaultDefinition||o.isOpenAutoDefi&&o.isPlayAutoDefi);o.definitions.push({name:a.definitionText&&a.definitionText[r]||r,url:e.id,selected:c,definition:n.definition,fps:n.fps}),e.frameRate=e.frameRate||n.fps||25;var u=n.bitrate;o.updateAbrCacheData(t,o.isPlayAutoDefi,n),r===a.defaultDefinition&&(i.emit("initialUrl",s.mpd.mediaList.video[t].baseURL),o.curBitrate=u,o.lastDefiIdx=t),c&&g._pluginInst.setCurrentDefitionInfos(n.definition,n)})),(f=o.definitions.some((function(e){return e.selected})))&&void 0!==o.lastDefiIdx||(f||(o.definitions[0].selected=!0,h=o.definitions[0].definition,this._pluginInst.setCurrentDefitionInfos(h,o.definition2item[h])),i.emit("initialUrl",s.mpd.mediaList.video[0].baseURL),o.curBitrate=a.dashOpts.dynamic_video.dynamic_video_list[0].bitrate,o.lastDefiIdx=0),i.emit("resourceReady",o.definitions,a.dashOpts.dynamic_video.dynamic_video_list),o.abrInstance.updateBitrate(o.curBitrate)}this._pluginInst.originStartInit.call(i,c.url),ie.time("start call cost",(new Date).getTime()-o.startTimestamp),i.dashState="core_start",i.emit("dashStateChange","core_start"),o.startCheckCanplayTimer(),o.isDashCanUse=!0,o.mse=c,o.emitMenuResolutionChange(),"safari"===Dt.a.browser&&(Lt.a.addClass(i.root,"canplay"),p=function(){Lt.a.removeClass(i.root,"xgplayer-is-enter")},q.once(i,"waiting",p)),v=function(){var e=tt()(rt.a.mark((function e(){return rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.emit("dash_start_play"),g._info({msg:"dash_start_play"}),i.dashState="start_play",g._info({msg:"START_PLAY ready"}),i.emit("dashStateChange","start_play"),i.emit("playInterfaceInfo",a.dashOpts||{}),e.next=8,o.abrInstance.init(s.mpd.mediaList);case 8:o.abrInstance.execute(),o.isCurrentAutoDefi||ie.time("onStartPlay cost not abr",(new Date).getTime()-o.startTimestamp),o.startProgressTimer(),ie.time("onStartPlay cost",(new Date).getTime()-o.startTimestamp);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q.once(s,"start_play",v),this._info({msg:"START_PLAY dashready"}),i.emit("dashready"),e.next=37;break;case 34:e.prev=34,e.t0=e.catch(10),i.errorHandler(e.t0);case 37:case"end":return e.stop()}}),e,this,[[10,34]])}))),function(e){return t.apply(this,arguments)})},{key:"_initialize",value:function(){if(this.setNodeTime("newplayer_initkernel"),ie.log("\u6267\u884cdashKernal"),"object"===("undefined"==typeof WebAssembly?"undefined":I()(WebAssembly))&&"function"==typeof WebAssembly.instantiate){var e=this._pluginInst,t=e.player,n=e.config;if(n.dashOpts){n.dashOpts.Data&&"TOP"===n.playInfoType&&this._playInfoInit(),n.dashOpts.dynamic_video&&(n.dashOpts.dynamic_video.dynamic_video_list=n.dashOpts.dynamic_video.dynamic_video_list||[],n.dashOpts.dynamic_video.dynamic_audio_list=n.dashOpts.dynamic_video.dynamic_audio_list||[],[n.dashOpts.dynamic_video.dynamic_video_list,n.dashOpts.dynamic_video.dynamic_audio_list].forEach((function(e){e.forEach((function(e){e.bitrate=1e3*parseInt(e.bitrate/1e3,10)}))})));var r=H,i=new wn({pluginInst:this._pluginInst});this.__dash__=i,Ft.isSupported('video/mp4; codecs="avc1.64001E, mp4a.40.5"')?i.changeMainBackUrl(r.INIT,this._hasUsedBackUrl):t.errorHandler(new C(C.MSE,C.MSE_MEDIA_TYPES_NOT_SUPPORTED,{msg:"init"}))}else console.error("dashOpts in plugin config miss")}}},{key:"_switchURL",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.__dash__,i=this._pluginInst,a=i.config,o=i.player;if("__auto__"===(e=e.split("/")[e.split("/").length-1]))return r.abrInstance.start(),r.isCurrentAutoDefi=!0,r.abrInstance.isCurrentInAbr=!0,void setTimeout((function(){r.abrInstance._onTimeUpdate(null,!0)}));r.isCurrentAutoDefi&&(r.updateAutoDefiDesc("",!0),r.isCurrentAutoDefi=!1,r.abrInstance.isCurrentInAbr=this.isCurrentAutoDefi),n&&r.abrInstance.stop(!0),r._startLoadInitSegment(e,!0).then((function(e){if(r.selectedIdx===e.newIdx){var n=r.dash.mpd.mediaList.video,i=r._switch(e.newIdx),s=o.currentTime,c=null;if(a.nextSegmentSwitch)c=n[i||0].mediaSegments.find((function(e){return e.start-s>6}));else for(var u=n[i||0].mediaSegments,l=u.length-1;l>-1;l--)if(u[l].start<s){c=u[l];break}var d=!1;if(!c){var f=n[i||0].mediaSegments;c=f[f.length-1],d=!0}var h=q.round(c.start+1),p=q.round(o.getBufferedRange(a.useBuffered2?o.buffered2:o.buffered)[1]);ie.log("\u5207\u6362\u6e05\u6670\u5ea6 curTime: ".concat(s," start: ").concat(h," end: ").concat(p));var v=n[n.selectedIdx].definition;t._pluginInst.setCurrentDefitionInfos(v,r.definition2item[v]),r.isCurrentInAbr()||(ie.log("definitionSwitchTime emit, current",r.selectedIdx),o.emit("definitionSwitchTime",h<s?s+1:h)),p-h>0&&"safari"!==Dt.a.browser&&!d&&(ie.log("removeBuffer: ".concat(h," ").concat(p)),r.mse.removeBuffer(Mt,a.nextSegmentSwitch?h:c.end,p).catch((function(){}))),r._appendInitSegment("video",e,e.newIdx).then((function(){r.switching=!1,r.loadData((c.start+c.end)/2,B),r.emitMenuResolutionChange()}))}else ie.log("definitionSwitchTime cancel, current:",r.selectedIdx,"self",e.newIdx)}))}},{key:"_playInfoInit",value:function(){var e=this._pluginInst,t=e.config,n=e.playerConfig;t.vid=t.dashOpts.Data.VideoID||t.dashOpts.Data.Vid,n.vid=t.vid,Ot(t)}},{key:"_handleDegradeToMp4",value:function(e){var t=this,n=this._pluginInst,r=n.player,i=n.config;if(i.mp4Opts&&!this._hasDegradeMp4){this._hasDegradeMp4=!0,r.dashState="error_catching";var a=i.startTime||r.currentTime||0;setTimeout((function(){t._pluginInst._setStartTime("destroy",a,!0,!1),r.emit("playertypechange"),r.dashState="error_catch_finished",r.emit("playCatch","dash2mp4",e),i.defaultFormat="mp4",t._pluginInst.changeKernal(),r.once("canplay",(function(){var e=r.video.play();e&&e.catch((function(){}))}))}),0)}else r.dashState="error_no_mp4opts",r.emit("error",e)}},{key:"abrInstance",get:function(){return this.__dash__.abrInstance}},{key:"destroy",value:function(){var e=this._pluginInst.player;this.__dash__=null,e.errorHandler=this._originErrorHandler,e._startInit=this._pluginInst._originStartInit,e.switchURL=this._originSwitchURL,e.emit("dashDestroy")}},{key:"executeReady",value:function(){var e=this._pluginInst.player;q.once(e,"dash_start_play",(function(){e.dashState="next_finished",e.emit("nextEnded")}))}},{key:"getStat",value:function(){var e=this,t={type:"dash"};if(this.__dash__&&this.__dash__.dash){t.segments=this.__dash__.dash.segment_request;var n=this.__dash__.dash.first_segment_request;this._setSegmentCost("video",n),this._setSegmentCost("audio",n)}var r={},i={};return Object.keys(this.firstFrameTime).forEach((function(t){var n=e.firstFrameTime[t];r[t]=n.cost,i[t]={now:n.now,cost:n.cost,extData:n.extData}})),t.performance=r,t.firstFrameTime=i,t.preLoadData=this.getPreloadStat(),t}},{key:"_setSegmentCost",value:function(e,t){var n=t[e],r=n.task,i=n.taskfinish,a=n.ext,o=n.fromCache,s=n.request,c=this.firstFrameTime["init".concat(e,"_segstart")],u=this.firstFrameTime["init".concat(e,"_segdone")],l=this.firstFrameTime.metaready_initsegend;c.now=s?r:-1,c.cost=s?r-l.now:-1,u.now=s?i:-1,u.cost=s?i-r:-1,u.extData=a,u.fromCache=o}},{key:"getPreloadStat",value:function(){for(var e=["initaudio_metadone","initvideo_metadone","initaudio_segdone","initvideo_segdone"],t={length:0,load:[],preload:this._pluginInst.getPreloadStat()},n=0;n<e.length;n++){var r=this.firstFrameTime[e[n]].extData;r&&r.fromCache&&r.byteLength&&(t.length+=r.byteLength,t.load.push(r))}return t}}]),e}(),An=function(){function e(t){var n=this;o()(this,e),m()(this,"_errorHandler",(function(e){var t=n._pluginInst.player,r=e;if("string"==typeof e){if(t.video.error&&2===t.video.error.code)e=new C(C.NETWORK,C.NETEORK_ERROR_CODES.timeout,{},t);else{var i=t.video.error&&t.video.error.code||0;e=new C(C.MEDIA,i,{},t)}e.msg=r,t.video.error&&(e.msg+=";code"+t.video.error.code+"; details: "+t.video.error.message)}n._stat.error.push({err:e});var a=(new Date).getTime()/1e3>=n.urlExpireTimestamp&&n.urlExpireTimestamp>0;n._pluginInst.info({msg:"dash mp4 kernal error happend, url expired ".concat(a),err:e}),!a||!t.video.error||4!==t.video.error.code&&2!==t.video.error.code?t.emit("error",e):n._urlExpiredWhenInit||n._mp4CheckExpire()})),m()(this,"_updateMp4Auto",(function(){setTimeout((function(){n._updateMp4AutoDesc()}),0)})),this._url=null,this._pluginInst=t,this._urlExpiredWhenInit=!1,this._initialize(),this._stat={type:"mp4",error:[]}}return c()(e,[{key:"start",value:function(){var e=this._pluginInst,t=e.config,n=e.player;t.defaultFormat="mp4",this._pluginInst.originStartInit.call(n,this._url),n.errorHandler=this._errorHandler,this._pluginInst.info({msg:"dash mp4 kernal start"})}},{key:"executeReady",value:function(){var e=this._pluginInst.player;e.dashState="next_finished",e.emit("nextEnded")}},{key:"_initialize",value:function(){this._handleMp4Definitions(),this._getMp4Opts();var e=this._pluginInst.player;e.dash=!1,e.emit("resourceReady",this._mp4Definitions||[],[].concat(this._RawMp4Definitions)),this._updateMp4Auto(),this.urlExpireTimestamp&&(this._urlExpiredWhenInit=(new Date).getTime()/1e3>=this.urlExpireTimestamp&&this.urlExpireTimestamp>0,this._mp4CheckExpire())}},{key:"_handleMp4Definitions",value:function(){var e=this,t=this._pluginInst,n=t.player,r=t.config;if(r.mp4Opts){this.mp4AutoItem=null;var i=[].concat(r.mp4Opts.mp4List||[]);i.every((function(e){return!!e.bitrate}))&&i.sort((function(e,t){return t.bitrate-e.bitrate}));var a=r.mp4Opts.isOpenAutoDefi,o=r.mp4Opts.isPlayAutoDefi,s=!1;if(a){var c={};i.forEach((function(e){c[(e.definition||"").toLowerCase()]=e}));for(var u=["720p","480p","360p"],l=null,d=0;d<u.length;d++){var f=c[u[d]];if(f){l=f;break}}if(l){this.mp4AutoItem=l;var h=r.mp4Opts.autoDefiText||"\u81ea\u52a8",p="".concat(h,"(").concat(l.definition,")");i.push({definition:h,url:"__auto__",name:p,url_expire:l.url_expire||0,selected:!!o}),s=o}}if(i.length>0){var v=i[0].url,g=i[0].url;i.forEach((function(e){e.definition===r.defaultDefinition&&(v=e.url,g=e.url)})),a&&o&&this.mp4AutoItem&&(v=this.mp4AutoItem.url,g="__auto__"),this._mp4Url=g,this._url=v}if(!s){for(var y=0;y<i.length;y++){var m=i[y];if(r.defaultDefinition===m.definition){m.selected=!0,s=!0;break}}s||(i[0].selected=!0)}this._mp4Definitions=i.map((function(t){r.defaultDefinition===t.definition&&(e._url=t.url,o||(t.selected=!0));var n=JSON.parse(JSON.stringify(t));return n.name=r.definitionText&&r.definitionText[t.definition]||t.definition,n.url_expire=t.url_expire||0,n})),this._backup_url=this._mp4Definitions[0].backup_url,this._RawMp4Definitions=i;for(var b=!1,_=0;_<i.length;_++){var k=i[_];k.codec_type&&k.vtype&&("h264"===k.codec_type&&"mp4"===k.vtype||(b=!0))}b&&n.emit("log",{type:"oneevent",end_type:"mp4_source_exception"})}}},{key:"_getMp4Opts",value:function(){var e=this._pluginInst.player,t={url:this._mp4Url,realUrl:this._url,mp4Definitions:[].concat(this._mp4Definitions)};return this._getPlayInfoTimestamp=(new Date).getTime()/1e3,t.mp4Definitions&&t.mp4Definitions.length>0&&(this.urlExpireTimestamp=t.mp4Definitions[0].url_expire||0),this._proxyPlayer(),this._destroyMp4AutoHandler(),e.on("canplay",this._updateMp4Auto),this.urlExpireTimestamp&&(this.mp4CheckExpire=this._mp4CheckExpire.bind(this),e.on("timeupdate",this.mp4CheckExpire)),t}},{key:"_proxyPlayer",value:function(){var e=this._pluginInst.player;this._originSwitchURL=e.switchURL,this._originErrorHandler=e.errorHandler,e.switchURL=this._switchURLMp4.bind(this),e.config.url=this._url}},{key:"_switchURLMp4",value:function(e){var t=this,n=this._pluginInst.player,r="__auto__"===e.split("/")[e.split("/").length-1],i=r?this.mp4AutoItem.url:e;n.curTime=n.currentTime;var a=n.paused;this._url=r?"__auto__":e,n.ended||(n.src=globalThis.getFilterXss().filterUrl(i,null,{logType:"js.href/src",reportOnly:"all"}),q.once(n,"canplay",(function(){if(n.currentTime=n.curTime,!a){var e=n.play();void 0!==e&&e&&e.catch((function(e){}))}}))),r?this._setCurrentDefitionInfos("\u81ea\u52a8 ".concat(this.mp4AutoItem.definition),this.mp4AutoItem):q.once(n,"definitionChange",(function(e){for(var n=e.to,r=null,i=t._pluginInst.cnofig,a=0;a<i.mp4Opts.mp4List.length;a++){var o=i.mp4Opts.mp4List[a];if(o.definition===n){r=o;break}}t._setCurrentDefitionInfos("".concat(n),r)}))}},{key:"_mp4CheckExpire",value:function(){this._pluginInst.handleUrlExpire(this,!0)}},{key:"_updateMp4AutoDesc",value:function(){var e=this._pluginInst.player,t="__auto__"!==this._url||void 0;this.mp4AutoItem&&(e.emit("MP4_AUTO_DESC_CHANGE",JSON.parse(JSON.stringify(this.mp4AutoItem)),!!t||void 0),t||this._setCurrentDefitionInfos(this.mp4AutoItem.definition,this.mp4AutoItem))}},{key:"_setCurrentDefitionInfos",value:function(e,t){this._pluginInst.setCurrentDefitionInfos(e,t)}},{key:"_destroyMp4AutoHandler",value:function(){var e=this._pluginInst.player;e.off("canplay",this._updateMp4Auto),e.off("timeupdate",this._mp4CheckExpire),e.off("error",this._errorSwitchFormat)}},{key:"destroy",value:function(){var e=this._pluginInst.player;e.errorHandler=this._originErrorHandler,this._destroyMp4AutoHandler(),this._pluginInst.unloadVideo(),e.switchURL=this._originSwitchURL}},{key:"getStat",value:function(){return this._stat}}]),e}();function Sn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var In=i.PRELOAD_NEXT,Rn=i.MEDIA_TYPES,On=b.a.STATS_EVENTS,Cn="mp4",xn="dash",Pn="void";function Dn(e){return{playerVersion:{get:function(){return"3.0.28"},configurable:!0},downloadSpeed:{get:function(){return ce.currentSpeed},configurable:!0},historyAvspeed:{get:function(){return ce.historyAvspeed},configurable:!0},abrInstance:{get:function(){return e.abrInstance},configurable:!0},menuCodeType:{get:function(){return e.menuCodeType},configurable:!0},playerType:{get:function(){return e.playerType},configurable:!0},supportMenus:{get:function(){return e.supportMenus},configurable:!0},CDNUrl:{get:function(){return e.CDNUrl},configurable:!0},performance:{get:function(){var t=e.stat;return t&&t.performance},configurable:!0},stat:{get:function(){return e.stat},configurable:!0}}}var Ln=null,Mn=function(e){f()(n,e);var t=Sn(n);function n(){var e;o()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),m()(l()(e),"_hasUsedBackUrl",!1),m()(l()(e),"_pendingPreloaders",[]),e}return c()(n,[{key:"initDashPlayer",value:function(e){var t=this,n=this.config;this._hasTriggerBufferThreshold=!1,this._setArgsFromConfig(),this.lastBuffer="0,0",this._menuCodeType=null,this._setConfigDashType(),q.promisePolyfill(),(window.location.href.indexOf("playerInstance=true")>-1||ee.getItem("playerInstance"))&&(void 0===window.dashPlayerInstanceList&&(window.dashPlayerInstanceList=[]),window.dashPlayerInstanceList.push(e)),this.dashPreloader=new Pt(e,n,ie.preload,this.bitRateAdapter),e.preloader=this.dashPreloader;this._pendingPreloaders.length>0&&(this.addPreloaderList(this._pendingPreloaders),this._pendingPreloaders=[]),this._startBufferCheck(),q.on(e,In,(function(){t.dashPreloader.preloadNext()}),"destroy"),this.changeKernal(!1),window.addEventListener("beforeunload",this.cacheSpeed)}},{key:"bitRateAdapter",get:function(){var e=this.player,t=this.config;return e&&e.plugins&&t.needAutoBitrate?e.plugins.bitrateselector:null}},{key:"next",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"NEXT",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=this.player,a=this.config;this._pendingPreloaders=[],this._pausedWhenExpiredRestart=!1,"MEDIA_EXPIRED"===t&&i.paused&&(this._pausedWhenExpiredRestart=!0),i.dashState="next_start";var o=!1;if(i.isSrcVoid||!a.dashOpts&&!a.mp4Opts||i.ended||"MEDIA_EXPIRED"===t||"REPLAY"===t||i.duration&&i.currentTime<i.duration-1&&(i.emit("logger_next",t),o=!0),this._hasTriggerBufferThreshold=!1,i.emit("next",t),i.emit("playertypechange"),n)for(var s in n)a[s]=n[s];this._setArgsFromConfig(),o&&this._setConfigDashType(),i.config.startTime=e,i.config.startTimeCache=e,i.config.DASHPlugin=n,this._syncParameters(),this.changeKernal(!0,!0),!r&&!i.config.autoplay||this._pausedWhenExpiredRestart||i.once("canplay",(function(){if(i.video){var e=i.video.play();e&&e.catch((function(){}))}})),this._pausedWhenExpiredRestart&&(this._pausedWhenExpiredRestart=!1)}},{key:"_replay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.next(e,"REPLAY")}},{key:"startPlayHandler",value:function(e,t,n){var r=this.config;if(r.dashOpts||r.mp4Opts){var i="NEXT"===t||"REPLAY"===t;this._setStartTime(n,e,i,!0)}}},{key:"beforePlayerInit",value:function(){if(!this._hasExecuteBeforeInit){var e=this.player;_.a.defineGetterOrSetter(e,Dn(this)),this._hasExecuteBeforeInit=!0,e.isReady=!0}}},{key:"afterCreate",value:function(){var e=this;this.steps=[];var t=this.player;this._syncParameters(),t.config.nullUrlStart=!0,n.unionID&&(t.unionID=n.unionID,n.unionID=void 0),this._proxyPlayer(),this.initDashPlayer(t),this.on("xglog",(function(n){"firstFrame"===n.eventType&&ie.log("[xgplayer-encrypt]>>>>firstFrame ",e.playerConfig.vid,n.fvt,"stat",t.stat)}))}},{key:"info",value:function(e){var t=this.player;On&&t.emit(On.STATS_INFO,e),e.add&&this.steps.push(e)}},{key:"resetStat",value:function(){var e=this.player;On&&e.emit(On.STATS_RESET)}},{key:"_syncParameters",value:function(){var e=this.config,t=this.playerConfig,n=e.vid||t.vid;e.vid=t.vid=n,t.autoBitrateOpts=e.autoBitrateOpts}},{key:"_proxyPlayer",value:function(){var e=this,t=this.player;this._originStartInit=t._startInit,t.getPreloadInfos=this.getPreloadInfos.bind(this),t.useHooks("replay",(function(t){e._replay()})),"function"==typeof this.player.playNext&&(Ln=this.player.playNext),this.player.playNext=function(){e.playNext.apply(e,arguments)}}},{key:"playNext",value:function(){for(var e=this.player,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0],a=n[1],o=n[2],s=n[3];e.setConfig(i),this.next(a,o,i.DASHPlugin,s)}},{key:"_setKernalType",value:function(){var e=this.config;e.dashOpts||e.mp4Opts?e.dashOpts&&e.mp4Opts?this._kernalType=e.defaultFormat:e.dashOpts?this._kernalType=xn:this._kernalType=Cn:this._kernalType=Pn}},{key:"changeKernal",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._setKernalType();var n=this.player;this.destroyKernal();var r=this._kernalType;r===Pn?(n.isSrcVoid=!0,n.emit("playOptsVoid"),t&&n.emit("nextEnded")):(n.isSrcVoid=!1,this._setStartTime("destroy",n.config.startTime,!0,!1),r===Cn?this._kernal=new An(this):r===xn&&(this._kernal=new Tn(this))),e&&this._kernal&&(this._kernal.start(),t&&this._kernal.executeReady())}},{key:"destroyKernal",value:function(){this._kernal&&(this._kernal.destroy(),this._kernal=null)}},{key:"originStartInit",get:function(){return this._originStartInit}},{key:"_setArgsFromConfig",value:function(){var e=this.config;this._bufferThreshold=e.bufferThreshold}},{key:"setCurrentDefitionInfos",value:function(e,t){var n=t?t.fps:void 0;this._currentDefinition={definiton:e,fps:n,item:t}}},{key:"handleUrlExpire",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.config,i=this.player,a=i.paused,o=(new Date).getTime()/1e3>=e.urlExpireTimestamp&&e.urlExpireTimestamp>0;if(o&&(n||!a)&&r.getServerTime)i.serverTimeDiffPromise=i.serverTimeDiffPromise||r.getServerTime().catch((function(){return 0})),i.serverTimeDiffPromise.then((function(n){if(n&&(i.serverTimeDiff=(new Date).getTime()/1e3-n),(new Date).getTime()/1e3>=e.urlExpireTimestamp+i.serverTimeDiff){e.urlExpireTimestamp=5e9;var r=new C(C.NETWORK,C.NETEORK_ERROR_CODES[403]);t.emitExpireEvent(r)}}));else if(o){var s=new C(C.NETWORK,C.NETEORK_ERROR_CODES[403]);this.emitExpireEvent(s)}}},{key:"emitExpireEvent",value:function(e){var t=this.player,n=(new Date).getTime()/1e3;this.emitExpireTimestamp?n-this.emitExpireTimestamp>300&&(this.emitExpireTimestamp=n,t.emit("MEDIA_EXPIRED",e),this.info({msg:"MEDIA_EXPIRED"})):(this.emitExpireTimestamp=n,t.emit("MEDIA_EXPIRED",e),this.info({msg:"MEDIA_EXPIRED"}))}},{key:"_getCurDashType",value:function(){var e=ee.getItem(V);return e===j.BACK?e:j.MAIN}},{key:"_setCurDashType",value:function(){this._initDashType=this._getCurDashType()}},{key:"_setConfigDashType",value:function(){this._setCurDashType();var e=this.playerConfig.vodLogOpts;e&&(e.currentDashType=this._initDashType)}},{key:"addDashPreloader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.dashPreloader?(this._setPreloaderLoadMode(!1),this.dashPreloader.addPreloader(e)):(console&&console.warn("dashPreloader has destroyed"),this._pendingPreloaders.push(e))}},{key:"addPreloader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.addDashPreloader(e)}},{key:"_setPreloaderLoadMode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.dashPreloader&&(this.dashPreloader.preloadManager.autoPreload=e)}},{key:"addDashPreloaderList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.dashPreloader?(this._setPreloaderLoadMode(!1),this.dashPreloader.addPreloaderList(e)):(console&&console.warn("dashPreloader has destroyed"),this._pendingPreloaders=this._pendingPreloaders.concat(e))}},{key:"addPreloaderList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.addDashPreloaderList(e)}},{key:"setCodeInfo",value:function(e){var t=this.playerConfig.vodLogOpts,n=_t[e],r=_t[mt],i=r.logCodeType,a=r.codecs;n&&(i=n.logCodeType,a=n.codecs),t&&(t.codec_type=i),this.menuCodeType=a}},{key:"cacheSpeed",value:function(){try{var e=ce.historyAvspeed;e>0&&e!==1/0&&ee.setItem("danger_d_speed",e)}catch(t){}window.removeEventListener("beforeunload",this.cacheSpeed)}},{key:"unloadVideo",value:function(){var e=this.player;try{e.video&&e.video.src&&(e.video.removeAttribute("src"),e.video.load())}catch(t){}}},{key:"destroy",value:function(){var e=this.player;clearInterval(this._bufferCheckTimer),this.cacheSpeed(),this.destroyKernal(),this.bitRateAdapter&&(this.bitRateAdapter.destroy(),this.bitRateAdapter=null);var t=Dn(this);Object.keys(t).forEach((function(t){delete e[t]})),this.player.playNext=Ln}},{key:"_processPreloadProgress",value:function(e,t){for(var n=this.config,r=["video"],i=0;i<r.length;i++){var a=r[i],o=this.preloadManager.preloadCacheProgress({vid:n.vid,format:"dash",mediaType:a,prelaodType:e.preloadType,bitrate:e.bitrate,set_duration:e.pduration,set_size:e.size,media_type:"video"===a?Rn.VIDEO:Rn.AUDIO});o&&t.push(o)}}},{key:"getPreloadInfos",value:function(){var e=this.config;if(this.preloadManager&&this.preloadManager.preloadCacheProgress){var t=this.preloadManager.cachedDatas[e.vid],n=[];if(this._processPreloadProgress(t||{},n),n.length>0){var r={item_num:n.length,items:n},i={preloadInfo:r};return t&&(i.abr=1),ie.preload("updatePreloadCacheInfo",r),i}}return null}},{key:"getPreloadStat",value:function(){var e=this.playerConfig.vid||this.config.vid;if(this.preloadManager&&this.preloadManager._preloadCacheProgress){var t={},n=this.preloadManager.getProgressCacheKey(e,"dash","video"),r=this.preloadManager.getProgressCacheKey(e,"dash","audio");return t.video=this.preloadManager._preloadCacheProgress[n],t.audio=this.preloadManager._preloadCacheProgress[r],t}return{}}},{key:"_onBufferReachThreshold",value:function(){var e=this.player;if(e.video){for(var t=e.video.buffered,n=0,r=0,i=0;i<t.length&&(n=t.start(i),r=t.end(i),!(n<=e.video.currentTime&&e.video.currentTime<=r));i++);r-e.video.currentTime>=this._bufferThreshold&&!this._hasTriggerBufferThreshold&&(this._hasTriggerBufferThreshold=!0,e.emit("BUFFER_THRESHOLD",r-e.video.currentTime))}}},{key:"_startBufferCheck",value:function(){var e=this,t=this.player;this._bufferCheckTimer=setInterval((function(){if(t.video){for(var n=[],r=0,i=t.video.buffered.length;r<i;r++)n.push([t.video.buffered.start(r),t.video.buffered.end(r)]);n.toString()!==e.lastBuffer&&(e.lastBuffer=n.toString(),e._onBufferReachThreshold())}}),200)}},{key:"_setStartTime",value:function(e,t,n,r){var i=this,a=this.player,o=this.playerConfig,s=this.config;if(t>0||r){var c=!1,u=function(){c||(c=!0,a.currentTime=t,o.startTime=0,n&&t>0&&a.emit("setStartTime"),"mp4"===s.defaultFormat&&i.setCodeInfo(mt))};q.once(a,"canplay",u,e),q.once(a,"playing",u,e)}}},{key:"preloadManager",get:function(){return this.dashPreloader?this.dashPreloader.preloadManager:null}},{key:"CDNUrl",get:function(){var e=this.config;if(e.dashOpts&&e.dashOpts.dynamic_video){var t=document.createElement("a");return t.href=globalThis.getFilterXss().filterUrl(e.dashOpts.dynamic_video.main_url,null,{logType:"js.href/src",reportOnly:"all"}),t.host}return null}},{key:"playerType",get:function(){return this.config.defaultFormat}},{key:"supportMenus",get:function(){var e="dash"===this.config.defaultFormat;return{speed:e,cdn:e,resolution:e}}},{key:"currentDefitionFromPlayer",get:function(){return this._currentDefinition}},{key:"abrInstance",get:function(){return this._kernal&&this._kernal.abrInstance?this._kernal.abrInstance:null}},{key:"menuCodeType",get:function(){return this._menuCodeType},set:function(e){var t=this.player;this._menuCodeType=e,t.emit("codecsupdate",e)}},{key:"stat",get:function(){var e=this.player;if(this._kernal&&!e.isSrcVoid){var t=this._kernal.getStat();return t.steps=this.steps,this.steps=[],e.video&&e.video.error&&(t.media={readyState:e.video.readyState,error:e.video.error.code,errorMsg:e.video.error.message}),t}return null}}],[{key:"registerPreloader",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.vtype=De.DASH,Pt.BitRateAdapter=t,new Pt(null,e,console.log)}},{key:"pluginName",get:function(){return"DASHPlugin"}},{key:"defaultConfig",get:function(){return{bufferThreshold:10,defaultFormat:"dash",useEME:null,getLicenseUrl:"",intertrustServerURL:null,defaultDefinition:null,cdnHost:null,cdnBucket:null,useGapJump:!0,mediaType:void 0,useDurationBackoff:!1,useBuffered2:!1,maxHoleDuration:.5,preloadTime:void 0,maxBufferLength:void 0,minBufferLength:10,dynamicPreloadTimeOpts:null,preloadCancelTime:5,progressTimer:1e3,disableCanplayCheck:!0,disableDashNoCanplayCheck:!0,disableBufferBreakCheck:!0,definitionText:null,useUnionInfoDRM:!1,keyTokenExpiredDuration:null,keyToken:null,playDomain:null,defaultSampleDurationCheck:!1,segmentRatio:7.5,preloadBufferThreshold:.5,MaxAppendTimeout:50,nextSegmentSwitch:!1,vtype:De.DASH,focusUserDefinition:!1}}},{key:"isEMESupported",value:function(){return be()}},{key:"encryptUtils",get:function(){return r}},{key:"DashPreloader",get:function(){return Pt}},{key:"updateUnionInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t?t.unionID=e:n.unionID=e,document.cookie="volcvui=".concat(q.getUnionInfo(e)),q.getCookieValue("volcvui")}}]),n}(_.a)},e704d05b0d6013ca4cfe:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("fc3363cb05869232e380"),n("c93a3409710bc0c7e7f7"),n("96e657875a3e8636f3a2"),n("562804f2026cdb551686"),n("9719731fbecce0b796a9"),n("4ea9a2360f1f9dff21ee"),n("e27353d76bdab012b9c1"),n("eef23a05705d8b46f87b"),n("290db4855892ce0df490"),n("587ee3767cae257489e4"),n("a909ca3296d499985c89"),n("17d091243b0d38080c9b"),n("941cf7107cc378a8a916"),n("06a2848a1ac9fe42cbab"),n("4ae9548107096fa68936"),n("e934f008ce014eda6535"),n("4e9566162c13b75a7670"),n("41484d8a26324d97b7e6"),n("03f19a5a35b3604c3ba8"),n("9d0ca8b6b4ed29afaea1"),n("e3e20c2233a726c5030d"),n("40593390d2a56c9000c3"),n("a9a0574c493a10fa7b56"),n("a1c9567e919d8ae0bc47"),n("4fe1cfddaf90ec59b1fe"),n("0d50ea7bf61f95bd27a3"),n("e8d406fbf48a3be73a29"),n("2424222fdd55b7282442"),n("714667d626fd04a26548"),n("281981c6b99b2a82c28b"),n("3001a3934397946b1a1f"),n("173ed76c91c0d96934ab"),n("84e0a0c8a6be71b33470");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i={exports:{}};!function(e,t){var n,i=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(e){var t,i,a=void 0!==(e=e||{})?e:{};a.ready=new Promise((function(e,n){t=e,i=n})),Object.getOwnPropertyDescriptor(a.ready,"_getPredictedBitrate")||(Object.defineProperty(a.ready,"_getPredictedBitrate",{configurable:!0,get:function(){re("You are getting _getPredictedBitrate on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"_getPredictedBitrate",{configurable:!0,set:function(){re("You are setting _getPredictedBitrate on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(a.ready,"_updateMediaInfo")||(Object.defineProperty(a.ready,"_updateMediaInfo",{configurable:!0,get:function(){re("You are getting _updateMediaInfo on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"_updateMediaInfo",{configurable:!0,set:function(){re("You are setting _updateMediaInfo on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(a.ready,"_updateBufferInfo")||(Object.defineProperty(a.ready,"_updateBufferInfo",{configurable:!0,get:function(){re("You are getting _updateBufferInfo on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"_updateBufferInfo",{configurable:!0,set:function(){re("You are setting _updateBufferInfo on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(a.ready,"_updateSwitchInfo")||(Object.defineProperty(a.ready,"_updateSwitchInfo",{configurable:!0,get:function(){re("You are getting _updateSwitchInfo on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"_updateSwitchInfo",{configurable:!0,set:function(){re("You are setting _updateSwitchInfo on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(a.ready,"_updateDeviceInfo")||(Object.defineProperty(a.ready,"_updateDeviceInfo",{configurable:!0,get:function(){re("You are getting _updateDeviceInfo on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"_updateDeviceInfo",{configurable:!0,set:function(){re("You are setting _updateDeviceInfo on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(a.ready,"_parseMPD")||(Object.defineProperty(a.ready,"_parseMPD",{configurable:!0,get:function(){re("You are getting _parseMPD on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"_parseMPD",{configurable:!0,set:function(){re("You are setting _parseMPD on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(a.ready,"_getPreloadBitrate")||(Object.defineProperty(a.ready,"_getPreloadBitrate",{configurable:!0,get:function(){re("You are getting _getPreloadBitrate on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"_getPreloadBitrate",{configurable:!0,set:function(){re("You are setting _getPreloadBitrate on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(a.ready,"_updatePreloadSupplier")||(Object.defineProperty(a.ready,"_updatePreloadSupplier",{configurable:!0,get:function(){re("You are getting _updatePreloadSupplier on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"_updatePreloadSupplier",{configurable:!0,set:function(){re("You are setting _updatePreloadSupplier on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(a.ready,"_updatePreloadInfo")||(Object.defineProperty(a.ready,"_updatePreloadInfo",{configurable:!0,get:function(){re("You are getting _updatePreloadInfo on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"_updatePreloadInfo",{configurable:!0,set:function(){re("You are setting _updatePreloadInfo on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(a.ready,"_setDebugModel")||(Object.defineProperty(a.ready,"_setDebugModel",{configurable:!0,get:function(){re("You are getting _setDebugModel on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"_setDebugModel",{configurable:!0,set:function(){re("You are setting _setDebugModel on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(a.ready,"_free")||(Object.defineProperty(a.ready,"_free",{configurable:!0,get:function(){re("You are getting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"_free",{configurable:!0,set:function(){re("You are setting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(a.ready,"___stdio_exit")||(Object.defineProperty(a.ready,"___stdio_exit",{configurable:!0,get:function(){re("You are getting ___stdio_exit on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"___stdio_exit",{configurable:!0,set:function(){re("You are setting ___stdio_exit on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(a.ready,"onRuntimeInitialized")||(Object.defineProperty(a.ready,"onRuntimeInitialized",{configurable:!0,get:function(){re("You are getting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(a.ready,"onRuntimeInitialized",{configurable:!0,set:function(){re("You are setting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}));var o=Object.assign({},a);if(a.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -s ENVIRONMENT=web or -s ENVIRONMENT=node)");var s,c,u="";if("undefined"!=typeof document&&document.currentScript&&(u=document.currentScript.src),n&&(u=n),u=0!==u.indexOf("blob:")?u.substr(0,u.replace(/[?#].*/,"").lastIndexOf("/")+1):"","object"!=("undefined"==typeof window?"undefined":r(window))&&"function"!=typeof importScripts)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");s=function(e){try{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText}catch(f){var n=Ee(e);if(n)return function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];r>255&&(E(!1,"Character code "+r+" ("+String.fromCharCode(r)+")  at offset "+n+" not in 0x00-0xFF."),r&=255),t.push(String.fromCharCode(r))}return t.join("")}(n);throw f}},c=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){if(200==r.status||0==r.status&&r.response)t(r.response);else{var i=Ee(e);i?t(i.buffer):n()}},r.onerror=n,r.send(null)};var l,d=a.print||console.log.bind(console),f=a.printErr||console.warn.bind(console);function h(e){h.shown||(h.shown={}),h.shown[e]||(h.shown[e]=1,f(e))}function p(e,t){Object.getOwnPropertyDescriptor(a,e)||Object.defineProperty(a,e,{configurable:!0,get:function(){re("Module."+e+" has been replaced with plain "+t+" (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}})}function v(e,t){var n="'"+e+"' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)";return t&&(n+=". Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you"),n}function g(e,t){Object.getOwnPropertyDescriptor(a,e)||Object.defineProperty(a,e,{configurable:!0,get:function(){re(v(e,t))}})}function y(e,t){Object.getOwnPropertyDescriptor(a,e)||(a[e]=function(){return re(v(e,t))})}Object.assign(a,o),o=null,l="fetchSettings",Object.getOwnPropertyDescriptor(a,l)&&re("`Module."+l+"` was supplied but `"+l+"` not included in INCOMING_MODULE_JS_API"),a.arguments,p("arguments","arguments_"),a.thisProgram,p("thisProgram","thisProgram"),a.quit,p("quit","quit_"),E(void 0===a.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),E(void 0===a.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),E(void 0===a.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),E(void 0===a.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),E(void 0===a.read,"Module.read option was removed (modify read_ in JS)"),E(void 0===a.readAsync,"Module.readAsync option was removed (modify readAsync in JS)"),E(void 0===a.readBinary,"Module.readBinary option was removed (modify readBinary in JS)"),E(void 0===a.setWindowTitle,"Module.setWindowTitle option was removed (modify setWindowTitle in JS)"),E(void 0===a.TOTAL_MEMORY,"Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),p("read","read_"),p("readAsync","readAsync"),p("readBinary","readBinary"),p("setWindowTitle","setWindowTitle"),E(!0,"worker environment detected but not enabled at build time.  Add 'worker' to `-s ENVIRONMENT` to enable."),E(!0,"node environment detected but not enabled at build time.  Add 'node' to `-s ENVIRONMENT` to enable."),E(!0,"shell environment detected but not enabled at build time.  Add 'shell' to `-s ENVIRONMENT` to enable.");var m,b=0;a.wasmBinary&&(m=a.wasmBinary),p("wasmBinary","wasmBinary"),a.noExitRuntime,p("noExitRuntime","noExitRuntime");var _,k={Memory:function(e){this.buffer=new ArrayBuffer(65536*e.initial)},Module:function(e){},Instance:function(e,t){this.exports=function(e){for(var t,n=new Uint8Array(123),r=25;r>=0;--r)n[48+r]=52+r,n[65+r]=r,n[97+r]=26+r;function i(e,t,r){for(var i,a,o=0,s=t,c=r.length,u=t+(3*c>>2)-("="==r[c-2])-("="==r[c-1]);o<c;o+=4)i=n[r.charCodeAt(o+1)],a=n[r.charCodeAt(o+2)],e[s++]=n[r.charCodeAt(o)]<<2|i>>4,s<u&&(e[s++]=i<<4|a>>2),s<u&&(e[s++]=a<<6|n[r.charCodeAt(o+3)])}n[43]=62,n[47]=63;var a=new ArrayBuffer(16),o=new Int32Array(a),s=new Float64Array(a);function c(e){return o[e]}function u(e,t){o[e]=t}function l(){return s[0]}function d(e){s[0]=e}return function(e){var n=e.memory,r=n.buffer;n.grow=function(e){e|=0;var i=0|ii(),c=i+e|0;if(i<c&&c<65536){var u=new ArrayBuffer(y(c,65536));new Int8Array(u).set(a),a=new Int8Array(u),o=new Int16Array(u),s=new Int32Array(u),f=new Uint8Array(u),h=new Uint16Array(u),p=new Uint32Array(u),v=new Float32Array(u),g=new Float64Array(u),r=u,n.buffer=r,t=f}return i};var a=new Int8Array(r),o=new Int16Array(r),s=new Int32Array(r),f=new Uint8Array(r),h=new Uint16Array(r),p=new Uint32Array(r),v=new Float32Array(r),g=new Float64Array(r),y=Math.imul,m=Math.fround,b=Math.abs,_=Math.clz32,k=Math.min,w=Math.floor,E=Math.ceil,T=e.abort,A=e.gettimeofday,S=e.__assert_fail,I=e.__cxa_allocate_exception,R=e.__cxa_throw,O=e.emscripten_memcpy_big,C=e.fd_write,x=e.emscripten_resize_heap,P=e.fd_read,D=e.fd_close,L=e.abort,M=e.setTempRet0,N=e.fd_seek,U=20800,B=0,F=0,j=0;function H(e){var t,n=0,r=0,i=0,a=0,o=0,c=0,u=0,l=0,d=0,h=0,v=0,g=0;U=t=U-16|0;e:{t:{n:{r:{i:{a:{o:{s:{c:{u:{l:{if((e|=0)>>>0<=244){if(3&(n=(a=s[2763])>>>(r=(c=e>>>0<11?16:e+11&-8)>>>3|0)|0)){e=(o=s[11100+(n=(i=r+(1&(-1^n))|0)<<3)>>2])+8|0,(0|(r=s[o+8>>2]))!=(0|(n=n+11092|0))?(s[r+12>>2]=n,s[n+8>>2]=r):(v=11052,g=$t(i)&a,s[v>>2]=g),n=i<<3,s[o+4>>2]=3|n,s[4+(n=n+o|0)>>2]=1|s[n+4>>2];break e}if((h=s[2765])>>>0>=c>>>0)break l;if(n){r=e=(n=(0-(e=(0-(e=2<<r)|e)&n<<r)&e)-1|0)>>>12&16,r|=e=(n=n>>>e|0)>>>5&8,r|=e=(n=n>>>e|0)>>>2&4,d=s[11100+(e=(r=((r|=e=(n=n>>>e|0)>>>1&2)|(e=(n=n>>>e|0)>>>1&1))+(n>>>e|0)|0)<<3)>>2],(0|(n=s[d+8>>2]))!=(0|(e=e+11092|0))?(s[n+12>>2]=e,s[e+8>>2]=n):(a=$t(r)&a,s[2763]=a),e=d+8|0,s[d+4>>2]=3|c,o=(n=r<<3)-c|0,s[4+(i=c+d|0)>>2]=1|o,s[n+d>>2]=o,h&&(r=11092+((n=h>>>3|0)<<3)|0,d=s[2768],(n=1<<n)&a?n=s[r+8>>2]:(s[2763]=n|a,n=r),s[r+8>>2]=d,s[n+12>>2]=d,s[d+12>>2]=r,s[d+8>>2]=n),s[2768]=i,s[2765]=o;break e}if(!(u=s[2764]))break l;for(r=e=(n=(0-u&u)-1|0)>>>12&16,r|=e=(n=n>>>e|0)>>>5&8,r|=e=(n=n>>>e|0)>>>2&4,n=s[11356+(((r|=e=(n=n>>>e|0)>>>1&2)|(e=(n=n>>>e|0)>>>1&1))+(n>>>e|0)<<2)>>2],i=(-8&s[n+4>>2])-c|0,r=n;(e=s[r+16>>2])||(e=s[r+20>>2]);)i=(o=(r=(-8&s[e+4>>2])-c|0)>>>0<i>>>0)?r:i,n=o?e:n,r=e;if(l=s[n+24>>2],(0|(o=s[n+12>>2]))!=(0|n)){e=s[n+8>>2],s[e+12>>2]=o,s[o+8>>2]=e;break t}if(!(e=s[(r=n+20|0)>>2])){if(!(e=s[n+16>>2]))break u;r=n+16|0}for(;d=r,o=e,(e=s[(r=e+20|0)>>2])||(r=o+16|0,e=s[o+16>>2]););s[d>>2]=0;break t}if(c=-1,!(e>>>0>4294967231)&&(c=-8&(e=e+11|0),l=s[2764])){i=0-c|0,a=0,c>>>0<256||(a=31,c>>>0>16777215||(e=e>>>8|0,e<<=d=e+1048320>>>16&8,a=28+((e=((e<<=r=e+520192>>>16&4)<<(n=e+245760>>>16&2)>>>15|0)-(n|r|d)|0)<<1|c>>>e+21&1)|0));d:{f:{if(r=s[11356+(a<<2)>>2])for(e=0,n=c<<(31==(0|a)?0:25-(a>>>1|0)|0);;){if(!((d=(u=-8&s[r+4>>2])-c|0)>>>0>=i>>>0)&&(i=d,o=r,(0|c)==(0|u))){i=0,e=r;break f}if(d=s[r+20>>2],r=s[16+((n>>>29&4)+r|0)>>2],e=d?(0|d)==(0|r)?e:d:e,n<<=1,!r)break}else e=0;if(!(e|o)){if(o=0,!(e=(0-(e=2<<a)|e)&l))break l;r=e=(n=(e&0-e)-1|0)>>>12&16,r|=e=(n=n>>>e|0)>>>5&8,r|=e=(n=n>>>e|0)>>>2&4,e=s[11356+(((r|=e=(n=n>>>e|0)>>>1&2)|(e=(n=n>>>e|0)>>>1&1))+(n>>>e|0)<<2)>>2]}if(!e)break d}for(;i=(r=(n=(-8&s[e+4>>2])-c|0)>>>0<i>>>0)?n:i,o=r?e:o,e=(n=s[e+16>>2])||s[e+20>>2];);}if(!(!o|s[2765]-c>>>0<=i>>>0)){if(a=s[o+24>>2],(0|o)!=(0|(n=s[o+12>>2]))){e=s[o+8>>2],s[e+12>>2]=n,s[n+8>>2]=e;break n}if(!(e=s[(r=o+20|0)>>2])){if(!(e=s[o+16>>2]))break c;r=o+16|0}for(;d=r,n=e,(e=s[(r=e+20|0)>>2])||(r=n+16|0,e=s[n+16>>2]););s[d>>2]=0;break n}}}if((r=s[2765])>>>0>=c>>>0){i=s[2768],(n=r-c|0)>>>0>=16?(s[2765]=n,e=i+c|0,s[2768]=e,s[e+4>>2]=1|n,s[r+i>>2]=n,s[i+4>>2]=3|c):(s[2768]=0,s[2765]=0,s[i+4>>2]=3|r,s[4+(e=r+i|0)>>2]=1|s[e+4>>2]),e=i+8|0;break e}if((l=s[2766])>>>0>c>>>0){n=l-c|0,s[2766]=n,e=(r=s[2769])+c|0,s[2769]=e,s[e+4>>2]=1|n,s[r+4>>2]=3|c,e=r+8|0;break e}if(e=0,u=c+47|0,s[2881]?r=s[2883]:(s[2884]=-1,s[2885]=-1,s[2882]=4096,s[2883]=4096,s[2881]=t+12&-16^1431655768,s[2886]=0,s[2874]=0,r=4096),(r=(d=u+r|0)&(o=0-r|0))>>>0<=c>>>0)break e;if((i=s[2873])&&(a=(n=s[2871])+r|0)>>>0>i>>>0|n>>>0>=a>>>0)break e;if(4&f[11496])break a;l:{d:{if(i=s[2769])for(e=11500;;){if((n=s[e>>2])>>>0<=i>>>0&i>>>0<n+s[e+4>>2]>>>0)break d;if(!(e=s[e+8>>2]))break}if(-1==(0|(n=Qe(0))))break o;if(a=r,(e=(i=s[2882])-1|0)&n&&(a=(r-n|0)+(e+n&0-i)|0),a>>>0<=c>>>0|a>>>0>2147483646)break o;if((i=s[2873])&&i>>>0<(o=(e=s[2871])+a|0)>>>0|e>>>0>=o>>>0)break o;if((0|n)!=(0|(e=Qe(a))))break l;break i}if((a=o&d-l)>>>0>2147483646)break o;if((0|(n=Qe(a)))==(s[e>>2]+s[e+4>>2]|0))break s;e=n}if(!(-1==(0|e)|c+48>>>0<=a>>>0)){if((n=(n=s[2883])+(u-a|0)&0-n)>>>0>2147483646){n=e;break i}if(-1!=(0|Qe(n))){a=n+a|0,n=e;break i}Qe(0-a|0);break o}if(n=e,-1!=(0|e))break i;break o}o=0;break t}n=0;break n}if(-1!=(0|n))break i}s[2874]=4|s[2874]}if(r>>>0>2147483646)break r;if(-1==(0|(n=Qe(r)))|-1==(0|(e=Qe(0)))|e>>>0<=n>>>0)break r;if((a=e-n|0)>>>0<=c+40>>>0)break r}e=s[2871]+a|0,s[2871]=e,e>>>0>p[2872]&&(s[2872]=e);i:{a:{o:{if(u=s[2769]){for(e=11500;;){if(((i=s[e>>2])+(r=s[e+4>>2])|0)==(0|n))break o;if(!(e=s[e+8>>2]))break}break a}for((e=s[2767])>>>0<=n>>>0&&e||(s[2767]=n),e=0,s[2876]=a,s[2875]=n,s[2771]=-1,s[2772]=s[2881],s[2878]=0;r=11092+(i=e<<3)|0,s[i+11100>>2]=r,s[i+11104>>2]=r,32!=(0|(e=e+1|0)););r=(i=a-40|0)-(e=n+8&7?-8-n&7:0)|0,s[2766]=r,e=e+n|0,s[2769]=e,s[e+4>>2]=1|r,s[4+(n+i|0)>>2]=40,s[2770]=s[2885];break i}if(!(8&f[e+12|0]|i>>>0>u>>>0|n>>>0<=u>>>0)){s[e+4>>2]=r+a,r=(e=u+8&7?-8-u&7:0)+u|0,s[2769]=r,e=(n=s[2766]+a|0)-e|0,s[2766]=e,s[r+4>>2]=1|e,s[4+(n+u|0)>>2]=40,s[2770]=s[2885];break i}}p[2767]>n>>>0&&(s[2767]=n),r=n+a|0,e=11500;a:{o:{s:{c:{u:{l:{for(;;){if((0|r)!=s[e>>2]){if(e=s[e+8>>2])continue;break l}break}if(!(8&f[e+12|0]))break u}for(e=11500;;){if((r=s[e>>2])>>>0<=u>>>0&&(o=r+s[e+4>>2]|0)>>>0>u>>>0)break c;e=s[e+8>>2]}}if(s[e>>2]=n,s[e+4>>2]=s[e+4>>2]+a,s[4+(d=(n+8&7?-8-n&7:0)+n|0)>>2]=3|c,c=(a=r+(r+8&7?-8-r&7:0)|0)-(l=c+d|0)|0,(0|a)==(0|u)){s[2769]=l,e=s[2766]+c|0,s[2766]=e,s[l+4>>2]=1|e;break o}if(s[2768]==(0|a)){s[2768]=l,e=s[2765]+c|0,s[2765]=e,s[l+4>>2]=1|e,s[e+l>>2]=e;break o}if(1==(3&(e=s[a+4>>2]))){o=-8&e;u:if(e>>>0<=255){if(r=s[a+8>>2],e=e>>>3|0,(0|(n=s[a+12>>2]))==(0|r)){v=11052,g=s[2763]&$t(e),s[v>>2]=g;break u}s[r+12>>2]=n,s[n+8>>2]=r}else{if(u=s[a+24>>2],(0|a)==(0|(n=s[a+12>>2])))if((i=s[(e=a+20|0)>>2])||(i=s[(e=a+16|0)>>2])){for(;r=e,(i=s[(e=(n=i)+20|0)>>2])||(e=n+16|0,i=s[n+16>>2]););s[r>>2]=0}else n=0;else e=s[a+8>>2],s[e+12>>2]=n,s[n+8>>2]=e;if(u){r=s[a+28>>2];l:{if(s[(e=11356+(r<<2)|0)>>2]==(0|a)){if(s[e>>2]=n,n)break l;v=11056,g=s[2764]&$t(r),s[v>>2]=g;break u}if(s[u+(s[u+16>>2]==(0|a)?16:20)>>2]=n,!n)break u}s[n+24>>2]=u,(e=s[a+16>>2])&&(s[n+16>>2]=e,s[e+24>>2]=n),(e=s[a+20>>2])&&(s[n+20>>2]=e,s[e+24>>2]=n)}}c=o+c|0,a=a+o|0}if(s[a+4>>2]=-2&s[a+4>>2],s[l+4>>2]=1|c,s[c+l>>2]=c,c>>>0<=255){n=11092+((e=c>>>3|0)<<3)|0,(r=s[2763])&(e=1<<e)?e=s[n+8>>2]:(s[2763]=e|r,e=n),s[n+8>>2]=l,s[e+12>>2]=l,s[l+12>>2]=n,s[l+8>>2]=e;break o}if(e=31,c>>>0<=16777215&&(e=c>>>8|0,e<<=i=e+1048320>>>16&8,e=28+((e=((e<<=r=e+520192>>>16&4)<<(n=e+245760>>>16&2)>>>15|0)-(n|r|i)|0)<<1|c>>>e+21&1)|0),s[l+28>>2]=e,s[l+16>>2]=0,s[l+20>>2]=0,i=11356+(e<<2)|0,(r=s[2764])&(n=1<<e)){for(e=c<<(31==(0|e)?0:25-(e>>>1|0)|0),n=s[i>>2];;){if(r=n,(-8&s[n+4>>2])==(0|c))break s;if(n=e>>>29|0,e<<=1,!(n=s[16+(i=r+(4&n)|0)>>2]))break}s[i+16>>2]=l,s[l+24>>2]=r}else s[2764]=n|r,s[i>>2]=l,s[l+24>>2]=i;s[l+12>>2]=l,s[l+8>>2]=l;break o}for(r=(i=a-40|0)-(e=n+8&7?-8-n&7:0)|0,s[2766]=r,e=e+n|0,s[2769]=e,s[e+4>>2]=1|r,s[4+(n+i|0)>>2]=40,s[2770]=s[2885],s[(r=(e=(o+(o-39&7?39-o&7:0)|0)-47|0)>>>0<u+16>>>0?u:e)+4>>2]=27,e=s[2878],s[r+16>>2]=s[2877],s[r+20>>2]=e,e=s[2876],s[r+8>>2]=s[2875],s[r+12>>2]=e,s[2877]=r+8,s[2876]=a,s[2875]=n,s[2878]=0,e=r+24|0;s[e+4>>2]=7,n=e+8|0,e=e+4|0,n>>>0<o>>>0;);if((0|r)==(0|u))break i;if(s[r+4>>2]=-2&s[r+4>>2],o=r-u|0,s[u+4>>2]=1|o,s[r>>2]=o,o>>>0<=255){n=11092+((e=o>>>3|0)<<3)|0,(r=s[2763])&(e=1<<e)?e=s[n+8>>2]:(s[2763]=e|r,e=n),s[n+8>>2]=u,s[e+12>>2]=u,s[u+12>>2]=n,s[u+8>>2]=e;break i}if(e=31,s[u+16>>2]=0,s[u+20>>2]=0,o>>>0<=16777215&&(e=o>>>8|0,e<<=i=e+1048320>>>16&8,e=28+((e=((e<<=r=e+520192>>>16&4)<<(n=e+245760>>>16&2)>>>15|0)-(n|r|i)|0)<<1|o>>>e+21&1)|0),s[u+28>>2]=e,i=11356+(e<<2)|0,(r=s[2764])&(n=1<<e)){for(e=o<<(31==(0|e)?0:25-(e>>>1|0)|0),n=s[i>>2];;){if(r=n,(0|o)==(-8&s[n+4>>2]))break a;if(n=e>>>29|0,e<<=1,!(n=s[16+(i=r+(4&n)|0)>>2]))break}s[i+16>>2]=u,s[u+24>>2]=r}else s[2764]=n|r,s[i>>2]=u,s[u+24>>2]=i;s[u+12>>2]=u,s[u+8>>2]=u;break i}e=s[r+8>>2],s[e+12>>2]=l,s[r+8>>2]=l,s[l+24>>2]=0,s[l+12>>2]=r,s[l+8>>2]=e}e=d+8|0;break e}e=s[r+8>>2],s[e+12>>2]=u,s[r+8>>2]=u,s[u+24>>2]=0,s[u+12>>2]=r,s[u+8>>2]=e}if(!((e=s[2766])>>>0<=c>>>0)){n=e-c|0,s[2766]=n,e=(r=s[2769])+c|0,s[2769]=e,s[e+4>>2]=1|n,s[r+4>>2]=3|c,e=r+8|0;break e}}s[2720]=48,e=0;break e}n:if(a){r=s[o+28>>2];r:{if(s[(e=11356+(r<<2)|0)>>2]==(0|o)){if(s[e>>2]=n,n)break r;l=$t(r)&l,s[2764]=l;break n}if(s[a+(s[a+16>>2]==(0|o)?16:20)>>2]=n,!n)break n}s[n+24>>2]=a,(e=s[o+16>>2])&&(s[n+16>>2]=e,s[e+24>>2]=n),(e=s[o+20>>2])&&(s[n+20>>2]=e,s[e+24>>2]=n)}n:if(i>>>0<=15)e=i+c|0,s[o+4>>2]=3|e,s[4+(e=e+o|0)>>2]=1|s[e+4>>2];else if(s[o+4>>2]=3|c,s[4+(a=o+c|0)>>2]=1|i,s[a+i>>2]=i,i>>>0<=255)n=11092+((e=i>>>3|0)<<3)|0,(r=s[2763])&(e=1<<e)?e=s[n+8>>2]:(s[2763]=e|r,e=n),s[n+8>>2]=a,s[e+12>>2]=a,s[a+12>>2]=n,s[a+8>>2]=e;else{e=31,i>>>0<=16777215&&(e=i>>>8|0,e<<=d=e+1048320>>>16&8,e=28+((e=((e<<=r=e+520192>>>16&4)<<(n=e+245760>>>16&2)>>>15|0)-(n|r|d)|0)<<1|i>>>e+21&1)|0),s[a+28>>2]=e,s[a+16>>2]=0,s[a+20>>2]=0,n=11356+(e<<2)|0;r:{if((r=1<<e)&l){for(e=i<<(31==(0|e)?0:25-(e>>>1|0)|0),r=s[n>>2];;){if((-8&s[(n=r)+4>>2])==(0|i))break r;if(r=e>>>29|0,e<<=1,!(r=s[16+(d=(4&r)+n|0)>>2]))break}s[d+16>>2]=a}else s[2764]=r|l,s[n>>2]=a;s[a+24>>2]=n,s[a+12>>2]=a,s[a+8>>2]=a;break n}e=s[n+8>>2],s[e+12>>2]=a,s[n+8>>2]=a,s[a+24>>2]=0,s[a+12>>2]=n,s[a+8>>2]=e}e=o+8|0;break e}t:if(l){r=s[n+28>>2];n:{if(s[(e=11356+(r<<2)|0)>>2]==(0|n)){if(s[e>>2]=o,o)break n;v=11056,g=$t(r)&u,s[v>>2]=g;break t}if(s[l+(s[l+16>>2]==(0|n)?16:20)>>2]=o,!o)break t}s[o+24>>2]=l,(e=s[n+16>>2])&&(s[o+16>>2]=e,s[e+24>>2]=o),(e=s[n+20>>2])&&(s[o+20>>2]=e,s[e+24>>2]=o)}i>>>0<=15?(e=i+c|0,s[n+4>>2]=3|e,s[4+(e=e+n|0)>>2]=1|s[e+4>>2]):(s[n+4>>2]=3|c,s[4+(o=n+c|0)>>2]=1|i,s[i+o>>2]=i,h&&(r=11092+((e=h>>>3|0)<<3)|0,d=s[2768],(e=1<<e)&a?e=s[r+8>>2]:(s[2763]=e|a,e=r),s[r+8>>2]=d,s[e+12>>2]=d,s[d+12>>2]=r,s[d+8>>2]=e),s[2768]=o,s[2765]=i),e=n+8|0}return U=t+16|0,0|e}function V(e,t,n,r,i){var c,u,l,d=0,h=0,p=0,v=0,m=0,b=0,_=0,k=0,w=0,E=0,T=0,A=0,S=0,I=0,R=0,O=0;U=c=U-80|0,s[c+76>>2]=t,l=c+55|0,u=c+56|0,t=0;e:{t:{n:{r:{i:for(;;){if((2147483647-_|0)<(0|t))break r;_=t+_|0;a:{o:{s:{if(b=s[c+76>>2],d=f[0|(t=b)])for(;;){c:{u:if(d&=255){if(37!=(0|d))break c;for(d=t;;){if(37!=f[t+1|0])break u;if(h=t+2|0,s[c+76>>2]=h,d=d+1|0,p=f[t+2|0],t=h,37!=(0|p))break}}else d=t;if((0|(t=d-b|0))>(0|(I=2147483647-_|0)))break r;if(e&&de(e,b,t),(0|d)!=(0|b))continue i;E=-1,d=1,h=!gr(a[s[c+76>>2]+1|0]),t=s[c+76>>2],h|36!=f[t+2|0]||(E=a[t+1|0]-48|0,S=1,d=3),t=d+t|0,s[c+76>>2]=t,k=0;u:if((h=(v=a[0|t])-32|0)>>>0>31)d=t;else if(d=t,75913&(p=1<<h))for(;;){if(d=t+1|0,s[c+76>>2]=d,k|=p,(h=(v=a[t+1|0])-32|0)>>>0>=32)break u;if(t=d,!(75913&(p=1<<h)))break}u:if(42!=(0|v)){if((0|(w=Le(c+76|0)))<0)break r;t=s[c+76>>2]}else{if(gr(a[d+1|0])&&(t=s[c+76>>2],36==f[t+2|0]))s[((a[t+1|0]<<2)+i|0)-192>>2]=10,w=s[((a[t+1|0]<<3)+r|0)-384>>2],S=1,t=t+3|0;else{if(S)break s;S=0,w=0,e&&(t=s[n>>2],s[n>>2]=t+4,w=s[t>>2]),t=s[c+76>>2]+1|0}if(s[c+76>>2]=t,(0|w)>=0)break u;w=0-w|0,k|=8192}if(d=0,p=-1,T=0,46==f[0|t])if(42!=f[t+1|0])s[c+76>>2]=t+1,p=Le(c+76|0),t=s[c+76>>2],T=1;else{if(gr(a[t+2|0])&&(t=s[c+76>>2],36==f[t+3|0]))s[((a[t+2|0]<<2)+i|0)-192>>2]=10,p=s[((a[t+2|0]<<3)+r|0)-384>>2],t=t+4|0;else{if(S)break s;e?(t=s[n>>2],s[n>>2]=t+4,p=s[t>>2]):p=0,t=s[c+76>>2]+2|0}s[c+76>>2]=t,T=(-1^p)>>>31|0}for(;;){if(A=d,m=28,a[0|t]-123>>>0<4294967238)break n;if(v=t+1|0,s[c+76>>2]=v,d=a[0|t],t=v,!((d=f[7711+(d+y(A,58)|0)|0])-1>>>0<8))break}u:{l:{if(27!=(0|d)){if(!d)break n;if((0|E)>=0){s[(E<<2)+i>>2]=d,d=s[4+(t=(E<<3)+r|0)>>2],s[c+64>>2]=s[t>>2],s[c+68>>2]=d;break l}if(!e)break a;J(c- -64|0,d,n),v=s[c+76>>2];break u}if((0|E)>=0)break n}if(t=0,!e)continue i}h=-65537&k,d=8192&k?h:k,k=0,E=1035,m=u;u:{l:{d:{f:{h:{p:{v:{g:{y:{m:{b:{_:{k:{w:{E:{T:switch(t=a[v-1|0],(t=A&&3==(15&t)?-33&t:t)-88|0){case 11:break u;case 9:case 13:case 14:case 15:break l;case 27:break v;case 12:case 17:break m;case 23:break b;case 0:case 32:break _;case 24:break k;case 22:break w;case 29:break E;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 10:case 16:case 18:case 19:case 20:case 21:case 25:case 26:case 28:case 30:case 31:break o}T:switch(t-65|0){case 0:case 4:case 5:case 6:break l;case 2:break h;case 1:case 3:break o}if(83==(0|t))break p;break o}v=s[c+64>>2],h=s[c+68>>2],E=1035;break y}t=0;w:switch(255&A){case 0:case 1:s[s[c+64>>2]>>2]=_;continue i;case 2:d=s[c+64>>2],s[d>>2]=_,s[d+4>>2]=_>>31;continue i;case 3:o[s[c+64>>2]>>1]=_;continue i;case 4:a[s[c+64>>2]]=_;continue i;case 6:s[s[c+64>>2]>>2]=_;continue i;case 7:break w;default:continue i}d=s[c+64>>2],s[d>>2]=_,s[d+4>>2]=_>>31;continue i}p=p>>>0>8?p:8,d|=8,t=120}if(b=u,R=32&t,(v=s[c+64>>2])|(h=s[c+68>>2]))for(;a[0|(b=b-1|0)]=R|f[8240+(15&v)|0],O=!h&v>>>0>15|0!=(0|h),A=h,h=h>>>4|0,v=(15&A)<<28|v>>>4,O;);if(!(8&d)|!(s[c+64>>2]|s[c+68>>2]))break g;E=1035+(t>>>4|0)|0,k=2;break g}if(t=u,(v=s[c+64>>2])|(h=s[c+68>>2]))for(;a[0|(t=t-1|0)]=7&v|48,A=!h&v>>>0>7|0!=(0|h),b=h,h=h>>>3|0,v=(7&b)<<29|v>>>3,A;);if(b=t,!(8&d))break g;p=(0|(t=u-b|0))<(0|p)?p:t+1|0;break g}h=t=s[c+68>>2],v=s[c+64>>2],(0|t)<0?(h=0-(h+(0!=(0|v))|0)|0,v=0-v|0,s[c+64>>2]=v,s[c+68>>2]=h,k=1,E=1035):2048&d?(k=1,E=1036):E=(k=1&d)?1037:1035}b=Se(v,h,u)}if((0|p)<0&&T)break r;if(d=T?-65537&d:d,!(0!=((h=s[c+64>>2])|(t=s[c+68>>2]))|p)){b=u,p=0;break o}p=(0|(t=!(t|h)+(u-b|0)|0))<(0|p)?p:t;break o}v=0!=(0|(m=T=p>>>0<2147483647?p:2147483647));v:{g:{y:{m:if(!(!(3&(t=d=b=(t=s[c+64>>2])||2278))|!m))for(;;){if(!f[0|t])break y;if(v=0!=(0|(m=m-1|0)),!(3&(t=t+1|0)))break m;if(!m)break}if(!v)break g}y:if(!(!f[0|t]|m>>>0<4))for(;;){if((-1^(v=s[t>>2]))&v-16843009&-2139062144)break y;if(t=t+4|0,!((m=m-4|0)>>>0>3))break}if(m)for(;;){if(!f[0|t])break v;if(t=t+1|0,!(m=m-1|0))break}}t=0}if(m=(t=t?t-d|0:T)+b|0,(0|p)>=0){d=h,p=t;break o}if(d=h,p=t,f[0|m])break r;break o}if(p){m=s[c+64>>2];break f}t=0,je(e,32,w,0,d);break d}s[c+12>>2]=0,s[c+8>>2]=s[c+64>>2],m=c+8|0,s[c+64>>2]=m,p=-1}t=0;f:{for(;;){if(!(h=s[m>>2]))break f;if(!((b=(0|(h=se(c+4|0,h)))<0)|h>>>0>p-t>>>0)){if(m=m+4|0,p>>>0>(t=t+h|0)>>>0)continue;break f}break}if(b)break t}if(m=61,(0|t)<0)break n;if(je(e,32,w,t,d),t)for(p=0,m=s[c+64>>2];;){if(!(h=s[m>>2]))break d;if((p=(h=se(c+4|0,h))+p|0)>>>0>t>>>0)break d;if(de(e,c+4|0,h),m=m+4|0,!(t>>>0>p>>>0))break}else t=0}je(e,32,w,t,8192^d),t=(0|t)<(0|w)?w:t;continue i}if((0|p)<0&&T)break r;if(m=61,(0|(t=0|ri[7](e,g[c+64>>3],w,p,d,t)))>=0)continue i;break n}a[c+55|0]=s[c+64>>2],p=1,b=l,d=h;break o}h=t+1|0,s[c+76>>2]=h,d=f[t+1|0],t=h}if(e)break e;if(!S)break a;for(t=1;;){if(e=s[(t<<2)+i>>2]){if(J((t<<3)+r|0,e,n),_=1,10!=(0|(t=t+1|0)))continue;break e}break}if(_=1,t>>>0>=10)break e;for(;;){if(s[(t<<2)+i>>2])break s;if(10==(0|(t=t+1|0)))break}break e}m=28;break n}if((0|(p=(0|p)>(0|(v=m-b|0))?p:v))>(2147483647-k|0))break r;if(m=61,(0|I)<(0|(t=(0|(h=p+k|0))<(0|w)?w:h)))break n;je(e,32,t,h,d),de(e,E,k),je(e,48,t,h,65536^d),je(e,48,p,v,0),de(e,b,v),je(e,32,t,h,8192^d);continue}break}_=0;break e}m=61}s[2720]=m}_=-1}return U=c+80|0,_}function W(e){var t=0,n=0,r=0,i=0,a=0,o=0,c=0,u=0,l=0;e:if(e|=0){a=(r=e-8|0)+(e=-8&(t=s[e-4>>2]))|0;t:if(!(1&t)){if(!(3&t))break e;if((r=r-(t=s[r>>2])|0)>>>0<p[2767])break e;if(e=e+t|0,s[2768]==(0|r)){if(3==(3&(t=s[a+4>>2])))return s[2765]=e,s[a+4>>2]=-2&t,s[r+4>>2]=1|e,void(s[e+r>>2]=e)}else{if(t>>>0<=255){if(i=s[r+8>>2],t=t>>>3|0,(0|(n=s[r+12>>2]))==(0|i)){u=11052,l=s[2763]&$t(t),s[u>>2]=l;break t}s[i+12>>2]=n,s[n+8>>2]=i;break t}if(c=s[r+24>>2],(0|r)==(0|(t=s[r+12>>2])))if((n=s[(i=r+20|0)>>2])||(n=s[(i=r+16|0)>>2])){for(;o=i,(n=s[(i=(t=n)+20|0)>>2])||(i=t+16|0,n=s[t+16>>2]););s[o>>2]=0}else t=0;else n=s[r+8>>2],s[n+12>>2]=t,s[t+8>>2]=n;if(!c)break t;i=s[r+28>>2];n:{if(s[(n=11356+(i<<2)|0)>>2]==(0|r)){if(s[n>>2]=t,t)break n;u=11056,l=s[2764]&$t(i),s[u>>2]=l;break t}if(s[c+(s[c+16>>2]==(0|r)?16:20)>>2]=t,!t)break t}if(s[t+24>>2]=c,(n=s[r+16>>2])&&(s[t+16>>2]=n,s[n+24>>2]=t),!(n=s[r+20>>2]))break t;s[t+20>>2]=n,s[n+24>>2]=t}}if(!(r>>>0>=a>>>0)&&1&(t=s[a+4>>2])){t:{if(!(2&t)){if(s[2769]==(0|a)){if(s[2769]=r,e=s[2766]+e|0,s[2766]=e,s[r+4>>2]=1|e,s[2768]!=(0|r))break e;return s[2765]=0,void(s[2768]=0)}if(s[2768]==(0|a))return s[2768]=r,e=s[2765]+e|0,s[2765]=e,s[r+4>>2]=1|e,void(s[e+r>>2]=e);e=(-8&t)+e|0;n:if(t>>>0<=255){if(i=s[a+8>>2],t=t>>>3|0,(0|(n=s[a+12>>2]))==(0|i)){u=11052,l=s[2763]&$t(t),s[u>>2]=l;break n}s[i+12>>2]=n,s[n+8>>2]=i}else{if(c=s[a+24>>2],(0|a)==(0|(t=s[a+12>>2])))if((n=s[(i=a+20|0)>>2])||(n=s[(i=a+16|0)>>2])){for(;o=i,(n=s[(i=(t=n)+20|0)>>2])||(i=t+16|0,n=s[t+16>>2]););s[o>>2]=0}else t=0;else n=s[a+8>>2],s[n+12>>2]=t,s[t+8>>2]=n;if(c){i=s[a+28>>2];r:{if(s[(n=11356+(i<<2)|0)>>2]==(0|a)){if(s[n>>2]=t,t)break r;u=11056,l=s[2764]&$t(i),s[u>>2]=l;break n}if(s[c+(s[c+16>>2]==(0|a)?16:20)>>2]=t,!t)break n}s[t+24>>2]=c,(n=s[a+16>>2])&&(s[t+16>>2]=n,s[n+24>>2]=t),(n=s[a+20>>2])&&(s[t+20>>2]=n,s[n+24>>2]=t)}}if(s[r+4>>2]=1|e,s[e+r>>2]=e,s[2768]!=(0|r))break t;return void(s[2765]=e)}s[a+4>>2]=-2&t,s[r+4>>2]=1|e,s[e+r>>2]=e}if(e>>>0<=255)return t=11092+((e=e>>>3|0)<<3)|0,(n=s[2763])&(e=1<<e)?e=s[t+8>>2]:(s[2763]=e|n,e=t),s[t+8>>2]=r,s[e+12>>2]=r,s[r+12>>2]=t,void(s[r+8>>2]=e);i=31,s[r+16>>2]=0,s[r+20>>2]=0,e>>>0<=16777215&&(t=e>>>8|0,t<<=o=t+1048320>>>16&8,i=28+((t=((t<<=i=t+520192>>>16&4)<<(n=t+245760>>>16&2)>>>15|0)-(n|i|o)|0)<<1|e>>>t+21&1)|0),s[r+28>>2]=i,o=11356+(i<<2)|0;t:{n:{if((n=s[2764])&(t=1<<i)){for(i=e<<(31==(0|i)?0:25-(i>>>1|0)|0),t=s[o>>2];;){if(n=t,(-8&s[t+4>>2])==(0|e))break n;if(t=i>>>29|0,i<<=1,!(t=s[16+(o=n+(4&t)|0)>>2]))break}s[o+16>>2]=r,s[r+24>>2]=n}else s[2764]=t|n,s[o>>2]=r,s[r+24>>2]=o;s[r+12>>2]=r,s[r+8>>2]=r;break t}e=s[n+8>>2],s[e+12>>2]=r,s[n+8>>2]=r,s[r+24>>2]=0,s[r+12>>2]=n,s[r+8>>2]=e}e=s[2771]-1|0,s[2771]=e||-1}}}function G(e,t){var n,r=0,i=0,a=0,o=0,c=0,u=0,l=0;n=e+t|0;e:{t:if(!(1&(r=s[e+4>>2]))){if(!(3&r))break e;t=(r=s[e>>2])+t|0;n:{if((0|(e=e-r|0))!=s[2768]){if(r>>>0<=255){if(a=s[e+8>>2],r=r>>>3|0,(0|(i=s[e+12>>2]))!=(0|a))break n;u=11052,l=s[2763]&$t(r),s[u>>2]=l;break t}if(c=s[e+24>>2],(0|(r=s[e+12>>2]))==(0|e))if((i=s[(a=e+20|0)>>2])||(i=s[(a=e+16|0)>>2])){for(;o=a,(i=s[(a=(r=i)+20|0)>>2])||(a=r+16|0,i=s[r+16>>2]););s[o>>2]=0}else r=0;else i=s[e+8>>2],s[i+12>>2]=r,s[r+8>>2]=i;if(!c)break t;a=s[e+28>>2];r:{if(s[(i=11356+(a<<2)|0)>>2]==(0|e)){if(s[i>>2]=r,r)break r;u=11056,l=s[2764]&$t(a),s[u>>2]=l;break t}if(s[c+(s[c+16>>2]==(0|e)?16:20)>>2]=r,!r)break t}if(s[r+24>>2]=c,(i=s[e+16>>2])&&(s[r+16>>2]=i,s[i+24>>2]=r),!(i=s[e+20>>2]))break t;s[r+20>>2]=i,s[i+24>>2]=r;break t}if(3!=(3&(r=s[n+4>>2])))break t;return s[2765]=t,s[n+4>>2]=-2&r,s[e+4>>2]=1|t,void(s[n>>2]=t)}s[a+12>>2]=i,s[i+8>>2]=a}t:{if(!(2&(r=s[n+4>>2]))){if(s[2769]==(0|n)){if(s[2769]=e,t=s[2766]+t|0,s[2766]=t,s[e+4>>2]=1|t,s[2768]!=(0|e))break e;return s[2765]=0,void(s[2768]=0)}if(s[2768]==(0|n))return s[2768]=e,t=s[2765]+t|0,s[2765]=t,s[e+4>>2]=1|t,void(s[e+t>>2]=t);t=(-8&r)+t|0;n:if(r>>>0<=255){if(a=s[n+8>>2],r=r>>>3|0,(0|(i=s[n+12>>2]))==(0|a)){u=11052,l=s[2763]&$t(r),s[u>>2]=l;break n}s[a+12>>2]=i,s[i+8>>2]=a}else{if(c=s[n+24>>2],(0|n)==(0|(r=s[n+12>>2])))if((a=s[(i=n+20|0)>>2])||(a=s[(i=n+16|0)>>2])){for(;o=i,(a=s[(i=(r=a)+20|0)>>2])||(i=r+16|0,a=s[r+16>>2]););s[o>>2]=0}else r=0;else i=s[n+8>>2],s[i+12>>2]=r,s[r+8>>2]=i;if(c){a=s[n+28>>2];r:{if(s[(i=11356+(a<<2)|0)>>2]==(0|n)){if(s[i>>2]=r,r)break r;u=11056,l=s[2764]&$t(a),s[u>>2]=l;break n}if(s[c+(s[c+16>>2]==(0|n)?16:20)>>2]=r,!r)break n}s[r+24>>2]=c,(i=s[n+16>>2])&&(s[r+16>>2]=i,s[i+24>>2]=r),(i=s[n+20>>2])&&(s[r+20>>2]=i,s[i+24>>2]=r)}}if(s[e+4>>2]=1|t,s[e+t>>2]=t,s[2768]!=(0|e))break t;return void(s[2765]=t)}s[n+4>>2]=-2&r,s[e+4>>2]=1|t,s[e+t>>2]=t}if(t>>>0<=255)return r=11092+((t=t>>>3|0)<<3)|0,(i=s[2763])&(t=1<<t)?t=s[r+8>>2]:(s[2763]=t|i,t=r),s[r+8>>2]=e,s[t+12>>2]=e,s[e+12>>2]=r,void(s[e+8>>2]=t);a=31,s[e+16>>2]=0,s[e+20>>2]=0,t>>>0<=16777215&&(r=t>>>8|0,r<<=o=r+1048320>>>16&8,a=28+((r=((r<<=a=r+520192>>>16&4)<<(i=r+245760>>>16&2)>>>15|0)-(i|a|o)|0)<<1|t>>>r+21&1)|0),s[e+28>>2]=a,o=11356+(a<<2)|0;t:{if((i=s[2764])&(r=1<<a)){for(a=t<<(31==(0|a)?0:25-(a>>>1|0)|0),r=s[o>>2];;){if(i=r,(-8&s[r+4>>2])==(0|t))break t;if(r=a>>>29|0,a<<=1,!(r=s[16+(o=i+(4&r)|0)>>2]))break}s[o+16>>2]=e,s[e+24>>2]=i}else s[2764]=r|i,s[o>>2]=e,s[e+24>>2]=o;return s[e+12>>2]=e,void(s[e+8>>2]=e)}t=s[i+8>>2],s[t+12>>2]=e,s[i+8>>2]=e,s[e+24>>2]=0,s[e+12>>2]=i,s[e+8>>2]=t}}function z(){var e=0,t=0,n=0,r=0,i=0;return 1&a[9832]||(s[2280]=0,s[2281]=0,s[2286]=0,s[2287]=0,s[2284]=-1,s[2285]=-1,s[2292]=-1,s[2293]=-1,s[2296]=0,s[2297]=0,s[2303]=0,s[2304]=0,s[2302]=1061158912,s[2300]=1045220557,s[2301]=1053609165,s[2315]=-1,s[2316]=-1,s[2282]=0,s[2283]=0,s[2288]=0,s[2289]=0,s[2290]=0,s[2291]=0,s[2294]=-1,s[2295]=-1,s[2298]=0,s[2299]=0,s[2305]=0,s[2306]=0,s[2307]=0,s[2308]=0,s[2317]=-1,s[2318]=-1,s[2321]=0,s[2322]=0,s[2319]=0,s[2320]=0,s[2328]=0,s[2329]=-1082130432,s[2330]=-1082130432,s[2331]=-1082130432,s[2332]=1065353216,s[2333]=1091567616,s[2334]=1073741824,s[2325]=1065353216,s[2323]=16842753,a[9296]=0,te(9344,0,48),s[2358]=0,s[2359]=1076887552,s[2356]=0,s[2357]=1078067200,s[2354]=0,s[2355]=1077542912,St(9528),St(9540),St(9552),e=lr(9568),tt(9640),tt(9652),St(9672),St(9684),St(9696),St(9716),t=St(9728),n=St(9740),r=St(9752),i=St(9764),St(9776),St(9800),s[2380]=0,s[2381]=0,s[2378]=0,s[2379]=0,s[2376]=0,s[2377]=0,Ir(9528),Ir(9540),Sr(9552),s[e>>2]=0,s[2396]=0,s[2397]=0,s[2394]=0,s[2395]=0,Ir(9592),s[2404]=0,s[2405]=0,s[2402]=0,Sr(t),Sr(r),Sr(i),Sr(n),s[2447]=-1,s[2448]=0,s[2449]=0,qn(9800),s[2457]=0,s[2453]=-1,s[2454]=-1,s[2455]=-1,s[2456]=2,s[2280]=0,s[2281]=0,s[2308]=0,s[2286]=0,s[2287]=0,s[2282]=0,s[2283]=0,s[2288]=0,s[2289]=0,te(9344,0,48),s[2305]=0,s[2306]=0,s[2298]=0,s[2299]=0,o[4646]=1,s[2290]=0,s[2291]=0,s[2292]=0,s[2293]=0,s[2376]=0,s[2377]=0,s[2378]=0,s[2379]=0,s[2380]=0,s[2381]=0,Ir(9528),Ir(9540),Sr(9552),Sr(9728),Sr(9764),s[2417]=5,Ir(9696),s[2416]=0,Ir(9672),Ir(9684),s[2428]=5,Ir(9716),s[2427]=0,Tt(9640),Et(9652),s[2352]=0,s[2353]=1076887552,s[2350]=0,s[2351]=1077805056,s[2348]=0,s[2349]=1077149696,s[2326]=1084227584,s[2327]=1084227584,s[2300]=1045220557,s[2301]=1053609165,s[2313]=4,s[2314]=2,s[2311]=12,s[2312]=5,s[2374]=0,s[2375]=1075314688,s[2372]=0,s[2373]=1077936128,s[2370]=-687194767,s[2371]=-1077055325,s[2368]=1717986918,s[2369]=1072064102,s[2366]=0,s[2367]=1071644672,s[2364]=0,s[2365]=1072168960,s[2362]=0,s[2363]=1073217536,s[2360]=-858993459,s[2361]=1072483532,s[2328]=1086324736,s[2309]=10,s[2310]=10,s[2302]=1061158912,s[2303]=0,s[2296]=0,s[2297]=0,a[9832]=1),9120}function X(e,t){var n,r,i=0,a=0,o=0,c=0,u=0,l=0,d=0,f=0,h=0,p=0,v=0,g=0,y=0;if(r=On(e),n=s[e+8>>2],Sn(e),t){if(n)if(t>>>0>=4294967232)s[2720]=48,a=0;else{u=t>>>0<11?16:t+11&-8,o=-8&(f=s[4+(c=n-8|0)>>2]);e:if(3&f){l=o+c|0;t:if(o>>>0>=u>>>0){if((a=o-u|0)>>>0<16)break t;s[c+4>>2]=1&f|u|2,s[4+(i=c+u|0)>>2]=3|a,s[l+4>>2]=1|s[l+4>>2],G(i,a)}else if(s[2769]!=(0|l))if(s[2768]!=(0|l)){if(2&(a=s[l+4>>2]))break e;if((h=o+(-8&a)|0)>>>0<u>>>0)break e;v=h-u|0;n:if(a>>>0<=255){if(d=s[l+8>>2],i=a>>>3|0,(0|(a=s[l+12>>2]))==(0|d)){g=11052,y=s[2763]&$t(i),s[g>>2]=y;break n}s[d+12>>2]=a,s[a+8>>2]=d}else{if(p=s[l+24>>2],(0|l)==(0|(o=s[l+12>>2])))if((i=s[(d=l+20|0)>>2])||(i=s[(d=l+16|0)>>2])){for(;a=d,o=i,(i=s[(d=i+20|0)>>2])||(d=o+16|0,i=s[o+16>>2]););s[a>>2]=0}else o=0;else i=s[l+8>>2],s[i+12>>2]=o,s[o+8>>2]=i;if(p){a=s[l+28>>2];r:{if(s[(i=11356+(a<<2)|0)>>2]==(0|l)){if(s[i>>2]=o,o)break r;g=11056,y=s[2764]&$t(a),s[g>>2]=y;break n}if(s[(s[p+16>>2]==(0|l)?16:20)+p>>2]=o,!o)break n}s[o+24>>2]=p,(i=s[l+16>>2])&&(s[o+16>>2]=i,s[i+24>>2]=o),(i=s[l+20>>2])&&(s[o+20>>2]=i,s[i+24>>2]=o)}}v>>>0<=15?(s[c+4>>2]=1&f|h|2,s[4+(i=c+h|0)>>2]=1|s[i+4>>2]):(s[c+4>>2]=1&f|u|2,s[4+(a=c+u|0)>>2]=3|v,s[4+(i=c+h|0)>>2]=1|s[i+4>>2],G(a,v))}else{if((a=o+s[2765]|0)>>>0<u>>>0)break e;(i=a-u|0)>>>0>=16?(s[c+4>>2]=1&f|u|2,s[4+(d=c+u|0)>>2]=1|i,s[(a=a+c|0)>>2]=i,s[a+4>>2]=-2&s[a+4>>2]):(s[c+4>>2]=a|1&f|2,s[4+(i=a+c|0)>>2]=1|s[i+4>>2],i=0),s[2768]=d,s[2765]=i}else{if((d=o+s[2766]|0)>>>0<=u>>>0)break e;s[c+4>>2]=1&f|u|2,i=d-u|0,s[4+(a=c+u|0)>>2]=1|i,s[2766]=i,s[2769]=a}i=c}else{if(u>>>0<256)break e;if(o>>>0>=u+4>>>0&&(i=c,o-u>>>0<=s[2883]<<1>>>0))break e;i=0}a=i+8|0,i||(a=0,(c=H(t))&&(Z(c,n,t>>>0>(i=(3&(i=s[n-4>>2])?-4:-8)+(-8&i)|0)>>>0?i:t),W(n),a=c))}else a=H(t);i=a}else W(n),i=0;s[e+8>>2]=i,s[e+16>>2]=t+i,s[e+12>>2]=i+r}function Y(e,t,n,r){var i,a,o=0,c=0,u=0;if(U=a=U-32|0,34==(0|kr(i=Rt(a+16|0,t)))){hn(i),s[4+(o=a+8|0)>>2]=0,s[o>>2]=e;e:{t:{n:{r:{i:{a:{for(;;){o:{s:{if(92!=(0|(t=kr(i)))){if(34!=(255&t))break s;hn(i),fe(o,0);break e}if(c=Mn(i),hn(i),t=kr(i),u=f[5024+(255&t)|0]){hn(i),fe(o,u<<24>>24);continue}if(117==(0|t)){if(hn(i),t=be(e,i,c),wr(e))break o;if(55296==(-1024&t)){if(!nn(i,92)||!nn(i,117)){if(wr(e))break a;if(yr(e,9,c),wr(e))break o}if(u=be(e,i,c),wr(e))break o;if(u-57344>>>0<=4294966271){if(wr(e))break i;if(yr(e,9,c),wr(e))break o}t=65536+(u-56320|(t<<10)-56623104)|0}c:{u:{if(!(t>>>0<=127))if(t>>>0<=2047)fe(o,t>>>6|-64),t=63&t|-128;else if(t>>>0<=65535)fe(o,t>>>12|-32),fe(o,t>>>6&63|-128),t=63&t|-128;else{if(t>>>0>=1114112)break u;fe(o,t>>>18|-16),fe(o,t>>>12&63|-128),fe(o,t>>>6&63|-128),t=63&t|-128}fe(o,t<<24>>24);break c}S(2162,1443,115,2041),T()}continue}if(wr(e))break r;if(yr(e,10,c),!wr(e))continue;break o}if(!(t>>>0<=31)){Mn(i),fe(o,hn(i));continue}if(c=wr(e),t){if(c)break t;if(yr(e,12,Mn(i)),!wr(e))continue}else{if(c)break n;if(yr(e,11,Mn(i)),!wr(e))continue}}break}break e}S(2472,1472,1029,1335),T()}S(2472,1472,1033,1335),T()}S(2472,1472,1039,1335),T()}S(2472,1472,1048,1335),T()}S(2472,1472,1050,1335),T()}return wr(e)||(t=s[o+4>>2]-1|0,c=s[o+4>>2],On(o=s[o>>2])>>>0<c>>>0&&(S(2420,1498,139,1210),T()),u=o,o=s[o+12>>2]-c|0,s[u+12>>2]=o,le(n,o,t)),Ht(i),void(U=a+32|0)}S(2616,1472,963,1576),T(),S(2472,1472,985,1576),T()}function K(e,t){var n,r,i,a,c,u,l=0,d=0;U=a=U-16|0,s[4+(l=a+8|0)>>2]=t,s[l>>2]=t,U=r=U+-64|0,n=r+24|0,Vn(i=e+32|0)?(t=s[i>>2])||(S(2122,1498,173,1153),T()):t=0,xt(n,t,256),$n(d=n+24|0),s[n+32>>2]=2,c=or(r+16|0,e),U=t=U-16|0,Hn(d,0,0),u=or(t+8|0,n),nt(l);e:{t:{n:if(!wr(n)){r:{if(!kr(l)){if(d=1,!wr(n))break r;S(2472,1472,571,1921),T()}if(function e(t,n,r){var i,a,c,u=0,l=0,d=0,f=0,h=0,p=0,v=0,m=0,b=0,_=0,k=0,w=0;i:{a:{o:{s:{if((0|(u=kr(n)))<=109){if(34==(0|u))break s;if(91==(0|u))break a;if(102!=(0|u))break i;c:{u:{if(102==(0|kr(n))){if(hn(n),!(nn(n,97)&&nn(n,108)&&nn(n,115)&&nn(n,101)&&ft(r,0))){if(r=3,wr(t))break u;yr(t,r,Mn(n)),wr(t)}break c}S(2582,1472,883,1933),T()}S(2472,1472,891,1933),T()}return}if(123==(0|u))break o;if(116!=(0|u)){if(110!=(0|u))break i;c:{u:{if(110==(0|kr(n))){if(hn(n),nn(n,117)&&nn(n,108)&&nn(n,108))Dt(ye(r+32|0));else{if(wr(t))break u;yr(t,3,Mn(n)),wr(t)}break c}S(2565,1472,857,1367),T()}S(2472,1472,865,1367),T()}return}c:{u:{if(116==(0|kr(n))){if(hn(n),!(nn(n,114)&&nn(n,117)&&nn(n,101)&&ft(r,1))){if(r=3,wr(t))break u;yr(t,r,Mn(n)),wr(t)}break c}S(2548,1472,870,1815),T()}S(2472,1472,878,1815),T()}return}return void Y(t,n,r)}o:{s:{if(123==(0|kr(n))){if(hn(n),Ge(ye(r+32|0),3),nt(n),wr(t))break o;if(nn(n,125))break s;for(;;){c:{u:{l:{d:{if(34!=(0|kr(n))){if(wr(t))break d;if(yr(t,4,Mn(n)),wr(t))break o}if(Y(t,n,r),wr(t))break o;if(nt(n),wr(t))break o;if(!nn(n,58)){if(wr(t))break l;if(yr(t,5,Mn(n)),wr(t))break o}if(nt(n),wr(t))break o;if(e(t,n,r),wr(t))break o;if(nt(n),wr(t))break o;if(d=d+1|0,44==(0|(f=kr(n))))break u;if(125==(0|f)&&(hn(n),Re(r,d)))break o;if(wr(t))break c;if(yr(t,6,Mn(n)),!wr(t))continue;break o}S(2472,1472,758,1128),T()}S(2472,1472,767,1128),T()}if(hn(n),nt(n),!wr(t))continue;break o}break}S(2472,1472,792,1128),T()}S(2531,1472,741,1128),T()}Re(r,0)}return}a:{o:{s:{if(91==(0|kr(n))){if(hn(n),Ge(ye(r+32|0),4),nt(n),wr(t))break a;if(nn(n,93))break o;if(e(t,n,r),wr(t))break a;for(;;){if(nt(n),wr(t))break a;d=d+1|0;c:{if(nn(n,44)){if(nt(n),!wr(t))break c;break a}if(nn(n,93)&&Ze(r,d))break a;if(wr(t))break s;if(yr(t,7,Mn(n)),wr(t))break a}if(e(t,n,r),wr(t))break}break a}S(2599,1472,809,1024),T()}S(2472,1472,842,1024),T()}Ze(r,0)}return}U=i=U-32|0,u=i+8|0,a=Rt(i+16|0,n),s[u>>2]=a,c=vr(u),n=tn(u,45);i:{a:{o:{s:{c:{u:{l:{d:if(48!=(0|pr(u)))f:{h:{if(!((0|pr(u))<49||(0|pr(u))>57)){h=hr(u)-48|0,p=pr(u);p:{if(!n){if((0|p)>47)break p;break f}if((0|p)<48)break f;for(;;){if((0|pr(u))>57)break d;if(!(h>>>0<214748364)){if(214748364!=(0|h))break h;if(!((0|pr(u))<=56)){h=214748364;break h}}if(d=d+1|0,h=(hr(u)+y(h,10)|0)-48|0,!((0|pr(u))>47))break}break d}for(;;){if((0|pr(u))>57)break d;if(!(h>>>0<429496729)){if(429496729!=(0|h))break h;if(!((0|pr(u))<=53)){h=429496729;break h}}if(d=d+1|0,h=(hr(u)+y(h,10)|0)-48|0,!((0|pr(u))>47))break}break d}if(!wr(t)){if(yr(t,3,vr(u)),wr(t))break l;break d}S(2472,1472,1538,1166),T()}f=h,p=pr(u);h:{p:{if(!n){if(_=1,(0|p)<=47)break d;for(;;){if((0|pr(u))>57)break d;if(!(429496729==(0|l)&f>>>0<2576980377|l>>>0<429496729)){if(-1717986919!=(0|f)|429496729!=(0|l))break p;if(!((0|pr(u))<=53)){f=-1717986919,l=429496729;break p}}if(f=Me(f,l,10,0),k=(l=j)+1|0,p=l,l=(f=f+(l=hr(u)-48|0)|0)>>>0<l>>>0?k:p,d=d+1|0,!((0|pr(u))>47))break}break h}if(_=1,(0|p)<48)break d;for(;;){if((0|pr(u))>57)break d;if(!(214748364==(0|l)&f>>>0<3435973836|l>>>0<214748364)){if(-858993460!=(0|f)|214748364!=(0|l))break p;if(!((0|pr(u))<=56)){f=-858993460,l=214748364;break p}}if(f=Me(f,l,10,0),k=(l=j)+1|0,p=l,l=(f=f+(l=hr(u)-48|0)|0)>>>0<l>>>0?k:p,d=d+1|0,!((0|pr(u))>47))break}break h}if(v=+(f>>>0)+4294967296*+(l>>>0),m=1,!((0|pr(u))<48))for(;;){if((0|pr(u))>57)break h;if(v=10*v+ +(hr(u)-48|0),!((0|pr(u))>47))break}}}else hr(u);d:if(tn(u,46)){if(!((0|pr(u))>=48&&(0|pr(u))<58)){if(wr(t))break u;if(yr(t,14,vr(u)),wr(t))break l}if(!m){f=_?f:h,l=_?l:0;f:if(!((0|pr(u))<48))for(;;){if((0|pr(u))>57|l>>>0>2097151)break f;if(f=Me(f,l,10,0),p=d,m=(d=j)+1|0,l=d,d=p+(0!=((l=(f=f+(d=hr(u)-48|0)|0)>>>0<d>>>0?m:l)|f))|0,b=b-1|0,!((0|pr(u))>47))break}v=+(f>>>0)+4294967296*+(l>>>0)}if((0|pr(u))<48)m=1;else for(m=1;;){if((0|pr(u))>57)break d;if(p=hr(u),(0|d)>16||(b=b-1|0,(v=10*v+ +(p-48|0))>0&&(d=d+1|0)),!((0|pr(u))>47))break}}if(tn(u,101)||(d=0,tn(u,69))){tn(u,43)||(w=tn(u,45));d:if((0|pr(u))<48||(0|pr(u))>57){if(wr(t))break o;if(yr(t,15,vr(u)),d=0,wr(t))break l}else{if(d=hr(u)-48|0,w){if((0|b)>0)break c;if((0|pr(u))<48)break d;for(p=(b+2147483639|0)/10|0;;){if((0|pr(u))>57)break d;f:if(!((0|p)>=(0|(d=(hr(u)+y(d,10)|0)-48|0))||(0|pr(u))<48))for(;;){if((0|pr(u))>57)break f;if(hr(u),!((0|pr(u))>47))break}if(!((0|pr(u))>47))break}break d}if((0|pr(u))<48)break d;for(p=308-b|0;;){if((0|pr(u))>57)break d;if((0|p)<(0|(d=(hr(u)+y(d,10)|0)-48|0))){if(wr(t))break s;if(yr(t,13,c),wr(t))break l}if(!((0|pr(u))>47))break}}v=m?v:+((_?f:h)>>>0)+4294967296*+((_?l:0)>>>0),m=1,d=w?0-d|0:d}if(u=d,m){if((v=(0|(f=u+b|0))<=-309?Ct(Ct(v,-308),f+308|0):Ct(v,f))>17976931348623157e292){if(wr(t))break a;if(yr(t,13,c),wr(t))break l}t=ye(r+32|0),s[t+16>>2]=0,s[t+20>>2]=0,s[t+8>>2]=0,s[t+12>>2]=0,g[t>>3]=n?-v:v,o[t+18>>1]=534}else if(_){if(n){t=ye(r+32|0),s[t+16>>2]=0,s[t+20>>2]=0,s[t+8>>2]=0,s[t+12>>2]=0,h=0-f|0,s[t>>2]=h,n=0-((0!=(0|f))+l|0)|0,s[t+4>>2]=n,o[t+18>>1]=150;d:{if((0|n)>0|(0|n)>=0){if(r=n?406:470,o[t+18>>1]=r,!n&h>>>0>2147483647|n)break d;r|=32}else if(r=182,-1==(0|n)&h>>>0<2147483648|-1!=(0|n))break d;o[t+18>>1]=r}break l}t=ye(r+32|0),s[t+16>>2]=0,s[t+20>>2]=0,s[t+8>>2]=0,s[t+12>>2]=0,s[t>>2]=f,s[t+4>>2]=l,n=(0|l)>0|(0|l)>=0?406:278,o[t+18>>1]=n,l||(o[t+18>>1]=64|n,!l&f>>>0>2147483647|l||(o[t+18>>1]=96|n))}else n?(t=ye(r+32|0),s[t+16>>2]=0,s[t+20>>2]=0,s[t+8>>2]=0,s[t+12>>2]=0,n=0-h|0,s[t>>2]=n,s[t+4>>2]=n>>31,o[t+18>>1]=(0|n)>=0?502:182):(t=ye(r+32|0),s[t+16>>2]=0,s[t+20>>2]=0,s[t+8>>2]=0,s[t+12>>2]=0,s[t>>2]=h,s[t+4>>2]=0,o[t+18>>1]=(0|h)>=0?502:470)}Ht(a),U=i+32|0;break i}S(2472,1472,1581,1166),T()}S(2219,1472,1645,1166),T()}S(2472,1472,1661,1166),T()}S(2472,1472,1666,1166),T()}S(2472,1472,1713,1166),T()}}(n,l,e),wr(n))break n;if(nt(l),wr(n))break n;if(!kr(l))break n;if(d=2,wr(n))break t}yr(n,d,Mn(l)),wr(n)}l=s[n+28>>2],s[r+8>>2]=s[n+24>>2],s[r+12>>2]=l,ar(s[u>>2]),U=t+16|0;break e}S(2472,1472,583,1921),T()}t=s[r+12>>2],s[e+56>>2]=s[r+8>>2],s[e+60>>2]=t,t=Vn(e+56|0),s[r+4>>2]=0,s[r>>2]=t?0:3;e:{t:{if(s[r>>2]|1&s[r+4>>2]){if(24!=(0|On(i)))break t;(0|(t=vt(i,1)))!=(0|e)&&(l=s[t+4>>2],s[e>>2]=s[t>>2],s[e+4>>2]=l,l=s[t+20>>2],s[e+16>>2]=s[t+16>>2],s[e+20>>2]=l,l=s[t+12>>2],s[e+8>>2]=s[t+8>>2],s[e+12>>2]=l,o[t+18>>1]=0)}ar(t=s[c>>2]+32|0),s[t+12>>2]!=s[t+8>>2]?X(t,On(t)):(W(s[t+8>>2]),s[t+16>>2]=0,s[t+8>>2]=0,s[t+12>>2]=0),yn(n),U=r- -64|0;break e}S(2285,1415,2344,1355),T()}return U=a+16|0,e}function Z(e,t,n){var r,i=0,o=0;if(n>>>0>=512)return O(0|e,0|t,0|n),e;r=e+n|0;e:if(3&(e^t))if(r>>>0<4)n=e;else if((i=r-4|0)>>>0<e>>>0)n=e;else for(n=e;a[0|n]=f[0|t],a[n+1|0]=f[t+1|0],a[n+2|0]=f[t+2|0],a[n+3|0]=f[t+3|0],t=t+4|0,i>>>0>=(n=n+4|0)>>>0;);else{t:if(3&e)if(n)for(n=e;;){if(a[0|n]=f[0|t],t=t+1|0,!(3&(n=n+1|0)))break t;if(!(n>>>0<r>>>0))break}else n=e;else n=e;if(!((i=-4&r)>>>0<64||(o=i+-64|0)>>>0<n>>>0))for(;s[n>>2]=s[t>>2],s[n+4>>2]=s[t+4>>2],s[n+8>>2]=s[t+8>>2],s[n+12>>2]=s[t+12>>2],s[n+16>>2]=s[t+16>>2],s[n+20>>2]=s[t+20>>2],s[n+24>>2]=s[t+24>>2],s[n+28>>2]=s[t+28>>2],s[n+32>>2]=s[t+32>>2],s[n+36>>2]=s[t+36>>2],s[n+40>>2]=s[t+40>>2],s[n+44>>2]=s[t+44>>2],s[n+48>>2]=s[t+48>>2],s[n+52>>2]=s[t+52>>2],s[n+56>>2]=s[t+56>>2],s[n+60>>2]=s[t+60>>2],t=t- -64|0,o>>>0>=(n=n- -64|0)>>>0;);if(n>>>0>=i>>>0)break e;for(;s[n>>2]=s[t>>2],t=t+4|0,i>>>0>(n=n+4|0)>>>0;);}if(n>>>0<r>>>0)for(;a[0|n]=f[0|t],t=t+1|0,(0|r)!=(0|(n=n+1|0)););return e}function Q(e,t,n){var r=0,i=0,a=0,o=0,s=0,c=0,u=0,l=0,d=0;r=e;e:{t:{n:{r:{i:{a:{o:{s:{c:{u:{if(t){if(!n)break u;break c}e=(r>>>0)/(n>>>0)|0,j=0;break e}if(!r)break s;break o}if(!(n-1&n))break a;i=0-(o=(_(n)+33|0)-_(t)|0)|0;break r}e=(t>>>0)/0|0,j=0;break e}if((e=32-_(t)|0)>>>0<31)break i;break n}if(1==(0|n))break t;n=31&(e=n?31-_(n-1^n)|0:32),(63&e)>>>0>=32?(e=0,t=t>>>n|0):(e=t>>>n|0,t=((1<<n)-1&t)<<32-n|r>>>n),j=e,e=t;break e}o=e+1|0,i=63-e|0}if(a=31&(e=63&o),e>>>0>=32?(e=0,s=t>>>a|0):(e=t>>>a|0,s=((1<<a)-1&t)<<32-a|r>>>a),a=e,i=31&(e=63&i),e>>>0>=32?(e=r<<i,r=0):(e=(1<<i)-1&r>>>32-i|t<<i,r<<=i),t=e,o)for(d=-1!=(0|(i=n-1|0))?0:-1;s=(e=s<<1|t>>>31)-(u=n&(c=d-((a=a<<1|s>>>31)+(e>>>0>i>>>0)|0)>>31))|0,a=a-(e>>>0<u>>>0)|0,t=t<<1|r>>>31,r=l|r<<1,l=1&c,o=o-1|0;);j=t<<1|r>>>31,e=l|r<<1;break e}r=0,t=0}j=t,e=r}return e}function q(e,t,n){var r,i=0,a=0,o=0,c=0,u=0;U=r=U-16|0;e:{if(ir(t)){if(!jn(n))break e;ir(t)||(S(2461,1415,1246,1296),T()),or(e,s[t+8>>2]),Lt(i=r+8|0,t);t:if(Kn(e,i))for(;;){a=s[e>>2];n:{r:{if(jn(n)){if(!jn(a))break r;if((0|(o=wt(n)))==(0|wt(a))){if(i=1,(0|(c=Ot(n)))==(0|(a=Ot(a))))break n;i:{a:{o:{if(o>>>0>=4){if(3&(a|c))break o;for(;;){if(s[c>>2]!=s[a>>2])break o;if(a=a+4|0,c=c+4|0,!((o=o-4|0)>>>0>3))break}}if(!o)break a}for(;;){if((0|(i=f[0|c]))==(0|(u=f[0|a]))){if(a=a+1|0,c=c+1|0,o=o-1|0)continue;break a}break}i=i-u|0;break i}i=0}i=!i}else i=0;break n}S(2520,1415,2171,1377),T()}S(2500,1415,2172,1377),T()}if(i)break t;if(s[e>>2]=s[e>>2]+48,Lt(i=r+8|0,t),!Kn(e,i))break}return void(U=r+16|0)}S(2461,1415,1334,1178),T()}S(2515,1415,1335,1178),T()}function J(e,t,n){e:switch(t-9|0){case 0:return t=s[n>>2],s[n>>2]=t+4,void(s[e>>2]=s[t>>2]);case 6:return t=s[n>>2],s[n>>2]=t+4,t=o[t>>1],s[e>>2]=t,void(s[e+4>>2]=t>>31);case 7:return t=s[n>>2],s[n>>2]=t+4,s[e>>2]=h[t>>1],void(s[e+4>>2]=0);case 8:return t=s[n>>2],s[n>>2]=t+4,t=a[0|t],s[e>>2]=t,void(s[e+4>>2]=t>>31);case 9:return t=s[n>>2],s[n>>2]=t+4,s[e>>2]=f[0|t],void(s[e+4>>2]=0);case 16:return t=s[n>>2]+7&-8,s[n>>2]=t+8,void(g[e>>3]=g[t>>3]);case 17:ri[8](e,n);default:return;case 1:case 4:case 14:return t=s[n>>2],s[n>>2]=t+4,t=s[t>>2],s[e>>2]=t,void(s[e+4>>2]=t>>31);case 2:case 5:case 11:case 15:return t=s[n>>2],s[n>>2]=t+4,s[e>>2]=s[t>>2],void(s[e+4>>2]=0);case 3:case 10:case 12:case 13:}t=s[n>>2]+7&-8,s[n>>2]=t+8,n=s[t+4>>2],s[e>>2]=s[t>>2],s[e+4>>2]=n}function $(e,t,n){var r,i=0,a=0,o=0,c=0;U=r=U-32|0,s[e+16>>2]=0,s[e>>2]=-1,s[e+4>>2]=-1,s[e+8>>2]=-1,s[e+12>>2]=2;e:{t:switch(0|n){case 0:i=ut(t,3);break e;case 1:o=ut(t,2),a=-1;n:if(!(s[t+544>>2]<2))for(c=t+576|0,i=1;;){if(.5*+s[t+668>>2]>+s[sn(c,i)>>2]&&(a=s[sn(c,i)>>2],i>>>0>2))break n;if(!((0|(i=i+1|0))<s[t+544>>2]))break}i=(0|a)<(0|o)?o:a;break e}i=ut(t,3)}s[e>>2]=i,a=ue(t,s[t+140>>2],s[t+144>>2]),s[t+108>>2]=a,(0|a)>0&&(i=ve(t,i,a),s[e>>2]=i),1!=(0|(o=s[t+672>>2]))?(a=5e3,s[e+4>>2]=5e3,e=-1):(s[e+16>>2]=1,s[e+8>>2]=1024e3,a=-1,e=1024e3),c=s[t+668>>2],s[r+24>>2]=1,s[r+20>>2]=e,s[r+16>>2]=a,s[r+12>>2]=i,s[r+8>>2]=o,s[r+4>>2]=c,s[r>>2]=n,ae(t,3459,r),U=r+32|0}function ee(e,t,n){var r=0,i=0;e:if((0|e)!=(0|t)){if(t-(i=e+n|0)>>>0<=0-(n<<1)>>>0)return void Z(e,t,n);if(r=3&(e^t),e>>>0<t>>>0){if(!r){if(3&e)for(;;){if(!n)break e;if(a[0|e]=f[0|t],t=t+1|0,n=n-1|0,!(3&(e=e+1|0)))break}if(!(n>>>0<=3))for(;s[e>>2]=s[t>>2],t=t+4|0,e=e+4|0,(n=n-4|0)>>>0>3;);}if(n)for(;a[0|e]=f[0|t],e=e+1|0,t=t+1|0,n=n-1|0;);}else{if(!r){if(3&i)for(;;){if(!n)break e;if(a[0|(r=(n=n-1|0)+e|0)]=f[t+n|0],!(3&r))break}if(!(n>>>0<=3))for(;s[(n=n-4|0)+e>>2]=s[t+n>>2],n>>>0>3;);}if(!n)break e;for(;a[(n=n-1|0)+e|0]=f[t+n|0],n;);}}}function te(e,t,n){var r=0,i=0,o=0;if(n&&(a[0|e]=t,a[(i=e+n|0)-1|0]=t,!(n>>>0<3||(a[e+2|0]=t,a[e+1|0]=t,a[i-3|0]=t,a[i-2|0]=t,n>>>0<7||(a[e+3|0]=t,a[i-4|0]=t,n>>>0<9||(o=(i=0-e&3)+e|0,r=y(255&t,16843009),s[o>>2]=r,s[(n=(t=n-i&-4)+o|0)-4>>2]=r,t>>>0<9||(s[o+8>>2]=r,s[o+4>>2]=r,s[n-8>>2]=r,s[n-12>>2]=r,t>>>0<25||(s[o+24>>2]=r,s[o+20>>2]=r,s[o+16>>2]=r,s[o+12>>2]=r,s[n-16>>2]=r,s[n-20>>2]=r,s[n-24>>2]=r,s[n-28>>2]=r,(n=(n=t)-(t=4&o|24)|0)>>>0<32))))))))for(r=Me(r,0,1,1),i=j,t=t+o|0;s[t+24>>2]=r,s[t+28>>2]=i,s[t+16>>2]=r,s[t+20>>2]=i,s[t+8>>2]=r,s[t+12>>2]=i,s[t>>2]=r,s[t+4>>2]=i,t=t+32|0,(n=n-32|0)>>>0>31;);return e}function ne(e,t){var n,r,i,a,o,c=0,u=0,l=0,d=0;if(s[e+4>>2]!=s[Gr(e)>>2])return U=u=U-16|0,c=Ft(u,e,1),cr(Gr(e),s[c+4>>2],t),s[c+4>>2]=s[c+4>>2]+4,Xn(c),void(U=u+16|0);if(U=n=U-32|0,i=Gr(e),u=Ke(e,Dn(e)+1|0),l=Dn(e),U=r=U-16|0,s[r+12>>2]=0,ur(12+(c=n+8|0)|0,i),u&&(d=dn(s[c+16>>2],u)),s[c>>2]=d,l=(l<<2)+d|0,s[c+8>>2]=l,s[c+4>>2]=l,a=Hr(c),o=(u<<2)+d|0,s[a>>2]=o,U=r+16|0,cr(0,s[c+8>>2],t),s[c+8>>2]=s[c+8>>2]+4,Tr(e),t=c+4|0,Jt(Gr(e),s[e>>2],s[e+4>>2],t),At(e,t),At(e+4|0,c+8|0),At(Gr(e),Hr(c)),s[c>>2]=s[c+4>>2],Nr(e,Dn(e)),(0|(e=s[c+4>>2]))!=s[c+8>>2])for(;s[c+8>>2]=s[c+8>>2]-4,(0|e)!=s[c+8>>2];);s[c>>2]&&W(e=s[c>>2]),U=n+32|0}function re(e,t,n,r){var i=0;s[r+8>>2]=t,s[r>>2]=0,s[r+4>>2]=0,s[n>>2]=r,s[s[e>>2]>>2]&&(s[e>>2]=s[s[e>>2]>>2]),n=(0|(r=s[Wr(e)>>2]))==(0|(t=s[n>>2])),a[t+12|0]=n;e:if(!n)for(;;){if(f[s[t+8>>2]+12|0])break e;i=Cn(s[t+8>>2]),n=s[t+8>>2];t:{if(i){if(!(!(n=s[s[n+8>>2]+4>>2])|f[n+12|0]))break t;Cn(t)||Je(t=s[t+8>>2]),t=s[t+8>>2],a[t+12|0]=1,t=s[t+8>>2],a[t+12|0]=0,qe(t);break e}if(!(n=s[s[n+8>>2]>>2])|f[n+12|0]){Cn(t)&&qe(t=s[t+8>>2]),t=s[t+8>>2],a[t+12|0]=1,t=s[t+8>>2],a[t+12|0]=0,Je(t);break e}}if(t=s[t+8>>2],a[t+12|0]=1,t=s[t+8>>2],a[t+12|0]=(0|t)==(0|r),a[n+12|0]=1,(0|t)==(0|r))break}e=Gr(e),s[e>>2]=s[e>>2]+1}function ie(e,t){var n,r=0,i=0,a=0,o=0,c=0,u=0;U=n=U-16|0,o=1;e:{t:switch(t-e>>2){case 2:if(!Zn(t=t-4|0,e))break e;At(e,t);break e;case 3:Ue(e,e+4|0,t-4|0);break e;case 4:rt(e,e+4|0,e+8|0,t-4|0);break e;case 5:Ye(e,e+4|0,e+8|0,e+12|0,t-4|0);break e;case 0:case 1:break e}for(Ue(e,e+4|0,a=e+8|0),r=e+12|0;;){if((0|t)==(0|r))break e;t:{if(Zn(r,a)){for(s[n+12>>2]=s[r>>2],i=r;;){if(u=i,i=a,s[u>>2]=s[i>>2],(0|e)!=(0|i)){if(Zn(n+12|0,a=i-4|0))continue}else i=e;break}if(s[i>>2]=s[n+12>>2],8==(0|(c=c+1|0)))break t}a=r,r=r+4|0;continue}break}o=(r+4|0)==(0|t)}return U=n+16|0,o}function ae(e,t,n){var r,i=0,a=0;if(U=r=U-16|0,f[e+174|0]){if(s[r+12>>2]=n,U=i=U-208|0,s[i+204>>2]=n,te(e=i+160|0,0,40),s[i+200>>2]=s[i+204>>2],!((0|V(0,t,i+200|0,i+80|0,e))<0)){e=s[2183]>=0,n=s[2164],s[2182]<=0&&(s[2164]=-33&n);e:{t:{if(s[2176]){if(s[2168])break t}else s[2176]=80,s[2171]=0,s[2168]=0,s[2169]=0,a=s[2175],s[2175]=i;if(We(8656))break e}V(8656,t,i+200|0,i+80|0,i+160|0)}a&&(ri[s[2173]](8656,0,0),s[2176]=0,s[2175]=a,s[2171]=0,s[2168]=0,s[2169]=0),s[2164]=s[2164]|32&n}U=i+208|0}U=r+16|0}function oe(e,t){var n=0,r=0,i=0;if((0|e)!=(0|t)){if(!Jn(e))return Jn(t)?(i=En(t),t=vn(t),U=n=U-16|0,t>>>0<=10?(Br(e,t),nr(e,i,t),a[n+15|0]=0,Lr(e+t|0,n+15|0)):pe(e,10,t-10|0,e=f[e+11|0],e,t,i),void(U=n+16|0)):(s[e+8>>2]=s[t+8>>2],n=s[t+4>>2],s[e>>2]=s[t>>2],void(s[e+4>>2]=n));i=En(t),t=vn(t),U=n=U-16|0,(r=xn(e))>>>0>t>>>0?(r=s[e>>2],Ur(e,t),nr(r,i,t),a[n+15|0]=0,Lr(t+r|0,n+15|0)):pe(e,r-1|0,1+(t-r|0)|0,e=s[e+4>>2],e,t,i),U=n+16|0}}function se(e,t){if(!e)return 0;e:{t:{if(e){if(t>>>0<=127)break t;if(s[s[2757]>>2]){if(t>>>0<=2047){a[e+1|0]=63&t|128,a[0|e]=t>>>6|192,e=2;break e}if(!(57344!=(-8192&t)&t>>>0>=55296)){a[e+2|0]=63&t|128,a[0|e]=t>>>12|224,a[e+1|0]=t>>>6&63|128,e=3;break e}if(t-65536>>>0<=1048575){a[e+3|0]=63&t|128,a[0|e]=t>>>18|240,a[e+2|0]=t>>>6&63|128,a[e+1|0]=t>>>12&63|128,e=4;break e}}else if(57216==(-128&t))break t;s[2720]=25,e=-1}else e=1;break e}a[0|e]=t,e=1}return e}function ce(e){var t,n=0,r=0,i=0,a=0;if(Pn(t=e+608|0))for(e=0;n=Fn(t,e),(0|(i=s[n+4>>2]))>=0&(n=s[n>>2])>>>0>=2|(0|i)>0?(n=Fn(t,e),i=s[n>>2],n=s[n+4>>2]):(i=1,n=0),a+=1/(+(i>>>0)+4294967296*+(0|n)),e=e+1|0,Pn(t)>>>0>e>>>0;);return Pn(t)&&(r=+(Pn(t)>>>0)/a),b(r)<0x8000000000000000?(j=b(r)>=1?~~(r>0?k(w(2.3283064365386963e-10*r),4294967295):E(2.3283064365386963e-10*(r-+(~~r>>>0>>>0))))>>>0:0,~~r>>>0):(j=-2147483648,0)}function ue(e,t,n){var r,i=0,a=0,o=0,c=0,u=0,l=0,d=0;U=r=U-16|0,a=-1;e:if(!((0|t)<=0|(0|n)<=0)){if(s[e+544>>2]>0){for(o=(0|t)>(0|n)?t:n,c=(0|t)<(0|n)?t:n,u=e+576|0,l=e+564|0,d=e+552|0,n=0;;){if(t=s[sn(d,n)>>2],i=sn(l,n),a=-1,(0|t)<=0)break e;if((0|(i=s[i>>2]))<=0)break e;if(a=sn(u,n),(0|((0|t)<(0|i)?t:i))>=(0|c)|(0|((0|t)>(0|i)?t:i))>=(0|o)||!((0|(n=n+1|0))<s[e+544>>2]))break}a=s[a>>2]}s[r>>2]=a,ae(e,3607,r)}return U=r+16|0,a}function le(e,t,n){var r,i,c,u=0;return u=ye(e+32|0),i=cn(e),U=r=U-16|0,s[u>>2]=0,s[u+4>>2]=0,s[u+16>>2]=0,s[u+20>>2]=0,s[u+8>>2]=0,s[u+12>>2]=0,s[4+(e=r+8|0)>>2]=n,s[e>>2]=t||5280,!n|t||(S(1064,1415,401,1617),T()),p[e+4>>2]<18?(o[u+18>>1]=7173,Dr(u,s[e+4>>2])):(o[u+18>>1]=3077,s[u>>2]=s[e+4>>2],Vr(t=u,u=he(i,s[e+4>>2]+1|0))),c=Z(u,s[e>>2],s[e+4>>2])+s[e+4>>2]|0,a[0|c]=0,U=r+16|0,1}function de(e,t,n){var r=0,i=0,a=0;if(!(32&f[0|e]))e:{r=t;t:{if(!(e=s[(t=e)+16>>2])){if(We(t))break t;e=s[t+16>>2]}if(e-(a=s[t+20>>2])>>>0<n>>>0){ri[s[t+36>>2]](t,r,n);break e}n:if(!(s[t+80>>2]<0)){for(e=n;;){if(i=e,!e)break n;if(10==f[r+(e=i-1|0)|0])break}if(ri[s[t+36>>2]](t,r,i)>>>0<i>>>0)break t;r=r+i|0,n=n-i|0,a=s[t+20>>2]}Z(a,r,n),s[t+20>>2]=s[t+20>>2]+n}}}function fe(e,t){var n,r=0,i=0;n=s[e>>2],(s[n+16>>2]-s[n+12>>2]|0)<=0&&(s[n+8>>2]?r=((r=Sn(n))+1>>>1|0)+r|0:(s[n>>2]||(r=gt(1),s[n+4>>2]=r,s[n>>2]=r),r=s[n+20>>2]),X(n,r>>>0>(i=On(n)+1|0)>>>0?r:i));e:{t:{if(r=s[n+12>>2]){if((s[n+16>>2]-r|0)<=0)break t;s[n+12>>2]=r+1;break e}S(2133,1498,130,2030),T()}S(2323,1498,131,2030),T()}a[0|r]=t,s[e+4>>2]=s[e+4>>2]+1}function he(e,t){var n=0,r=0,i=0,a=0;e:if(t){if(r=t+7&-8,!((t=s[e>>2])&&(i=r+(n=s[t+4>>2])|0)>>>0<=p[t>>2])){if(n=(t=s[e+4>>2])>>>0>r>>>0?t:r,s[e+12>>2]||(t=gt(1),s[e+16>>2]=t,s[e+12>>2]=t),(t=(t=n+16|0)?H(t):0)&&(s[t+4>>2]=0,s[t>>2]=n,s[t+8>>2]=s[e>>2],s[e>>2]=t),!t)break e;t=s[e>>2],i=r+(n=s[t+4>>2])|0}s[t+4>>2]=i,a=16+(t+n|0)|0}return a}function pe(e,t,n,r,i,o,c){var u,l=0,d=0;if(U=u=U-16|0,(-1^t)-17>>>0>=n>>>0)return l=En(e),t>>>0<2147483623?(s[u+8>>2]=t<<1,s[u+12>>2]=t+n,n=Pt(s[Kt(u+12|0,u+8|0)>>2])):n=-18,n=gt(d=n+1|0),o&&nr(n,c,o),c=r-i|0,(0|r)!=(0|i)&&nr(n+o|0,i+l|0,c),10!=(0|t)&&W(l),Yr(e,n),Gn(e,d),Ur(t=e,e=o+c|0),a[u+7|0]=0,Lr(e+n|0,u+7|0),void(U=u+16|0);ti(),T()}function ve(e,t,n){var r,i=0,a=0,o=0,c=0;U=r=U-16|0,o=t;e:if(!((0|n)<=0|(0|t)<=(0|n)||(a=1,s[e+544>>2]<=0||(0|(i=s[sn(c=e+576|0,0)>>2]))>(0|n))))for(;;){if(o=i,s[e+544>>2]<=(0|a))break e;if(i=sn(c,a),a=a+1|0,!((0|(i=s[i>>2]))<=(0|n)))break}return s[r+8>>2]=o,s[r+4>>2]=n,s[r>>2]=t,ae(e,3827,r),U=r+16|0,o}function ge(e,t,n,r){a[e+53|0]=1;e:if(s[e+4>>2]==(0|n)){a[e+52|0]=1;t:{if(!(n=s[e+16>>2])){if(s[e+36>>2]=1,s[e+24>>2]=r,s[e+16>>2]=t,1!=(0|r))break e;if(1==s[e+48>>2])break t;break e}if((0|t)==(0|n)){if(2==(0|(n=s[e+24>>2]))&&(s[e+24>>2]=r,n=r),1!=s[e+48>>2])break e;if(1==(0|n))break t;break e}s[e+36>>2]=s[e+36>>2]+1}a[e+54|0]=1}}function ye(e){var t=0,n=0;(s[e+16>>2]-s[e+12>>2]|0)<24&&(s[e+8>>2]?t=((t=Sn(e))+1>>>1|0)+t|0:(s[e>>2]||(t=gt(1),s[e+4>>2]=t,s[e>>2]=t),t=s[e+20>>2]),X(e,t>>>0>(n=On(e)+24|0)>>>0?t:n));e:{t:{if(t=s[e+12>>2]){if((s[e+16>>2]-t|0)<24)break t;s[e+12>>2]=t+24;break e}S(2133,1498,130,2030),T()}S(2323,1498,131,2030),T()}return t}function me(e,t){var n,r,i;return U=i=(U=r=(U=n=U-16|0)-16|0)-32|0,It(i,t),q(r,e,Pe(i+8|0,i)),U=i+32|0,s[(t=r+8|0)>>2]=s[r>>2],U=r+16|0,s[n+8>>2]=s[t>>2],U=t=U-16|0,ir(e)||(S(2461,1415,1243,2048),T()),e=s[or(t+8|0,s[e+8>>2]+y(s[e>>2],48)|0)>>2],U=t+16|0,s[n>>2]=e,e=Kn(n+8|0,n),U=n+16|0,e}function be(e,t,n){for(var r=0,i=0,a=0;;){e:{r=(i=kr(t))+(r<<4)|0;t:if((i-48&255)>>>0<=9)r=r-48|0;else if((i-65&255)>>>0<=5)r=r-55|0;else if((i-97&255)>>>0<=5)r=r-87|0;else{if(!wr(e)){if(yr(e,8,n),!wr(e))break t;r=0;break e}S(2472,1472,919,2203),T()}if(hn(t),4!=(0|(a=a+1|0)))continue}break}return r}function _e(e,t,n){var r=0,i=0,a=0;r=fr(e),i=Wr(e);e:{if(r){t:{for(;;){n:{if(Zn(n,a=r+16|0)){if(!s[r>>2])break e}else{if(!Zn(a,n))break t;if(i=r+4|0,!s[r+4>>2])break n;r=i}i=r,r=s[r>>2];continue}break}return s[t>>2]=r,i}return s[t>>2]=r,i}r=Wr(e)}return s[t>>2]=r,r}function ke(e){var t=0,n=0,r=0;e:{if(3&(t=e))for(;;){if(!f[0|t])break e;if(!(3&(t=t+1|0)))break}for(;n=t,t=t+4|0,!((-1^(r=s[n>>2]))&r-16843009&-2139062144););if(!(255&r))return n-e|0;for(;r=f[n+1|0],n=t=n+1|0,r;);}return t-e|0}function we(e,t){var n=0,r=0;if(s[e+4>>2]!=s[Gr(e)>>2])return U=r=U-16|0,n=rn(r,e),dr(Gr(e),s[n+4>>2],t),s[n+4>>2]=s[n+4>>2]+8,Xn(n),void(U=r+16|0);U=r=U-32|0,n=Gr(e),n=xe(r+8|0,Te(e,Pn(e)+1|0),Pn(e),n),dr(0,s[n+8>>2],t),s[n+8>>2]=s[n+8>>2]+8,at(e,n),et(n),U=r+32|0}function Ee(e,t,n){var r=0;if(!n)return s[e+4>>2]==s[t+4>>2];if((0|e)==(0|t))return 1;n=s[e+4>>2],e=f[0|n],t=s[t+4>>2];e:if(!(!e|(0|(r=f[0|t]))!=(0|e)))for(;;){if(r=f[t+1|0],!(e=f[n+1|0]))break e;if(t=t+1|0,n=n+1|0,(0|e)!=(0|r))break}return(0|e)==(0|r)}function Te(e,t){var n,r,i=0;if(U=n=U-16|0,s[n+12>>2]=t,U=r=U-16|0,s[r+12>>2]=536870911,s[r+8>>2]=2147483647,i=s[Yt(r+12|0,r+8|0)>>2],U=r+16|0,t>>>0<=i>>>0)return(e=In(e))>>>0<i>>>1>>>0&&(s[n+8>>2]=e<<1,i=s[Kt(n+8|0,n+12|0)>>2]),U=n+16|0,i;Zr(),T()}function Ae(e,t){var n,r,i,o=0,s=0;return U=i=U-16|0,n=ke(t),U=r=U-16|0,n>>>0<=4294967279?(n>>>0<=10?(Br(e,n),o=e):(Yr(e,o=gt(s=Pt(n)+1|0)),Gn(e,s),Ur(e,n)),nr(o,t,n),a[r+15|0]=0,Lr(n+o|0,r+15|0),U=r+16|0):(ti(),T()),U=i+16|0,e}function Se(e,t,n){var r=0,i=0,o=0;if(t)for(;i=Me(r=Q(e,t,10),o=j,10,0),a[0|(n=n-1|0)]=e-i|48,i=t>>>0>9,e=r,t=o,i;);else r=e;if(r)for(;e=(r>>>0)/10|0,a[0|(n=n-1|0)]=r-y(e,10)|48,t=r>>>0>9,r=e,t;);return n}function Ie(e){var t,n,r=0,i=0,a=0,o=0,s=0,c=0,u=0;if(!((0|(n=Pn(t=e+644|0)))<=1)){for(e=r=n-1|0;i=e-1|0,a=+(0|e),o=(g[Fn(t,e)>>3]-g[Fn(t,i)>>3])*a+o,s+=a,c=e>>>0>1,e=i,c;);(0|n)<=1||(u=o/(s*+(0|r)))}return u}function Re(e,t){var n=0,r=0,i=0;return n=e+32|0,r=y(t,48),On(n)>>>0<r>>>0&&(S(2420,1498,139,1210),T()),r=s[n+12>>2]-r|0,s[n+12>>2]=r,n=Nt(n),e=cn(e),o[n+18>>1]=3,t?(Vr(n,i=he(i=e,e=y(t,48))),Z(i,r,e)):Vr(n,0),s[n>>2]=t,s[n+4>>2]=t,1}function Oe(e,t){var n,r,i=0;n=ke(t),U=r=U-16|0,(i=Jn(e)?xn(e)-1|0:10)>>>0>=n>>>0?(i=En(e),n&&ee(i,t,n),a[r+15|0]=0,Lr(n+i|0,r+15|0),Jn(e)?Ur(e,n):Br(e,n)):pe(e,i,n-i|0,e=vn(e),e,n,t),U=r+16|0}function Ce(e,t){var n,r,i=0;if(d(+e),n=0|c(1),r=0|c(0),2047!=(0|(i=n>>>20&2047))){if(!i)return 0==e?i=0:(e=Ce(0x10000000000000000*e,t),i=s[t>>2]+-64|0),s[t>>2]=i,e;s[t>>2]=i-1022,u(0,0|r),u(1,-2146435073&n|1071644672),e=+l()}return e}function xe(e,t,n,r){var i,a,o,c=0;return U=i=U-16|0,s[i+12>>2]=0,ur(e+12|0,r),t&&(t>>>0>536870911&&(He(1742),T()),c=gt(t<<3)),s[e>>2]=c,n=(n<<3)+c|0,s[e+8>>2]=n,s[e+4>>2]=n,a=Hr(e),o=(t<<3)+c|0,s[a>>2]=o,U=i+16|0,e}function Pe(e,t){var n,r;return U=r=U-16|0,s[e>>2]=0,s[e+4>>2]=0,s[e+16>>2]=0,s[e+20>>2]=0,s[e+8>>2]=0,s[e+12>>2]=0,s[(n=r+8|0)>>2]=s[t>>2],s[n+4>>2]=s[t+4>>2],o[e+18>>1]=1029,Vr(e,s[n>>2]),s[e>>2]=s[n+4>>2],U=r+16|0,e}function De(e){var t,n=0,r=0;if(t=s[e+28>>2]){e:if(n=s[t>>2]){for(;;){if(s[t+8>>2]!=(0|n)){if(r=s[n+8>>2],W(n),s[t>>2]=r,n=r)continue;break e}break}s[n+4>>2]=0}(n=s[t+16>>2])&&W(n),W(t)}yn(e+32|0)}function Le(e){var t=0,n=0,r=0;if(!gr(a[s[e>>2]]))return 0;for(;r=s[e>>2],t=-1,n>>>0<=214748364&&(t=a[0|r]-48|0,t=(2147483647-(n=y(n,10))|0)<(0|t)?-1:t+n|0),s[e>>2]=r+1,n=t,gr(a[r+1|0]););return t}function Me(e,t,n,r){var i,a,o,s,c=0,u=0;return s=y(c=n>>>16|0,u=e>>>16|0),c=(65535&(u=((o=y(i=65535&n,a=65535&e))>>>16|0)+y(u,i)|0))+y(c,a)|0,j=(y(t,n)+s|0)+y(e,r)+(u>>>16)+(c>>>16)|0,65535&o|c<<16}function Ne(e,t,n){var r;if(!(r=s[e+16>>2]))return s[e+36>>2]=1,s[e+24>>2]=n,void(s[e+16>>2]=t);e:{if((0|t)==(0|r)){if(2!=s[e+24>>2])break e;return void(s[e+24>>2]=n)}a[e+54|0]=1,s[e+24>>2]=2,s[e+36>>2]=s[e+36>>2]+1}}function Ue(e,t,n){var r,i=0;i=Zn(t,e),r=Zn(n,t);e:{if(i){if(r)return At(e,n),1;if(At(e,t),i=1,!Zn(n,t))break e;At(t,n)}else{if(i=0,!r)break e;if(At(t,n),i=1,!Zn(t,e))break e;At(e,t)}i=2}return i}function Be(e){var t=0;return Dt(e),s[e+28>>2]=0,s[e+24>>2]=0,xt(e+32|0,0,1024),$n(e+56|0),s[e+24>>2]||(t=gt(20),s[t+16>>2]=0,s[t+12>>2]=0,s[t+8>>2]=0,s[t+4>>2]=65536,s[t>>2]=0,s[e+28>>2]=t,s[e+24>>2]=t),e}function Fe(e,t){var n,r,i;return U=n=U-32|0,It(n,t),i=Pe(n+8|0,n),U=t=U-16|0,q(r=t+8|0,e,i),Lt(t,e),Kn(r,t)?(U=t+16|0,e=s[t+8>>2]+24|0):(S(1927,1415,1218,2143),T()),U=n+32|0,e}function je(e,t,n,r,i){var a;if(U=a=U-256|0,!(73728&i|(0|n)<=(0|r))){if(te(a,255&t,(r=(n=n-r|0)>>>0<256)?n:256),!r)for(;de(e,a,256),(n=n-256|0)>>>0>255;);de(e,a,n)}U=a+256|0}function He(e){var t,n,r,i,a;t=0|I(8),s[t>>2]=8492,s[t>>2]=8536,r=gt((n=ke(e))+13|0),s[r+8>>2]=0,s[r+4>>2]=n,s[r>>2]=n,i=t,a=Z(r+12|0,e,n+1|0),s[i+4>>2]=a,s[t>>2]=8584,R(0|t,8616,2),T()}function Ve(){var e,t,n=0,r=0;return U=n=U-16|0,A(n+8|0,0),r=s[n+12>>2],U=n+16|0,n=Me(n=s[n+8>>2],n>>31,1e3,0),t=j,r=n+(e=Q(r,r>>31,1e3))|0,n=j+t|0,j=n=r>>>0<e>>>0?n+1|0:n,r}function We(e){var t=0;return t=s[e+72>>2],s[e+72>>2]=t-1|t,8&(t=s[e>>2])?(s[e>>2]=32|t,-1):(s[e+4>>2]=0,s[e+8>>2]=0,t=s[e+44>>2],s[e+28>>2]=t,s[e+20>>2]=t,s[e+16>>2]=t+s[e+48>>2],0)}function Ge(e,t){if(s[e>>2]=0,s[e+4>>2]=0,s[e+16>>2]=0,s[e+20>>2]=0,s[e+8>>2]=0,s[e+12>>2]=0,t>>>0<7)return o[e+18>>1]=h[5282+(t<<1)>>1],void(5==(0|t)&&Dr(e,0));S(1968,1415,714,1825),T()}function ze(e){var t=0,n=0;e&&(s[e+20>>2]!=s[e+28>>2]&&ri[s[e+36>>2]](e,0,0),(0|(t=s[e+4>>2]))!=(0|(n=s[e+8>>2]))&&(t=t-n|0,ri[s[e+40>>2]](e,t,t>>31,1)))}function Xe(e,t){var n,r,i,a;U=n=U-16|0,s[n+8>>2]=t,i=n,a=mr(e),s[i>>2]=a,r=en(8+(t=s[e>>2]+(s[n+8>>2]-s[n>>2]>>3<<3)|0)|0,s[e+4>>2],t),Pn(e),yt(e,r),Xr(e),Wt(t),U=n+16|0}function Ye(e,t,n,r,i){var a=0;if(a=rt(e,t,n,r),Zn(i,r)){if(At(r,i),!Zn(r,n))return a+1|0;if(At(n,r),!Zn(n,t))return a+2|0;if(At(t,n),!Zn(t,e))return a+3|0;At(e,t),a=a+4|0}return a}function Ke(e,t){var n;if(U=n=U-16|0,s[n+12>>2]=t,t>>>0<=(t=dt(e))>>>0)return(e=Rn(e))>>>0<t>>>1>>>0&&(s[n+8>>2]=e<<1,t=s[Kt(n+8|0,n+12|0)>>2]),U=n+16|0,t;Zr(),T()}function Ze(e,t){var n,r=0,i=0;return n=vt(r=e+32|0,t),r=Nt(r),e=cn(e),o[r+18>>1]=4,t?(Vr(r,i=he(i=e,e=y(t,24))),Z(i,n,e)):Vr(r,0),s[r>>2]=t,s[r+4>>2]=t,1}function Qe(e){var t,n;return(e=(t=s[2201])+(n=e+3&-4)|0)>>>0<=t>>>0&&n||e>>>0>ii()<<16>>>0&&!(0|x(0|e))?(s[2720]=48,-1):(s[2201]=e,t)}function qe(e){var t,n=0;t=s[e>>2],n=s[t+4>>2],s[e>>2]=n,n&&Vr(n,e),s[t+8>>2]=s[e+8>>2],n=Cn(e)?s[e+8>>2]:s[e+8>>2]+4|0,s[n>>2]=t,s[t+4>>2]=e,Vr(e,t)}function Je(e){var t,n=0;t=s[e+4>>2],n=s[t>>2],s[e+4>>2]=n,n&&Vr(n,e),s[t+8>>2]=s[e+8>>2],n=Cn(e)?s[e+8>>2]:s[e+8>>2]+4|0,s[n>>2]=t,s[t>>2]=e,Vr(e,t)}function $e(e,t){var n,r,i=0;U=n=U-32|0,r=i=Gr(e),i=xe(n+8|0,Te(e,Pn(e)+1|0),Pn(e),i),pn(r,s[i+8>>2],t),s[i+8>>2]=s[i+8>>2]+8,at(e,i),et(i),U=n+32|0}function et(e){var t=0;if((0|(t=s[e+4>>2]))!=s[e+8>>2])for(;s[e+8>>2]=s[e+8>>2]-8,(0|t)!=s[e+8>>2];);s[e>>2]&&W(t=s[e>>2])}function tt(e){var t,n,r,i;U=t=(U=n=U-16|0)-16|0,s[e+4>>2]=0,s[t+12>>2]=0,br(e+8|0,t+12|0),r=e,i=Wr(e),s[r>>2]=i,U=t+16|0,U=n+16|0}function nt(e){var t,n=0;for(U=t=U-16|0,e=Rt(t,e);!((n=(255&kr(e))-9|0)>>>0>23|!(1<<n&8388627));)hn(e);Ht(e),U=t+16|0}function rt(e,t,n,r){var i=0;if(i=Ue(e,t,n),Zn(r,n)){if(At(n,r),!Zn(n,t))return i+1|0;if(At(t,n),!Zn(t,e))return i+2|0;At(e,t),i=i+3|0}return i}function it(e,t){var n;if(Dn(n=e+576|0))for(e=0;;){if(s[sn(n,e)>>2]==(0|t))return e;if(e=e+1|0,!(Dn(n)>>>0>e>>>0))break}return 0}function at(e,t){var n;Er(e),n=t+4|0,Jt(Gr(e),s[e>>2],s[e+4>>2],n),At(e,n),At(e+4|0,t+8|0),At(Gr(e),Hr(t)),s[t>>2]=s[t+4>>2],Pn(e),In(e),In(e)}function ot(e,t,n,r){var i;U=i=U-16|0,r=Ft(i,e,r),(0|(e=n-t|0))>0&&(Z(s[r+4>>2],t,e),s[r+4>>2]=e+s[r+4>>2]),Xn(r),U=i+16|0}function st(e,t){e:{if(rr(e)){if(p[e>>2]<=t>>>0)break e;return s[e+8>>2]+y(t,24)|0}S(2451,1415,1668,2143),T()}S(1721,1415,1669,2143),T()}function ct(e,t){var n,r,i;dt(e)>>>0<t>>>0&&(Zr(),T()),n=dn(Gr(e),t),s[e>>2]=n,s[e+4>>2]=n,r=Gr(e),i=(t<<2)+n|0,s[r>>2]=i,Nr(e)}function ut(e,t){var n;return Dn(n=e+576|0)?(e=s[e+544>>2]<=(0|t)?Dn(n)-1|0:(0|t)>0?t:0,s[Yn(n,e)>>2]):0}function lt(e){var t;t=s[e>>2],s[e+4>>2]=t}function dt(e){var t;return U=t=U-16|0,s[t+12>>2]=1073741823,s[t+8>>2]=2147483647,e=s[Yt(t+12|0,t+8|0)>>2],U=t+16|0,e}function ft(e,t){return e=ye(e+32|0),s[e+16>>2]=0,s[e+20>>2]=0,s[e>>2]=0,s[e+4>>2]=0,s[e+8>>2]=0,s[e+12>>2]=0,o[e+18>>1]=t?10:9,1}function ht(e){var t,n;return U=n=(U=t=U-16|0)-16|0,e=s[or(n+8|0,Wr(e))>>2],U=n+16|0,e=s[or(t+8|0,e)>>2],U=t+16|0,e}function pt(e,t,n){var r;return U=r=U-16|0,s[r+12>>2]=t,br(e,r+12|0),t=s[n+4>>2],s[e+4>>2]=s[n>>2],s[e+8>>2]=t,U=r+16|0,e}function vt(e,t){var n;return t=y(t,24),On(e)>>>0<t>>>0&&(S(2420,1498,139,1210),T()),n=e,e=s[e+12>>2]-t|0,s[n+12>>2]=e,e}function gt(e){var t=0;e=e||1;e:{for(;;){if(t=H(e))break e;if(!(t=s[3148]))break;ri[0|t]()}L(),T()}return t}function yt(e,t){s[e+4>>2]=t}function mt(e,t){s[e+4>>2]=t}function bt(e){var t,n;return s[(e|=0)>>2]=8536,t=s[e+4>>2]-12|0,n=s[t+8>>2]-1|0,s[t+8>>2]=n,(0|n)<0&&W(t),0|e}function _t(e,t){var n,r;U=r=U-16|0,n=rn(r,e),pn(Gr(e),s[n+4>>2],t),s[n+4>>2]=s[n+4>>2]+8,Xn(n),U=r+16|0}function kt(e,t){var n;return U=n=U-16|0,s[n+8>>2]=s[e>>2],s[n>>2]=s[t>>2],e=Kn(n+8|0,n),U=n+16|0,e}function wt(e){if(jn(e))return 16&f[e+19|0]?17-a[e+17|0]|0:s[e>>2];S(2520,1415,1857,1389),T()}function Et(e){var t=0,n=0;Zt(e,fr(e)),t=Gr(e),n=0,s[t>>2]=n,t=e,n=Wr(e),s[t>>2]=n,t=Wr(e),n=0,s[t>>2]=n}function Tt(e){var t=0,n=0;Vt(e,fr(e)),t=Gr(e),n=0,s[t>>2]=n,t=e,n=Wr(e),s[t>>2]=n,t=Wr(e),n=0,s[t>>2]=n}function At(e,t){var n;U=n=U-16|0,s[n+12>>2]=s[e>>2],s[e>>2]=s[t>>2],s[t>>2]=s[n+12>>2],U=n+16|0}function St(e){var t;return U=t=U-16|0,s[e>>2]=0,s[e+4>>2]=0,s[t+12>>2]=0,Jr(e+8|0),U=t+16|0,e}function It(e,t){var n,r;s[e>>2]=t,t||(S(2232,1415,413,1308),T()),n=e,r=ke(t),s[n+4>>2]=r}function Rt(e,t){var n,r;return n=s[t+4>>2],r=s[t>>2],s[e+8>>2]=t,s[e>>2]=r,s[e+4>>2]=n,e}function Ot(e){if(jn(e))return 16&f[e+19|0]||(e=s[e+8>>2]),e;S(2520,1415,1852,1566),T()}function Ct(e,t){if((0|t)>=-308){if((0|t)>=0)return jt(t)*e;e/=jt(0-t|0)}else e=0;return e}function xt(e,t,n){s[e+4>>2]=0,s[e+8>>2]=0,s[e>>2]=t,s[e+20>>2]=n,s[e+12>>2]=0,s[e+16>>2]=0}function Pt(e){var t=0;return e=e>>>0>=11?11==(0|(e=(t=e+16&-16)-1|0))?t:e:10}function Dt(e){s[e>>2]=0,s[e+4>>2]=0,s[e+16>>2]=0,s[e+20>>2]=0,s[e+8>>2]=0,s[e+12>>2]=0}function Lt(e,t){ir(t)||(S(2461,1415,1249,2048),T()),or(e,s[t+8>>2]+y(s[t>>2],48)|0)}function Mt(e){var t;U=t=U-16|0,s[e>>2]=0,s[e+4>>2]=0,s[e+8>>2]=0,U=t+16|0}function Nt(e){return On(e)>>>0<=23&&(S(2397,1498,146,1206),T()),s[e+12>>2]-24|0}function Ut(e){var t;return U=t=U-16|0,e=s[or(t+8|0,mr(e))>>2],U=t+16|0,e}function Bt(e){var t;return U=t=U-16|0,e=s[or(t+8|0,tr(e))>>2],U=t+16|0,e}function Ft(e,t,n){return s[e>>2]=t,t=s[t+4>>2],s[e+4>>2]=t,s[e+8>>2]=t+(n<<2),e}function jt(e){return e>>>0>=309&&(S(2184,1532,48,2213),T()),g[5296+(e<<3)>>3]}function Ht(e){var t,n;n=s[e+4>>2],t=s[e+8>>2],s[t>>2]=s[e>>2],s[t+4>>2]=n}function Vt(e,t){t&&(Vt(e,s[t>>2]),Vt(e,s[t+4>>2]),qr(t+16|0),W(t))}function Wt(e){var t;return U=t=U-16|0,e=s[or(t+8|0,e)>>2],U=t+16|0,e}function Gt(e){var t;return U=t=U-16|0,Yr(t+8|0,e),U=t+16|0,s[t+8>>2]}function zt(e){var t;return U=t=U-16|0,s[t+8>>2]=e,U=t+16|0,s[t+8>>2]}function Xt(e){return 32&f[e+18|0]||(S(1588,1415,1816,1114),T()),s[e>>2]}function Yt(e,t){var n,r;return U=n=U-16|0,r=Qn(t,e),U=n+16|0,r?t:e}function Kt(e,t){var n,r;return U=n=U-16|0,r=Qn(e,t),U=n+16|0,r?t:e}function Zt(e,t){t&&(Zt(e,s[t>>2]),Zt(e,s[t+4>>2]),$r(t+16|0),W(t))}function Qt(e){var t=0;Er(e),s[e>>2]&&(Fr(e),t=s[e>>2],In(e),W(t))}function qt(e){var t=0;Tr(e),s[e>>2]&&(jr(e),t=s[e>>2],Rn(e),W(t))}function Jt(e,t,n,r){e=n-t|0,n=s[r>>2]-e|0,s[r>>2]=n,(0|e)>0&&Z(n,t,e)}function $t(e){var t;return(-1>>>(t=31&e)&-2)<<t|(-1<<(e=0-e&31)&-2)>>>e}function en(e,t,n){var r;return r=t-e|0,(0|e)!=(0|t)&&ee(n,e,r),n+r|0}function tn(e,t){var n;return(0|(n=pr(e)))==(0|t)&&hr(e),(0|t)==(0|n)}function nn(e,t){var n;return(0|(n=kr(e)))==(0|t)&&hn(e),(0|t)==(0|n)}function rn(e,t){return s[e>>2]=t,t=s[t+4>>2],s[e+4>>2]=t,s[e+8>>2]=t+8,e}function an(e,t){var n;U=n=U-16|0,function e(t,n,r){var i=0,a=0,o=0,c=0,u=0,l=0;e:for(;;){c=n-4|0;t:for(;;){for(i=t;;){n:{r:{i:{a:{o:{s:{c:{u:{l:switch(0|(a=(t=n-i|0)>>2)){case 5:break c;case 4:break u;case 2:break l;case 0:case 1:break n;case 3:break o;default:break s}if(!Zn(t=n-4|0,i))break n;return void At(i,t)}return void rt(i,i+4|0,i+8|0,n-4|0)}return void Ye(i,i+4|0,i+8|0,i+12|0,n-4|0)}if((0|t)<=123){for(a=n,U=c=U-16|0,Ue(i,i+4|0,r=i+8|0),n=i+12|0;(0|n)!=(0|a);){if(Zn(n,r)){for(s[c+12>>2]=s[n>>2],t=n;;){if(o=t,t=r,s[o>>2]=s[t>>2],(0|t)!=(0|i)){if(Zn(c+12|0,r=t-4|0))continue}else t=i;break}s[t>>2]=s[c+12>>2]}r=n,n=n+4|0}return void(U=c+16|0)}if(o=((0|a)/2<<2)+i|0,u=t>>>0>=3997?Ye(i,(t=(0|a)/4<<2)+i|0,o,t+o|0,c):Ue(i,o,c),t=c,!Zn(i,o)){for(;;){if((0|i)==(0|(t=t-4|0))){if(a=i+4|0,Zn(i,c))break i;for(;;){if((0|a)==(0|c))break n;if(Zn(i,a)){At(a,c),a=a+4|0;break i}a=a+4|0}}if(Zn(t,o))break}At(i,t),u=u+1|0}if((a=i+4|0)>>>0>=t>>>0)break a;for(;;)if(l=a,a=a+4|0,!Zn(l,o)){for(;!Zn(t=t-4|0,o););if(t>>>0<l>>>0){a=l;break a}At(l,t),o=(0|o)==(0|l)?t:o,u=u+1|0}}Ue(i,i+4|0,n-4|0);break n}if((0|a)!=(0|o)&&Zn(o,a)&&(At(a,o),u=u+1|0),!u){if(l=ie(i,a),ie(t=a+4|0,n)){if(n=a,t=i,!l)continue e;break n}if(o=2,l)break r}if((a-i|0)<(n-a|0)){e(i,a,r),t=a+4|0;continue t}e(a+4|0,n,r),n=a,t=i;continue e}if((0|(o=c))==(0|a))break n;for(;;)if(a=(t=a)+4|0,Zn(i,t)){for(;Zn(i,o=o-4|0););if(!(t>>>0<o>>>0))break;At(t,o)}o=4}switch(i=t,o-2|0){case 0:continue t;case 2:continue;default:break n}}break}break}break}}(zt(e),zt(t),n+8|0),U=n+16|0}function on(e,t,n){1==s[e+28>>2]|s[e+4>>2]!=(0|t)||(s[e+28>>2]=n)}function sn(e,t){return Dn(e)>>>0<=t>>>0&&(ei(),T()),s[e>>2]+(t<<2)|0}function cn(e){return(e=s[e+24>>2])||(S(2122,1415,2492,1153),T()),e}function un(e){return rr(e)||(S(2451,1415,1642,1810),T()),s[e>>2]}function ln(e,t){s[e+4>>2]==s[Gr(e)>>2]?$e(e,t):_t(e,t)}function dn(e,t){return t>>>0>1073741823&&(He(1742),T()),gt(t<<2)}function fn(e,t){p[e+4>>2]<p[Gr(e)>>2]?_t(e,t):$e(e,t)}function hn(e){var t;return t=e,e=s[e>>2],s[t>>2]=e+1,a[0|e]}function pn(e,t,n){e=s[n+4>>2],s[t>>2]=s[n>>2],s[t+4>>2]=e}function vn(e){return Jn(e)?s[e+4>>2]:f[e+11|0]}function gn(e){var t=0;Jn(e)&&(t=s[e>>2],xn(e),W(t))}function yn(e){W(s[e+8>>2]),(e=s[e+4>>2])&&W(e)}function mn(e){var t;return t=s[e>>2],s[e>>2]=0,t}function bn(e,t,n){s[e>>2]=s[t>>2],a[e+4|0]=f[0|n]}function _n(e){return(s[Gr(e)>>2]-s[e>>2]|0)/48|0}function kn(e){return Tn(e)||(ei(),T()),s[e>>2]}function wn(e){return e?(s[2720]=e,-1):0}function En(e){return Jn(e)?s[e>>2]:e}function Tn(e){return(s[e+4>>2]-s[e>>2]|0)/48|0}function An(e,t){return a[e+4|0]=0,s[e>>2]=t,e}function Sn(e){return s[e+16>>2]-s[e+8>>2]|0}function In(e){return s[Gr(e)>>2]-s[e>>2]>>3}function Rn(e){return s[Gr(e)>>2]-s[e>>2]>>2}function On(e){return s[e+12>>2]-s[e+8>>2]|0}function Cn(e){return s[s[e+8>>2]>>2]==(0|e)}function xn(e){return 2147483647&s[e+8>>2]}function Pn(e){return s[e+4>>2]-s[e>>2]>>3}function Dn(e){return s[e+4>>2]-s[e>>2]>>2}function Ln(e,t){return s[e>>2]=s[t>>2],e}function Mn(e){return s[e>>2]-s[e+4>>2]|0}function Nn(e){return s[e>>2]=s[e>>2]+8,e}function Un(e){return s[e>>2]=s[e>>2]-4,e}function Bn(e){return s[e>>2]=s[e>>2]-8,e}function Fn(e,t){return s[e>>2]+(t<<3)|0}function jn(e){return(4&f[e+19|0])>>>2|0}function Hn(e,t,n){s[e+4>>2]=n,s[e>>2]=t}function Vn(e){return 0!=s[(e|=0)>>2]|0}function Wn(e){return Mt(e),Mt(e+24|0),e}function Gn(e,t){s[e+8>>2]=-2147483648|t}function zn(e){return Mt(e),Mt(e+32|0),e}function Xn(e){s[s[e>>2]+4>>2]=s[e+4>>2]}function Yn(e,t){return s[e>>2]+(t<<2)|0}function Kn(e,t){return s[e>>2]!=s[t>>2]}function Zn(e,t){return s[e>>2]<s[t>>2]}function Qn(e,t){return p[e>>2]<p[t>>2]}function qn(e){Tn(e),lt(e),_n(e),Tn(e)}function Jn(e){return f[e+11|0]>>>7|0}function $n(e){s[e>>2]=0,s[e+4>>2]=0}function er(e,t){Dn(e),mt(e,t),Kr(e)}function tr(e){return Wt(s[e+4>>2])}function nr(e,t,n){n&&Z(e,t,n)}function rr(e){return 4==h[e+18>>1]}function ir(e){return 3==h[e+18>>1]}function ar(e){s[e+12>>2]=s[e+8>>2]}function or(e,t){return s[e>>2]=t,e}function sr(e){return s[e>>2]+16|0}function cr(e,t,n){s[t>>2]=s[n>>2]}function ur(e,t){Jr(e),Yr(e+4|0,t)}function lr(e){return St(e+24|0),e}function dr(e,t,n){g[t>>3]=g[n>>3]}function fr(e){return s[Wr(e)>>2]}function hr(e){return hn(s[e>>2])}function pr(e){return kr(s[e>>2])}function vr(e){return Mn(s[e>>2])}function gr(e){return e-48>>>0<10}function yr(e,t,n){Hn(e+24|0,t,n)}function mr(e){return Wt(s[e>>2])}function br(e,t){s[e>>2]=s[t>>2]}function _r(e){_n(e),Tn(e),_n(e)}function kr(e){return a[s[e>>2]]}function wr(e){return Vn(e+24|0)}function Er(e){In(e),Pn(e),In(e)}function Tr(e){Rn(e),Dn(e),Rn(e)}function Ar(e){return Vn(e+56|0)}function Sr(e){Pn(e),Fr(e),Xr(e)}function Ir(e){Dn(e),jr(e),Kr(e)}function Rr(){F=20800,B=12608}function Or(e){gn(e+24|0),gn(e)}function Cr(e){gn(e+32|0),gn(e)}function xr(e,t){return Fe(e,t)}function Pr(e){return 0|(e|=0)}function Dr(e,t){a[e+17|0]=17-t}function Lr(e,t){a[0|e]=f[0|t]}function Mr(e,t,n){Z(t,n,48)}function Nr(e,t){Rn(e),Rn(e)}function Ur(e,t){s[e+4>>2]=t}function Br(e,t){a[e+11|0]=t}function Fr(e){yt(e,s[e>>2])}function jr(e){mt(e,s[e>>2])}function Hr(e){return e+12|0}function Vr(e,t){s[e+8>>2]=t}function Wr(e){return e+4|0}function Gr(e){return e+8|0}function zr(e){W(e|=0)}function Xr(e){In(e),Pn(e)}function Yr(e,t){s[e>>2]=t}function Kr(e){Rn(e),Dn(e)}function Zr(){He(1146),T()}function Qr(e){qt(e+24|0)}function qr(e){Cr(e+4|0)}function Jr(e){s[e>>2]=0}function $r(e){Or(e+4|0)}function ei(){ti(),T()}function ti(){L(),T()}function ni(e){}i(t=f,1024,"UGFyc2VBcnJheQAtKyAgIDBYMHgALTBYKzBYIDBYLTB4KzB4IDB4AHN0ciAhPSAwIHx8IGxlbiA9PSAwdQBBbGdvcml0aG1CQUJCd2l0aFN0YWxsRXZlbnQAR2V0SW50AGhlaWdodABQYXJzZU9iamVjdABpdGVtcwB2ZWN0b3IAR2V0QWxsb2NhdG9yAFBhcnNlTnVtYmVyAEZpbmRNZW1iZXIAQWxnb3JpdGhtU3RhcnR1cABUb3AAUG9wAHN0YXRlX2luZm8Ac3RkOjpleGNlcHRpb24Adl9hZGFwdGF0aW9uAGFfYWRhcHRhdGlvbgBzZWdtZW50X2R1cmF0aW9uAHNldF9kdXJhdGlvbgBNZW1iZXJCZWdpbgBOb3ROdWxsU3RyTGVuAG5hbgBpdGVtX251bQBQYXJzZVN0cmluZ1RvU3RyZWFtAFBhcnNlU3RyZWFtAFBhcnNlTnVsbABTdHJpbmdFcXVhbABHZXRTdHJpbmdMZW5ndGgAYmFuZHdpZHRoAC4vbGlicy9yYXBpZGpzb24vZG9jdW1lbnQuaAAuL2xpYnMvcmFwaWRqc29uL2VuY29kaW5ncy5oAC4vbGlicy9yYXBpZGpzb24vcmVhZGVyLmgALi9saWJzL3JhcGlkanNvbi9pbnRlcm5hbC9zdGFjay5oAC4vbGlicy9yYXBpZGpzb24vaW50ZXJuYWwvcG93MTAuaABHZXRTdHJpbmcAUGFyc2VTdHJpbmcAZGF0YV8uZi5mbGFncyAmIGtJbnRGbGFnAGluZgBHZW5lcmljU3RyaW5nUmVmAHNldF9zaXplAGNvbnRlbnRfdG90YWxfc2l6ZQBjdXJyZW50X2NvbnRlbnRfZG93bmxvYWRfc2l6ZQBjdXJyZW50X2hlYWRlcl9kb3dubG9hZF9zaXplAGluZGV4IDwgZGF0YV8uYS5zaXplAGFsbG9jYXRvcjxUPjo6YWxsb2NhdGUoc2l6ZV90IG4pICduJyBleGNlZWRzIG1heGltdW0gc3VwcG9ydGVkIHNpemUAU2l6ZQBQYXJzZVRydWUAR2VuZXJpY1ZhbHVlAGNvbnRlbnRfZG93bmxvYWRfc3RhdGUAaGVhZGVyX2Rvd25sb2FkX3N0YXRlAHN0cmVhbV9iaXRyYXRlAGZyYW1lX3JhdGUAc2FtcGxlX3JhdGUAUGFyc2UAZmFsc2UAUGFyc2VGYWxzZQBwcmVsb2FkX3R5cGUAbWVkaWFfdHlwZQB0eXBlID49IGtOdWxsVHlwZSAmJiB0eXBlIDw9IGtOdW1iZXJUeXBlAHN0YXJ0X3RpbWUAR2V0RG91YmxlAFB1c2hVbnNhZmUARW5jb2RlAE1lbWJlckVuZABzdHJlYW1faWQAW1NlbGVjdG9yTG9nXSBbJXNdIGNoYW5nZSBxdWFsaXR5IGZyb20gJWQgLT4gJWQAY29kZWMAYWxsb2NhdG9yXwBzdGFja1RvcF8Ab3BlcmF0b3JbXQBOQU4ASU5GAGNvZGVwb2ludCA8PSAweDEwRkZGRgBuID49IDAgJiYgbiA8PSAzMDgAUGFyc2VIZXg0AFBvdzEwAGV4cEZyYWMgPD0gMABzdHIgIT0gMAAoZGF0YV8uZi5mbGFncyAmIGtVaW50NjRGbGFnKSAhPSAwAC4AKG51bGwpAHN0YWNrXy5HZXRTaXplKCkgPT0gc2l6ZW9mKFZhbHVlVHlwZSkAc3RhdGljX2Nhc3Q8c3RkOjpwdHJkaWZmX3Q+KHNpemVvZihUKSAqIGNvdW50KSA8PSAoc3RhY2tFbmRfIC0gc3RhY2tUb3BfKQBHZXRTaXplKCkgPj0gc2l6ZW9mKFQpAEdldFNpemUoKSA+PSBjb3VudCAqIHNpemVvZihUKQBJc0FycmF5KCkASXNPYmplY3QoKQAhSGFzUGFyc2VFcnJvcigpAElzTnVtYmVyKCkAcmhzLklzU3RyaW5nKCkAbmFtZS5Jc1N0cmluZygpAGlzLlBlZWsoKSA9PSAneycAaXMuUGVlaygpID09ICd0JwBpcy5QZWVrKCkgPT0gJ24nAGlzLlBlZWsoKSA9PSAnZicAaXMuUGVlaygpID09ICdbJwBzLlBlZWsoKSA9PSAnXCInACVkIABbU2VsZWN0b3JMb2ddIFN1cHBvcnQgYml0cmF0ZTogAFtTZWxlY3RvckxvZ10gdmlkZW9fc3RyZWFtIHN0cmVhbV9pZDolcyBzZWdtZW50X2R1cmF0aW9uOiVkIGJhbmR3aWR0aDolZCB3aWR0aDolZCBoZWlnaHQ6JWQgZnJhbWVyYXRlOiUuMmYgY29kZWM6JXMKAFtTZWxlY3RvckxvZ10gYXVkaW9fc3RyZWFtIHN0cmVhbV9pZDolcyBzZWdtZW50X2R1cmF0aW9uOiVkIGJhbmR3aWR0aDolZCBzYW1wbGVfcmF0ZTolZCBjb2RlYzolcwoAW1NlbGVjdG9yTG9nXSBQcmVsb2FkIGluZm8gaXM6ICVzCgBbU2VsZWN0b3JMb2ddIE1QRCBpbmZvIGlzOiAlcwoAW1NlbGVjdG9yTG9nXSBbJXNdIHRocmVzaG9sZCBoaWdoOiUuMmxmIGxvdzolLjJsZiBodXJyeTolLjJsZgoAW1NlbGVjdG9yTG9nXSBkZXZpY2VfaW5mbyBzY3JlZW5fd2lkdGg6JWQgc2NyZWVuX2hlaWdodDolZCBkZXZpY2VfcGl4ZWxfcmF0aW86JS4yZiBzY3JlZW5fZnBzOiUuMmYKAFtTZWxlY3RvckxvZ10gWyVzXSBzdGFydHVwX2luZm8gdGltZTolbGx1IGRvd25sb2FkX3NwZWVkOiVsbGQgcHJlZGljdGVkX2JhbmR3aWR0aDolbGxkIGJpdHJhdGU6JWQgY3VycmVudF9iaXRyYXRlOiVkIGJ1ZmZlcl9sZW5ndGg6JS4yZiBwcmVkaWN0ZWRfZXJyb3I6JS4yZiBtYXhfZXJyb3I6JS4yZiBzZWVrX2FjdGlvbjolZCBwbGF5X3Bvc2l0aW9uOiVsbGQgaGFzX3N0YXJ0OiVkIHN0YXJ0dXBfZGVjaXNpb25fY291bnQ6JWQKAFtTZWxlY3RvckxvZ10gdmlkZW9fbWVkaWFfaW5mbyBzZWdtZW50X2R1cmF0aW9uOiVkIGJpdHJhdGU6JWQgd2lkdGg6JWQgaGVpZ2h0OiVkIGJpdHJhdGVfbGV2ZWxzOiVkCgBbU2VsZWN0b3JMb2ddIFtQcmVsb2FkZXJdIG1ldGhvZDolZCBkb3dubG9hZF9zcGVlZDogJWQsIG1lZGlhX2Zvcm1hdDogJWQgcHJlbG9hZF9iaXRyYXRlOiVkIHByZWxvYWRfZHVyYXRpb246JWQgcHJlbG9hZF9zaXplOiVkIGNvbnNpZGVyX3NjcmVlbjolZAoAW1NlbGVjdG9yTG9nXSBbZmluZE1heEJpdHJhdGU0U2NyZWVuXSBTZXQgQUJSIG1heCBiaXRyYXRlIGZvciBzY3JlZW46JWQKAFtTZWxlY3RvckxvZ10gW3NlZWsgYWN0aW9uXSBub3dfY2hlY2tfdGltZTolbGxkIHNlZWtfYWN0aW9uOiVkIGVuYWJsZV9zZWVrX3N0YWJsZV9tb2RlbDolZAoAW1NlbGVjdG9yTG9nXSBQcmVsb2FkIGluZm8gaXRlbV9udW06JWQsIGl0ZW1zX3NpemU6JWQKAFtTZWxlY3RvckxvZ10gW2FkanVzdEJpdHJhdGVdIEFCUiBwcmVkaWN0IGJpdHJhdGU6JWQgYWRqdXN0IG1heCBiaXRyYXRlOiVkIHRvICVkCgBbU2VsZWN0b3JMb2ddIFtQcmVsb2FkZXJdIG1ldGhvZDolZCBkb3dubG9hZF9zcGVlZDogJWQsIG1lZGlhX2Zvcm1hdDogJWQKAFtTZWxlY3RvckxvZ10gW1ByZWxvYWRlcl0gZG93bmxvYWRfc3BlZWQ6ICVkLCBtZWRpYV9mb3JtYXQ6ICVkCgBbU2VsZWN0b3JMb2ddIFN0YXJ0dXAgdXNlIHByZWxvYWQgaXRlbSBhdCBiaXRyYXRlOiAlZAoAW1NlbGVjdG9yTG9nXSBbJXNdIG5vd19jaGVja190aW1lOiVsbGQsIGJ1ZmZlcl9sZW5ndGg6JS4ybGYvJS4yZiwgcGxheV9zcGVlZDolLjJmLCBjdXJyZW50X2JpdHJhdGU6JWQsIHByZWRpY3RfYml0cmF0ZTolZCwgYmFuZHdpZHRoOiVsbGQsIHByZWRpY3RlZF9iYW5kd2lkdGg6JWxsZCwgc2VnbWVudF9kdXJhdGlvbjolZCwgc3RhbGxfY291bnQ6JWQsIHNlZWtfYWN0aW9uOiVkLCBzZWVrX3N0YXlfdGltZTolLjJmLCBwbGF5X3Bvc2l0aW9uOiVsbGQsIGxhc3Rfc2Vla19jaGVja190aW1lOiVsbGQsIHN0YWxsX2V2ZW50OiVkLCBzdGFsbF9ldmVudF9jb3VudDolZC8lZCwgcW9lX3ZhbHVlOiUuMmYgKCUuMmYgJS4yZiAlLjJmKSAoJWQtPiVkKQoAW1NlbGVjdG9yTG9nXSBbRVJST1JdIFByZWxvYWQgaW5mbyBwYXJzZSBlcnJvciEKAFtTZWxlY3RvckxvZ10gW0VSUk9SXSBObyB2X2FkYXB0YXRpb24gaW4gTVBEIQoAW1NlbGVjdG9yTG9nXSBbRVJST1JdIE5vIGFfYWRhcHRhdGlvbiBpbiBNUEQhCgBbU2VsZWN0b3JMb2ddIFtzZWVrIGFjdGlvbl0gbm93X2NoZWNrX3RpbWU6JWxsZCBsYXN0X3NlZWtfY2hlY2tfdGltZTolbGxkIHNlZWtfYWN0aW9uOiVkIGhhbmcgdXAhISEhCgBbU2VsZWN0b3JMb2ddIFtFUlJPUl0gUHJlbG9hZCBpbmZvIGl0ZW1zIGVycm9yICEhIQoAW1NlbGVjdG9yTG9nXSBbRVJST1JdIFByZWxvYWQgaW5mbyBzdGF0ZSBlcnJvciAhISEKAFtTZWxlY3RvckxvZ10gW0VSUk9SXSB2X2FkYXB0YXRpb24gcGFyc2UgZXJyb3IgISEhCgBbU2VsZWN0b3JMb2ddIFtFUlJPUl0gYV9hZGFwdGF0aW9uIHBhcnNlIGVycm9yICEhIQoAW1NlbGVjdG9yTG9nXSBtT3BlbmVkVGltZTogJWxsZCwgbU1ldGhvZDogJWQsIG1CdWZmZXI6ICUuMmxmLyUuMmYgbURvd25sb2FkU3BlZWQ6JWxsZCAK"),i(t,5058,"Ig=="),i(t,5071,"Lw=="),i(t,5116,"XAAAAAAACAAAAAwAAAAAAAAACgAAAA0ACQ=="),i(t,5284,"CQAKAAMABAAFHPYDAAAAAAAA8D8AAAAAAAAkQAAAAAAAAFlAAAAAAABAj0AAAAAAAIjDQAAAAAAAavhAAAAAAICELkEAAAAA0BJjQQAAAACE15dBAAAAAGXNzUEAAAAgX6ACQgAAAOh2SDdCAAAAopQabUIAAEDlnDCiQgAAkB7EvNZCAAA0JvVrDEMAgOA3ecNBQwCg2IVXNHZDAMhOZ23Bq0MAPZFg5FjhQ0CMtXgdrxVEUO/i1uQaS0SS1U0Gz/CARPZK4ccCLbVEtJ3ZeUN46kSRAigsKosgRTUDMrf0rVRFAoT+5HHZiUWBEh8v5yfARSHX5vrgMfRF6oygOVk+KUYksAiI741fRhduBbW1uJNGnMlGIuOmyEYDfNjqm9D+RoJNx3JhQjNH4yB5z/kSaEcbaVdDuBeeR7GhFirTztJHHUqc9IeCB0ilXMPxKWM9SOcZGjf6XXJIYaDgxHj1pkh5yBj21rLcSEx9z1nG7xFJnlxD8LdrRknGM1TspQZ8SVygtLMnhLFJc8ihoDHl5UmPOsoIfl4bSppkfsUOG1FKwP3ddtJhhUowfZUUR7q6Sj5u3WxstPBKzskUiIfhJEtB/Blq6RlaS6k9UOIxUJBLE03kWj5kxEtXYJ3xTX35S224BG6h3C9MRPPC5OTpY0wVsPMdXuSYTBuccKV1Hc9MkWFmh2lyA031+T/pA084TXL4j+PEYm5NR/s5Drv9ok0ZesjRKb3XTZ+YOkZ0rA1OZJ/kq8iLQk49x93Wui53Tgw5lYxp+qxOp0Pd94Ec4k6RlNR1oqMWT7W5SROLTExPERQO7NavgU8WmRGnzBu2T1v/1dC/outPmb+F4rdFIVB/LyfbJZdVUF/78FHv/IpQG502kxXewFBiRAT4mhX1UHtVBbYBWypRbVXDEeF4YFHIKjRWGZeUUXo1wavfvMlRbMFYywsWAFLH8S6+jhs0Ujmuum1yImlSx1kpCQ9rn1Id2Lll6aLTUiROKL+jiwhTrWHyroyuPlMMfVftFy1zU09crehd+KdTY7PYYnX23VMecMddCboSVCVMObWLaEdULp+Hoq5CfVR9w5QlrUmyVFz0+W4Y3OZUc3G4ih6THFXoRrMW89tRVaIYYNzvUoZVyh5406vnu1U/Eytky3DxVQ7YNT3+zCVWEk6DzD1AW1bLENKfJgiRVv6UxkcwSsVWPTq4Wbyc+lZmJBO49aEwV4DtFyZzymRX4Oid7w/9mVeMscL1KT7QV+9dM3O0TQRYazUAkCFhOVjFQgD0ablvWLspgDji06NYKjSgxtrI2Fg1QUh4EfsOWcEoLevqXENZ8XL4pSU0eFmtj3YPL0GuWcwZqmm96OJZP6AUxOyiF1pPyBn1p4tNWjIdMPlId4JafiR8NxsVt1qeLVsFYtrsWoL8WEN9CCJbozsvlJyKVluMCju5Qy2MW5fmxFNKnMFbPSC26FwD9ltNqOMiNIQrXDBJzpWgMmFcfNtBu0h/lVxbUhLqGt/KXHlzS9JwywBdV1DeBk3+NF1t5JVI4D1qXcSuXS2sZqBddRq1OFeA1F0SYeIGbaAJXqt8TSREBEBe1ttgLVUFdF7MErl4qgapXn9X5xZVSN9er5ZQLjWNE19bvOR5gnBIX3LrXRijjH5fJ7M67+UXs1/xXwlr393nX+23y0VX1R1g9FKfi1alUmCxJ4curE6HYJ3xKDpXIr1gApdZhHY18mDD/G8l1MImYfT7yy6Jc1xheH0/vTXIkWHWXI8sQzrGYQw0s/fTyPthhwDQeoRdMWKpAISZ5bRlYtQA5f8eIptihCDvX1P10GKl6Oo3qDIFY8+i5UVSfzpjwYWva5OPcGMyZ5tGeLOkY/5AQlhW4Nljn2gp9zUsEGTGwvN0QzdEZHizMFIURXlkVuC8ZlmWr2Q2DDbg973jZEOPQ9h1rRhlFHNUTtPYTmXsx/QQhEeDZej5MRVlGbhlYXh+Wr4f7mU9C4/41tMiZgzOsrbMiFdmj4Ff5P9qjWb5sLvu32LCZjidauqX+/ZmhkQF5X26LGfUSiOvjvRhZ4kd7FqycZZn6ySn8R4OzGcTdwhX04gBaNeUyiwI6zVoDTr9N8pla2hIRP5inh+haFrVvfuFZ9VosUqtemfBCmmvTqys4LhAaVpi19cY53Rp8TrNDd8gqmnWRKBoi1TgaQxWyEKuaRRqj2t60xmESWpzBllIIOV/agikNy0077NqCo2FOAHr6GpM8KaGwSUfazBWKPSYd1Nru2syMX9ViGuqBn/93mq+aypkb17LAvNrNT0LNn7DJ2yCDI7DXbRdbNHHOJq6kJJsxvnGQOk0x2w3uPiQIwL9bCNzmzpWITJt609CyaupZm3m45K7FlScbXDOOzWOtNFtDMKKwrEhBm6Pci0zHqo7bpln/N9SSnFuf4H7l+ecpW7fYfp9IQTbbix9vO6U4hBvdpxrKjobRW+Ugwa1CGJ6bz0SJHFFfbBvzBZtzZac5G9/XMiAvMMZcM85fdBVGlBwQ4icROsghHBUqsMVJim5cOmUNJtvc+9wEd0AwSWoI3FWFEExL5JYcWtZkf26to5x49d63jQyw3HcjRkWwv73cVPxn5ty/i1y1PZDoQe/YnKJ9JSJyW6Xcqsx+ut7Ss1yC198c41OAnPNdlvQMOI2c4FUcgS9mmxz0HTHIrbgoXMEUnmr41jWc4amV5Yc7wt0FMj23XF1QXQYenRVztJ1dJ6Y0eqBR6t0Y//CMrEM4XQ8v3N/3U8VdQuvUN/Uo0p1Z22SC2WmgHXACHdO/s+0dfHKFOL9A+p11v5MrX5CIHaMPqBYHlNUdi9OyO7lZ4l2u2F6at/Bv3YVfYyiK9nzdlqcL4t2zyh3cIP7LVQDX3cmMr2cFGKTd7B+7MOZOsh3XJ7nNEBJ/nf5whAhyO0yeLjzVCk6qWd4pTCqs4iTnXhnXkpwNXzSeAH2XMxCGwd5gjN0fxPiPHkxoKgvTA1yeT3IkjufkKZ5TXp3Csc03HlwrIpm/KAReoxXLYA7CUZ6b604YIqLe3plbCN8Njexen9HLBsEheV6Xln3IUXmGnvblzo1689Qe9I9iQLmA4V7Ro0rg99EuntMOPuxC2vwe18Gep7OhSR89ocYRkKnWXz6VM9riQiQfDgqw8arCsR8x/RzuFYN+Xz48ZBmrFAvfTuXGsBrkmN9Cj0hsAZ3mH1MjClcyJTOfbD3mTn9HAN+nHUAiDzkN34DkwCqS91tfuJbQEpPqqJ+2nLQHONU136QjwTkGyoNf7rZgm5ROkJ/KZAjyuXIdn8zdKw8H3usf6DI64XzzOF/AAAAAAAAAAAZAAoAGRkZAAAAAAUAAAAAAAAJAAAAAAsAAAAAAAAAABkAEQoZGRkDCgcAAQAJCxgAAAkGCwAACwAGGQAAABkZGQ=="),i(t,7857,"DgAAAAAAAAAAGQAKDRkZGQANAAACAAkOAAAACQAOAAAO"),i(t,7915,"DA=="),i(t,7927,"EwAAAAATAAAAAAkMAAAAAAAMAAAM"),i(t,7973,"EA=="),i(t,7985,"DwAAAAQPAAAAAAkQAAAAAAAQAAAQ"),i(t,8031,"Eg=="),i(t,8043,"EQAAAAARAAAAAAkSAAAAAAASAAASAAAaAAAAGhoa"),i(t,8098,"GgAAABoaGgAAAAAAAAk="),i(t,8147,"FA=="),i(t,8159,"FwAAAAAXAAAAAAkUAAAAAAAUAAAU"),i(t,8205,"Fg=="),i(t,8217,"FQAAAAAVAAAAAAkWAAAAAAAWAAAWAAAwMTIzNDU2Nzg5QUJDREVGTjEwX19jeHhhYml2MTE2X19zaGltX3R5cGVfaW5mb0UAAAAA0CAAAEAgAADEIQAATjEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm9FAAAA0CAAAHAgAABkIAAAAAAAAJQgAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAAAAAAAAYIQAADAAAABQAAAAOAAAADwAAABAAAAAVAAAAFgAAABcAAABOMTBfX2N4eGFiaXYxMjBfX3NpX2NsYXNzX3R5cGVfaW5mb0UAAAAA0CAAAPAgAACUIAAAAAAAAEghAAAYAAAAGQAAABoAAABTdDlleGNlcHRpb24AAAAAqCAAADghAAAAAAAAdCEAAAIAAAAbAAAAHAAAAFN0MTFsb2dpY19lcnJvcgDQIAAAZCEAAEghAAAAAAAAqCEAAAIAAAAdAAAAHAAAAFN0MTJsZW5ndGhfZXJyb3IAAAAA0CAAAJQhAAB0IQAAU3Q5dHlwZV9pbmZvAAAAAKggAAC0IQ=="),i(t,8656,"BQ=="),i(t,8668,"BA=="),i(t,8692,"BQAAAAYAAAB4JgAAAAQ="),i(t,8716,"AQ=="),i(t,8732,"/////wo="),i(t,8800,"0CEAAEBRAAAJ"),i(t,8820,"CQ=="),i(t,8840,"CgAAAAAAAAALAAAAKC0AAAAE"),i(t,8884,"/////w=="),i(t,8952,"aCIAAAAAAAAF"),i(t,8972,"CQ=="),i(t,8996,"BQAAAAsAAAAwMQ=="),i(t,9020,"Ag=="),i(t,9036,"//////////8="),i(t,9105,"Iw==");var ri=function(e){return e.set=function(e,t){this[e]=t},e.get=function(e){return this[e]},e}([null,function(e){e|=0,Ir(9528),Ir(9540),Sr(9552),Sr(9728),Sr(9752),Sr(9764),Sr(9740),_r(9800),s[2450]&&(lt(9800),e=s[2450],_n(9800),W(e)),qt(9776),Qt(9764),Qt(9752),Qt(9740),Qt(9728),qt(9716),qt(9696),qt(9684),qt(9672),Zt(9652,fr(9652)),Vt(9640,fr(9640)),Qr(9568),Qt(9552),qt(9540),qt(9528)},bt,Vn,function(e){return 0},function(e,t,n){t|=0,n|=0;var r,i=0,a=0,o=0,c=0,u=0,l=0;U=r=U-32|0,i=s[28+(e|=0)>>2],s[r+16>>2]=i,a=s[e+20>>2],s[r+28>>2]=n,s[r+24>>2]=t,t=a-i|0,s[r+20>>2]=t,i=t+n|0,l=2;e:{t:{t=r+16|0;n:{if(!wn(0|C(s[e+60>>2],0|t,2,r+12|0)))for(;;){if((0|(a=s[r+12>>2]))==(0|i))break n;if((0|a)<0)break t;if(o=a-((c=(o=s[t+4>>2])>>>0<a>>>0)?o:0)|0,s[(u=(c<<3)+t|0)>>2]=o+s[u>>2],s[(u=(c?12:4)+t|0)>>2]=s[u>>2]-o,i=i-a|0,t=c?t+8|0:t,l=l-c|0,wn(0|C(s[e+60>>2],0|t,0|l,r+12|0)))break}if(-1!=(0|i))break t}t=s[e+44>>2],s[e+28>>2]=t,s[e+20>>2]=t,s[e+16>>2]=t+s[e+48>>2],e=n;break e}s[e+28>>2]=0,s[e+16>>2]=0,s[e+20>>2]=0,s[e>>2]=32|s[e>>2],e=0,2!=(0|l)&&(e=n-s[t+4>>2]|0)}return U=r+32|0,0|e},function(e,t,n,r){return j=0,0},function(e,t,n,r,i,o){e|=0,t=+t,n|=0,r|=0,i|=0,o|=0;var u,l=0,h=0,p=0,v=0,g=0,m=0,_=0,k=0,w=0,E=0,T=0,A=0,S=0,I=0,R=0,O=0,C=0,x=0;U=u=U-560|0,s[u+44>>2]=0,d(+t),l=0|c(1),c(0),(0|l)<0?(A=1,R=1045,d(+(t=-t)),l=0|c(1),c(0)):2048&i?(A=1,R=1048):(R=(A=1&i)?1051:1046,x=!A);e:if(2146435072!=(2146435072&l)){I=u+16|0;t:{n:{r:{if(t=Ce(t,u+44|0),0!=(t+=t)){if(l=s[u+44>>2],s[u+44>>2]=l-1,97!=(0|(T=32|o)))break r;break t}if(97==(0|(T=32|o)))break t;g=s[u+44>>2],m=(0|r)<0?6:r;break n}g=l-29|0,s[u+44>>2]=g,t*=268435456,m=(0|r)<0?6:r}for(h=w=(0|g)<0?u+48|0:u+336|0;r=t<4294967296&t>=0?~~t>>>0:0,s[h>>2]=r,h=h+4|0,0!=(t=1e9*(t-+(r>>>0))););if((0|g)<=0)r=g,l=h,v=w;else for(v=w,r=g;;){if(r=(0|r)<29?r:29,!(v>>>0>(l=h-4|0)>>>0)){for(p=0;k=s[l>>2],_=31&r,O=p,(63&r)>>>0>=32?(p=k<<_,k=0):(p=(1<<_)-1&k>>>32-_,k<<=_),p=p+C|0,k=Me(p=Q(_=O+k|0,p=_>>>0<k>>>0?p+1|0:p,1e9),j,1e9,0),s[l>>2]=_-k,v>>>0<=(l=l-4|0)>>>0;);p&&(s[(v=v-4|0)>>2]=p)}for(;v>>>0<(l=h)>>>0&&!s[(h=l-4|0)>>2];);if(r=s[u+44>>2]-r|0,s[u+44>>2]=r,h=l,!((0|r)>0))break}if((0|r)<0)for(S=1+((m+25>>>0)/9|0)|0,_=102==(0|T);;){if(p=(0|(r=0-r|0))<9?r:9,l>>>0<=v>>>0)h=s[v>>2];else{for(k=1e9>>>p|0,C=-1<<p^-1,r=0,h=v;O=r,r=s[h>>2],s[h>>2]=O+(r>>>p|0),r=y(k,r&C),(h=h+4|0)>>>0<l>>>0;);h=s[v>>2],r&&(s[l>>2]=r,l=l+4|0)}if(r=p+s[u+44>>2]|0,s[u+44>>2]=r,v=(!h<<2)+v|0,l=l-(h=_?w:v)>>2>(0|S)?h+(S<<2)|0:l,!((0|r)<0))break}if(r=0,!(l>>>0<=v>>>0||(r=y(w-v>>2,9),h=10,(p=s[v>>2])>>>0<10)))for(;r=r+1|0,p>>>0>=(h=y(h,10))>>>0;);if((0|(h=(m-(102==(0|T)?0:r)|0)-(103==(0|T)&0!=(0|m))|0))<(y(l-w>>2,9)-9|0)){if(g=((((0|g)<0?4:292)+u|0)+((_=(0|(p=h+9216|0))/9|0)<<2)|0)-4048|0,h=10,(0|(p=p-y(_,9)|0))<=7)for(;h=y(h,10),8!=(0|(p=p+1|0)););if(!(!(p=(_=s[g>>2])-y(h,S=(_>>>0)/(h>>>0)|0)|0)&(0|(k=g+4|0))==(0|l))&&(!(1&S)&&(t=9007199254740992,!(1&a[g-4|0])|1e9!=(0|h)|v>>>0>=g>>>0)||(t=9007199254740994),E=(0|l)==(0|k)?1:1.5,E=p>>>0<(k=h>>>1|0)>>>0?.5:(0|k)==(0|p)?E:1.5,45!=f[0|R]|x||(E=-E,t=-t),p=_-p|0,s[g>>2]=p,t+E!=t)){if(r=h+p|0,s[g>>2]=r,r>>>0>=1e9)for(;s[g>>2]=0,(g=g-4|0)>>>0<v>>>0&&(s[(v=v-4|0)>>2]=0),r=s[g>>2]+1|0,s[g>>2]=r,r>>>0>999999999;);if(r=y(w-v>>2,9),h=10,!((p=s[v>>2])>>>0<10))for(;r=r+1|0,p>>>0>=(h=y(h,10))>>>0;);}l=l>>>0>(h=g+4|0)>>>0?h:l}for(;h=l,!(p=l>>>0<=v>>>0)&&!s[(l=h-4|0)>>2];);if(103==(0|T)){if(m=((g=(0|(l=m||1))>(0|r)&(0|r)>-5)?-1^r:-1)+l|0,o=(g?-1:-2)+o|0,!(g=8&i)){if(l=-9,!p&&(_=s[h-4>>2])&&(p=10,l=0,!((_>>>0)%10|0))){for(;g=l,l=l+1|0,!((_>>>0)%((p=y(p,10))>>>0)|0););l=-1^g}p=y(h-w>>2,9),70!=(-33&o)?(g=0,m=(0|(l=(0|(l=((r+p|0)+l|0)-9|0))>0?l:0))>(0|m)?m:l):(g=0,m=(0|(l=(0|(l=(l+p|0)-9|0))>0?l:0))>(0|m)?m:l)}}else g=8&i;if(p=-1,(0|((T=g|m)?2147483645:2147483646))<(0|m))break e;if(_=1+((0!=(0|T))+m|0)|0,70!=(0|(k=-33&o))){if((I-(l=Se(((l=r>>31)^r)-l|0,0,I))|0)<=1)for(;a[0|(l=l-1|0)]=48,(I-l|0)<2;);if(a[0|(S=l-2|0)]=o,a[l-1|0]=(0|r)<0?45:43,(0|(l=I-S|0))>(2147483647-_|0))break e}else{if((2147483647-_|0)<(0|r))break e;l=(0|r)>0?r:0}if((0|(r=l+_|0))>(2147483647^A))break e;je(e,32,n,o=r+A|0,i),de(e,R,A),je(e,48,n,o,65536^i);n:{r:{i:{if(70==(0|k)){for(r=8|(l=u+16|0),g=9|l,v=p=v>>>0>w>>>0?w:v;;){l=Se(s[v>>2],0,g);a:if((0|p)==(0|v))(0|l)==(0|g)&&(a[u+24|0]=48,l=r);else{if(u+16>>>0>=l>>>0)break a;for(;a[0|(l=l-1|0)]=48,u+16>>>0<l>>>0;);}if(de(e,l,g-l|0),!(w>>>0>=(v=v+4|0)>>>0))break}if(T&&de(e,2276,1),(0|m)<=0|h>>>0<=v>>>0)break i;for(;;){if((l=Se(s[v>>2],0,g))>>>0>u+16>>>0)for(;a[0|(l=l-1|0)]=48,u+16>>>0<l>>>0;);if(de(e,l,(0|m)<9?m:9),l=m-9|0,h>>>0<=(v=v+4|0)>>>0)break r;if(r=(0|m)>9,m=l,!r)break}break r}a:if(!((0|m)<0))for(p=h>>>0>v>>>0?h:v+4|0,r=8|(l=u+16|0),w=9|l,h=v;;){(0|w)==(0|(l=Se(s[h>>2],0,w)))&&(a[u+24|0]=48,l=r);o:if((0|h)==(0|v))de(e,l,1),l=l+1|0,g|m&&de(e,2276,1);else{if(u+16>>>0>=l>>>0)break o;for(;a[0|(l=l-1|0)]=48,u+16>>>0<l>>>0;);}if(de(e,O=l,(0|(l=w-l|0))>(0|m)?m:l),m=m-l|0,p>>>0<=(h=h+4|0)>>>0)break a;if(!((0|m)>=0))break}je(e,48,m+18|0,18,0),de(e,S,I-S|0);break n}l=m}je(e,48,l+9|0,9,0)}je(e,32,n,o,8192^i),p=(0|n)<(0|o)?o:n;break e}if(m=(o<<26>>31&9)+R|0,!(r>>>0>11)){for(l=12-r|0,E=16;E*=16,l=l-1|0;);t=45!=f[0|m]?t+E-E:-(E+(-t-E))}for((0|I)==(0|(l=Se(((l=(h=s[u+44>>2])>>31)^h)-l|0,0,I)))&&(a[u+15|0]=48,l=u+15|0),g=2|A,v=32&o,h=s[u+44>>2],a[0|(w=l-2|0)]=o+15,a[l-1|0]=(0|h)<0?45:43,p=8&i,h=u+16|0;o=h,l=b(t)<2147483648?~~t:-2147483648,a[0|h]=v|f[l+8240|0],!(p|(0|r)>0)&0==(t=16*(t-+(0|l)))|1!=((h=o+1|0)-(u+16|0)|0)||(a[o+1|0]=46,h=o+2|0),0!=t;);p=-1,(2147483645-(o=(_=I-w|0)+g|0)|0)<(0|r)||(je(e,32,n,r=(l=!r||((v=h-(u+16|0)|0)-2|0)>=(0|r)?v=h-(u+16|0)|0:r+2|0)+o|0,i),de(e,m,g),je(e,48,n,r,65536^i),de(e,u+16|0,v),je(e,48,l-v|0,0,0),de(e,w,_),je(e,32,n,r,8192^i),p=(0|n)<(0|r)?r:n)}else je(e,32,n,r=A+3|0,-65537&i),de(e,R,A),o&=32,de(e,t!=t?o?1322:2154:o?1613:2158,3),je(e,32,n,r,8192^i),p=(0|n)<(0|r)?r:n;return U=u+560|0,0|p},function(e,t){e|=0;var n,r,i,a,o,c=0,d=0,f=0,h=0,p=0,v=0,y=0,m=0,b=0,_=0,k=0;d=t|=0,t=s[t>>2]+7&-8,s[d>>2]=t+16,i=e,m=s[(e=t)>>2],t=s[e+4>>2],r=f=s[e+12>>2],U=n=U-32|0;e:if((0|(c=(f&=2147483647)-1006698496|0))==(0|(h=f-1140785152|0))&(d=s[e+8>>2])>>>0<d>>>0|c>>>0<h>>>0){if(c=(e=d)<<4|t>>>28,f=d=r<<4|e>>>28,t=e=268435455&t,134217728==(0|e)&0!=(0|m)|e>>>0>134217728){e=f+1073741824|0,e=(t=c+1|0)?e:e+1|0,c=t;break e}if(e=f+1073741824|0,134217728^t|m)break e;e=(t=1&c)>>>0>(c=f=t+c|0)>>>0?e+1|0:e}else(!d&2147418112==(0|f)?!(t|m):f>>>0<2147418112)?(c=0,e=2146435072,f>>>0>1140785151||(e=0,(_=f>>>16|0)>>>0<15249||(c=m,e=t,f=h=65535&r|65536,b=d,p=d,64&(y=_-15233|0)?(h=c,c=31&(d=y+-64|0),(63&d)>>>0>=32?(e=h<<c,p=0):(e=(1<<c)-1&h>>>32-c|e<<c,p=h<<c),h=e,c=0,e=0):y&&(v=31&(d=y),(63&d)>>>0>=32?(d=p<<v,p=0):(d=(1<<v)-1&p>>>32-v|h<<v,p<<=v),h=d,k=p,p=c,v=31&(d=64-y|0),(63&d)>>>0>=32?(d=0,p=e>>>v|0):(d=e>>>v|0,p=((1<<v)-1&e)<<32-v|p>>>v),p|=k,h|=d,v=31&y,(63&y)>>>0>=32?(d=c<<v,c=0):(d=(1<<v)-1&c>>>32-v|e<<v,c<<=v),e=d),s[n+16>>2]=c,s[n+20>>2]=e,s[n+24>>2]=p,s[n+28>>2]=h,64&(d=15361-_|0)?(t=b,h=31&(e=d+-64|0),(63&e)>>>0>=32?(d=0,m=f>>>h|0):(d=f>>>h|0,m=((1<<h)-1&f)<<32-h|t>>>h),t=d,b=0,f=0):d&&(h=b,c=31&(e=64-d|0),(63&e)>>>0>=32?(e=h<<c,c=0):(e=(1<<c)-1&h>>>32-c|f<<c,c=h<<c),h=e,p=c,c=m,y=31&(e=d),(63&e)>>>0>=32?(d=0,t=t>>>y|0):(d=t>>>y|0,t=((1<<y)-1&t)<<32-y|c>>>y),m=p|t,t=d|h,d=b,h=31&e,(63&e)>>>0>=32?(e=0,b=f>>>h|0):(e=f>>>h|0,b=((1<<h)-1&f)<<32-h|d>>>h),f=e),s[n>>2]=m,s[n+4>>2]=t,s[n+8>>2]=b,s[n+12>>2]=f,c=(t=s[n+8>>2])<<4|(f=s[n+4>>2])>>>28,e=s[n+12>>2]<<4|t>>>28,134217728==(0|(f&=268435455))&0!=(0|(t=s[n>>2]|0!=(s[n+16>>2]|s[n+24>>2]|s[n+20>>2]|s[n+28>>2])))|f>>>0>134217728?(e=(t=c+1|0)?e:e+1|0,c=t):134217728^f|t||(e=(t=c+(1&c)|0)>>>0<c>>>0?e+1|0:e,c=t)))):(c=(e=d)<<4|t>>>28,e=524287&(d=r<<4|e>>>28)|2146959360);U=n+32|0,u(0,0|c),u(1,-2147483648&r|e),a=i,o=+l(),g[a>>3]=o},function(e){return 0|D(s[60+(e|=0)>>2])},function(e,t,n){e|=0,t|=0,n|=0;var r,i=0,o=0,c=0;U=r=U-32|0,s[r+16>>2]=t,i=s[e+48>>2],s[r+20>>2]=n-(0!=(0|i)),c=s[e+44>>2],s[r+28>>2]=i,s[r+24>>2]=c;e:{t:{if(wn(0|P(s[e+60>>2],r+16|0,2,r+12|0)))t=32;else{if((0|(i=s[r+12>>2]))>0)break t;t=i?32:16}s[e>>2]=t|s[e>>2];break e}(c=s[r+20>>2])>>>0>=i>>>0?o=i:(o=s[e+44>>2],s[e+4>>2]=o,s[e+8>>2]=o+(i-c|0),s[e+48>>2]&&(s[e+4>>2]=o+1,a[(t+n|0)-1|0]=f[0|o]),o=n)}return U=r+32|0,0|o},function(e,t,n,r){var i;return t|=0,n|=0,r|=0,U=i=U-16|0,e=wn(0|N(s[60+(e|=0)>>2],0|t,0|n,255&r,i+8|0)),U=i+16|0,j=e?-1:s[i+12>>2],0|(e?-1:s[i+8>>2])},Pr,zr,ni,ni,function(e,t,n){n|=0;var r,i=0,a=0,o=0,c=0;if(U=r=U+-64|0,i=1,!Ee(e|=0,t|=0,0)&&(i=0,t)){U=i=U+-64|0,a=s[t>>2],o=s[a-4>>2],c=s[a-8>>2],s[i+20>>2]=0,s[i+16>>2]=8292,s[i+12>>2]=t,s[i+8>>2]=8340,a=0,te(i+24|0,0,39),t=t+c|0;e:if(Ee(o,8340,0))s[i+56>>2]=1,ri[s[s[o>>2]+20>>2]](o,i+8|0,t,t,1,0),a=1==s[i+32>>2]?t:0;else{ri[s[s[o>>2]+24>>2]](o,i+8|0,t,1,0);t:switch(s[i+44>>2]){case 0:a=1==s[i+48>>2]&&1==s[i+36>>2]&&1==s[i+40>>2]?s[i+28>>2]:0;break e;case 1:break t;default:break e}1!=s[i+32>>2]&&s[i+48>>2]|1!=s[i+36>>2]|1!=s[i+40>>2]||(a=s[i+24>>2])}U=i- -64|0,i=0,a&&(te(4|(t=r+8|0),0,52),s[r+56>>2]=1,s[r+20>>2]=-1,s[r+16>>2]=e,s[r+8>>2]=a,ri[s[s[a>>2]+28>>2]](a,t,s[n>>2],1),1==(0|(e=s[r+32>>2]))&&(s[n>>2]=s[r+24>>2]),i=1==(0|e))}return U=r- -64|0,0|i},function(e,t,n,r,i,a){n|=0,r|=0,i|=0,a|=0,Ee(e|=0,s[8+(t|=0)>>2],a)&&ge(t,n,r,i)},function(e,t,n,r,i){if(n|=0,r|=0,i|=0,Ee(e|=0,s[8+(t|=0)>>2],i))on(t,n,r);else e:if(Ee(e,s[t>>2],i)){if(!(s[t+16>>2]!=(0|n)&s[t+20>>2]!=(0|n))){if(1!=(0|r))break e;return void(s[t+32>>2]=1)}s[t+20>>2]=n,s[t+32>>2]=r,s[t+40>>2]=s[t+40>>2]+1,1!=s[t+36>>2]|2!=s[t+24>>2]||(a[t+54|0]=1),s[t+44>>2]=4}},function(e,t,n,r){n|=0,r|=0,Ee(e|=0,s[8+(t|=0)>>2],0)&&Ne(t,n,r)},zr,function(e,t,n,r,i,a){n|=0,r|=0,i|=0,a|=0,Ee(e|=0,s[8+(t|=0)>>2],a)?ge(t,n,r,i):(e=s[e+8>>2],ri[s[s[e>>2]+20>>2]](e,t,n,r,i,a))},function(e,t,n,r,i){if(n|=0,r|=0,i|=0,Ee(e|=0,s[8+(t|=0)>>2],i))on(t,n,r);else e:{if(Ee(e,s[t>>2],i)){if(!(s[t+16>>2]!=(0|n)&s[t+20>>2]!=(0|n))){if(1!=(0|r))break e;return void(s[t+32>>2]=1)}s[t+32>>2]=r;t:if(4!=s[t+44>>2]){if(o[t+52>>1]=0,e=s[e+8>>2],ri[s[s[e>>2]+20>>2]](e,t,n,n,1,i),f[t+53|0]){if(s[t+44>>2]=3,!f[t+52|0])break t;break e}s[t+44>>2]=4}if(s[t+20>>2]=n,s[t+40>>2]=s[t+40>>2]+1,1!=s[t+36>>2]|2!=s[t+24>>2])break e;return void(a[t+54|0]=1)}e=s[e+8>>2],ri[s[s[e>>2]+24>>2]](e,t,n,r,i)}},function(e,t,n,r){n|=0,r|=0,Ee(e|=0,s[8+(t|=0)>>2],0)?Ne(t,n,r):(e=s[e+8>>2],ri[s[s[e>>2]+28>>2]](e,t,n,r))},Pr,zr,function(e){return 1225},function(e){W(bt(e|=0))},function(e){return s[4+(e|=0)>>2]},function(e){bt(e|=0),W(e)}]);function ii(){return r.byteLength/65536|0}return{__wasm_call_ctors:function(){Rr(),s[2757]=10916,s[2739]=42},malloc:H,parseMPD:function(e){e|=0;var t,n,r,i=0,o=0,c=0,u=0,l=0,d=0,y=0,_=0,k=0,w=0,E=0,A=0,I=0,R=0,O=0,C=0,x=m(0),P=0,D=0;n=z(),U=t=U-240|0,Tt(l=n+520|0),Et(r=n+532|0),w=e,s[t+112>>2]=e,ae(n,2919,t+112|0);e:if(!Ar(K(E=Be(t+176|0),e))&&me(E,1240)){if(rr(k=Fe(E,1240))){if(un(k))for(A=t+160|0,O=t+148|0;;){if(!(me(e=st(k,_),2058)&&me(e,1266)&&me(e,1405)&&me(e,1898)&&me(e,1409)&&me(e,1121)&&me(e,2116))){ae(n,4820,0);break e}o=zn(i=t+128|0),Oe(i,Ot(xr(e,2058))),y=+(0|Xt(xr(e,1266)))/1e3,i=b(y)<2147483648?~~y:-2147483648,s[t+152>>2]=i,P=t,D=Xt(xr(e,1405)),s[P+148>>2]=D,P=t,D=Xt(xr(e,1409)),s[P+140>>2]=D,P=t,D=Xt(xr(e,1121)),s[P+144>>2]=D;t:{n:{if(i=xr(e,1898),(16&f[i+18|0])>>>4|0){if(512&(c=h[i+18>>1])){y=g[i>>3];break t}if(32&c){y=+s[i>>2];break t}if(64&c){y=+p[i>>2];break t}if(128&c){y=+p[i>>2]+4294967296*+s[i+4>>2];break t}if(!(256&c))break n;y=+p[i>>2]+4294967296*+p[i+4>>2];break t}S(2489,1415,1825,2020),T()}S(2241,1415,1830,2020),T()}if(v[t+156>>2]=y,Oe(A,Ot(xr(e,2116))),U=d=U-32|0,P=d,D=Gt(O),s[P+16>>2]=D,U=e=U-32|0,I=_e(l,e+28|0,O),i=s[I>>2],a[e+27|0]=0,i||(U=u=U-16|0,i=Wr(l),C=pt(c=e+8|0,gt(64),An(u+8|0,i)),R=s[C>>2]+16|0,U=i=U-16|0,s[i+8>>2]=s[d+16>>2],s[R>>2]=s[s[i+8>>2]>>2],zn(te(R+4|0,0,44)),U=i+16|0,P=Wr(C),D=1,a[P+4|0]=D,U=u+16|0,re(l,s[e+28>>2],I,s[c>>2]),i=mn(c),a[e+27|0]=1,u=s[c>>2],s[c>>2]=0,u&&(f[Wr(c)+4|0]&&qr(u+16|0),u&&W(u))),bn(c=d+24|0,or(e+8|0,i),e+27|0),U=e+32|0,e=sr(c),U=d+32|0,oe(e=e+4|0,o),s[e+28>>2]=s[o+28>>2],i=s[o+24>>2],s[e+20>>2]=s[o+20>>2],s[e+24>>2]=i,i=s[o+16>>2],s[e+12>>2]=s[o+12>>2],s[e+16>>2]=i,oe(e+32|0,o+32|0),e=En(t+128|0),i=s[t+152>>2],c=s[t+148>>2],d=s[t+140>>2],u=s[t+144>>2],x=v[t+156>>2],P=t,D=En(A),s[P+96>>2]=D,g[t+88>>3]=x,s[t+80>>2]=u,s[t+76>>2]=d,s[t+72>>2]=c,s[t+68>>2]=i,s[t+64>>2]=e,ae(n,2669,t- -64|0),Cr(o),_=_+1|0,!(un(k)>>>0>_>>>0))break}if(s[n+548>>2]=5,Ir(c=n+576|0),s[n+544>>2]=0,Ir(d=n+552|0),Ir(u=n+564|0),U=o=(U=e=U-16|0)-16|0,i=s[or(o+8|0,s[l>>2])>>2],U=o+16|0,o=s[or(e+8|0,i)>>2],U=e+16|0,s[(i=t+128|0)>>2]=o,P=t,D=ht(l),s[P+120>>2]=D,Kn(i,t+120|0))for(;;){if(P=n,D=s[sr(i)+28>>2],s[P+548>>2]=D,ne(c,sr(i)+24|0),s[n+544>>2]=s[n+544>>2]+1,ne(d,sr(i)+16|0),ne(u,sr(i)+20|0),e=s[n+548>>2],o=s[sr(i)+24>>2],_=s[sr(i)+16>>2],k=s[sr(i)+20>>2],s[t+48>>2]=s[n+544>>2],s[t+44>>2]=k,s[t+40>>2]=_,s[t+36>>2]=o,s[t+32>>2]=e,ae(n,3359,t+32|0),e=s[i>>2],o=s[e+4>>2])for(e=o;o=e,e=s[e>>2];);else{if(!Cn(e))for(;!Cn(e=s[e+8>>2]););o=s[e+8>>2]}if(s[i>>2]=o,P=t,D=ht(l),s[P+120>>2]=D,!Kn(i,t+120|0))break}}if(!Ar(K(E,w))&&me(E,1253)){if(rr(d=Fe(E,1253))){if(un(d))for(O=n+596|0,k=t+152|0,u=t+140|0,_=0;;){if(!(me(e=st(d,_),2058)&&me(e,1266)&&me(e,1405)&&me(e,1909)&&me(e,2116))){ae(n,4872,0);break e}if(w=Wn(o=t+128|0),Oe(o,Ot(xr(e,2058))),y=+(0|Xt(xr(e,1266)))/1e3,o=b(y)<2147483648?~~y:-2147483648,s[t+144>>2]=o,P=t,D=Xt(xr(e,1405)),s[P+140>>2]=D,P=t,D=Xt(xr(e,1909)),s[P+148>>2]=D,Oe(k,Ot(xr(e,2116))),U=l=U-32|0,P=l,D=Gt(u),s[P+16>>2]=D,U=e=U-32|0,R=_e(r,e+28|0,u),i=s[R>>2],a[e+27|0]=0,i||(U=c=U-16|0,i=Wr(r),I=pt(o=e+8|0,gt(56),An(c+8|0,i)),A=s[I>>2]+16|0,U=i=U-16|0,s[i+8>>2]=s[l+16>>2],s[A>>2]=s[s[i+8>>2]>>2],Wn(te(A+4|0,0,36)),U=i+16|0,P=Wr(I),D=1,a[P+4|0]=D,U=c+16|0,re(r,s[e+28>>2],R,s[o>>2]),i=mn(o),a[e+27|0]=1,c=s[o>>2],s[o>>2]=0,c&&(f[Wr(o)+4|0]&&$r(c+16|0),c&&W(c))),bn(o=l+24|0,or(e+8|0,i),e+27|0),U=e+32|0,e=sr(o),U=l+32|0,oe(e=e+4|0,w),s[e+20>>2]=s[w+20>>2],o=s[w+16>>2],s[e+12>>2]=s[w+12>>2],s[e+16>>2]=o,oe(e+24|0,w+24|0),s[n+592>>2]=s[t+144>>2],ne(O,u),s[n+588>>2]=s[n+588>>2]+1,e=En(t+128|0),o=s[t+144>>2],i=s[t+140>>2],l=s[t+148>>2],P=t,D=En(k),s[P+16>>2]=D,s[t+12>>2]=l,s[t+8>>2]=i,s[t+4>>2]=o,s[t>>2]=e,ae(n,2786,t),Or(w),_=_+1|0,!(un(d)>>>0>_>>>0))break}an(mr(e=n+596|0),tr(e))}}else ae(n,4567,0)}else ae(n,4520,0);De(E),U=t+240|0},updatePreloadInfo:function(e){e|=0;var t,n,r,i=0,a=0,o=0,c=0,u=0,l=0,d=0,f=0,h=0,p=0,v=0,g=0;r=z(),U=n=U-144|0,s[r+676>>2]=0,qn(t=r+680|0),s[n+16>>2]=e,ae(r,2884,n+16|0);e:if(!Ar(K(u=Be(n+80|0),e))&&me(u,1326)&&me(u,1140)){v=r,g=Xt(Fe(u,1326)),s[v+676>>2]=g;t:{if(rr(d=Fe(u,1140))&&un(d))for(;;){if(a=4716,!me(e=st(d,f),1957))break t;if(!me(e,1944))break t;if(!me(e,1883))break t;if(!me(e,2009))break t;if(!me(e,1643))break t;if(!me(e,1214))break t;if(v=n,g=Xt(xr(e,1957)),s[v+32>>2]=g,v=n,g=Xt(xr(e,1944)),s[v+36>>2]=g,v=n,g=Xt(xr(e,1883)),s[v+40>>2]=g,v=n,g=Xt(xr(e,2009)),s[v+44>>2]=g,v=n,g=Xt(xr(e,1643)),s[v+52>>2]=g,a=4768,!me(e=xr(e,1214),1283))break t;if(!me(e,1634))break t;if(!me(e,1692))break t;if(!me(e,1662))break t;if(!me(e,1861))break t;if(!me(e,1838))break t;if(v=n,g=Xt(xr(e,1283)),s[v+56>>2]=g,v=n,g=Xt(xr(e,1634)),s[v+60>>2]=g,v=n,g=Xt(xr(e,1692)),s[v+64>>2]=g,v=n,g=Xt(xr(e,1662)),s[v+68>>2]=g,v=n,g=Xt(xr(e,1861)),s[v+72>>2]=g,v=n,g=Xt(xr(e,1838)),s[v+76>>2]=g,l=n+32|0,s[t+4>>2]==s[Gr(t)>>2]){if(U=h=U-32|0,p=Gr(t),i=h+8|0,c=Tn(t)+1|0,U=e=U-16|0,s[e+12>>2]=c,U=o=U-16|0,s[o+12>>2]=89478485,s[o+8>>2]=2147483647,a=s[Yt(o+12|0,o+8|0)>>2],U=o+16|0,a>>>0>=c>>>0?((o=_n(t))>>>0<a>>>1>>>0&&(s[e+8>>2]=o<<1,a=s[Kt(e+8|0,e+12|0)>>2]),U=e+16|0,e=a):(Zr(),T()),c=Tn(t),a=0,U=o=U-16|0,s[o+12>>2]=0,ur(i+12|0,p),e&&(e>>>0>89478485&&(He(1742),T()),a=gt(y(e,48))),s[i>>2]=a,c=y(c,48)+a|0,s[i+8>>2]=c,s[i+4>>2]=c,v=Hr(i),g=y(e,48)+a|0,s[v>>2]=g,U=o+16|0,Mr(0,s[i+8>>2],l),s[i+8>>2]=s[i+8>>2]+48,_r(t),e=i+4|0,l=s[t>>2],a=s[t+4>>2]-l|0,o=s[e>>2]+y((0|a)/-48|0,48)|0,s[e>>2]=o,(0|a)>0&&Z(o,l,a),At(t,e),At(t+4|0,i+8|0),At(Gr(t),Hr(i)),s[i>>2]=s[i+4>>2],Tn(t),_n(t),_n(t),(0|(e=s[i+4>>2]))!=s[i+8>>2])for(;s[i+8>>2]=s[i+8>>2]-48,(0|e)!=s[i+8>>2];);s[i>>2]&&W(e=s[i>>2]),U=h+32|0}else U=e=U-16|0,s[e>>2]=t,a=s[t+4>>2],s[e+4>>2]=a,s[e+8>>2]=a+48,Mr(Gr(t),s[e+4>>2],l),s[e+4>>2]=s[e+4>>2]+48,Xn(e),U=e+16|0;if(f=f+1|0,!(un(d)>>>0>f>>>0))break}e=s[r+676>>2],v=n,g=Tn(t),s[v+4>>2]=g,s[n>>2]=e,ae(r,3772,n);break e}ae(r,a,0)}else ae(r,4471,0);De(u),U=n+144|0},updateDeviceInfo:function(e,t,n,r){e|=0,t|=0,n=m(n),r=m(r);var i,a,o=0;i=z(),U=a=U-32|0,(0|e)<=0|(0|t)<=0||(s[i+152>>2]=t,s[i+148>>2]=e,s[i+144>>2]=t,s[i+140>>2]=e,(o=+n)>2.01?s[i+196>>2]=1073741824:o<.01?s[i+196>>2]=1065353216:v[i+196>>2]=n),r>m(0)&&(v[i+200>>2]=r),g[a+16>>3]=r,s[a+4>>2]=t,s[a>>2]=e,g[a+8>>3]=n,ae(i,3013,a),U=a+32|0},updateMediaInfo:function(e,t,n,r){e|=0,t|=0,n=+n,r=+r;var i,a,o,c=0,u=0,l=0,d=0,f=0,h=0;if(U=i=U-96|0,a=lr(i+56|0),o=St(i+40|0),g[a+16>>3]=r,g[a+8>>3]=n,s[a>>2]=t,(0|t)>0)for(;ne(o,(c<<2)+e|0),(0|(c=c+1|0))!=(0|t););if(an(mr(o),tr(o)),(0|(e=a+24|0))!=(0|o)){U=t=U-16|0,c=(l=s[o+4>>2])-(u=s[o>>2])>>2;e:if(Rn(e)>>>0>=c>>>0){if(Dn(e)>>>0<c>>>0){s[t+12>>2]=u,d=Dn(e),s[t+12>>2]=s[t+12>>2]+(d<<2),en(u,s[t+12>>2],s[e>>2]),ot(e,s[t+12>>2],l,c-Dn(e)|0);break e}er(e,en(u,l,s[e>>2]))}else s[e>>2]&&(Ir(e),d=s[e>>2],Rn(e),W(d),f=Gr(e),h=0,s[f>>2]=h,s[e>>2]=0,s[e+4>>2]=0),ct(e,Ke(e,c)),ot(e,u,l,c);U=t+16|0}if(e=z(),t=s[a+4>>2],s[i>>2]=s[a>>2],s[i+4>>2]=t,t=s[a+20>>2],s[i+16>>2]=s[a+16>>2],s[i+20>>2]=t,t=s[a+12>>2],s[i+8>>2]=s[a+8>>2],s[i+12>>2]=t,t=a+24|0,U=c=(U=l=U-16|0)-16|0,s[(u=i+24|0)>>2]=0,s[u+4>>2]=0,s[c+12>>2]=0,Jr(u+8|0),U=c+16|0,(c=Dn(t))&&(ct(u,c),ot(u,s[t>>2],s[t+4>>2],c)),c=0,U=t=(U=l+16|0)-16|0,ae(e,2637,0),g[e+456>>3]=g[i+8>>3],g[e+464>>3]=g[i+16>>3],s[e+448>>2]=s[i>>2],Ir(u=e+472|0),Dn(l=i+24|0))for(;ne(u,Yn(l,c)),f=t,h=s[Yn(u,c)>>2],s[f>>2]=h,ae(e,2633,t),c=c+1|0,Dn(l)>>>0>c>>>0;);ae(e,5010,0),s[e+248>>2]=0,s[e+252>>2]=0,s[e+240>>2]=0,s[e+244>>2]=0,s[e+232>>2]=0,s[e+236>>2]=0,s[e+224>>2]=0,s[e+228>>2]=0,U=t+16|0,Qr(i),qt(o),Qr(a),U=i+96|0},updateBufferInfo:function(e,t,n,r,i,a,o,c,u){e=m(e),t=m(t),n=m(n),r=m(r),i=m(i),a|=0,o|=0,c=m(c),u|=0;var l,d,f=0,h=0,p=0;U=l=U-128|0,f=z(),v[l+104>>2]=t,v[l+112>>2]=+m(b(e))<=1e-6?m(1):e,a=(d=y(a,8e3))>>31,s[l+120>>2]=d,s[l+124>>2]=a,s[l+56>>2]=d,s[l+60>>2]=a,v[l+108>>2]=n,a=s[l+108>>2],s[l+40>>2]=s[l+104>>2],s[l+44>>2]=a,a=s[l+116>>2],s[l+48>>2]=s[l+112>>2],s[l+52>>2]=a,v[l+100>>2]=i,v[l+96>>2]=r,a=s[l+100>>2],s[l+32>>2]=s[l+96>>2],s[l+36>>2]=a,e=v[l+48>>2],+m(b(e))<=1e-6&&(s[l+48>>2]=1065353216,e=m(1)),g[f+224>>3]=v[l+32>>2],g[f+232>>3]=v[l+36>>2],v[f+76>>2]=v[l+40>>2],t=v[l+44>>2],v[f+72>>2]=t,g[f+288>>3]=m(t*v[f+80>>2]),g[f+272>>3]=m(t*v[f+84>>2]),g[f+280>>3]=m(t*v[f+88>>2]),g[f+376>>3]=+t/20*3,a=s[l+60>>2],s[f+24>>2]=s[l+56>>2],s[f+28>>2]=a,v[f+180>>2]=e,a=z(),s[l+80>>2]=o,v[l+88>>2]=c,s[l+72>>2]=-1,s[l+76>>2]=-1,s[l+8>>2]=-1,s[l+12>>2]=-1,s[l+84>>2]=u,o=s[l+84>>2],s[l+16>>2]=s[l+80>>2],s[l+20>>2]=o,o=s[l+92>>2],s[l+24>>2]=s[l+88>>2],s[l+28>>2]=o,s[l+64>>2]=-1,o=s[l+68>>2],s[l>>2]=s[l+64>>2],s[l+4>>2]=o,U=u=U-16|0,s[a+92>>2]=s[l+16>>2],e=v[l+24>>2],m(b(e))<m(0x8000000000000000)?(f=m(b(e))>=m(1)?~~(e>m(0)?m(k(m(w(m(e*m(2.3283064365386963e-10)))),m(4294967296))):m(E(m(m(e-m(~~e>>>0>>>0))*m(2.3283064365386963e-10)))))>>>0:0,o=~~e>>>0):(f=-2147483648,o=0),s[a+64>>2]=o,s[a+68>>2]=f,s[a+96>>2]=s[l+20>>2],ne(o=a+656|0,a+96|0),Dn(o)>>>0>=61&&(h=u,p=mr(o),s[h+8>>2]=p,f=s[Ln(u,u+8|0)>>2],U=a=U-16|0,s[a+8>>2]=f,h=a,p=mr(o),s[h>>2]=p,er(o,en(4+(f=s[o>>2]+(s[a+8>>2]-s[a>>2]>>2<<2)|0)|0,s[o+4>>2],f)),Wt(f),U=a+16|0),U=u+16|0,U=l+128|0},updateSwitchInfo:function(e,t,n,r,i,o){e|=0,t|=0,n=m(n),r|=0,i=m(i),o=m(o);var c,u,l,d=m(0);U=u=U-80|0,c=z(),v[u+76>>2]=o,v[u+72>>2]=i,s[u+68>>2]=1061158912,s[u+60>>2]=1045220557,s[u+64>>2]=1053609165,v[u+56>>2]=n,a[u+52|0]=r,s[u+48>>2]=50,s[(r=u)+40>>2]=e,s[r+44>>2]=t,r=Z(r,r+40|0,40),n=v[r+20>>2],+m(b(n))<=1e-6&&(s[r+20>>2]=1045220557,n=m(.20000000298023224)),i=v[r+24>>2],+m(b(i))<=1e-6&&(s[r+24>>2]=1053609165,i=m(.4000000059604645)),o=v[r+28>>2],+m(b(o))<=1e-6&&(s[r+28>>2]=1061158912,o=m(.75)),d=v[r+16>>2],+m(b(d))<=1e-6&&(s[r+16>>2]=1084227584,d=m(5)),e=s[r+4>>2],s[c+32>>2]=s[r>>2],s[c+36>>2]=e,e=t=s[r+8>>2],s[c+40>>2]=e,s[c+44>>2]=e>>31,e=f[r+12|0],s[c+188>>2]=1084227584,a[c+174|0]=e,v[c+184>>2]=d,d=m(0|t),g[c+288>>3]=m(n*d),v[c+88>>2]=o,v[c+84>>2]=i,v[c+80>>2]=n,g[c+280>>3]=m(o*d),l=+m(i*d),g[c+272>>3]=l,s[c+132>>2]=4,s[c+136>>2]=2,s[c+124>>2]=12,s[c+128>>2]=5,g[c+376>>3]=+(0|t)/20*3,s[c+360>>2]=-687194767,s[c+364>>2]=-1077055325,s[c+336>>2]=-1717986918,s[c+340>>2]=1072273817,s[c+328>>2]=858993459,s[c+332>>2]=1072902963,s[c+320>>2]=-858993459,s[c+324>>2]=1072483532,s[c+116>>2]=10,s[c+120>>2]=10,a[c+173|0]=0,g[c+368>>3]=l+12,s[c+64>>2]=0,s[c+68>>2]=0,s[c+92>>2]=0,U=r+80|0},updatePreloadSupplier:function(e,t){var n,r,i;e|=0,t|=0,U=n=U-16|0,r=z(),s[n+12>>2]=t,s[n+8>>2]=y(e,8e3),e=s[n+12>>2],s[n>>2]=s[n+8>>2],s[n+4>>2]=e,U=e=U-16|0,t=s[n>>2],s[r+668>>2]=t,i=s[n+4>>2],s[r+672>>2]=i,s[e+4>>2]=i,s[e>>2]=t,ae(r,3983,e),U=e+16|0,U=n+16|0},getPredictedBitrate:function(e,t){e|=0,t|=0;var n,r=0,i=0,o=0,c=0,u=0,l=0,d=m(0),h=0,_=0,T=m(0),A=0,S=0,I=0,R=0,O=m(0),C=m(0),x=0,P=0,D=0,L=0,M=0,N=0,B=m(0),F=m(0),H=m(0),V=0,W=0,G=0,X=0,Y=0,K=0,Z=0,Q=0,q=0,J=0,$=0;if(r=z(),U=n=U-48|0,i=Ve(),c=s[r+36>>2],o=s[r+32>>2],s[r+8>>2]=i-o,s[r+12>>2]=j-((i>>>0<o>>>0)+c|0),l=g[r+256>>3],d=v[r+72>>2],u=s[r+28>>2],s[(i=n)+32>>2]=s[r+24>>2],s[i+36>>2]=u,g[i+24>>3]=d,g[i+16>>3]=l,s[i+8>>2]=t,s[i>>2]=o,s[i+4>>2]=c,ae(r,4924,i),d=v[r+196>>2],T=m(d*m(s[r+148>>2])),t=m(b(T))<m(2147483648)?~~T:-2147483648,s[r+140>>2]=t,d=m(d*m(s[r+152>>2])),t=m(b(d))<m(2147483648)?~~d:-2147483648,s[r+144>>2]=t,U=t=U-160|0,h=Ae(t+144|0,1189),i=Ve(),o=s[r+32>>2],c=j-(s[r+36>>2]+(o>>>0>i>>>0)|0)|0,o=i-o|0,s[r+8>>2]=o,s[r+12>>2]=c,i=-1,(_=o>>>0<(u=y(s[r+548>>2],1e3)-2e3|0)>>>0)&(0|c)<=(0|(o=u>>31))|(0|o)>(0|c)){if(Tn(i=r+680|0)&&-1!=s[kn(i)+44>>2]&&-1!=(0|(i=s[kn(i)+8>>2])))s[t+96>>2]=i,ae(r,4047,t+96|0);else{if(o=-1,(0|(u=s[r+544>>2]))<=0)c=-1;else{i=0;e:{for(;;){if((0|e)>=0){c=s[sn(r+576|0,0)>>2],u=s[r+544>>2];break e}if((0|(i=i+1|0))==(0|u))break}c=-1}if(!((0|u)<2))for(u=r+576|0,S=(0|e)<0,i=1;S||g[r+336>>3]*+s[r+24>>2]>+s[sn(u,i)>>2]&&(o=s[sn(u,i)>>2]),(0|(i=i+1|0))<s[r+544>>2];);}i=(0|o)>(0|c)?o:c}i=f[r+176|0]&&s[r+168>>2]>1?e:i,c=ue(r,s[r+140>>2],s[r+144>>2]),s[r+108>>2]=c,(0|c)>0&&(i=ve(r,i,c)),s[r+100>>2]=e,g[r+256>>3]=g[r+232>>3],we(c=r+644|0,r+256|0),Pn(c)>>>0>p[r+120>>2]&&(q=t,J=mr(c),s[q+128>>2]=J,Xe(c,s[Ln(t+136|0,t+128|0)>>2])),q=r,$=Ie(r),g[q+264>>3]=$,s[t+128>>2]=e,s[t+132>>2]=e>>31,fn(c=r+620|0,t+128|0),Pn(c)>>>0>s[r+116>>2]<<1>>>0&&(q=t,J=mr(c),s[q+128>>2]=J,Xe(c,s[Ln(t+120|0,t+128|0)>>2])),(o=s[r+24>>2])>>>0<40001&(0|(c=s[r+28>>2]))<=0|(0|c)<0||(d=m(m(+(o>>>0)+4294967296*+(0|c))/v[r+180>>2]),m(b(d))<m(0x8000000000000000)?(o=m(b(d))>=m(1)?~~(d>m(0)?m(k(m(w(m(d*m(2.3283064365386963e-10)))),m(4294967296))):m(E(m(m(d-m(~~d>>>0>>>0))*m(2.3283064365386963e-10)))))>>>0:0,c=~~d>>>0):(o=-2147483648,c=0),s[t+128>>2]=c,s[t+132>>2]=o,ln(c=r+608|0,t+128|0),Pn(c)>>>0<=p[r+124>>2]||(q=t,J=mr(c),s[q+112>>2]=J,Xe(c,s[Ln(t+104|0,t+112|0)>>2]))),c=En(h),o=Ve(),u=s[r+24>>2],S=s[r+28>>2],_=s[r+48>>2],I=s[r+52>>2],l=g[r+256>>3],A=s[r+92>>2],L=s[r+64>>2],M=s[r+68>>2],N=f[r+176|0],s[t+84>>2]=s[r+168>>2],s[t+80>>2]=N,s[t+72>>2]=L,s[t+76>>2]=M,s[t- -64>>2]=A,s[t+56>>2]=0,s[t+60>>2]=0,s[t+48>>2]=0,s[t+52>>2]=0,g[t+40>>3]=l,s[t+36>>2]=e,s[t+32>>2]=i,s[t+24>>2]=_,s[t+28>>2]=I,s[t+16>>2]=u,s[t+20>>2]=S,s[t+8>>2]=o,s[t+12>>2]=j,s[t>>2]=c,ae(r,3113,t)}if(gn(h),U=t+160|0,t=i,-1==(0|i)){if(i=0,U=o=U-336|0,S=Ae(o+320|0,1086),c=Ve(),t=e,s[r+100>>2]=e,g[r+256>>3]=g[r+232>>3],e=s[r+32>>2],u=j-(s[r+36>>2]+(e>>>0>c>>>0)|0)|0,s[r+8>>2]=c-e,s[r+12>>2]=u,we(e=r+644|0,r+256|0),Pn(e)>>>0>p[r+120>>2]&&(q=o,J=mr(e),s[q+304>>2]=J,Xe(e,s[Ln(o+312|0,o+304|0)>>2])),q=r,$=Ie(r),g[q+264>>3]=$,g[r+256>>3]<.1&&(s[r+156>>2]=s[r+156>>2]+1),1==s[r+96>>2]&&(s[r+160>>2]=s[r+160>>2]+1),U=e=U-16|0,q=e,J=Bt(u=r+656|0),s[q+8>>2]=J,q=e,J=Ut(u),s[q>>2]=J,kt(e+8|0,e))for(;U=c=U-16|0,h=e+8|0,s[c+8>>2]=s[h>>2],_=s[Un(c+8|0)>>2],U=c+16|0,c=s[_>>2],Un(h),q=e,J=Ut(u),s[q>>2]=J,i=(1==(0|c))+i|0,kt(h,e););if(U=e+16|0,s[r+164>>2]=i,s[o+304>>2]=t,I=t>>31,s[o+308>>2]=I,fn(h=r+620|0,o+304|0),Pn(h)>>>0>s[r+116>>2]<<1>>>0&&(q=o,J=mr(h),s[q+304>>2]=J,Xe(h,s[Ln(o+296|0,o+304|0)>>2])),(i=s[r+24>>2])>>>0<40001&(0|(e=s[r+28>>2]))<=0|(0|e)<0||(d=m(m(+(i>>>0)+4294967296*+(0|e))/v[r+180>>2]),m(b(d))<m(0x8000000000000000)?(i=m(b(d))>=m(1)?~~(d>m(0)?m(k(m(w(m(d*m(2.3283064365386963e-10)))),m(4294967296))):m(E(m(m(d-m(~~d>>>0>>>0))*m(2.3283064365386963e-10)))))>>>0:0,e=~~d>>>0):(i=-2147483648,e=0),s[o+304>>2]=e,s[o+308>>2]=i,ln(e=r+608|0,o+304|0),Pn(e)>>>0<=p[r+124>>2]||(q=o,J=mr(e),s[q+288>>2]=J,Xe(e,s[Ln(o+280|0,o+288|0)>>2]))),s[o+304>>2]=0,s[o+308>>2]=0,-1!=(s[r+56>>2]&s[r+60>>2])&&Pn(e=r+608|0)){if(e=Fn(e,Pn(e)-1|0),i=s[e>>2],A=s[e+4>>2],c=s[r+56>>2],e=s[r+60>>2]-(A+(i>>>0>c>>>0)|0)|0,c=c-i|0,c^=u=e>>31,g[o+304>>3]=(+(c-u>>>0)+4294967296*+((e^u)-((c>>>0<u>>>0)+u|0)|0))/(+(i>>>0)+4294967296*+(0|A)),we(e=r+632|0,o+304|0),Pn(e)>>>0>p[r+128>>2]&&(q=o,J=mr(e),s[q+288>>2]=J,Xe(e,s[Ln(o+272|0,o+288|0)>>2])),i=mr(e),c=tr(e),U=e=U-32|0,s[e+16>>2]=c,s[e+24>>2]=i,Kn(e+24|0,e+16|0)&&(s[e>>2]=s[e+24>>2],Kn(Nn(e),e+16|0)))for(;g[s[e+24>>2]>>3]<g[s[e>>2]>>3]&&(s[e+24>>2]=s[e>>2]),Kn(Nn(e),e+16|0););U=e+32|0,s[o+288>>2]=s[e+24>>2],l=g[s[o+288>>2]>>3],l=(+(ce(r)>>>0)+4294967296*+(0|j))/(l+1),b(l)<0x8000000000000000?(i=b(l)>=1?~~(l>0?k(w(2.3283064365386963e-10*l),4294967295):E(2.3283064365386963e-10*(l-+(~~l>>>0>>>0))))>>>0:0,e=~~l>>>0):(i=-2147483648,e=0),s[r+48>>2]=e,s[r+52>>2]=i}else q=r,J=ce(r),s[q+48>>2]=J,s[r+52>>2]=j,we(r+632|0,o+304|0),e=s[r+48>>2],i=s[r+52>>2];s[r+56>>2]=e,s[r+60>>2]=i,(i=s[r+92>>2])&&(e=s[r+12>>2],c=s[r+8>>2],s[r+16>>2]=c,s[r+20>>2]=e,s[o+252>>2]=1,s[o+248>>2]=i,s[o+240>>2]=c,s[o+244>>2]=e,ae(r,3680,o+240|0));e:{t:if(!(e=s[r+16>>2])&(0|(i=s[r+20>>2]))<=0|(0|i)<0||!(+((c=s[r+8>>2])-e>>>0)+4294967296*+((u=s[r+12>>2])-((e>>>0>c>>>0)+i|0)|0)<8e3)){f[r+172|0]&&(a[r+172|0]=0),l=g[r+312>>3],e=s[r+164>>2],x=g[r+304>>3],P=g[r+296>>3],i=En(S),D=21-(D=21-l)/(l=+(0|e)+1),g[o+232>>3]=D,P=31-(31-P)/l,g[o+224>>3]=P,s[o+208>>2]=i,x=41-(41-x)/l,g[o+216>>3]=x,ae(r,2950,o+208|0);n:{r:{i:{if((l=g[r+256>>3])<D){if(e=s[r+544>>2]<=0,l=g[r+336>>3]*+s[r+48>>2],c=b(l)<2147483648?~~l:-2147483648,e)break i;if(e=0,(0|c)<s[sn(u=r+576|0,0)>>2])break i;for(;;){if(i=s[sn(u,e)>>2],(0|(e=e+1|0))>=s[r+544>>2])break r;if(!((0|c)>=s[sn(u,e)>>2]))break}break r}c=s[r+48>>2],i=s[r+52>>2];a:{if(l<P){if(e=t,c>>>0<1001&(0|i)<=0|(0|i)<0)break e;if(l=g[r+320>>3]*(+(c>>>0)+4294967296*+(0|i)),!(b(l)<2147483648))break a;i=~~l;break n}if(e=t,!(l>=x)|c>>>0<1001&(0|i)<=0|(0|i)<0|s[r+544>>2]<=0)break e;for(i=r+576|0,e=0;;){if((0|t)<s[sn(i,e)>>2]){e=s[sn(i,e)>>2],c=i=s[r+48>>2],u=e,i=(_=e>>>0<i>>>0)&(0|(i=s[r+52>>2]))>=(0|(e>>=31))|(0|e)<(0|i)?c:u;break n}if(!((0|(e=e+1|0))<s[r+544>>2]))break}break t}i=-2147483648;break n}i=c}if((0|i)>(0|(e=t)))break e}if(e=t,-1==(0|i))break e;if(s[r+544>>2]<=0)c=-1;else for(_=r+576|0,e=2147483647,c=-1;(0|(u=((u=(A=i-s[sn(_,R)>>2]|0)>>31)^A)-u|0))<(0|e)&&(c=s[sn(_,R)>>2],e=u),(0|(R=R+1|0))<s[r+544>>2];);if((0|t)>=(0|(e=c)))break e;if(!Pn(h))break e;q=o,J=Bt(h),s[q+288>>2]=J,q=o,J=Ut(h),s[q+264>>2]=J,i=0;n:if(kt(o+288|0,o+264|0))for(;;){if(U=c=U-16|0,s[c+8>>2]=s[o+288>>2],u=s[Bn(c+8|0)>>2],U=c+16|0,(0|t)!=s[u>>2]|(0|I)!=s[u+4>>2])break n;if(Bn(c=o+288|0),q=o,J=Ut(h),s[q+264>>2]=J,i=i+1|0,!kt(c,o+264|0))break}if(!(s[r+132>>2]>(0|i)||+s[r+548>>2]>=g[r+256>>3]/+v[r+180>>2]))break e}else s[o+192>>2]=s[r+92>>2],s[o+184>>2]=e,s[o+188>>2]=i,s[o+176>>2]=c,s[o+180>>2]=u,ae(r,4614,o+176|0);e=t}i=ue(r,s[r+140>>2],s[r+144>>2]),s[r+108>>2]=i,(0|i)>0&&(e=ve(r,e,i)),(0|(u=it(r,t)))<=(0|(c=it(r,e)))|(u-c|0)<3?i=c:(e=ut(r,i=u-2|0),h=En(S),s[o+168>>2]=i,s[o+164>>2]=c,s[o+160>>2]=h,ae(r,2068,o+160|0)),c=En(S),h=s[r+548>>2],R=s[r+8>>2],_=s[r+12>>2],d=v[r+72>>2],T=v[r+180>>2],O=v[r+188>>2],C=v[r+204>>2],B=v[r+208>>2],F=v[r+212>>2],H=v[r+216>>2],l=g[r+256>>3],I=s[r+24>>2],A=s[r+28>>2],L=s[r+48>>2],M=s[r+52>>2],N=s[r+156>>2],V=s[r+92>>2],W=s[r+64>>2],G=s[r+68>>2],X=s[r+20>>2],Y=s[r+16>>2],K=s[r+96>>2],Z=s[r+164>>2],Q=s[r+160>>2],s[o+156>>2]=i,s[o+152>>2]=u,s[o+112>>2]=Q,s[o+108>>2]=Z,s[o+104>>2]=K,s[o+96>>2]=Y,s[o+100>>2]=X,s[o+88>>2]=W,s[o+92>>2]=G,s[o+72>>2]=V,s[o+68>>2]=N,s[o- -64>>2]=h,s[o+56>>2]=L,s[o+60>>2]=M,s[o+48>>2]=I,s[o+52>>2]=A,s[o+44>>2]=e,s[o+40>>2]=t,g[o+16>>3]=l,g[o+144>>3]=H,g[o+136>>3]=F,g[o+128>>3]=B,g[o+120>>3]=C,g[o+80>>3]=O,g[o+32>>3]=T,g[o+24>>3]=d,s[o+8>>2]=R,s[o+12>>2]=_,s[o>>2]=c,ae(r,4102,o),s[r+104>>2]=e,t=s[r+12>>2],s[r>>2]=s[r+8>>2],s[r+4>>2]=t,g[r+248>>3]=g[r+232>>3],g[r+240>>3]=g[r+224>>3],gn(S),U=o+336|0,t=e}return U=n+48|0,e=z(),d=m(+p[e+48>>2]+4294967296*+s[e+52>>2]),T=v[z()+204>>2],O=v[z()+208>>2],C=m(v[z()+212>>2]*m(100)),r=m(b(C))<m(2147483648)?~~C:-2147483648,C=v[z()+216>>2],e=gt(28),s[e+20>>2]=r,O=m(O*m(100)),i=m(b(O))<m(2147483648)?~~O:-2147483648,s[e+16>>2]=i,T=m(T*m(100)),i=m(b(T))<m(2147483648)?~~T:-2147483648,s[e+12>>2]=i,i=m(b(d))<m(2147483648)?~~d:-2147483648,s[e+8>>2]=i,s[e+4>>2]=0,s[e>>2]=t,d=m(C*m(100)),t=m(b(d))<m(2147483648)?~~d:-2147483648,s[e+24>>2]=t,0|e},getPreloadBitrate:function(e){var t,n,r,i,a;return e|=0,U=t=U-32|0,r=z(),U=n=U-48|0,s[t+24>>2]=0,s[t+8>>2]=-1,s[t+12>>2]=-1,s[t+16>>2]=-1,s[t+20>>2]=2,i=s[r+672>>2],a=s[r+668>>2],s[n>>2]=e,s[n+4>>2]=a,s[n+8>>2]=i,ae(r,3909,n),$(n+24|0,r,e||0),s[t+24>>2]=s[n+40>>2],e=s[n+36>>2],s[t+16>>2]=s[n+32>>2],s[t+20>>2]=e,e=s[n+28>>2],s[t+8>>2]=s[n+24>>2],s[t+12>>2]=e,U=n+48|0,e=gt(20),s[e>>2]=s[t+8>>2],s[e+4>>2]=s[t+12>>2],s[e+8>>2]=s[t+24>>2],s[e+12>>2]=s[t+16>>2],s[e+16>>2]=s[t+20>>2],U=t+32|0,0|e},setDebugModel:function(e){var t,n;e|=0,t=z(),n=e,a[t+174|0]=n},__indirect_function_table:ri,free:W,__errno_location:function(){return 10880},__stdio_exit:function(){var e=0;if(e=s[2719])for(;ze(e),e=s[e+56>>2];);ze(s[2238]),ze(s[2200]),ze(s[2276])},emscripten_stack_init:Rr,emscripten_stack_get_free:function(){return U-B|0},emscripten_stack_get_base:function(){return 0|F},emscripten_stack_get_end:function(){return 0|B},stackSave:function(){return 0|U},stackRestore:function(e){U=e|=0},stackAlloc:function(e){return U=e=U-(e|=0)&-16,0|e},dynCall_jiji:function(e,t,n,r,i){return t|=0,n|=0,r|=0,i|=0,e=0|ri[0|(e|=0)](t,n,r,i),M(0|j),0|e}}}(e)}(Te)},instantiate:function(e,t){return{then:function(t){var n=new k.Module(e);return t({instance:new k.Instance(n)}),{catch:function(){}}}}},RuntimeError:Error};m=[],"object"!=r(k)&&re("no native wasm support detected");var w=!1;function E(e,t){e||re("Assertion failed"+(t?": "+t:""))}function T(e,t,n,r,i){var o={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);L(e,t=Pe(n),n)}return t},array:function(e){var t=Pe(e.length);return N(e,t),t}},s=function(e){var t=a["_"+e];return E(t,"Cannot call unknown function "+e+", make sure it is exported"),t}(e),c=[],u=0;if(E("array"!==t,'Return type should not be "array".'),r)for(var l=0;l<r.length;l++){var d=o[n[l]];d?(0===u&&(u=Ce()),c[l]=d(r[l])):c[l]=r[l]}var f=s.apply(null,c);return f=function(e){return 0!==u&&xe(u),function(e){return"string"===t?P(e):"boolean"===t?Boolean(e):e}(e)}(f)}var A,S,I,R,O,C="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function x(e,t,n){for(var r=t+n,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.subarray&&C)return C.decode(e.subarray(t,i));for(var a="";t<i;){var o=e[t++];if(128&o){var s=63&e[t++];if(192!=(224&o)){var c=63&e[t++];if(224==(240&o)?o=(15&o)<<12|s<<6|c:(240!=(248&o)&&h("Invalid UTF-8 leading byte 0x"+o.toString(16)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),o=(7&o)<<18|s<<12|c<<6|63&e[t++]),o<65536)a+=String.fromCharCode(o);else{var u=o-65536;a+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else a+=String.fromCharCode((31&o)<<6|s)}else a+=String.fromCharCode(o)}return a}function P(e,t){return e?x(I,e,t):""}function D(e,t,n,r){if(!(r>0))return 0;for(var i=n,a=n+r-1,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o)),s<=127){if(n>=a)break;t[n++]=s}else if(s<=2047){if(n+1>=a)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=a)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=a)break;s>1114111&&h("Invalid Unicode code point 0x"+s.toString(16)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-i}function L(e,t,n){return E("number"==typeof n,"stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),D(e,I,t,n)}function M(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}function N(e,t){E(e.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),S.set(e,t)}function U(e){A=e,a.HEAP8=S=new Int8Array(e),a.HEAP16=new Int16Array(e),a.HEAP32=R=new Int32Array(e),a.HEAPU8=I=new Uint8Array(e),a.HEAPU16=new Uint16Array(e),a.HEAPU32=O=new Uint32Array(e),a.HEAPF32=new Float32Array(e),a.HEAPF64=new Float64Array(e)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le"),a.TOTAL_STACK&&E(8192===a.TOTAL_STACK,"the stack size can no longer be determined at runtime");var B,F=a.INITIAL_MEMORY||65536;function j(){var e=Oe();E(0==(3&e)),R[e>>2]=34821223,R[e+4>>2]=2310721022,R[0]=1668509029}function H(){if(!w){var e=Oe(),t=O[e>>2],n=O[e+4>>2];34821223==t&&2310721022==n||re("Stack overflow! Stack cookie has been overwritten, expected hex dwords 0x89BACDFE and 0x2135467, but received 0x"+n.toString(16)+" 0x"+t.toString(16)),1668509029!==R[0]&&re("Runtime error: The application has corrupted its heap memory area (address zero)!")}}p("INITIAL_MEMORY","INITIAL_MEMORY"),E(F>=8192,"INITIAL_MEMORY should be larger than TOTAL_STACK, was "+F+"! (TOTAL_STACK=8192)"),E("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&null!=Int32Array.prototype.subarray&&null!=Int32Array.prototype.set,"JS engine does not provide full typed array support"),(_=a.wasmMemory?a.wasmMemory:new k.Memory({initial:F/65536,maximum:32768}))&&(A=_.buffer),E((F=A.byteLength)%65536==0),U(A),function(){var e=new Int16Array(1),t=new Int8Array(e.buffer);if(e[0]=25459,115!==t[0]||99!==t[1])throw"Runtime error: expected the system to be little-endian! (Run with -s SUPPORT_BIG_ENDIAN=1 to bypass)"}();var V=[],W=[],G=[],z=!1;E(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),E(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),E(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),E(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var X,Y,K,Z,Q=0,q=null,J=null,$={};function ee(e){for(var t=e;;){if(!$[e])return e;e=t+Math.random()}}function te(e){Q++,a.monitorRunDependencies&&a.monitorRunDependencies(Q),e?(E(!$[e]),$[e]=1,null===q&&"undefined"!=typeof setInterval&&(q=setInterval((function(){if(w)return clearInterval(q),void(q=null);var e=!1;for(var t in $)e||(e=!0,f("still waiting on run dependencies:")),f("dependency: "+t);e&&f("(end of list)")}),1e4))):f("warning: run dependency added without ID")}function ne(e){if(Q--,a.monitorRunDependencies&&a.monitorRunDependencies(Q),e?(E($[e]),delete $[e]):f("warning: run dependency removed without ID"),0==Q&&(null!==q&&(clearInterval(q),q=null),J)){var t=J;J=null,t()}}function re(e){a.onAbort&&a.onAbort(e),f(e="Aborted("+e+")"),w=!0;var t=new k.RuntimeError(e);throw i(t),t}function ie(e){return e.startsWith("data:application/octet-stream;base64,")}function ae(e,t){return function(){var n=e,r=t;return t||(r=a.asm),E(z,"native function `"+n+"` called before runtime initialization"),E(!0,"native function `"+n+"` called after runtime exit (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),r[e]||E(r[e],"exported native function `"+n+"` not found"),r[e].apply(null,arguments)}}function oe(e){try{if(e==X&&m)return new Uint8Array(m);var t=Ee(e);if(t)return t;throw"both async and sync fetching of the wasm failed"}catch(f){re(f)}}function se(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?ue(n)():ue(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(a)}}function ce(e){return e.replace(/\b_Z[\w\d_]+/g,(function(e){var t,n=(t=e,h("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),t);return e===n?e:n+" ["+e+"]"}))}function ue(e){return B.get(e)}function le(e){this.excPtr=e,this.ptr=e-16,this.set_type=function(e){R[this.ptr+4>>2]=e},this.get_type=function(){return R[this.ptr+4>>2]},this.set_destructor=function(e){R[this.ptr+8>>2]=e},this.get_destructor=function(){return R[this.ptr+8>>2]},this.set_refcount=function(e){R[this.ptr>>2]=e},this.set_caught=function(e){e=e?1:0,S[this.ptr+12>>0]=e},this.get_caught=function(){return 0!=S[this.ptr+12>>0]},this.set_rethrown=function(e){e=e?1:0,S[this.ptr+13>>0]=e},this.get_rethrown=function(){return 0!=S[this.ptr+13>>0]},this.init=function(e,t){this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var e=R[this.ptr>>2];R[this.ptr>>2]=e+1},this.release_ref=function(){var e=R[this.ptr>>2];return R[this.ptr>>2]=e-1,E(e>0),1===e}}function de(e){try{return _.grow(e-A.byteLength+65535>>>16),U(_.buffer),1}catch(t){f("emscripten_realloc_buffer: Attempted to grow heap from "+A.byteLength+" bytes to "+e+" bytes, but got error: "+t)}}a.preloadedImages={},a.preloadedAudios={},ie(X="index.wasm")||(Y=X,X=a.locateFile?a.locateFile(Y,u):u+Y);var fe={splitPath:function(e){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1)},normalizeArray:function(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},normalize:function(e){var t="/"===e.charAt(0),n="/"===e.substr(-1);return(e=fe.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:function(e){var t=fe.splitPath(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},basename:function(e){if("/"===e)return"/";var t=(e=(e=fe.normalize(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},extname:function(e){return fe.splitPath(e)[3]},join:function(){var e=Array.prototype.slice.call(arguments,0);return fe.normalize(e.join("/"))},join2:function(e,t){return fe.normalize(e+"/"+t)}},he={resolve:function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var r=n>=0?arguments[n]:me.cwd();if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";e=r+"/"+e,t="/"===r.charAt(0)}return(t?"/":"")+(e=fe.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"))||"."},relative:function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=he.resolve(e).substr(1),t=he.resolve(t).substr(1);for(var r=n(e.split("/")),i=n(t.split("/")),a=Math.min(r.length,i.length),o=a,s=0;s<a;s++)if(r[s]!==i[s]){o=s;break}var c=[];for(s=o;s<r.length;s++)c.push("..");return(c=c.concat(i.slice(o))).join("/")}},pe={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){pe.ttys[e]={input:[],output:[],ops:t},me.registerDevice(e,pe.stream_ops)},stream_ops:{open:function(e){var t=pe.ttys[e.node.rdev];if(!t)throw new me.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,t,n,r,i){if(!e.tty||!e.tty.ops.get_char)throw new me.ErrnoError(60);for(var a=0,o=0;o<r;o++){var s;try{s=e.tty.ops.get_char(e.tty)}catch(c){throw new me.ErrnoError(29)}if(void 0===s&&0===a)throw new me.ErrnoError(6);if(null==s)break;a++,t[n+o]=s}return a&&(e.node.timestamp=Date.now()),a},write:function(e,t,n,r,i){if(!e.tty||!e.tty.ops.put_char)throw new me.ErrnoError(60);try{for(var a=0;a<r;a++)e.tty.ops.put_char(e.tty,t[n+a])}catch(o){throw new me.ErrnoError(29)}return r&&(e.node.timestamp=Date.now()),a}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n"),!t)return null;e.input=ke(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(d(x(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(d(x(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(f(x(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(f(x(e.output,0)),e.output=[])}}},ve={ops_table:null,mount:function(e){return ve.createNode(null,"/",16895,0)},createNode:function(e,t,n,r){if(me.isBlkdev(n)||me.isFIFO(n))throw new me.ErrnoError(63);ve.ops_table||(ve.ops_table={dir:{node:{getattr:ve.node_ops.getattr,setattr:ve.node_ops.setattr,lookup:ve.node_ops.lookup,mknod:ve.node_ops.mknod,rename:ve.node_ops.rename,unlink:ve.node_ops.unlink,rmdir:ve.node_ops.rmdir,readdir:ve.node_ops.readdir,symlink:ve.node_ops.symlink},stream:{llseek:ve.stream_ops.llseek}},file:{node:{getattr:ve.node_ops.getattr,setattr:ve.node_ops.setattr},stream:{llseek:ve.stream_ops.llseek,read:ve.stream_ops.read,write:ve.stream_ops.write,allocate:ve.stream_ops.allocate,mmap:ve.stream_ops.mmap,msync:ve.stream_ops.msync}},link:{node:{getattr:ve.node_ops.getattr,setattr:ve.node_ops.setattr,readlink:ve.node_ops.readlink},stream:{}},chrdev:{node:{getattr:ve.node_ops.getattr,setattr:ve.node_ops.setattr},stream:me.chrdev_stream_ops}});var i=me.createNode(e,t,n,r);return me.isDir(i.mode)?(i.node_ops=ve.ops_table.dir.node,i.stream_ops=ve.ops_table.dir.stream,i.contents={}):me.isFile(i.mode)?(i.node_ops=ve.ops_table.file.node,i.stream_ops=ve.ops_table.file.stream,i.usedBytes=0,i.contents=null):me.isLink(i.mode)?(i.node_ops=ve.ops_table.link.node,i.stream_ops=ve.ops_table.link.stream):me.isChrdev(i.mode)&&(i.node_ops=ve.ops_table.chrdev.node,i.stream_ops=ve.ops_table.chrdev.stream),i.timestamp=Date.now(),e&&(e.contents[t]=i,e.timestamp=i.timestamp),i},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,t){var n=e.contents?e.contents.length:0;if(!(n>=t)){t=Math.max(t,n*(n<1048576?2:1.125)>>>0),0!=n&&(t=Math.max(t,256));var r=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(r.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(e.usedBytes!=t)if(0==t)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=me.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,me.isDir(e.mode)?t.size=4096:me.isFile(e.mode)?t.size=e.usedBytes:me.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&ve.resizeFileStorage(e,t.size)},lookup:function(e,t){throw me.genericErrors[44]},mknod:function(e,t,n,r){return ve.createNode(e,t,n,r)},rename:function(e,t,n){if(me.isDir(e.mode)){var r;try{r=me.lookupNode(t,n)}catch(a){}if(r)for(var i in r.contents)throw new me.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=n,t.contents[n]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir:function(e,t){var n=me.lookupNode(e,t);for(var r in n.contents)throw new me.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir:function(e){var t=[".",".."];for(var n in e.contents)e.contents.hasOwnProperty(n)&&t.push(n);return t},symlink:function(e,t,n){var r=ve.createNode(e,t,41471,0);return r.link=n,r},readlink:function(e){if(!me.isLink(e.mode))throw new me.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,n,r,i){var a=e.node.contents;if(i>=e.node.usedBytes)return 0;var o=Math.min(e.node.usedBytes-i,r);if(E(o>=0),o>8&&a.subarray)t.set(a.subarray(i,i+o),n);else for(var s=0;s<o;s++)t[n+s]=a[i+s];return o},write:function(e,t,n,r,i,a){if(E(!(t instanceof ArrayBuffer)),t.buffer===S.buffer&&(a=!1),!r)return 0;var o=e.node;if(o.timestamp=Date.now(),t.subarray&&(!o.contents||o.contents.subarray)){if(a)return E(0===i,"canOwn must imply no weird position inside the file"),o.contents=t.subarray(n,n+r),o.usedBytes=r,r;if(0===o.usedBytes&&0===i)return o.contents=t.slice(n,n+r),o.usedBytes=r,r;if(i+r<=o.usedBytes)return o.contents.set(t.subarray(n,n+r),i),r}if(ve.expandFileStorage(o,i+r),o.contents.subarray&&t.subarray)o.contents.set(t.subarray(n,n+r),i);else for(var s=0;s<r;s++)o.contents[i+s]=t[n+s];return o.usedBytes=Math.max(o.usedBytes,i+r),r},llseek:function(e,t,n){var r=t;if(1===n?r+=e.position:2===n&&me.isFile(e.node.mode)&&(r+=e.node.usedBytes),r<0)throw new me.ErrnoError(28);return r},allocate:function(e,t,n){ve.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap:function(e,t,n,r,i,a){if(0!==t)throw new me.ErrnoError(28);if(!me.isFile(e.node.mode))throw new me.ErrnoError(43);var o,s,c=e.node.contents;if(2&a||c.buffer!==A){if((r>0||r+n<c.length)&&(c=c.subarray?c.subarray(r,r+n):Array.prototype.slice.call(c,r,r+n)),s=!0,!(o=void re("internal error: mmapAlloc called but `emscripten_builtin_memalign` native symbol not exported")))throw new me.ErrnoError(48);S.set(c,o)}else s=!1,o=c.byteOffset;return{ptr:o,allocated:s}},msync:function(e,t,n,r,i){if(!me.isFile(e.node.mode))throw new me.ErrnoError(43);return 2&i||ve.stream_ops.write(e,t,0,r,n,!1),0}}},ge={0:"Success",1:"Arg list too long",2:"Permission denied",3:"Address already in use",4:"Address not available",5:"Address family not supported by protocol family",6:"No more processes",7:"Socket already connected",8:"Bad file number",9:"Trying to read unreadable message",10:"Mount device busy",11:"Operation canceled",12:"No children",13:"Connection aborted",14:"Connection refused",15:"Connection reset by peer",16:"File locking deadlock error",17:"Destination address required",18:"Math arg out of domain of func",19:"Quota exceeded",20:"File exists",21:"Bad address",22:"File too large",23:"Host is unreachable",24:"Identifier removed",25:"Illegal byte sequence",26:"Connection already in progress",27:"Interrupted system call",28:"Invalid argument",29:"I/O error",30:"Socket is already connected",31:"Is a directory",32:"Too many symbolic links",33:"Too many open files",34:"Too many links",35:"Message too long",36:"Multihop attempted",37:"File or path name too long",38:"Network interface is not configured",39:"Connection reset by network",40:"Network is unreachable",41:"Too many open files in system",42:"No buffer space available",43:"No such device",44:"No such file or directory",45:"Exec format error",46:"No record locks available",47:"The link has been severed",48:"Not enough core",49:"No message of desired type",50:"Protocol not available",51:"No space left on device",52:"Function not implemented",53:"Socket is not connected",54:"Not a directory",55:"Directory not empty",56:"State not recoverable",57:"Socket operation on non-socket",59:"Not a typewriter",60:"No such device or address",61:"Value too large for defined data type",62:"Previous owner died",63:"Not super-user",64:"Broken pipe",65:"Protocol error",66:"Unknown protocol",67:"Protocol wrong type for socket",68:"Math result not representable",69:"Read only file system",70:"Illegal seek",71:"No such process",72:"Stale file handle",73:"Connection timed out",74:"Text file busy",75:"Cross-device link",100:"Device not a stream",101:"Bad font file fmt",102:"Invalid slot",103:"Invalid request code",104:"No anode",105:"Block device required",106:"Channel number out of range",107:"Level 3 halted",108:"Level 3 reset",109:"Link number out of range",110:"Protocol driver not attached",111:"No CSI structure available",112:"Level 2 halted",113:"Invalid exchange",114:"Invalid request descriptor",115:"Exchange full",116:"No data (for no delay io)",117:"Timer expired",118:"Out of streams resources",119:"Machine is not on the network",120:"Package not installed",121:"The object is remote",122:"Advertise error",123:"Srmount error",124:"Communication error on send",125:"Cross mount point (not really error)",126:"Given log. name not unique",127:"f.d. invalid for this operation",128:"Remote address changed",129:"Can   access a needed shared lib",130:"Accessing a corrupted shared lib",131:".lib section in a.out corrupted",132:"Attempting to link in too many libs",133:"Attempting to exec a shared library",135:"Streams pipe error",136:"Too many users",137:"Socket type not supported",138:"Not supported",139:"Protocol family not supported",140:"Can't send after socket shutdown",141:"Too many references",142:"Host is down",148:"No medium (in tape drive)",156:"Level 2 not synchronized"},ye={},me={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(e=he.resolve(me.cwd(),e)))return{path:"",node:null};var n={follow_mount:!0,recurse_count:0};if((t=Object.assign(n,t)).recurse_count>8)throw new me.ErrnoError(32);for(var r=fe.normalizeArray(e.split("/").filter((function(e){return!!e})),!1),i=me.root,a="/",o=0;o<r.length;o++){var s=o===r.length-1;if(s&&t.parent)break;if(i=me.lookupNode(i,r[o]),a=fe.join2(a,r[o]),me.isMountpoint(i)&&(!s||s&&t.follow_mount)&&(i=i.mounted.root),!s||t.follow)for(var c=0;me.isLink(i.mode);){var u=me.readlink(a);a=he.resolve(fe.dirname(a),u);var l=me.lookupPath(a,{recurse_count:t.recurse_count+1});if(i=l.node,c++>40)throw new me.ErrnoError(32)}}return{path:a,node:i}},getPath:function(e){for(var t;;){if(me.isRoot(e)){var n=e.mount.mountpoint;return t?"/"!==n[n.length-1]?n+"/"+t:n+t:n}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:function(e,t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%me.nameTable.length},hashAddNode:function(e){var t=me.hashName(e.parent.id,e.name);e.name_next=me.nameTable[t],me.nameTable[t]=e},hashRemoveNode:function(e){var t=me.hashName(e.parent.id,e.name);if(me.nameTable[t]===e)me.nameTable[t]=e.name_next;else for(var n=me.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode:function(e,t){var n=me.mayLookup(e);if(n)throw new me.ErrnoError(n,e);for(var r=me.hashName(e.id,t),i=me.nameTable[r];i;i=i.name_next){var a=i.name;if(i.parent.id===e.id&&a===t)return i}return me.lookup(e,t)},createNode:function(e,t,n,i){E("object"==r(e));var a=new me.FSNode(e,t,n,i);return me.hashAddNode(a),a},destroyNode:function(e){me.hashRemoveNode(e)},isRoot:function(e){return e===e.parent},isMountpoint:function(e){return!!e.mounted},isFile:function(e){return 32768==(61440&e)},isDir:function(e){return 16384==(61440&e)},isLink:function(e){return 40960==(61440&e)},isChrdev:function(e){return 8192==(61440&e)},isBlkdev:function(e){return 24576==(61440&e)},isFIFO:function(e){return 4096==(61440&e)},isSocket:function(e){return 49152==(49152&e)},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(e){var t=me.flagModes[e];if(void 0===t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:function(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:function(e,t){return me.ignorePermissions||(!t.includes("r")||292&e.mode)&&(!t.includes("w")||146&e.mode)&&(!t.includes("x")||73&e.mode)?0:2},mayLookup:function(e){var t=me.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate:function(e,t){try{return me.lookupNode(e,t),20}catch(n){}return me.nodePermissions(e,"wx")},mayDelete:function(e,t,n){var r;try{r=me.lookupNode(e,t)}catch(a){return a.errno}var i=me.nodePermissions(e,"wx");if(i)return i;if(n){if(!me.isDir(r.mode))return 54;if(me.isRoot(r)||me.getPath(r)===me.cwd())return 10}else if(me.isDir(r.mode))return 31;return 0},mayOpen:function(e,t){return e?me.isLink(e.mode)?32:me.isDir(e.mode)&&("r"!==me.flagsToPermissionString(t)||512&t)?31:me.nodePermissions(e,me.flagsToPermissionString(t)):44},MAX_OPEN_FDS:4096,nextfd:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:me.MAX_OPEN_FDS,n=e;n<=t;n++)if(!me.streams[n])return n;throw new me.ErrnoError(33)},getStream:function(e){return me.streams[e]},createStream:function(e,t,n){me.FSStream||(me.FSStream=function(){},me.FSStream.prototype={object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}}),e=Object.assign(new me.FSStream,e);var r=me.nextfd(t,n);return e.fd=r,me.streams[r]=e,e},closeStream:function(e){me.streams[e]=null},chrdev_stream_ops:{open:function(e){var t=me.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:function(){throw new me.ErrnoError(70)}},major:function(e){return e>>8},minor:function(e){return 255&e},makedev:function(e,t){return e<<8|t},registerDevice:function(e,t){me.devices[e]={stream_ops:t}},getDevice:function(e){return me.devices[e]},getMounts:function(e){for(var t=[],n=[e];n.length;){var r=n.pop();t.push(r),n.push.apply(n,r.mounts)}return t},syncfs:function(e,t){"function"==typeof e&&(t=e,e=!1),me.syncFSRequests++,me.syncFSRequests>1&&f("warning: "+me.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var n=me.getMounts(me.root.mount),r=0;function i(e){return E(me.syncFSRequests>0),me.syncFSRequests--,t(e)}function a(e){if(e)return a.errored?void 0:(a.errored=!0,i(e));++r>=n.length&&i(null)}n.forEach((function(t){if(!t.type.syncfs)return a(null);t.type.syncfs(t,e,a)}))},mount:function(e,t,n){if("string"==typeof e)throw e;var r,i="/"===n,a=!n;if(i&&me.root)throw new me.ErrnoError(10);if(!i&&!a){var o=me.lookupPath(n,{follow_mount:!1});if(n=o.path,r=o.node,me.isMountpoint(r))throw new me.ErrnoError(10);if(!me.isDir(r.mode))throw new me.ErrnoError(54)}var s={type:e,opts:t,mountpoint:n,mounts:[]},c=e.mount(s);return c.mount=s,s.root=c,i?me.root=c:r&&(r.mounted=s,r.mount&&r.mount.mounts.push(s)),c},unmount:function(e){var t=me.lookupPath(e,{follow_mount:!1});if(!me.isMountpoint(t.node))throw new me.ErrnoError(28);var n=t.node,r=n.mounted,i=me.getMounts(r);Object.keys(me.nameTable).forEach((function(e){for(var t=me.nameTable[e];t;){var n=t.name_next;i.includes(t.mount)&&me.destroyNode(t),t=n}})),n.mounted=null;var a=n.mount.mounts.indexOf(r);E(-1!==a),n.mount.mounts.splice(a,1)},lookup:function(e,t){return e.node_ops.lookup(e,t)},mknod:function(e,t,n){var r=me.lookupPath(e,{parent:!0}).node,i=fe.basename(e);if(!i||"."===i||".."===i)throw new me.ErrnoError(28);var a=me.mayCreate(r,i);if(a)throw new me.ErrnoError(a);if(!r.node_ops.mknod)throw new me.ErrnoError(63);return r.node_ops.mknod(r,i,t,n)},create:function(e,t){return t=void 0!==t?t:438,t&=4095,t|=32768,me.mknod(e,t,0)},mkdir:function(e,t){return t=void 0!==t?t:511,t&=1023,t|=16384,me.mknod(e,t,0)},mkdirTree:function(e,t){for(var n=e.split("/"),r="",i=0;i<n.length;++i)if(n[i]){r+="/"+n[i];try{me.mkdir(r,t)}catch(a){if(20!=a.errno)throw a}}},mkdev:function(e,t,n){return void 0===n&&(n=t,t=438),t|=8192,me.mknod(e,t,n)},symlink:function(e,t){if(!he.resolve(e))throw new me.ErrnoError(44);var n=me.lookupPath(t,{parent:!0}).node;if(!n)throw new me.ErrnoError(44);var r=fe.basename(t),i=me.mayCreate(n,r);if(i)throw new me.ErrnoError(i);if(!n.node_ops.symlink)throw new me.ErrnoError(63);return n.node_ops.symlink(n,r,e)},rename:function(e,t){var n,r,i=fe.dirname(e),a=fe.dirname(t),o=fe.basename(e),s=fe.basename(t);if(n=me.lookupPath(e,{parent:!0}).node,r=me.lookupPath(t,{parent:!0}).node,!n||!r)throw new me.ErrnoError(44);if(n.mount!==r.mount)throw new me.ErrnoError(75);var c,u=me.lookupNode(n,o),l=he.relative(e,a);if("."!==l.charAt(0))throw new me.ErrnoError(28);if("."!==(l=he.relative(t,i)).charAt(0))throw new me.ErrnoError(55);try{c=me.lookupNode(r,s)}catch(h){}if(u!==c){var d=me.isDir(u.mode),f=me.mayDelete(n,o,d);if(f)throw new me.ErrnoError(f);if(f=c?me.mayDelete(r,s,d):me.mayCreate(r,s))throw new me.ErrnoError(f);if(!n.node_ops.rename)throw new me.ErrnoError(63);if(me.isMountpoint(u)||c&&me.isMountpoint(c))throw new me.ErrnoError(10);if(r!==n&&(f=me.nodePermissions(n,"w")))throw new me.ErrnoError(f);me.hashRemoveNode(u);try{n.node_ops.rename(u,r,s)}catch(h){throw h}finally{me.hashAddNode(u)}}},rmdir:function(e){var t=me.lookupPath(e,{parent:!0}).node,n=fe.basename(e),r=me.lookupNode(t,n),i=me.mayDelete(t,n,!0);if(i)throw new me.ErrnoError(i);if(!t.node_ops.rmdir)throw new me.ErrnoError(63);if(me.isMountpoint(r))throw new me.ErrnoError(10);t.node_ops.rmdir(t,n),me.destroyNode(r)},readdir:function(e){var t=me.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new me.ErrnoError(54);return t.node_ops.readdir(t)},unlink:function(e){var t=me.lookupPath(e,{parent:!0}).node;if(!t)throw new me.ErrnoError(44);var n=fe.basename(e),r=me.lookupNode(t,n),i=me.mayDelete(t,n,!1);if(i)throw new me.ErrnoError(i);if(!t.node_ops.unlink)throw new me.ErrnoError(63);if(me.isMountpoint(r))throw new me.ErrnoError(10);t.node_ops.unlink(t,n),me.destroyNode(r)},readlink:function(e){var t=me.lookupPath(e).node;if(!t)throw new me.ErrnoError(44);if(!t.node_ops.readlink)throw new me.ErrnoError(28);return he.resolve(me.getPath(t.parent),t.node_ops.readlink(t))},stat:function(e,t){var n=me.lookupPath(e,{follow:!t}).node;if(!n)throw new me.ErrnoError(44);if(!n.node_ops.getattr)throw new me.ErrnoError(63);return n.node_ops.getattr(n)},lstat:function(e){return me.stat(e,!0)},chmod:function(e,t,n){var r;if(!(r="string"==typeof e?me.lookupPath(e,{follow:!n}).node:e).node_ops.setattr)throw new me.ErrnoError(63);r.node_ops.setattr(r,{mode:4095&t|-4096&r.mode,timestamp:Date.now()})},lchmod:function(e,t){me.chmod(e,t,!0)},fchmod:function(e,t){var n=me.getStream(e);if(!n)throw new me.ErrnoError(8);me.chmod(n.node,t)},chown:function(e,t,n,r){var i;if(!(i="string"==typeof e?me.lookupPath(e,{follow:!r}).node:e).node_ops.setattr)throw new me.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown:function(e,t,n){me.chown(e,t,n,!0)},fchown:function(e,t,n){var r=me.getStream(e);if(!r)throw new me.ErrnoError(8);me.chown(r.node,t,n)},truncate:function(e,t){if(t<0)throw new me.ErrnoError(28);var n;if(!(n="string"==typeof e?me.lookupPath(e,{follow:!0}).node:e).node_ops.setattr)throw new me.ErrnoError(63);if(me.isDir(n.mode))throw new me.ErrnoError(31);if(!me.isFile(n.mode))throw new me.ErrnoError(28);var r=me.nodePermissions(n,"w");if(r)throw new me.ErrnoError(r);n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},ftruncate:function(e,t){var n=me.getStream(e);if(!n)throw new me.ErrnoError(8);if(0==(2097155&n.flags))throw new me.ErrnoError(28);me.truncate(n.node,t)},utime:function(e,t,n){var r=me.lookupPath(e,{follow:!0}).node;r.node_ops.setattr(r,{timestamp:Math.max(t,n)})},open:function(e,t,n,i,o){if(""===e)throw new me.ErrnoError(44);var s;if(n=void 0===n?438:n,n=64&(t="string"==typeof t?me.modeStringToFlags(t):t)?4095&n|32768:0,"object"==r(e))s=e;else{e=fe.normalize(e);try{s=me.lookupPath(e,{follow:!(131072&t)}).node}catch(d){}}var c=!1;if(64&t)if(s){if(128&t)throw new me.ErrnoError(20)}else s=me.mknod(e,n,0),c=!0;if(!s)throw new me.ErrnoError(44);if(me.isChrdev(s.mode)&&(t&=-513),65536&t&&!me.isDir(s.mode))throw new me.ErrnoError(54);if(!c){var u=me.mayOpen(s,t);if(u)throw new me.ErrnoError(u)}512&t&&me.truncate(s,0),t&=-131713;var l=me.createStream({node:s,path:me.getPath(s),flags:t,seekable:!0,position:0,stream_ops:s.stream_ops,ungotten:[],error:!1},i,o);return l.stream_ops.open&&l.stream_ops.open(l),!a.logReadFiles||1&t||(me.readFiles||(me.readFiles={}),e in me.readFiles||(me.readFiles[e]=1)),l},close:function(e){if(me.isClosed(e))throw new me.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(t){throw t}finally{me.closeStream(e.fd)}e.fd=null},isClosed:function(e){return null===e.fd},llseek:function(e,t,n){if(me.isClosed(e))throw new me.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new me.ErrnoError(70);if(0!=n&&1!=n&&2!=n)throw new me.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read:function(e,t,n,r,i){if(r<0||i<0)throw new me.ErrnoError(28);if(me.isClosed(e))throw new me.ErrnoError(8);if(1==(2097155&e.flags))throw new me.ErrnoError(8);if(me.isDir(e.node.mode))throw new me.ErrnoError(31);if(!e.stream_ops.read)throw new me.ErrnoError(28);var a=void 0!==i;if(a){if(!e.seekable)throw new me.ErrnoError(70)}else i=e.position;var o=e.stream_ops.read(e,t,n,r,i);return a||(e.position+=o),o},write:function(e,t,n,r,i,a){if(r<0||i<0)throw new me.ErrnoError(28);if(me.isClosed(e))throw new me.ErrnoError(8);if(0==(2097155&e.flags))throw new me.ErrnoError(8);if(me.isDir(e.node.mode))throw new me.ErrnoError(31);if(!e.stream_ops.write)throw new me.ErrnoError(28);e.seekable&&1024&e.flags&&me.llseek(e,0,2);var o=void 0!==i;if(o){if(!e.seekable)throw new me.ErrnoError(70)}else i=e.position;var s=e.stream_ops.write(e,t,n,r,i,a);return o||(e.position+=s),s},allocate:function(e,t,n){if(me.isClosed(e))throw new me.ErrnoError(8);if(t<0||n<=0)throw new me.ErrnoError(28);if(0==(2097155&e.flags))throw new me.ErrnoError(8);if(!me.isFile(e.node.mode)&&!me.isDir(e.node.mode))throw new me.ErrnoError(43);if(!e.stream_ops.allocate)throw new me.ErrnoError(138);e.stream_ops.allocate(e,t,n)},mmap:function(e,t,n,r,i,a){if(0!=(2&i)&&0==(2&a)&&2!=(2097155&e.flags))throw new me.ErrnoError(2);if(1==(2097155&e.flags))throw new me.ErrnoError(2);if(!e.stream_ops.mmap)throw new me.ErrnoError(43);return e.stream_ops.mmap(e,t,n,r,i,a)},msync:function(e,t,n,r,i){return e&&e.stream_ops.msync?e.stream_ops.msync(e,t,n,r,i):0},munmap:function(e){return 0},ioctl:function(e,t,n){if(!e.stream_ops.ioctl)throw new me.ErrnoError(59);return e.stream_ops.ioctl(e,t,n)},readFile:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.flags=n.flags||0,n.encoding=n.encoding||"binary","utf8"!==n.encoding&&"binary"!==n.encoding)throw new Error('Invalid encoding type "'+n.encoding+'"');var r=me.open(e,n.flags),i=me.stat(e),a=i.size,o=new Uint8Array(a);return me.read(r,o,0,a,0),"utf8"===n.encoding?t=x(o,0):"binary"===n.encoding&&(t=o),me.close(r),t},writeFile:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.flags=n.flags||577;var r=me.open(e,n.flags,n.mode);if("string"==typeof t){var i=new Uint8Array(M(t)+1),a=D(t,i,0,i.length);me.write(r,i,0,a,void 0,n.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");me.write(r,t,0,t.byteLength,void 0,n.canOwn)}me.close(r)},cwd:function(){return me.currentPath},chdir:function(e){var t=me.lookupPath(e,{follow:!0});if(null===t.node)throw new me.ErrnoError(44);if(!me.isDir(t.node.mode))throw new me.ErrnoError(54);var n=me.nodePermissions(t.node,"x");if(n)throw new me.ErrnoError(n);me.currentPath=t.path},createDefaultDirectories:function(){me.mkdir("/tmp"),me.mkdir("/home"),me.mkdir("/home/web_user")},createDefaultDevices:function(){me.mkdir("/dev"),me.registerDevice(me.makedev(1,3),{read:function(){return 0},write:function(e,t,n,r,i){return r}}),me.mkdev("/dev/null",me.makedev(1,3)),pe.register(me.makedev(5,0),pe.default_tty_ops),pe.register(me.makedev(6,0),pe.default_tty1_ops),me.mkdev("/dev/tty",me.makedev(5,0)),me.mkdev("/dev/tty1",me.makedev(6,0));var e=function(){if("object"==("undefined"==typeof crypto?"undefined":r(crypto))&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return function(){return crypto.getRandomValues(e),e[0]}}return function(){re("no cryptographic support found for randomDevice. consider polyfilling it if you want to use something insecure like Math.random(), e.g. put this in a --pre-js: var crypto = { getRandomValues: function(array) { for (var i = 0; i < array.length; i++) array[i] = (Math.random()*256)|0 } };")}}();me.createDevice("/dev","random",e),me.createDevice("/dev","urandom",e),me.mkdir("/dev/shm"),me.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){me.mkdir("/proc");var e=me.mkdir("/proc/self");me.mkdir("/proc/self/fd"),me.mount({mount:function(){var t=me.createNode(e,"fd",16895,73);return t.node_ops={lookup:function(e,t){var n=+t,r=me.getStream(n);if(!r)throw new me.ErrnoError(8);var i={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return r.path}}};return i.parent=i,i}},t}},{},"/proc/self/fd")},createStandardStreams:function(){a.stdin?me.createDevice("/dev","stdin",a.stdin):me.symlink("/dev/tty","/dev/stdin"),a.stdout?me.createDevice("/dev","stdout",null,a.stdout):me.symlink("/dev/tty","/dev/stdout"),a.stderr?me.createDevice("/dev","stderr",null,a.stderr):me.symlink("/dev/tty1","/dev/stderr");var e=me.open("/dev/stdin",0),t=me.open("/dev/stdout",1),n=me.open("/dev/stderr",1);E(0===e.fd,"invalid handle for stdin ("+e.fd+")"),E(1===t.fd,"invalid handle for stdout ("+t.fd+")"),E(2===n.fd,"invalid handle for stderr ("+n.fd+")")},ensureErrnoError:function(){me.ErrnoError||(me.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){for(var t in this.errno=e,ye)if(ye[t]===e){this.code=t;break}},this.setErrno(e),this.message=ge[e],this.stack&&(Object.defineProperty(this,"stack",{value:(new Error).stack,writable:!0}),this.stack=ce(this.stack))},me.ErrnoError.prototype=new Error,me.ErrnoError.prototype.constructor=me.ErrnoError,[44].forEach((function(e){me.genericErrors[e]=new me.ErrnoError(e),me.genericErrors[e].stack="<generic error, no stack>"})))},staticInit:function(){me.ensureErrnoError(),me.nameTable=new Array(4096),me.mount(ve,{},"/"),me.createDefaultDirectories(),me.createDefaultDevices(),me.createSpecialDirectories(),me.filesystems={MEMFS:ve}},init:function(e,t,n){E(!me.init.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),me.init.initialized=!0,me.ensureErrnoError(),a.stdin=e||a.stdin,a.stdout=t||a.stdout,a.stderr=n||a.stderr,me.createStandardStreams()},quit:function(){me.init.initialized=!1,Se();for(var e=0;e<me.streams.length;e++){var t=me.streams[e];t&&me.close(t)}},getMode:function(e,t){var n=0;return e&&(n|=365),t&&(n|=146),n},findObject:function(e,t){var n=me.analyzePath(e,t);return n.exists?n.object:null},analyzePath:function(e,t){try{e=(r=me.lookupPath(e,{follow:!t})).path}catch(i){}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var r=me.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=r.path,n.parentObject=r.node,n.name=fe.basename(e),r=me.lookupPath(e,{follow:!t}),n.exists=!0,n.path=r.path,n.object=r.node,n.name=r.node.name,n.isRoot="/"===r.path}catch(i){n.error=i.errno}return n},createPath:function(e,t,n,r){e="string"==typeof e?e:me.getPath(e);for(var i=t.split("/").reverse();i.length;){var a=i.pop();if(a){var o=fe.join2(e,a);try{me.mkdir(o)}catch(s){}e=o}}return o},createFile:function(e,t,n,r,i){var a=fe.join2("string"==typeof e?e:me.getPath(e),t),o=me.getMode(r,i);return me.create(a,o)},createDataFile:function(e,t,n,r,i,a){var o=t;e&&(e="string"==typeof e?e:me.getPath(e),o=t?fe.join2(e,t):e);var s=me.getMode(r,i),c=me.create(o,s);if(n){if("string"==typeof n){for(var u=new Array(n.length),l=0,d=n.length;l<d;++l)u[l]=n.charCodeAt(l);n=u}me.chmod(c,146|s);var f=me.open(c,577);me.write(f,n,0,n.length,0,a),me.close(f),me.chmod(c,s)}return c},createDevice:function(e,t,n,r){var i=fe.join2("string"==typeof e?e:me.getPath(e),t),a=me.getMode(!!n,!!r);me.createDevice.major||(me.createDevice.major=64);var o=me.makedev(me.createDevice.major++,0);return me.registerDevice(o,{open:function(e){e.seekable=!1},close:function(e){r&&r.buffer&&r.buffer.length&&r(10)},read:function(e,t,r,i,a){for(var o=0,s=0;s<i;s++){var c;try{c=n()}catch(u){throw new me.ErrnoError(29)}if(void 0===c&&0===o)throw new me.ErrnoError(6);if(null==c)break;o++,t[r+s]=c}return o&&(e.node.timestamp=Date.now()),o},write:function(e,t,n,i,a){for(var o=0;o<i;o++)try{r(t[n+o])}catch(s){throw new me.ErrnoError(29)}return i&&(e.node.timestamp=Date.now()),o}}),me.mkdev(i,a,o)},forceLoadFile:function(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!s)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=ke(s(e.url),!0),e.usedBytes=e.contents.length}catch(t){throw new me.ErrnoError(29)}},createLazyFile:function(e,t,n,r,i){function a(){this.lengthKnown=!1,this.chunks=[]}if(a.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,n=e/this.chunkSize|0;return this.getter(n)[t]}},a.prototype.setDataGetter=function(e){this.getter=e},a.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",n,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+n+". Status: "+e.status);var t,r=Number(e.getResponseHeader("Content-length")),i=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,a=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,o=1048576;i||(o=r);var s=this;s.setDataGetter((function(e){var t=e*o,i=(e+1)*o-1;if(i=Math.min(i,r-1),void 0===s.chunks[e]&&(s.chunks[e]=function(e,t){if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>r-1)throw new Error("only "+r+" bytes available! programmer error!");var i=new XMLHttpRequest;if(i.open("GET",n,!1),r!==o&&i.setRequestHeader("Range","bytes="+e+"-"+t),i.responseType="arraybuffer",i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.send(null),!(i.status>=200&&i.status<300||304===i.status))throw new Error("Couldn't load "+n+". Status: "+i.status);return void 0!==i.response?new Uint8Array(i.response||[]):ke(i.responseText||"",!0)}(t,i)),void 0===s.chunks[e])throw new Error("doXHR failed!");return s.chunks[e]})),!a&&r||(o=r=1,r=this.getter(0).length,o=r,d("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=r,this._chunkSize=o,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var o={isDevice:!1,url:n},s=me.createFile(e,t,o,r,i);o.contents?s.contents=o.contents:o.url&&(s.contents=null,s.url=o.url),Object.defineProperties(s,{usedBytes:{get:function(){return this.contents.length}}});var c={};return Object.keys(s.stream_ops).forEach((function(e){var t=s.stream_ops[e];c[e]=function(){return me.forceLoadFile(s),t.apply(null,arguments)}})),c.read=function(e,t,n,r,i){me.forceLoadFile(s);var a=e.node.contents;if(i>=a.length)return 0;var o=Math.min(a.length-i,r);if(E(o>=0),a.slice)for(var c=0;c<o;c++)t[n+c]=a[i+c];else for(c=0;c<o;c++)t[n+c]=a.get(i+c);return o},s.stream_ops=c,s},createPreloadedFile:function(e,t,n,r,i,a,o,s,u,l){var d=t?he.resolve(fe.join2(e,t)):e,f=ee("cp "+d);function h(n){function c(n){l&&l(),s||me.createDataFile(e,t,n,r,i,u),a&&a(),ne(f)}Browser.handledByPreloadPlugin(n,d,c,(function(){o&&o(),ne(f)}))||c(n)}te(f),"string"==typeof n?function(e,t,n,r){var i=r?"":ee("al "+e);c(e,(function(n){E(n,'Loading data file "'+e+'" failed (no arrayBuffer).'),t(new Uint8Array(n)),i&&ne(i)}),(function(t){if(!n)throw'Loading data file "'+e+'" failed.';n()})),i&&te(i)}(n,(function(e){return h(e)}),o):h(n)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(e,t,n){t=t||function(){},n=n||function(){};var r=me.indexedDB();try{var i=r.open(me.DB_NAME(),me.DB_VERSION)}catch(a){return n(a)}i.onupgradeneeded=function(){d("creating db"),i.result.createObjectStore(me.DB_STORE_NAME)},i.onsuccess=function(){var r=i.result.transaction([me.DB_STORE_NAME],"readwrite"),a=r.objectStore(me.DB_STORE_NAME),o=0,s=0,c=e.length;function u(){0==s?t():n()}e.forEach((function(e){var t=a.put(me.analyzePath(e).object.contents,e);t.onsuccess=function(){++o+s==c&&u()},t.onerror=function(){s++,o+s==c&&u()}})),r.onerror=n},i.onerror=n},loadFilesFromDB:function(e,t,n){t=t||function(){},n=n||function(){};var r=me.indexedDB();try{var i=r.open(me.DB_NAME(),me.DB_VERSION)}catch(a){return n(a)}i.onupgradeneeded=n,i.onsuccess=function(){var r=i.result;try{var o=r.transaction([me.DB_STORE_NAME],"readonly")}catch(a){return void n(a)}var s=o.objectStore(me.DB_STORE_NAME),c=0,u=0,l=e.length;function d(){0==u?t():n()}e.forEach((function(e){var t=s.get(e);t.onsuccess=function(){me.analyzePath(e).exists&&me.unlink(e),me.createDataFile(fe.dirname(e),fe.basename(e),t.result,!0,!0,!0),++c+u==l&&d()},t.onerror=function(){u++,c+u==l&&d()}})),o.onerror=n},i.onerror=n},absolutePath:function(){re("FS.absolutePath has been removed; use PATH_FS.resolve instead")},createFolder:function(){re("FS.createFolder has been removed; use FS.mkdir instead")},createLink:function(){re("FS.createLink has been removed; use FS.symlink instead")},joinPath:function(){re("FS.joinPath has been removed; use PATH.join instead")},mmapAlloc:function(){re("FS.mmapAlloc has been replaced by the top level function mmapAlloc")},standardizePath:function(){re("FS.standardizePath has been removed; use PATH.normalize instead")}},be={DEFAULT_POLLMASK:5,calculateAt:function(e,t,n){if("/"===t[0])return t;var r;if(-100===e)r=me.cwd();else{var i=me.getStream(e);if(!i)throw new me.ErrnoError(8);r=i.path}if(0==t.length){if(!n)throw new me.ErrnoError(44);return r}return fe.join2(r,t)},doStat:function(e,t,n){try{var r=e(t)}catch(i){if(i&&i.node&&fe.normalize(t)!==fe.normalize(me.getPath(i.node)))return-54;throw i}return R[n>>2]=r.dev,R[n+4>>2]=0,R[n+8>>2]=r.ino,R[n+12>>2]=r.mode,R[n+16>>2]=r.nlink,R[n+20>>2]=r.uid,R[n+24>>2]=r.gid,R[n+28>>2]=r.rdev,R[n+32>>2]=0,Z=[r.size>>>0,(K=r.size,+Math.abs(K)>=1?K>0?(0|Math.min(+Math.floor(K/4294967296),4294967295))>>>0:~~+Math.ceil((K-+(~~K>>>0))/4294967296)>>>0:0)],R[n+40>>2]=Z[0],R[n+44>>2]=Z[1],R[n+48>>2]=4096,R[n+52>>2]=r.blocks,R[n+56>>2]=r.atime.getTime()/1e3|0,R[n+60>>2]=0,R[n+64>>2]=r.mtime.getTime()/1e3|0,R[n+68>>2]=0,R[n+72>>2]=r.ctime.getTime()/1e3|0,R[n+76>>2]=0,Z=[r.ino>>>0,(K=r.ino,+Math.abs(K)>=1?K>0?(0|Math.min(+Math.floor(K/4294967296),4294967295))>>>0:~~+Math.ceil((K-+(~~K>>>0))/4294967296)>>>0:0)],R[n+80>>2]=Z[0],R[n+84>>2]=Z[1],0},doMsync:function(e,t,n,r,i){var a=I.slice(e,e+n);me.msync(t,a,i,n,r)},doMkdir:function(e,t){return"/"===(e=fe.normalize(e))[e.length-1]&&(e=e.substr(0,e.length-1)),me.mkdir(e,t,0),0},doMknod:function(e,t,n){switch(61440&t){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return me.mknod(e,t,n),0},doReadlink:function(e,t,n){if(n<=0)return-28;var r=me.readlink(e),i=Math.min(n,M(r)),a=S[t+i];return L(r,t,n+1),S[t+i]=a,i},doAccess:function(e,t){if(-8&t)return-28;var n=me.lookupPath(e,{follow:!0}).node;if(!n)return-44;var r="";return 4&t&&(r+="r"),2&t&&(r+="w"),1&t&&(r+="x"),r&&me.nodePermissions(n,r)?-2:0},doDup:function(e,t,n){var r=me.getStream(n);return r&&me.close(r),me.open(e,t,0,n,n).fd},doReadv:function(e,t,n,r){for(var i=0,a=0;a<n;a++){var o=R[t+8*a>>2],s=R[t+(8*a+4)>>2],c=me.read(e,S,o,s,r);if(c<0)return-1;if(i+=c,c<s)break}return i},doWritev:function(e,t,n,r){for(var i=0,a=0;a<n;a++){var o=R[t+8*a>>2],s=R[t+(8*a+4)>>2],c=me.write(e,S,o,s,r);if(c<0)return-1;i+=c}return i},varargs:void 0,get:function(){return E(null!=be.varargs),be.varargs+=4,R[be.varargs-4>>2]},getStr:function(e){return P(e)},getStreamFromFD:function(e){var t=me.getStream(e);if(!t)throw new me.ErrnoError(8);return t},get64:function(e,t){return E(e>=0?0===t:-1===t),e}},_e=function(e,t,n,r){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=me.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=r};function ke(e,t,n){var r=n>0?n:M(e)+1,i=new Array(r),a=D(e,i,0,i.length);return t&&(i.length=a),i}Object.defineProperties(_e.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return me.isDir(this.mode)}},isDevice:{get:function(){return me.isChrdev(this.mode)}}}),me.FSNode=_e,me.staticInit(),ye={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135};var we="function"==typeof atob?atob:function(e){var t,n,r,i,a,o,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",u=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{t=s.indexOf(e.charAt(u++))<<2|(i=s.indexOf(e.charAt(u++)))>>4,n=(15&i)<<4|(a=s.indexOf(e.charAt(u++)))>>2,r=(3&a)<<6|(o=s.indexOf(e.charAt(u++))),c+=String.fromCharCode(t),64!==a&&(c+=String.fromCharCode(n)),64!==o&&(c+=String.fromCharCode(r))}while(u<e.length);return c};function Ee(e){if(ie(e))return function(e){try{for(var t=we(e),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}catch(i){throw new Error("Converting base64 string to bytes failed.")}}(e.slice("data:application/octet-stream;base64,".length))}var Te={__assert_fail:function(e,t,n,r){re("Assertion failed: "+P(e)+", at: "+[t?P(t):"unknown filename",n,r?P(r):"unknown function"])},__cxa_allocate_exception:function(e){return Ae(e+16)+16},__cxa_throw:function(e,t,n){throw new le(e).init(t,n),e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s NO_DISABLE_EXCEPTION_CATCHING or -s EXCEPTION_CATCHING_ALLOWED=[..] to catch."},abort:function(){re("native code called abort()")},emscripten_memcpy_big:function(e,t,n){I.copyWithin(e,t,t+n)},emscripten_resize_heap:function(e){var t=I.length;if(E((e>>>=0)>t),e>2147483648)return f("Cannot enlarge memory, asked to go up to "+e+" bytes, but the limit is 2147483648 bytes!"),!1;for(var n,r,i=1;i<=4;i*=2){var a=t*(1+.2/i);a=Math.min(a,e+100663296);var o=Math.min(2147483648,(n=Math.max(e,a))+((r=65536)-n%r)%r);if(de(o))return f("Warning: Enlarging memory arrays, this is not fast! "+[t,o]),!0}return f("Failed to grow the heap from "+t+" bytes to "+o+" bytes, not enough memory!"),!1},fd_close:function(e){try{var t=be.getStreamFromFD(e);return me.close(t),0}catch(n){if(void 0===me||!(n instanceof me.ErrnoError))throw n;return n.errno}},fd_read:function(e,t,n,r){try{var i=be.getStreamFromFD(e),a=be.doReadv(i,t,n);return R[r>>2]=a,0}catch(o){if(void 0===me||!(o instanceof me.ErrnoError))throw o;return o.errno}},fd_seek:function(e,t,n,r,i){try{var a=be.getStreamFromFD(e),o=4294967296*n+(t>>>0);return o<=-9007199254740992||o>=9007199254740992?-61:(me.llseek(a,o,r),Z=[a.position>>>0,(K=a.position,+Math.abs(K)>=1?K>0?(0|Math.min(+Math.floor(K/4294967296),4294967295))>>>0:~~+Math.ceil((K-+(~~K>>>0))/4294967296)>>>0:0)],R[i>>2]=Z[0],R[i+4>>2]=Z[1],a.getdents&&0===o&&0===r&&(a.getdents=null),0)}catch(s){if(void 0===me||!(s instanceof me.ErrnoError))throw s;return s.errno}},fd_write:function(e,t,n,r){try{var i=be.getStreamFromFD(e),a=be.doWritev(i,t,n);return R[r>>2]=a,0}catch(o){if(void 0===me||!(o instanceof me.ErrnoError))throw o;return o.errno}},getTempRet0:function(){return b},gettimeofday:function(e){var t=Date.now();return R[e>>2]=t/1e3|0,R[e+4>>2]=t%1e3*1e3|0,0},memory:_,setTempRet0:function(e){b=e}};!function(){var e={env:Te,wasi_snapshot_preview1:Te};function t(e,t){var n,r=e.exports;a.asm=r,E(B=a.asm.__indirect_function_table,"table not found in wasm exports"),n=a.asm.__wasm_call_ctors,W.unshift(n),ne("wasm-instantiate")}te("wasm-instantiate");var n=a;function r(e){E(a===n,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),n=null,t(e.instance)}function o(t){return(m||"function"!=typeof fetch?Promise.resolve().then((function(){return oe(X)})):fetch(X,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+X+"'";return e.arrayBuffer()})).catch((function(){return oe(X)}))).then((function(t){return k.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){f("failed to asynchronously prepare wasm: "+e),X.startsWith("file://")&&f("warning: Loading from a file URI ("+X+") is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing"),re(e)}))}if(a.instantiateWasm)try{return a.instantiateWasm(e,t)}catch(s){return f("Module.instantiateWasm callback failed with error: "+s),!1}(m||"function"!=typeof k.instantiateStreaming||ie(X)||"function"!=typeof fetch?o(r):fetch(X,{credentials:"same-origin"}).then((function(t){return k.instantiateStreaming(t,e).then(r,(function(e){return f("wasm streaming compile failed: "+e),f("falling back to ArrayBuffer instantiation"),o(r)}))}))).catch(i)}(),a.___wasm_call_ctors=ae("__wasm_call_ctors");var Ae=a._malloc=ae("malloc");a._parseMPD=ae("parseMPD"),a._updatePreloadInfo=ae("updatePreloadInfo"),a._updateDeviceInfo=ae("updateDeviceInfo"),a._updateMediaInfo=ae("updateMediaInfo"),a._updateBufferInfo=ae("updateBufferInfo"),a._updateSwitchInfo=ae("updateSwitchInfo"),a._updatePreloadSupplier=ae("updatePreloadSupplier"),a._getPredictedBitrate=ae("getPredictedBitrate"),a._getPreloadBitrate=ae("getPreloadBitrate"),a._setDebugModel=ae("setDebugModel"),a._free=ae("free"),a.___errno_location=ae("__errno_location");var Se=a.___stdio_exit=ae("__stdio_exit"),Ie=a._emscripten_stack_init=function(){return(Ie=a._emscripten_stack_init=a.asm.emscripten_stack_init).apply(null,arguments)};a._emscripten_stack_get_free=function(){return(a._emscripten_stack_get_free=a.asm.emscripten_stack_get_free).apply(null,arguments)},a._emscripten_stack_get_base=function(){return(a._emscripten_stack_get_base=a.asm.emscripten_stack_get_base).apply(null,arguments)};var Re,Oe=a._emscripten_stack_get_end=function(){return(Oe=a._emscripten_stack_get_end=a.asm.emscripten_stack_get_end).apply(null,arguments)},Ce=a.stackSave=ae("stackSave"),xe=a.stackRestore=ae("stackRestore"),Pe=a.stackAlloc=ae("stackAlloc");function De(e){function n(){Re||(Re=!0,a.calledRun=!0,w||(H(),E(!z),z=!0,a.noFSInit||me.init.initialized||me.init(),me.ignorePermissions=!1,se(W),t(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),E(!a._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),function(){if(H(),a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)e=a.postRun.shift(),G.unshift(e);var e;se(G)}()))}Q>0||(Ie(),j(),function(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)e=a.preRun.shift(),V.unshift(e);var e;se(V)}(),Q>0||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),n()}),1)):n(),H()))}if(a.dynCall_jiji=ae("dynCall_jiji"),y("intArrayFromString",!1),y("intArrayToString",!1),a.ccall=T,a.cwrap=function(e,t,n,r){return function(){return T(e,t,n,arguments)}},y("setValue",!1),y("getValue",!1),y("allocate",!1),y("UTF8ArrayToString",!1),y("UTF8ToString",!1),y("stringToUTF8Array",!1),y("stringToUTF8",!1),y("lengthBytesUTF8",!1),y("stackTrace",!1),y("addOnPreRun",!1),y("addOnInit",!1),y("addOnPreMain",!1),y("addOnExit",!1),y("addOnPostRun",!1),y("writeStringToMemory",!1),a.writeArrayToMemory=N,y("writeAsciiToMemory",!1),y("addRunDependency",!0),y("removeRunDependency",!0),y("FS_createFolder",!1),y("FS_createPath",!0),y("FS_createDataFile",!0),y("FS_createPreloadedFile",!0),y("FS_createLazyFile",!0),y("FS_createLink",!1),y("FS_createDevice",!0),y("FS_unlink",!0),y("getLEB",!1),y("getFunctionTables",!1),y("alignFunctionTables",!1),y("registerFunctions",!1),y("addFunction",!1),y("removeFunction",!1),y("getFuncWrapper",!1),y("prettyPrint",!1),y("dynCall",!1),y("getCompilerSetting",!1),a.print=d,y("printErr",!1),y("getTempRet0",!1),y("setTempRet0",!1),y("callMain",!1),y("abort",!1),y("keepRuntimeAlive",!1),y("zeroMemory",!1),y("stringToNewUTF8",!1),y("emscripten_realloc_buffer",!1),y("ENV",!1),y("withStackSave",!1),y("ERRNO_CODES",!1),y("ERRNO_MESSAGES",!1),y("setErrNo",!1),y("inetPton4",!1),y("inetNtop4",!1),y("inetPton6",!1),y("inetNtop6",!1),y("readSockaddr",!1),y("writeSockaddr",!1),y("DNS",!1),y("getHostByName",!1),y("Protocols",!1),y("Sockets",!1),y("getRandomDevice",!1),y("traverseStack",!1),y("convertFrameToPC",!1),y("UNWIND_CACHE",!1),y("saveInUnwindCache",!1),y("convertPCtoSourceLocation",!1),y("readAsmConstArgsArray",!1),y("readAsmConstArgs",!1),y("mainThreadEM_ASM",!1),y("jstoi_q",!1),y("jstoi_s",!1),y("getExecutableName",!1),y("listenOnce",!1),y("autoResumeAudioContext",!1),y("dynCallLegacy",!1),y("getDynCaller",!1),y("dynCall",!1),y("callRuntimeCallbacks",!1),y("setWasmTableEntry",!1),y("getWasmTableEntry",!1),y("handleException",!1),y("runtimeKeepalivePush",!1),y("runtimeKeepalivePop",!1),y("callUserCallback",!1),y("maybeExit",!1),y("safeSetTimeout",!1),y("asmjsMangle",!1),y("asyncLoad",!1),y("alignMemory",!1),y("mmapAlloc",!1),y("reallyNegative",!1),y("unSign",!1),y("reSign",!1),y("formatString",!1),y("PATH",!1),y("PATH_FS",!1),y("SYSCALLS",!1),y("getSocketFromFD",!1),y("getSocketAddress",!1),y("JSEvents",!1),y("registerKeyEventCallback",!1),y("specialHTMLTargets",!1),y("maybeCStringToJsString",!1),y("findEventTarget",!1),y("findCanvasEventTarget",!1),y("getBoundingClientRect",!1),y("fillMouseEventData",!1),y("registerMouseEventCallback",!1),y("registerWheelEventCallback",!1),y("registerUiEventCallback",!1),y("registerFocusEventCallback",!1),y("fillDeviceOrientationEventData",!1),y("registerDeviceOrientationEventCallback",!1),y("fillDeviceMotionEventData",!1),y("registerDeviceMotionEventCallback",!1),y("screenOrientation",!1),y("fillOrientationChangeEventData",!1),y("registerOrientationChangeEventCallback",!1),y("fillFullscreenChangeEventData",!1),y("registerFullscreenChangeEventCallback",!1),y("registerRestoreOldStyle",!1),y("hideEverythingExceptGivenElement",!1),y("restoreHiddenElements",!1),y("setLetterbox",!1),y("currentFullscreenStrategy",!1),y("restoreOldWindowedStyle",!1),y("softFullscreenResizeWebGLRenderTarget",!1),y("doRequestFullscreen",!1),y("fillPointerlockChangeEventData",!1),y("registerPointerlockChangeEventCallback",!1),y("registerPointerlockErrorEventCallback",!1),y("requestPointerLock",!1),y("fillVisibilityChangeEventData",!1),y("registerVisibilityChangeEventCallback",!1),y("registerTouchEventCallback",!1),y("fillGamepadEventData",!1),y("registerGamepadEventCallback",!1),y("registerBeforeUnloadEventCallback",!1),y("fillBatteryEventData",!1),y("battery",!1),y("registerBatteryEventCallback",!1),y("setCanvasElementSize",!1),y("getCanvasElementSize",!1),y("demangle",!1),y("demangleAll",!1),y("jsStackTrace",!1),y("stackTrace",!1),y("getEnvStrings",!1),y("checkWasiClock",!1),y("writeI53ToI64",!1),y("writeI53ToI64Clamped",!1),y("writeI53ToI64Signaling",!1),y("writeI53ToU64Clamped",!1),y("writeI53ToU64Signaling",!1),y("readI53FromI64",!1),y("readI53FromU64",!1),y("convertI32PairToI53",!1),y("convertU32PairToI53",!1),y("setImmediateWrapped",!1),y("clearImmediateWrapped",!1),y("polyfillSetImmediate",!1),y("uncaughtExceptionCount",!1),y("exceptionLast",!1),y("exceptionCaught",!1),y("ExceptionInfo",!1),y("CatchInfo",!1),y("exception_addRef",!1),y("exception_decRef",!1),y("Browser",!1),y("funcWrappers",!1),y("getFuncWrapper",!1),y("setMainLoop",!1),y("wget",!1),y("FS",!1),y("MEMFS",!1),y("TTY",!1),y("PIPEFS",!1),y("SOCKFS",!1),y("_setNetworkCallback",!1),y("tempFixedLengthArray",!1),y("miniTempWebGLFloatBuffers",!1),y("heapObjectForWebGLType",!1),y("heapAccessShiftForWebGLHeap",!1),y("GL",!1),y("emscriptenWebGLGet",!1),y("computeUnpackAlignedImageSize",!1),y("emscriptenWebGLGetTexPixelData",!1),y("emscriptenWebGLGetUniform",!1),y("webglGetUniformLocation",!1),y("webglPrepareUniformLocationsBeforeFirstUse",!1),y("webglGetLeftBracePos",!1),y("emscriptenWebGLGetVertexAttrib",!1),y("writeGLArray",!1),y("AL",!1),y("SDL_unicode",!1),y("SDL_ttfContext",!1),y("SDL_audio",!1),y("SDL",!1),y("SDL_gfx",!1),y("GLUT",!1),y("EGL",!1),y("GLFW_Window",!1),y("GLFW",!1),y("GLEW",!1),y("IDBStore",!1),y("runAndAbortIfError",!1),y("warnOnce",!1),y("stackSave",!1),y("stackRestore",!1),y("stackAlloc",!1),y("AsciiToString",!1),y("stringToAscii",!1),y("UTF16ToString",!1),y("stringToUTF16",!1),y("lengthBytesUTF16",!1),y("UTF32ToString",!1),y("stringToUTF32",!1),y("lengthBytesUTF32",!1),y("allocateUTF8",!1),y("allocateUTF8OnStack",!1),a.writeStackCookie=j,a.checkStackCookie=H,y("intArrayFromBase64",!1),y("tryParseAsDataURI",!1),g("ALLOC_NORMAL",!1),g("ALLOC_STACK",!1),J=function e(){Re||De(),Re||(J=e)},a.run=De,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return De(),e.ready});e.exports=i}(i);var a=i.exports},ec618b62718d4965f43d:function(e,t,n){"use strict";function r(){return(new DOMParser).parseFromString('<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>\n</svg>\n',"image/svg+xml").firstChild}n.d(t,"a",(function(){return r}))},f1c6a86dfc799034cb5d:function(e,t,n){"use strict";n.d(t,"a",(function(){return Bt}));n("7cb145ff51d539d4bd6d");var r=n("f8c988483231af8381d2"),i=n.n(r),a=n("f07456edab2c7b12cc0c"),o=n.n(a),s=n("f28ded8c7364f6de9abc"),c=n.n(s),u=n("e93695117ac1f764190a"),l=n.n(u),d=n("d8c910279447f3b2f170"),f=n.n(d),h=n("724d463499897903d0b9"),p=n("3b76dd97653dea47ddc2"),v=n("7367695471878cd60218"),g=n("1dbcb949bab5b5ef954b"),y=n("96a54d04afa591d8f2c9"),m=n("7619191d4db2e0ec6dfb"),b=n("ab6ffd1e2d3463998345"),_=n("afa39434f067edd8798c"),k=n("34c0f6a91c0bdd59090c"),w=n("2bc4fe74291883f7c727"),E=n.n(w),T=(n("d21c3f3d4c981a871761"),n("16da3d83ca2b978dbac3"),n("e502d00ea6e2f0b47ea0"),n("098ff896a5dab77f75b3"),n("765c3fe4871c97a98a7a"),n("af4e4e4030596b369b13"),n("b9c487edb4e7fbfb9158"),n("cc3ba8f20ced7ad84834")),A=n.n(T),S=n("833d0deece77cf88ba93"),I=n.n(S),R=n("ff12d07833562306368e");function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l()(e);if(t){var i=l()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}function x(){return(new Date).getTime()}var P=function(e){o()(n,e);var t=C(n);function n(){var e;i()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),f()(I()(e),"_onTimeupdate",(function(){R.b.logInfo("[xgLogger]Events._onTimeupdate"),e._state.isTimeUpdate=!0,e._sendFirstFrame()})),f()(I()(e),"_onAutoplayStart",(function(){R.b.logInfo("[xgLogger]Events._onAutoplayStart"),e._state.autoplayStart=!0,e._sendFirstFrame()})),f()(I()(e),"_onReset",(function(){e.vt=0,e.pt=0,e.fvt=0,e._isSeeking=!1,e.seekingStart=0,e.waitingStart=0,e._isWaiting=!1,e._waitTimer&&k.a.clearTimeout(I()(e),e._waitTimer),e._waittTimer&&k.a.clearTimeout(I()(e),e._waittTimer),e._waitTimer=null,e._waittTimer=null,e._waitType=0})),f()(I()(e),"_onSeeking",(function(){e.seekingStart||(e.suspendWaitingStatus("seek"),e.seekingStart=x(),e.emitLog("seekStart",{start:x()}))})),f()(I()(e),"_onSeeked",(function(){e.suspendSeekingStatus("seeked")})),f()(I()(e),"_onWaitingLoadStart",(function(){e._isWaiting||e.vt||(e._isWaiting=!0,e.waitingStart=x(),e._waitType=1,e.emitLog("waitingStart",{start:e.waitingStart,type:1,endType:"loadstart"}))})),f()(I()(e),"_onWaiting",(function(){!e._isWaiting&&e.vt&&(e._isWaiting=!0,e._waitTimer=k.a.setTimeout(I()(e),(function(){e._isWaiting&&(e.waitingStart=x(),k.a.clearTimeout(I()(e),e._waitTimer),e._waitTimer=null,e.vt?e.seekingStart?e._waitType=2:e._waitType=0:e._waitType=1,e._startWaitTimeout(),e.emitLog("waitingStart",{start:e.waitingStart,type:e._waitType,endType:2===e._waitType?"seek":"playing"}))}),200))})),f()(I()(e),"_onError",(function(){e.suspendSeekingStatus("error"),e.suspendWaitingStatus("error")})),f()(I()(e),"_onPlaying",(function(){e._isWaiting&&e.suspendWaitingStatus("playing")})),e}return A()(n,[{key:"afterCreate",value:function(){var e=this;this._state={autoplayStart:!1,isFFLoading:!1,isTimeUpdate:!1},this._onReset(),this._waitType="firstFrame",this.on(g.LOAD_START,(function(){var t=e._state.autoplayStart;e._state.isTimeUpdate=!1,e._state.isFFLoading=!0,R.b.logInfo("[xgLogger]Events.LOAD_START",t),e.pt=x(),e.vt=0,e.fvt=0,e.off(g.AUTOPLAY_STARTED,e._onAutoplayStart),e.off(g.TIME_UPDATE,e._onTimeupdate),e._onWaitingLoadStart(),t?e.once(g.TIME_UPDATE,e._onTimeupdate):e.once(g.AUTOPLAY_STARTED,e._onAutoplayStart)})),this.on(g.LOADED_DATA,(function(){e.vt=x(),e.fvt=e.vt-e.pt,R.b.logInfo("[xgLogger]Events.LOADED_DATA",e.fvt,e._state.isTimeUpdate),e._state.isTimeUpdate&&e._sendFirstFrame(),e.suspendWaitingStatus("loadeddata")})),this.on(g.SEEKING,this._onSeeking),this.on(g.SEEKED,this._onSeeked),this.on(g.DESTROY,(function(){e.endState("destroy")})),this.on(g.URL_CHANGE,(function(){e.endState("urlChange"),e._onReset()})),this.on([g.PLAYING,g.CANPLAY],this._onPlaying),this.on(g.WAITING,this._onWaiting),this.on(g.ERROR,this._onError),this.on(g.EMPTIED,(function(){e.endState("emptied"),e._onReset()}))}},{key:"_sendFirstFrame",value:function(){this.s=x(),this.vt>0&&this._state.isFFLoading&&(R.b.logInfo("[xgLogger]Events._sendFirstFrame",this.vt),this._state.isFFLoading=!1,this.emitLog("firstFrame",{fvt:this.fvt,costTime:this.fvt,vt:this.vt}))}},{key:"_startWaitTimeout",value:function(){var e=this;this._waittTimer&&k.a.clearTimeout(this,this._waittTimer),this._waittTimer=k.a.setTimeout(this,(function(){e.suspendWaitingStatus("timeout"),k.a.clearTimeout(e,e._waittTimer),e._waittTimer=null}),3e4)}},{key:"endState",value:function(e){this.suspendWaitingStatus(e),this.suspendSeekingStatus(e)}},{key:"suspendSeekingStatus",value:function(e){if(this.seekingStart){var t=x(),n=t-this.seekingStart;this.seekingStart=0,this.emitLog("seekEnd",{end:t,costTime:n,endType:e})}}},{key:"suspendWaitingStatus",value:function(e){if(this._waitTimer&&(k.a.clearTimeout(this,this._waitTimer),this._waitTimer=null),this._waittTimer&&(k.a.clearTimeout(this,this._waittTimer),this._waittTimer=null),this._isWaiting=!1,this.waitingStart){var t=x()-this.waitingStart;this._isWaiting=!1,this.waitingStart=0,this.emitLog("waitingEnd",{costTime:t,type:this._waitType,endType:2===this._waitType?"seek":e})}}},{key:"emitLog",value:function(e,t){var n=this.player;this.emit(g.XGLOG,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({t:x(),host:k.a.getHostFromUrl(n.currentSrc),vtype:n.vtype,eventType:e,currentTime:this.player.currentTime,readyState:n.video.readyState,networkState:n.video.networkState},t))}}],[{key:"pluginName",get:function(){return"xgLogger"}},{key:"defaultConfig",get:function(){return{}}}]),n}(p.b);function D(){return(new DOMParser).parseFromString('<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 78 78" width="78" height="78">\n  <path fill="#fff" transform="translate(20, 20)" d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>\n</svg>\n',"image/svg+xml").firstChild}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l()(e);if(t){var i=l()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var M=function(e){o()(n,e);var t=L(n);function n(){return i()(this,n),t.apply(this,arguments)}return A()(n,[{key:"registerIcons",value:function(){return{replay:D}}},{key:"afterCreate",value:function(){var e=this;p.b.insert(this.icons.replay,this.root,0),this.__handleReplay=this.hook("replayClick",(function(){e.player.replay()}),{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.bind(".xgplayer-replay",["click","touchend"],this.__handleReplay),this.on(g.ENDED,(function(){if(e.playerConfig.loop||k.a.addClass(e.player.root,"replay"),!e.config.disable){e.show();var t=e.root.querySelector("path");if(t){var n=window.getComputedStyle(t).getPropertyValue("transform");if("string"==typeof n&&n.indexOf("none")>-1)return null;t.setAttribute("transform",n)}}})),this.on(g.PLAY,(function(){e.hide()}))}},{key:"handleReplay",value:function(e){e.preventDefault(),e.stopPropagation(),this.player.replay(),k.a.removeClass(this.player.root,"replay")}},{key:"show",value:function(){this.config.disable||(this.root.style.display="flex")}},{key:"enable",value:function(){this.config.disable=!1}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){this.unbind(".xgplayer-replay",["click","touchend"],this.__handleReplay)}},{key:"render",value:function(){return'<xg-replay class="xgplayer-replay">\n      <xg-replay-txt class="xgplayer-replay-txt" lang-key="'.concat(this.i18nKeys.REPLAY,'">').concat(this.i18n.REPLAY,"</xg-replay-txt>\n    </xg-replay>")}}],[{key:"pluginName",get:function(){return"replay"}},{key:"defaultConfig",get:function(){return{disable:!1}}}]),n}(p.b);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l()(e);if(t){var i=l()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var U=function(e){o()(n,e);var t=N(n);function n(){return i()(this,n),t.apply(this,arguments)}return A()(n,[{key:"isEndedShow",get:function(){return this.config.isEndedShow},set:function(e){this.config.isEndedShow=e}},{key:"hide",value:function(){k.a.addClass(this.root,"hide")}},{key:"show",value:function(){k.a.removeClass(this.root,"hide")}},{key:"beforeCreate",value:function(e){"string"==typeof e.player.config.poster&&(e.config.poster=e.player.config.poster)}},{key:"afterCreate",value:function(){var e=this;this.on(g.ENDED,(function(){e.isEndedShow&&k.a.removeClass(e.root,"hide")})),this.config.hideCanplay?(this.once(g.TIME_UPDATE,(function(){e.onTimeUpdate()})),this.on(g.URL_CHANGE,(function(){k.a.removeClass(e.root,"hide"),k.a.addClass(e.root,"xg-showplay"),e.once(g.TIME_UPDATE,(function(){e.onTimeUpdate()}))}))):this.on(g.PLAY,(function(){k.a.addClass(e.root,"hide")}))}},{key:"onTimeUpdate",value:function(){var e=this;this.player.currentTime?k.a.removeClass(this.root,"xg-showplay"):this.once(g.TIME_UPDATE,(function(){e.onTimeUpdate()}))}},{key:"update",value:function(e){e&&(this.config.poster=e,this.root.style.backgroundImage="url(".concat(e,")"))}},{key:"render",value:function(){var e=this.config,t=e.poster,n=e.hideCanplay,r=t?"background-image:url(".concat(t,");"):"";return'<xg-poster class="xgplayer-poster '.concat(n?"xg-showplay":"",'" style="').concat(r,'">\n    </xg-poster>')}}],[{key:"pluginName",get:function(){return"poster"}},{key:"defaultConfig",get:function(){return{isEndedShow:!0,hideCanplay:!1,poster:""}}}]),n}(p.b),B=n("c8c315dc775fdfc7c489");function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l()(e);if(t){var i=l()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var j=function(e){o()(n,e);var t=F(n);function n(){return i()(this,n),t.apply(this,arguments)}return A()(n,[{key:"render",value:function(){var e=this.config.innerHtml,t=k.a.createDom("xg-enter","",{},"xgplayer-enter");if(e&&e instanceof window.HTMLElement)t.appendChild(e);else if(e&&"string"==typeof e)t.innerHTML=e;else{for(var n="",r=1;r<=12;r++)n+='<div class="xgplayer-enter-bar'.concat(r,'"></div>');t.innerHTML='<div class="xgplayer-enter-spinner">'.concat(n,"</div>")}return t}}],[{key:"pluginName",get:function(){return"enter"}},{key:"defaultConfig",get:function(){return{innerHtml:"",logo:""}}}]),n}(p.b),H=(n("cf2c3842fd8b1c54ed12"),n("ec618b62718d4965f43d")),V=n("f595bdb75185de96d993");function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l()(e);if(t){var i=l()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var G=function(e){o()(n,e);var t=W(n);function n(){return i()(this,n),t.apply(this,arguments)}return A()(n,[{key:"afterCreate",value:function(){this.getMini=this.getMini.bind(this),this.exitMini=this.exitMini.bind(this),this.bind("click",this.getMini)}},{key:"getMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"exitMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.getMini)}},{key:"render",value:function(){return'\n      <xg-icon class="xgplayer-miniicon">\n      <div class="xgplayer-icon btn-text"><span class="icon-text" lang-key="'.concat(this.i18nKeys.MINISCREEN,'">').concat(this.i18n.MINISCREEN,"</span></div>\n      </xg-icon>")}}],[{key:"pluginName",get:function(){return"miniscreenIcon"}},{key:"defaultConfig",get:function(){return{position:p.a.CONTROLS_RIGHT,index:10}}}]),n}(p.b),z=n("0b165edde72ebe3f3ca5"),X=n.n(z),Y=(n("2f22f453e80dcd80946e"),n("99db023933d00eead7df"),n("5d291d9463c9af975b92"));function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l()(e);if(t){var i=l()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}function Z(e){var t=parseFloat(e);return-1===e.indexOf("%")&&!isNaN(t)&&t}var Q=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],q=Q.length;function J(e){if("string"==typeof e&&(e=document.querySelector(e)),e&&"object"===X()(e)&&e.nodeType){var t=function(e){return window.getComputedStyle(e)}(e);if("none"===t.display)return function(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0;t<q;t++){e[Q[t]]=0}return e}();var n={};n.width=e.offsetWidth,n.height=e.offsetHeight;for(var r=n.isBorderBox="border-box"===t.boxSizing,i=0;i<q;i++){var a=Q[i],o=t[a],s=parseFloat(o);n[a]=isNaN(s)?0:s}var c=n.paddingLeft+n.paddingRight,u=n.paddingTop+n.paddingBottom,l=n.marginLeft+n.marginRight,d=n.marginTop+n.marginBottom,f=n.borderLeftWidth+n.borderRightWidth,h=n.borderTopWidth+n.borderBottomWidth,p=r,v=Z(t.width);!1!==v&&(n.width=v+(p?0:c+f));var g=Z(t.height);return!1!==g&&(n.height=g+(p?0:u+h)),n.innerWidth=n.width-(c+f),n.innerHeight=n.height-(u+h),n.outerWidth=n.width+l,n.outerHeight=n.height+d,n}}function $(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.identifier===t)return r}}var ee="dragStart",te="dragMove",ne="dragEnded",re={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]},ie=function(e){o()(n,e);var t=K(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i()(this,n),(r=t.call(this)).isEnabled=!0,r.isDragging=!1,r.isDown=!1,r.position={},r.downPoint={},r.dragPoint={x:0,y:0},r.startPos={x:0,y:0},r._root=e instanceof Element?e:document.querySelector(e),r._handlerDom=a.handle instanceof Element?a.handle:document.querySelector(a.handle),r._root&&r._handlerDom?(r._bindStartEvent(),r):c()(r)}return A()(n,[{key:"_bindStartEvent",value:function(){var e=this;"ontouchstart"in window?this._startKey="touchstart":this._startKey="mousedown",this["on".concat(this._startKey)]=this["on".concat(this._startKey)].bind(this),this._handlerDom.addEventListener(this._startKey,this["on".concat(this._startKey)]),re[this._startKey].map((function(t){e["on".concat(t)]=e["on".concat(t)].bind(e)}))}},{key:"_unbindStartEvent",value:function(){this._handlerDom.removeEventListener(this._startKey,this["on".concat(this._startKey)])}},{key:"_bindPostStartEvents",value:function(e){var t=this;if(e){var n=re[this._startKey];n.map((function(e){window.addEventListener(e,t["on".concat(e)])})),this._boundPointerEvents=n}}},{key:"_unbindPostStartEvents",value:function(){var e=this;this._boundPointerEvents&&(this._boundPointerEvents.map((function(t){window.removeEventListener(t,e["on".concat(t)])})),delete this._boundPointerEvents)}},{key:"enable",value:function(){this.isEnabled=!0}},{key:"disable",value:function(){this.isEnabled=!1,this.isDragging&&this.onUp()}},{key:"onDocUp",value:function(e){this.onUp()}},{key:"animate",value:function(){var e=this;this.isDragging&&(this.positionDrag(),window.requestAnimationFrame((function(){e.animate()})))}},{key:"positionDrag",value:function(){var e="translate3d(".concat(this.dragPoint.x,"px, ").concat(this.dragPoint.y,"px, 0)");this._root.style.transform=e,this._root.style.webKitTransform=e}},{key:"setLeftTop",value:function(){this._root.style.left=this.position.x+"px",this._root.style.top=this.position.y+"px"}},{key:"onmousedown",value:function(e){this.dragStart(e,e)}},{key:"onmousemove",value:function(e){this.dragMove(e,e)}},{key:"onmouseup",value:function(e){this.dragEnd(e,e)}},{key:"ontouchstart",value:function(e){var t=e.changedTouches[0];this.dragStart(e,t),this.touchIdentifier=void 0!==t.pointerId?t.pointerId:t.identifier,e.preventDefault()}},{key:"ontouchmove",value:function(e){var t=$(e.changedTouches,this.touchIdentifier);t&&this.dragMove(e,t)}},{key:"ontouchend",value:function(e){var t=$(e.changedTouches,this.touchIdentifier);t&&this.dragEnd(e,t),e.preventDefault()}},{key:"ontouchcancel",value:function(e){var t=$(e.changedTouches,this.touchIdentifier);t&&this.dragCancel(e,t)}},{key:"dragStart",value:function(e,t){if(this._root&&!this.isDown&&this.isEnabled){this.downPoint=t,this.dragPoint.x=0,this.dragPoint.y=0,this._getPosition();var n=J(this._root);this.startPos.x=this.position.x,this.startPos.y=this.position.y,this.startPos.maxY=window.innerHeight-n.height,this.startPos.maxX=window.innerWidth-n.width,this.setLeftTop(),this.isDown=!0,this._bindPostStartEvents(e)}}},{key:"dragRealStart",value:function(e,t){this.isDragging=!0,this.animate(),this.emit(ee,this.startPos)}},{key:"dragEnd",value:function(e,t){this._root&&(this._unbindPostStartEvents(),this.isDragging&&(this._root.style.transform="",this.setLeftTop(),this.emit(ne)),this.presetInfo())}},{key:"_dragPointerMove",value:function(e,t){var n={x:t.pageX-this.downPoint.pageX,y:t.pageY-this.downPoint.pageY};return!this.isDragging&&this.hasDragStarted(n)&&this.dragRealStart(e,t),n}},{key:"dragMove",value:function(e,t){if(e=e||window.event,this.isDown){var n=this.startPos,r=n.x,i=n.y,a=this._dragPointerMove(e,t),o=a.x,s=a.y;o=this.checkContain("x",o,r),s=this.checkContain("y",s,i),this.position.x=r+o,this.position.y=i+s,this.dragPoint.x=o,this.dragPoint.y=s,this.emit(te,this.position)}}},{key:"dragCancel",value:function(e,t){this.dragEnd(e,t)}},{key:"presetInfo",value:function(){this.isDragging=!1,this.startPos={x:0,y:0},this.dragPoint={x:0,y:0},this.isDown=!1}},{key:"destroy",value:function(){this._unbindStartEvent(),this._unbindPostStartEvents(),this.isDragging&&this.dragEnd(),this.removeAllListeners(),this._handlerDom=null}},{key:"hasDragStarted",value:function(e){return Math.abs(e.x)>3||Math.abs(e.y)>3}},{key:"checkContain",value:function(e,t,n){return t+n<0?0-n:"x"===e&&t+n>this.startPos.maxX?this.startPos.maxX-n:"y"===e&&t+n>this.startPos.maxY?this.startPos.maxY-n:t}},{key:"_getPosition",value:function(){var e=window.getComputedStyle(this._root),t=this._getPositionCoord(e.left,"width"),n=this._getPositionCoord(e.top,"height");this.position.x=isNaN(t)?0:t,this.position.y=isNaN(n)?0:n,this._addTransformPosition(e)}},{key:"_addTransformPosition",value:function(e){var t=e.transform;if(0===t.indexOf("matrix")){var n=t.split(","),r=0===t.indexOf("matrix3d")?12:4,i=parseInt(n[r],10),a=parseInt(n[r+1],10);this.position.x+=i,this.position.y+=a}}},{key:"_getPositionCoord",value:function(e,t){if(-1!==e.indexOf("%")){var n=J(this._root.parentNode);return n?parseFloat(e)/100*n[t]:0}return parseInt(e,10)}}]),n}(n.n(Y).a);function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l()(e);if(t){var i=l()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var oe=function(e){o()(n,e);var t=ae(n);function n(e){var r;i()(this,n),r=t.call(this,e),f()(I()(r),"onCancelClick",(function(e){r.exitMini(),r.isClose=!0})),f()(I()(r),"onCenterClick",(function(e){var t=I()(r).player;t.paused?t.play():t.pause()})),f()(I()(r),"onScroll",(function(e){if(!(!window.scrollY&&0!==window.scrollY||Math.abs(window.scrollY-r.pos.scrollY)<50)){var t=parseInt(k.a.getCss(r.player.root,"height"));t+=r.config.scrollTop,r.pos.scrollY=window.scrollY,window.scrollY>t+5?!r.isMini&&!r.isClose&&r.getMini():window.scrollY<=t&&(r.isMini&&r.exitMini(),r.isClose=!1)}})),r.isMini=!1,r.isClose=!1;var a=I()(r).config;return r.pos={left:a.left<0?window.innerWidth-a.width-20:a.left,top:a.top<0?window.innerHeight-a.height-20:a.top,height:r.config.height,width:r.config.width,scrollY:window.scrollY||0},r.lastStyle=null,r}return A()(n,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.mini&&(e.config.isShowIcon=e.player.config.mini)}},{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.on(g.PAUSE,(function(){e.setAttr("data-state","pause")})),this.on(g.PLAY,(function(){e.setAttr("data-state","play")}))}},{key:"onPluginsReady",value:function(){var e=this,t=this.player;if(!this.config.disable){if(this.config.isShowIcon){var n={config:{onClick:function(){e.getMini()}}};t.controls.registerPlugin(G,n,G.pluginName)}var r=k.a.checkTouchSupport()?"touchend":"click";this.bind(".mini-cancel-btn",r,this.onCancelClick),this.bind(".play-icon",r,this.onCenterClick),this.config.disableDrag||(this._draggabilly=new ie(this.player.root,{handle:this.root})),this.config.isScrollSwitch&&window.addEventListener("scroll",this.onScroll)}}},{key:"registerIcons",value:function(){return{play:{icon:H.a,class:"xg-icon-play"},pause:{icon:V.a,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".play-icon",e.play),this.appendChild(".play-icon",e.pause)}},{key:"getMini",value:function(){var e=this;if(!this.isMini){var t=this.player,n=this.playerConfig,r=this.config.target||this.player.root;this.lastStyle={},k.a.addClass(t.root,"xgplayer-mini"),["width","height","top","left"].map((function(t){e.lastStyle[t]=r.style[t],r.style[t]="".concat(e.pos[t],"px")})),n.fluid&&(r.style["padding-top"]=""),this.emit(g.MINI_STATE_CHANGE,!0),t.isMini=this.isMini=!0}}},{key:"exitMini",value:function(){var e=this;if(!this.isMini)return!1;var t=this.player,n=this.playerConfig,r=this.config.target||this.player.root;k.a.removeClass(t.root,"xgplayer-mini"),this.lastStyle&&Object.keys(this.lastStyle).map((function(t){r.style[t]=e.lastStyle[t]})),this.lastStyle=null,n.fluid&&(t.root.style.width="100%",t.root.style.height="0",t.root.style["padding-top"]="".concat(100*n.height/n.width,"%")),this.emit(g.MINI_STATE_CHANGE,!1),this.isMini=t.isMini=!1}},{key:"destroy",value:function(){window.removeEventListener("scroll",this.onScroll);var e=k.a.checkTouchSupport()?"touchend":"click";this.unbind(".mini-cancel-btn",e,this.onCancelClick),this.unbind(".play-icon",e,this.onCenterClick),this._draggabilly&&this._draggabilly.destroy(),this._draggabilly=null,this.exitMini()}},{key:"render",value:function(){if(!this.config.disable)return'\n      <xg-mini-layer class="xg-mini-layer">\n      <xg-mini-header class="xgplayer-mini-header">\n      <div lang-key="'.concat(this.i18nKeys.MINI_DRAG,'">').concat(this.i18n.MINI_DRAG,'</div>\n      </xg-mini-header>\n      <div class="mini-cancel-btn">\n        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">\n          <path fill="#fff" fill-rule="evenodd" d="M3.99 3.49a1 1 0 0 1 1.414 0L10 8.085l4.596-4.595a1 1 0 1 1 1.414 1.414L11.414 9.5l4.596 4.596a1 1 0 0 1 .084 1.32l-.084.094a1 1 0 0 1-1.414 0L10 10.914 5.404 15.51a1 1 0 0 1-1.414-1.414L8.585 9.5 3.99 4.904a1 1 0 0 1-.084-1.32z"></path>\n        </svg>\n      </div>\n      <div class="play-icon">\n      </div>\n      </xg-mini-layer>')}}],[{key:"pluginName",get:function(){return"miniscreen"}},{key:"defaultConfig",get:function(){return{index:10,disable:!1,width:320,height:180,left:-1,top:-1,isShowIcon:!1,isScrollSwitch:!1,scrollTop:0,disableDrag:!1}}}]),n}(p.b),se=n("7f3749e4140c760d27d0");function ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l()(e);if(t){var i=l()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var ue={mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},le=["videoClick","videoDbClick"],de=function(e){o()(n,e);var t=ce(n);function n(){var e;i()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),f()(I()(e),"onMouseMove",(function(t){var n=I()(e),r=n.player,i=n.playerConfig;r.isActive||(r.focus({autoHide:!i.closeDelayBlur}),!i.closeFocusVideoFocus&&r.video.focus())})),f()(I()(e),"onMouseEnter",(function(t){var n=I()(e),r=n.playerConfig,i=n.player;i.focus({autoHide:!r.closeDelayBlur}),!r.closeFocusVideoFocus&&i.video.focus()})),f()(I()(e),"onMouseLeave",(function(t){var n=e.playerConfig,r=n.closePlayerBlur,i=n.leavePlayerTime;r||(i?e.player.focus({autoHide:!0,delay:i}):e.player.blur())})),f()(I()(e),"onVideoClick",(function(t){var n=I()(e),r=n.player,i=n.playerConfig;t.target&&i.closeVideoClick||t.target!==r.video&&t.target!==r.innerContainer&&t.target!==r.video.__canvas||(t.preventDefault(),i.closeVideoStopPropagation||t.stopPropagation(),e._clickCount++,e.clickTimer&&(clearTimeout(e.clickTimer),e.clickTimer=null),e.clickTimer=setTimeout((function(){e._clickCount&&(e._clickCount--,Object(se.d)(I()(e),le[0],(function(t,n){e.switchPlayPause(n.e)}),{e:t,paused:r.paused}),clearTimeout(e.clickTimer),e.clickTimer=null)}),300))})),f()(I()(e),"onVideoDblClick",(function(t){var n=I()(e),r=n.player,i=n.playerConfig;!t.target||t.target!==r.video&&t.target!==r.video.__canvas||i.closeVideoDblclick||(e._clickCount<2?e._clickCount=0:(e._clickCount=0,e.clickTimer&&(clearTimeout(e.clickTimer),e.clickTimer=null),t.preventDefault(),t.stopPropagation(),Object(se.d)(I()(e),le[1],(function(t,n){e.emitUserAction(n.e,"switch_fullscreen",{props:"fullscreen",from:r.fullscreen,to:!r.fullscreen}),r.fullscreen?r.exitFullscreen():r.getFullscreen()}),{e:t,fullscreen:r.fullscreen})))})),e}return A()(n,[{key:"afterCreate",value:function(){var e=this;this._clickCount=0,le.map((function(t){e.__hooks[t]=null}));var t=this.playerConfig,n=t.enableContextmenu;t.isMobileSimulateMode||"mobile"===_.a.device&&!_.a.os.isIpad||(this.config.disableContextmenu=!n,this.initEvents())}},{key:"initEvents",value:function(){var e=this,t=this.player,n=t.video,r=t.root;n.addEventListener("click",this.onVideoClick,!1),n.addEventListener("dblclick",this.onVideoDblClick,!1),Object.keys(ue).map((function(t){r.addEventListener(t,e[ue[t]],!1)})),this.config.disableContextmenu&&n.addEventListener("contextmenu",this.onContextmenu,!1)}},{key:"switchPlayPause",value:function(e){var t=this.player;this.emitUserAction(e,"switch_play_pause",{props:"paused",from:t.paused,to:!t.paused}),t.ended?t.duration!==1/0&&t.duration>0&&t.replay():t.paused?t.play():t.pause()}},{key:"onContextmenu",value:function(e){(e=e||window.event).preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():(e.returnValue=!1,e.cancelBubble=!0)}},{key:"destroy",value:function(){var e=this,t=this.player,n=t.video,r=t.root;this.clickTimer&&clearTimeout(this.clickTimer),r.removeEventListener("click",this.onVideoClick,!1),n.removeEventListener("dblclick",this.onVideoDblClick,!1),n.removeEventListener("contextmenu",this.onContextmenu,!1),Object.keys(ue).map((function(t){r.removeEventListener(t,e[ue[t]],!1)}))}}],[{key:"pluginName",get:function(){return"pc"}},{key:"defaultConfig",get:function(){return{disableContextmenu:!0}}}]),n}(v.a),fe=(n("fce1e10c0a59a8bd89e4"),n("df0f8aaf4d251ab5481e"),n("b82b8efbfaa040833fc3"),n("57bbfaace4b62097c464")),he=(n("a2a80d3346615eb09116"),"press"),pe="pressend",ve="doubleclick",ge="click",ye="touchmove",me="touchstart",be="touchend",_e={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},ke={start:"mousedown",end:"mouseup",move:"mousemove",cancel:"mouseleave"};function we(e){return e&&e.length>0?e[e.length-1]:null}function Ee(e){var t=navigator.userAgent;/(?:iPhone|iPad)/.test(t)&&e.cancelable&&e.preventDefault()}var Te=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{eventType:"touch"};i()(this,e),this._pos={moving:!1,start:!1,x:0,y:0},this.config={pressDelay:600,dbClickDelay:200,disablePress:!1,disableDbClick:!1,miniStep:2,needPreventDefault:!0},Object.keys(r).map((function(e){n.config[e]=r[e]})),this.root=t,this.events="mouse"===r.eventType?ke:_e,this.pressIntrvalId=null,this.dbIntrvalId=null,this.__handlers={},this._initEvent()}return A()(e,[{key:"_initEvent",value:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchCancel=this.onTouchCancel.bind(this),this.root.addEventListener(this.events.start,this.onTouchStart)}},{key:"__setPress",value:function(e){var t=this,n=this.config;this.pressIntrvalId&&this.__clearPress(),this.pressIntrvalId=setTimeout((function(){t.trigger(he,e),t._pos.press=!0,t.__clearPress()}),n.pressDelay)}},{key:"__clearPress",value:function(){window.clearTimeout(this.pressIntrvalId),this.pressIntrvalId=null}},{key:"__setDb",value:function(e){var t=this,n=this.config;if(this.dbIntrvalId)return this.__clearDb(),void this.trigger(ve,e);this.dbIntrvalId=setTimeout((function(){t.__clearDb(),t._pos.start||t._pos.press||t._pos.moving||t.trigger(ge,e)}),n.dbClickDelay)}},{key:"__clearDb",value:function(){clearTimeout(this.dbIntrvalId),this.dbIntrvalId=null}},{key:"on",value:function(e,t){this.__handlers[e]||(this.__handlers[e]=[]),this.__handlers[e].push(t)}},{key:"off",value:function(e,t){if(this.__handlers[e]){for(var n=this.__handlers[e],r=-1,i=0;i<n.length;i++)if(n[i]===t){r=i;break}r>=0&&this.__handlers[e].splice(r,1)}}},{key:"trigger",value:function(e,t){this.__handlers[e]&&this.__handlers[e].map((function(n){try{n(t)}catch(b){console.error("trigger>>:".concat(e),b)}}))}},{key:"onTouchStart",value:function(e){var t=this._pos,n=this.root;this.config.needPreventDefault&&Ee(e);var r=we(e.touches);t.x=r?parseInt(r.pageX,10):e.pageX,t.y=r?parseInt(r.pageX,10):e.pageX,t.start=!0,this.__setPress(e),n.addEventListener(this.events.end,this.onTouchEnd),n.addEventListener(this.events.cancel,this.onTouchCancel),n.addEventListener(this.events.move,this.onTouchMove),this.trigger(me,e)}},{key:"onTouchCancel",value:function(e){this.onTouchEnd(e)}},{key:"onTouchEnd",value:function(e){var t=this._pos,n=this.root;this.config.needPreventDefault&&Ee(e),this.__clearPress(),n.removeEventListener(this.events.cancel,this.onTouchCancel),n.removeEventListener(this.events.end,this.onTouchEnd),n.removeEventListener(this.events.move,this.onTouchMove),e.moving=t.moving,e.press=t.press,t.press&&this.trigger(pe,e),this.trigger(be,e),!t.press&&!t.moving&&this.__setDb(e),t.press=!1,t.start=!1,t.moving=!1}},{key:"onTouchMove",value:function(e){var t=this._pos,n=this.config,r=we(e.touches),i=r?parseInt(r.pageX,10):e.pageX,a=r?parseInt(r.pageY,10):e.pageX,o=i-t.x,s=a-t.y;Math.abs(s)<n.miniStep&&Math.abs(o)<n.miniStep||(this.__clearPress(),t.press&&this.trigger(pe,e),t.press=!1,t.moving=!0,this.trigger(ye,e))}},{key:"destroy",value:function(){var e=this,t={touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"};Object.keys(t).map((function(n){e.root.removeEventListener("touchend",e[t[n]])}))}}]),e}();function Ae(){return(new DOMParser).parseFromString('<svg width="20" height="9" viewBox="0 0 8 9" fill="none" xmlns="http://www.w3.org/2000/svg"\n  xmlns:xlink="http://www.w3.org/1999/xlink">\n  <path opacity="0.54"\n    d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z"\n    fill="white" />\n  <path transform="translate(5 0)" d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z" fill="white"/>\n</svg>',"image/svg+xml").firstChild}function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l()(e);if(t){var i=l()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var Ie="auto",Re="seeking",Oe="playbackrate",Ce=function(e){o()(n,e);var t=Se(n);function n(e){var r;return i()(this,n),r=t.call(this,e),f()(I()(r),"onTouchStart",(function(e){var t=I()(r),n=t.player,i=t.config,a=t.pos,o=t.playerConfig,s=r.getTouche(e);if(s&&!i.disableGesture&&r.duration>0&&!n.ended){a.isStart=!0,k.a.checkIsFunction(o.disableSwipeHandler)&&o.disableSwipeHandler(),r.find(".xg-dur").innerHTML=k.a.format(r.duration);var c=r.root.getBoundingClientRect();90===n.rotateDeg?(a.top=c.left,a.left=c.top,a.width=c.height,a.height=c.width):(a.top=c.top,a.left=c.left,a.width=c.width,a.height=c.height);var u=parseInt(s.pageX-a.left,10),l=parseInt(s.pageY-a.top,10);a.x=90===n.rotateDeg?l:u,a.y=90===n.rotateDeg?u:l,a.scopeL=i.scopeL*a.width,a.scopeR=(1-i.scopeR)*a.width,a.scopeM1=a.width*(1-i.scopeM)/2,a.scopeM2=a.width-a.scopeM1}})),f()(I()(r),"onTouchMove",(function(e){var t=r.getTouche(e),n=I()(r),i=n.pos,a=n.config,o=n.player;if(t&&!a.disableGesture&&r.duration&&i.isStart){var s=a.miniMoveStep,c=a.hideControlsActive,u=parseInt(t.pageX-i.left,10),l=parseInt(t.pageY-i.top,10),d=90===o.rotateDeg?l:u,f=90===o.rotateDeg?u:l;if(Math.abs(d-i.x)>s||Math.abs(f-i.y)>s){var h=d-i.x,p=f-i.y,v=i.scope;if(-1===v&&(0===(v=r.checkScope(d,f,h,p,i))&&(c?o.blur():o.focus({autoHide:!1}),!i.time&&(i.time=parseInt(1e3*o.currentTime,10)+1e3*r.timeOffset)),i.scope=v),-1===v||v>0&&!a.gestureY||0===v&&!a.gestureX)return;e.cancelable&&e.preventDefault(),r.executeMove(h,p,v,i.width,i.height),i.x=d,i.y=f}}})),f()(I()(r),"onTouchEnd",(function(e){var t=I()(r),n=t.player,i=t.pos,a=t.playerConfig;i.isStart&&(i.scope>-1&&e.cancelable&&e.preventDefault(),r.endLastMove(i.scope),setTimeout((function(){n.getPlugin("progress")&&n.getPlugin("progress").resetSeekState()}),10),i.scope=-1,r.resetPos(),k.a.checkIsFunction(a.enableSwipeHandler)&&a.enableSwipeHandler(),r.changeAction(Ie))})),f()(I()(r),"onRootTouchMove",(function(e){!r.config.disableGesture&&r.config.gestureX&&r.checkIsRootTarget(e)&&(e.stopPropagation(),r.pos.isStart?r.onTouchMove(e):r.onTouchStart(e))})),f()(I()(r),"onRootTouchEnd",(function(e){r.pos.isStart&&r.checkIsRootTarget(e)&&(e.stopPropagation(),r.onTouchEnd(e))})),r.pos={isStart:!1,x:0,y:0,time:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1},r.timer=null,r}return A()(n,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"registerIcons",value:function(){return{seekTipIcon:{icon:Ae,class:"xg-seek-pre"}}}},{key:"afterCreate",value:function(){var e=this,t=this.playerConfig,n=this.config,r=this.player;!0===t.closeVideoDblclick&&(n.closedbClick=!0),this.resetPos(),k.a.isUndefined(t.disableGesture)||(n.disableGesture=!!t.disableGesture),this.appendChild(".xg-seek-icon",this.icons.seekTipIcon),this.xgMask=k.a.createDom("xg-mask","",{},"xgmask"),r.root.appendChild(this.xgMask),this.initCustomStyle(),this.registerThumbnail();var i=this.domEventType;this.touch=new Te(this.root,{eventType:i,needPreventDefault:!this.config.disableGesture}),this.root.addEventListener("contextmenu",(function(e){e.preventDefault()})),r.root.addEventListener("touchmove",this.onRootTouchMove,!0),r.root.addEventListener("touchend",this.onRootTouchEnd,!0),this.on(g.DURATION_CHANGE,(function(){var t=e.player,n=e.config;1e3*t.duration<n.moveDuration&&(n.moveDuration=1e3*t.duration)})),this.on([g.CANPLAY,g.ENDED],(function(){var t=e.pos,n=t.time;!t.isStart&&n>0&&(e.pos.time=0)}));var a={touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",press:"onPress",pressend:"onPressEnd",click:"onClick",doubleclick:"onDbClick"};if(Object.keys(a).map((function(t){e.touch.on(t,(function(n){e[a[t]](n)}))})),!n.disableActive){var o=r.plugins.progress;o&&(o.addCallBack("dragmove",(function(t){e.activeSeekNote(t.currentTime,t.forward)})),o.addCallBack("dragend",(function(){e.changeAction(Ie)})))}}},{key:"registerThumbnail",value:function(){var e=this.player.plugins.thumbnail;if(e&&e.usable){this.thumbnail=e.createThumbnail(null,"mobile-thumbnail");var t=this.find(".time-preview");t.insertBefore(this.thumbnail,t.children[0])}}},{key:"initCustomStyle",value:function(){var e=(this.playerConfig||{}).commonStyle,t=e.playedColor,n=e.progressColor;t&&(this.find(".xg-curbar").style.backgroundColor=t,this.find(".xg-cur").style.color=t),n&&(this.find(".xg-bar").style.backgroundColor=n,this.find(".time-preview").style.color=n),this.config.disableTimeProgress&&k.a.addClass(this.find(".xg-timebar"),"hide")}},{key:"resetPos",value:function(){var e=this;this.pos?(this.pos.isStart=!1,this.pos.scope=-1,["x","y","width","height","scopeL","scopeR","scopeM1","scopeM2"].map((function(t){e.pos[t]=0}))):this.pos={isStart:!1,x:0,y:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1,time:0}}},{key:"changeAction",value:function(e){var t=this.player;this.root.setAttribute("data-xg-action",e);var n=t.plugins.start;n&&n.recover()}},{key:"getTouche",value:function(e){this.player.rotateDeg;var t=e.touches&&e.touches.length>0?e.touches[e.touches.length-1]:e;return{pageX:t.pageX,pageY:t.pageY}}},{key:"checkScope",value:function(e,t,n,r,i){var a=i.width,o=-1;if(e<0||e>a)return o;var s=0===r?Math.abs(n):Math.abs(n/r);return Math.abs(n)>0&&s>=1.73&&e>i.scopeM1&&e<i.scopeM2?o=0:(0===Math.abs(n)||s<=.57)&&(o=e<i.scopeL?1:e>i.scopeR?2:3),o}},{key:"executeMove",value:function(e,t,n,r,i){switch(n){case 0:this.updateTime(e/r*this.config.scopeM);break;case 1:this.updateBrightness(t/i);break;case 2:_.a.os.isIos||this.updateVolume(t/i)}}},{key:"endLastMove",value:function(e){var t=this,n=this.pos,r=this.player,i=this.config,a=(n.time-this.timeOffset)/1e3;switch(e){case 0:r.seek(Number(a).toFixed(1)),i.hideControlsEnd?r.blur():r.focus(),this.timer=setTimeout((function(){t.pos.time=0}),500)}this.changeAction(Ie)}},{key:"checkIsRootTarget",value:function(e){var t=this.player.plugins||{};return(!t.progress||!t.progress.root.contains(e.target))&&(t.start&&t.start.root.contains(e.target)||t.controls&&t.controls.root.contains(e.target))}},{key:"sendUseAction",value:function(e){var t=this.player.paused;this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:t,to:!t})}},{key:"onClick",value:function(e){var t=this.player,n=this.config,r=this.playerConfig;t.state<fe.a.RUNNING?r.closeVideoClick||(this.sendUseAction(new Event("click")),t.play()):!n.closedbClick||r.closeVideoClick?t.isActive?t.blur():t.focus():r.closeVideoClick||((t.isActive||n.focusVideoClick)&&(this.emitUserAction("click","switch_play_pause"),this.switchPlayPause()),t.focus())}},{key:"onDbClick",value:function(e){var t=this.config,n=this.player;!t.closedbClick&&n.state>=fe.a.RUNNING&&(this.sendUseAction(new Event("dblclick")),this.switchPlayPause())}},{key:"onPress",value:function(e){var t=this.pos,n=this.config,r=this.player;n.disablePress||(t.rate=this.player.playbackRate,this.emitUserAction("press","change_rate",{prop:"playbackRate",from:r.playbackRate,to:n.pressRate}),r.playbackRate=n.pressRate,this.changeAction(Oe))}},{key:"onPressEnd",value:function(e){var t=this.pos,n=this.config,r=this.player;n.disablePress||(this.emitUserAction("pressend","change_rate",{prop:"playbackRate",from:r.playbackRate,to:t.rate}),r.playbackRate=t.rate,t.rate=1,this.changeAction(Ie))}},{key:"updateTime",value:function(e){var t=this.player,n=this.config,r=this.player.duration;e=Number(e.toFixed(4));var i=parseInt(e*n.moveDuration,10)+this.timeOffset;i=(i+=this.pos.time)<0?0:i>1e3*r?1e3*r-200:i,t.getPlugin("time")&&t.getPlugin("time").updateTime(i/1e3),t.getPlugin("progress")&&t.getPlugin("progress").updatePercent(i/1e3/this.duration,!0),this.activeSeekNote(i/1e3,e>0),n.isTouchingSeek&&t.seek(Number((i-this.timeOffset)/1e3).toFixed(1)),this.pos.time=i}},{key:"updateVolume",value:function(e){this.player.rotateDeg&&(e=-e);var t=this.player,n=this.pos;if(e=parseInt(100*e,10),n.volume+=e,!(Math.abs(n.volume)<10)){var r=parseInt(10*t.volume,10)-parseInt(n.volume/10,10);r=r>10?10:r<1?0:r,t.volume=r/10,n.volume=0}}},{key:"updateBrightness",value:function(e){this.player.rotateDeg&&(e=-e);var t=this.pos,n=this.config,r=this.xgMask,i=t.light+.8*e;i=i>n.maxDarkness?n.maxDarkness:i<0?0:i,r&&(r.style.backgroundColor="rgba(0,0,0,".concat(i,")")),t.light=i}},{key:"activeSeekNote",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.player,r=this.config,i=!(this.duration!==1/0&&this.duration>0);if(e&&"number"==typeof e&&!i&&!r.disableActive){e<0?e=0:e>n.duration&&(e=n.duration-.2),this.changeAction(Re);var a=n.plugins.start;a&&a.focusHide(),this.find(".xg-dur").innerHTML=k.a.format(this.duration),this.find(".xg-cur").innerHTML=k.a.format(e),this.find(".xg-curbar").style.width="".concat(e/this.duration*100,"%"),t?k.a.removeClass(this.find(".xg-seek-show"),"xg-back"):k.a.addClass(this.find(".xg-seek-show"),"xg-back"),this.updateThumbnails(e)}}},{key:"updateThumbnails",value:function(e){var t=this.player.plugins.thumbnail;t&&t.usable&&this.thumbnail&&t.update(this.thumbnail,e,160,90)}},{key:"switchPlayPause",value:function(){var e=this.player;if(e.state<fe.a.ATTACHED)return!1;e.ended||(e.paused?e.play():e.pause())}},{key:"disableGesture",value:function(){this.config.disableGesture=!1}},{key:"enableGesture",value:function(){this.config.disableGesture=!0}},{key:"destroy",value:function(){var e=this.player;this.timer&&clearTimeout(this.timer),this.thumbnail=null,e.root.removeChild(this.xgMask),this.xgMask=null,this.touch&&this.touch.destroy(),this.touch=null,e.root.removeEventListener("touchmove",this.onRootTouchMove,!0),e.root.removeEventListener("touchend",this.onRootTouchEnd,!0)}},{key:"render",value:function(){var e="normal"!==this.config.gradient?"gradient ".concat(this.config.gradient):"gradient";return'\n     <xg-trigger class="trigger">\n     <div class="'.concat(e,'"></div>\n        <div class="time-preview">\n            <div class="xg-seek-show ').concat(this.config.disableSeekIcon?" hide-seek-icon":"",'">\n              <i class="xg-seek-icon"></i>\n              <span class="xg-cur">00:00</span>\n              <span>/</span>\n              <span class="xg-dur">00:00</span>\n            </div>\n              <div class="xg-bar xg-timebar">\n                <div class="xg-curbar"></div>\n              </div>\n        </div>\n        <div class="xg-playbackrate xg-top-note">\n            <span><i>').concat(this.config.pressRate,"X</i>").concat(this.i18n.FORWARD,"</span>\n        </div>\n     </xg-trigger>\n    ")}}],[{key:"pluginName",get:function(){return"mobile"}},{key:"defaultConfig",get:function(){return{index:0,disableGesture:!1,gestureX:!0,gestureY:!0,gradient:"normal",isTouchingSeek:!1,miniMoveStep:5,miniYPer:5,scopeL:.25,scopeR:.25,scopeM:.9,pressRate:2,darkness:!0,maxDarkness:.8,disableActive:!1,disableTimeProgress:!1,hideControlsActive:!1,hideControlsEnd:!1,moveDuration:36e4,closedbClick:!1,disablePress:!0,disableSeekIcon:!1,focusVideoClick:!1}}}]),n}(p.b),xe=n("9a6d52046a9932628ae8"),Pe=n("bb49792cce51cc2eac20"),De=n("997a44ee604c9ccfa8ae"),Le=n("84e9431b43bf71843c85"),Me=n("91b52644aaf37c1a441a"),Ne=n("4e19e12862d114f09ad6"),Ue=n("a81749b6fb57993f107c");function Be(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="-4 -6 40 40" fill="none">\n  <g clip-path="url(#clip0)">\n    <path transform="scale(1.5 1.5)" d="M11.6665 9.16663H4.1665C2.78579 9.16663 1.6665 10.2859 1.6665 11.6666V15.8333C1.6665 17.214 2.78579 18.3333 4.1665 18.3333H11.6665C13.0472 18.3333 14.1665 17.214 14.1665 15.8333V11.6666C14.1665 10.2859 13.0472 9.16663 11.6665 9.16663Z" fill="white"/>\n    <path transform="scale(1.5 1.5)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88148 4.06298C3.75371 4.21005 3.67667 4.40231 3.67749 4.61242C3.67847 4.87253 3.79852 5.10435 3.98581 5.25646L6.99111 8.05895C7.32771 8.37283 7.85502 8.35443 8.16891 8.01782C8.48279 7.68122 8.46437 7.15391 8.12778 6.84003L6.62061 5.43457L9.8198 5.4224C9.82848 5.42239 9.8372 5.42221 9.84591 5.4219C10.9714 5.38233 12.0885 5.6285 13.0931 6.13744C14.0976 6.64635 14.957 7.40148 15.5908 8.33234C16.2246 9.2632 16.6122 10.3394 16.7177 11.4606C16.823 12.5819 16.6427 13.7115 16.1934 14.7442C16.0098 15.1661 16.203 15.6571 16.6251 15.8408C17.0471 16.0243 17.5381 15.8311 17.7216 15.4091C18.2833 14.1183 18.5087 12.7063 18.3771 11.3047C18.2453 9.90318 17.7607 8.55792 16.9684 7.39433C16.1761 6.23073 15.1021 5.28683 13.8463 4.65065C12.5946 4.01651 11.203 3.70872 9.80072 3.75583L6.43415 3.76862L7.96326 2.12885C8.27715 1.79225 8.25872 1.26494 7.92213 0.951061C7.58553 0.63718 7.05822 0.655585 6.74433 0.99219L3.90268 4.0395C3.89545 4.04724 3.88841 4.05509 3.88154 4.06303L3.88148 4.06298Z" fill="white"/>\n  </g>\n  <defs>\n    <clipPath id="clip0">\n      <rect width="40" height="40" fill="white"/>\n    </clipPath>\n  </defs>\n</svg>\n',"image/svg+xml").firstChild}function Fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l()(e);if(t){var i=l()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var je=function(e){o()(n,e);var t=Fe(n);function n(e){var r;return i()(this,n),(r=t.call(this,e)).rotateDeg=r.config.rotateDeg||0,r}return A()(n,[{key:"afterCreate",value:function(){var e=this;this.config.disable||(this.appendChild(".xgplayer-icon",this.icons.rotate),this.onBtnClick=this.onBtnClick.bind(this),this.bind(".xgplayer-icon",["click","touchend"],this.onBtnClick),this.on(g.VIDEO_RESIZE,(function(){e.rotateDeg&&k.a.setTimeout(e,(function(){e.updateRotateDeg(e.rotateDeg,e.config.innerRotate)}),100)})),this.rotateDeg&&this.updateRotateDeg(this.rotateDeg,this.config.innerRotate))}},{key:"destroy",value:function(){this.unbind(".xgplayer-icon",["click","touchend"],this.onBtnClick)}},{key:"onBtnClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"rotate"),this.rotate(this.config.clockwise,this.config.innerRotate,1)}},{key:"updateRotateDeg",value:function(e,t){var n=this.player;e||(e=0);var r=this.player,i=r.root,a=r.innerContainer,o=r.video,s=i.offsetWidth,c=a&&t?a.offsetHeight:i.offsetHeight,u="100%",l="100%",d=0,f=0;.75!==e&&.25!==e||(u="".concat(c,"px"),l="".concat(s,"px"),d=-(c-s)/2,f=-(s-c)/2);var h="translate(".concat(d,"px,").concat(f,"px) rotate(").concat(e,"turn)"),p={transformOrigin:"center center",transform:h,webKitTransform:h,height:l,width:u},v=t?o:i,g=t?n.getPlugin("poster"):null;Object.keys(p).map((function(e){v.style[e]=p[e],g&&g.root&&(g.root.style[e]=p[e])}))}},{key:"rotate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.player;this.rotateDeg||(this.rotateDeg=0);var i=e?1:-1;this.rotateDeg=(this.rotateDeg+1+.25*i*n)%1,this.updateRotateDeg(this.rotateDeg,t),r.emit(g.ROTATE,360*this.rotateDeg)}},{key:"registerIcons",value:function(){return{rotate:Be}}},{key:"render",value:function(){if(!this.config.disable)return'\n    <xg-icon class="xgplayer-rotate">\n      <div class="xgplayer-icon">\n      </div>\n      <div class="xg-tips" lang-key="'.concat(this.i18nKeys.ROTATE_TIPS,'">\n      ').concat(this.i18n.ROTATE_TIPS,"\n      </div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"rotate"}},{key:"defaultConfig",get:function(){return{position:p.a.CONTROLS_RIGHT,index:6,innerRotate:!0,clockwise:!1,rotateDeg:0,disable:!1}}}]),n}(p.b);function He(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"\n    fill="white" />\n</svg>',"image/svg+xml").firstChild}function Ve(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"\n    fill="white" />\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M9.4998 7.7C9.77595 7.7 9.9998 7.47614 9.9998 7.2V6.5C9.9998 6.22386 9.77595 6 9.4998 6H5.5402L5.52754 6.00016H5.5C5.22386 6.00016 5 6.22401 5 6.50016V10.4598C5 10.7359 5.22386 10.9598 5.5 10.9598H6.2C6.47614 10.9598 6.7 10.7359 6.7 10.4598V8.83005L8.76983 10.9386C8.96327 11.1357 9.27984 11.1386 9.47691 10.9451L9.97645 10.4548C10.1735 10.2613 10.1764 9.94476 9.983 9.7477L7.97289 7.7H9.4998Z"\n    fill="white" />\n</svg>',"image/svg+xml").firstChild}function We(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l()(e);if(t){var i=l()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var Ge="picture-in-picture",ze="inline",Xe="fullscreen",Ye=function(e){o()(n,e);var t=We(n);function n(){var e;i()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),f()(I()(e),"switchPIP",(function(t){if(!e.isPIPAvailable())return!1;t.stopPropagation(),e.isPip?(e.exitPIP(),e.emitUserAction(t,"change_pip",{props:"pip",from:!0,to:!1}),e.setAttr("data-state","normal")):4===e.player.video.readyState&&(e.requestPIP(),e.emitUserAction(t,"change_pip",{props:"pip",from:!1,to:!0}),e.setAttr("data-state","pip"))})),e}return A()(n,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.pip&&(e.config.showIcon=e.player.config.pip)}},{key:"afterCreate",value:function(){var e=this;this.isPIPAvailable()&&(this.pMode=ze,this.initPipEvents(),this.config.showIcon&&this.initIcons(),this.once(g.COMPLETE,(function(){e.config.showIcon&&(k.a.removeClass(e.find(".xgplayer-icon"),"xg-icon-disable"),e.bind("click",e.switchPIP))})))}},{key:"registerIcons",value:function(){return{pipIcon:{icon:He,class:"xg-get-pip"},pipIconExit:{icon:Ve,class:"xg-exit-pip"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.pipIcon),this.appendChild(".xgplayer-icon",e.pipIconExit)}},{key:"initPipEvents",value:function(){var e=this,t=this.player;this.leavePIPCallback=function(){var n=t.paused;k.a.setTimeout(e,(function(){!n&&t.videoPlay()}),0),!n&&t.videoPlay(),e.setAttr("data-state","normal"),t.emit(g.PIP_CHANGE,!1)},this.enterPIPCallback=function(n){t.emit(g.PIP_CHANGE,!0),e.pipWindow=n.pictureInPictureWindow,e.setAttr("data-state","pip")},this.onWebkitpresentationmodechanged=function(n){var r=t.video.webkitPresentationMode;e.pMode===Xe&&r!==Xe&&t.onFullscreenChange(null,!1),e.pMode=r,r===Ge?e.enterPIPCallback(n):r===ze&&e.leavePIPCallback(n)},t.video&&(t.video.addEventListener("enterpictureinpicture",this.enterPIPCallback),t.video.addEventListener("leavepictureinpicture",this.leavePIPCallback),n.checkWebkitSetPresentationMode(t.video)&&t.video.addEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged))}},{key:"requestPIP",value:function(){var e=this.player,t=this.playerConfig;if(this.isPIPAvailable()&&!this.isPip)try{var r=t.poster;return r&&(e.video.poster="String"===k.a.typeOf(r)?r:r.poster),n.checkWebkitSetPresentationMode(e.video)?e.video.webkitSetPresentationMode("picture-in-picture"):e.video.requestPictureInPicture(),!0}catch(i){return console.error("requestPiP",i),!1}}},{key:"exitPIP",value:function(){var e=this.player;try{return this.isPIPAvailable()&&this.isPip&&(n.checkWebkitSetPresentationMode(e.video)?e.video.webkitSetPresentationMode("inline"):document.exitPictureInPicture()),!0}catch(t){return console.error("exitPIP",t),!1}}},{key:"isPip",get:function(){var e=this.player;return document.pictureInPictureElement&&document.pictureInPictureElement===e.video||e.video.webkitPresentationMode===Ge}},{key:"isPIPAvailable",value:function(){var e=this.player.video;return("Boolean"!==k.a.typeOf(document.pictureInPictureEnabled)||document.pictureInPictureEnabled)&&("Boolean"===k.a.typeOf(e.disablePictureInPicture)&&!e.disablePictureInPicture||e.webkitSupportsPresentationMode&&"Function"===k.a.typeOf(e.webkitSetPresentationMode))}},{key:"destroy",value:function(){var e=this.player;e.video.removeEventListener("enterpictureinpicture",this.enterPIPCallback),e.video.removeEventListener("leavepictureinpicture",this.leavePIPCallback),n.checkWebkitSetPresentationMode(e.video)&&e.video.removeEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged),this.exitPIP(),this.unbind("click",this.btnClick)}},{key:"render",value:function(){if(this.config.showIcon&&this.isPIPAvailable())return'<xg-icon class="xgplayer-pip">\n      <div class="xgplayer-icon xg-icon-disable">\n      </div>\n      <div class="xg-tips" lang-key="'.concat(this.i18nKeys.PIP,'">').concat(this.i18n.PIP,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"pip"}},{key:"defaultConfig",get:function(){return{position:p.a.CONTROLS_RIGHT,index:6,showIcon:!1}}},{key:"checkWebkitSetPresentationMode",value:function(e){return"function"==typeof e.webkitSetPresentationMode}}]),n}(p.b);function Ke(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="40" viewBox="10 0 24 40">\n  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>\n</svg>\n',"image/svg+xml").firstChild}function Ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l()(e);if(t){var i=l()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var Qe=function(e){o()(n,e);var t=Ze(n);function n(e){var r;return i()(this,n),r=t.call(this,e),f()(I()(r),"playNext",(function(e){var t=I()(r).player;e.preventDefault(),e.stopPropagation(),r.idx+1<r.config.urlList.length?(r.idx++,r.nextHandler(r.config.urlList[r.idx],r.idx),t.emit(g.PLAYNEXT,r.idx+1)):(r.nextHandler(),t.emit(g.PLAYNEXT))})),r.idx=-1,r}return A()(n,[{key:"afterCreate",value:function(){this.config.urlList&&0!==this.config.urlList.length&&(this.appendChild(".xgplayer-icon",this.icons.playNext),this.initEvents())}},{key:"registerIcons",value:function(){return{playNext:Ke}}},{key:"initEvents",value:function(){this.nextHandler=this.hook("nextClick",this.changeSrc);var e="mobile"===_.a.device?"touchend":"click";this.bind(e,this.playNext),this.show()}},{key:"changeSrc",value:function(e){var t=this.player;e&&(t.pause(),t.currentTime=0,t.switchURL?t.switchURL(e):t.src=e,t.config.url=e,t.play())}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.playNext)}},{key:"render",value:function(){if(this.config.urlList&&0!==this.config.urlList.length)return'\n     <xg-icon class="xgplayer-playnext">\n      <div class="xgplayer-icon">\n      </div>\n      <div class="xg-tips" lang-key="PLAYNEXT_TIPS">'.concat(this.i18n.PLAYNEXT_TIPS,"</div>\n     </xg-icon>\n    ")}}],[{key:"pluginName",get:function(){return"playNext"}},{key:"defaultConfig",get:function(){return{position:p.a.CONTROLS_LEFT,index:1,url:null,urlList:[]}}}]),n}(p.b),qe=(n("242d8a87221617b4ac29"),n("d9815264cfa0f2f7df51")),Je=n.n(qe);function $e(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">\n  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g transform="translate(-488.000000, -340.000000)" fill="#FFFFFF">\n      <g id="Group-2">\n        <g id="volme_big-copy" transform="translate(488.000000, 340.000000)">\n          <rect id="Rectangle-18" x="11" y="4" width="2" height="12" rx="1"></rect>\n          <rect id="Rectangle-2" x="3" y="18" width="18" height="2" rx="1"></rect>\n          <rect id="Rectangle-2" transform="translate(4.000000, 17.500000) rotate(90.000000) translate(-4.000000, -17.500000) " x="1.5" y="16.5" width="5" height="2" rx="1"></rect><rect id="Rectangle-2-Copy-3" transform="translate(20.000000, 17.500000) rotate(90.000000) translate(-20.000000, -17.500000) " x="17.5" y="16.5" width="5" height="2" rx="1"></rect>\n          <path d="M9.48791171,8.26502656 L9.48791171,14.2650266 C9.48791171,14.8173113 9.04019646,15.2650266 8.48791171,15.2650266 C7.93562696,15.2650266 7.48791171,14.8173113 7.48791171,14.2650266 L7.48791171,7.26502656 C7.48791171,6.71274181 7.93562696,6.26502656 8.48791171,6.26502656 L15.4879117,6.26502656 C16.0401965,6.26502656 16.4879117,6.71274181 16.4879117,7.26502656 C16.4879117,7.81731131 16.0401965,8.26502656 15.4879117,8.26502656 L9.48791171,8.26502656 Z" id="Combined-Shape" transform="translate(11.987912, 10.765027) scale(1, -1) rotate(45.000000) translate(-11.987912, -10.765027) "></path>\n        </g>\n      </g>\n    </g>\n  </g>\n</svg>\n',"image/svg+xml").firstChild}function et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l()(e);if(t){var i=l()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var tt=function(e){o()(n,e);var t=et(n);function n(e){var r;return i()(this,n),r=t.call(this,e),f()(I()(r),"download",(function(e){if(!r.isLock){r.emitUserAction(e,"download");var t=r.getAbsoluteURL(r.player.src);Je()(t),r.isLock=!0,r.timer=window.setTimeout((function(){r.isLock=!1,window.clearTimeout(r.timer),r.timer=null}),300)}})),r.timer=null,r.isLock=!1,r}return A()(n,[{key:"afterCreate",value:function(){this.config.disable||(this.appendChild(".xgplayer-icon",this.icons.download),this.bind(["click","touchend"],this.download))}},{key:"registerIcons",value:function(){return{download:$e}}},{key:"getAbsoluteURL",value:function(e){if(!e.match(/^https?:\/\//)){var t=document.createElement("div");t.innerHTML='<a href="'.concat(e,'">x</a>'),e=t.firstChild.href}return e}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.download),window.clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-download">\n   <div class="xgplayer-icon">\n   </div>\n   <div class="xg-tips" lang-key="'.concat(this.i18nKeys.DOWNLOAD_TIPS,'">').concat(this.i18n.DOWNLOAD_TIPS,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"download"}},{key:"defaultConfig",get:function(){return{position:p.a.CONTROLS_RIGHT,index:3,disable:!0}}}]),n}(p.b);n("8c975a8e48558997ef6e"),n("c9461f50c5d53d77beb2"),n("def7fc9a4ab8c857edaf"),n("49c77cfe9861eb5430df");function nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l()(e);if(t){var i=l()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var rt=function(e){o()(n,e);var t=nt(n);function n(){return i()(this,n),t.apply(this,arguments)}return A()(n,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.screenShot&&(e.config.disable=!e.player.config.screenShot)}},{key:"afterCreate",value:function(){this.appendChild(".xgplayer-icon",this.icons.screenshotIcon);var e=this.config;this.initSize=function(t){e.fitVideo&&(e.width=t.vWidth,e.height=t.vHeight)},this.once(g.VIDEO_RESIZE,this.initSize)}},{key:"onPluginsReady",value:function(){this.show(),this.onClickBtn=this.onClickBtn.bind(this),this.bind(["click","touchend"],this.onClickBtn)}},{key:"saveScreenShot",value:function(e,t){var n=document.createElement("a");n.href=e,n.download=t;var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(r)}},{key:"createCanvans",value:function(e,t){var n=document.createElement("canvas");this.canvasCtx=n.getContext("2d"),this.canvas=n,n.width=e||this.config.width,n.height=t||this.config.height}},{key:"onClickBtn",value:function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"shot"),this.shot().then((function(e){t.emit(g.SCREEN_SHOT,e),t.saveScreenShot(e,t.config.name+t.config.format)}))}},{key:"shot",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{quality:.92,type:"image/png"},i=this.config,a=this.player,o=r.quality||i.quality,s=r.type||i.type;return new Promise((function(r,c){n.canvas?(n.canvas.width=e||i.width,n.canvas.height=t||i.height):n.createCanvans(e,t),n.canvasCtx.drawImage(a.video,0,0,e||i.width,t||i.height);var u=n.canvas.toDataURL(s,o).replace(s,"image/octet-stream");r(u=u.replace(/^data:image\/[^;]+/,"data:application/octet-stream"))}))}},{key:"registerIcons",value:function(){return{screenshotIcon:null}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.onClickBtn),this.off(g.VIDEO_RESIZE,this.initSize)}},{key:"render",value:function(){if(!this.config.disable){var e=this.icons.screenshotIcon?"xgplayer-icon":"xgplayer-icon btn-text";return'\n      <xg-icon class="xgplayer-shot">\n      <div class="'.concat(e,'">\n      ').concat(this.icons.screenshotIcon?"":'<span lang-key="'.concat(this.i18nKeys.SCREENSHOT,'">').concat(this.i18n.SCREENSHOT,"</span>")," \n      </div>\n    </xg-icon>")}}}],[{key:"pluginName",get:function(){return"screenShot"}},{key:"defaultConfig",get:function(){return{position:p.a.CONTROLS_RIGHT,index:5,quality:.92,type:"image/png",format:".png",width:600,height:337,fitVideo:!0,disable:!1,name:"screenshot"}}}]),n}(p.b),it=n("2678b08b21fe126e57ce"),at=n("2c1d7c757760acb5482f");function ot(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">\n  <path fill="#fff" transform="scale(1.3, 1.3)" class=\'path_full\' d="M9,10v1a.9.9,0,0,1-1,1,.9.9,0,0,1-1-1V9A.9.9,0,0,1,8,8h2a.9.9,0,0,1,1,1,.9.9,0,0,1-1,1Zm6,4V13a1,1,0,0,1,2,0v2a.9.9,0,0,1-1,1H14a1,1,0,0,1,0-2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n</svg>\n',"image/svg+xml").firstChild}function st(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">\n  <path fill="#fff" transform="scale(1.3, 1.3)" d="M9,10V9a.9.9,0,0,1,1-1,.9.9,0,0,1,1,1v2a.9.9,0,0,1-1,1H8a.9.9,0,0,1-1-1,.9.9,0,0,1,1-1Zm6,4v1a1,1,0,0,1-2,0V13a.9.9,0,0,1,1-1h2a1,1,0,0,1,0,2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n</svg>\n',"image/svg+xml").firstChild}function ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l()(e);if(t){var i=l()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var ut=function(e){o()(n,e);var t=ct(n);function n(){return i()(this,n),t.apply(this,arguments)}return A()(n,[{key:"afterCreate",value:function(){var e=this;this.config.disable||(this.config.target&&(this.playerConfig.fullscreenTarget=this.config.target),this.initIcons(),this.on(g.CSS_FULLSCREEN_CHANGE,(function(t){e.animate(t)})),this.btnClick=this.btnClick.bind(this),this.handleCssFullscreen=this.hook("cssFullscreen_change",this.btnClick,{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.bind(["click","touchend"],this.handleCssFullscreen))}},{key:"initIcons",value:function(){var e=this.icons,t=this.find(".xgplayer-icon");t.appendChild(e.cssFullscreen),t.appendChild(e.exitCssFullscreen)}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.player.isCssfullScreen;this.emitUserAction(e,"switch_cssfullscreen",{cssfullscreen:t}),t?this.player.exitCssFullscreen():this.player.getCssFullscreen()}},{key:"animate",value:function(e){this.root&&(e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.switchTips(e))}},{key:"switchTips",value:function(e){var t=this.i18nKeys;this.changeLangTextKey(this.find(".xg-tips"),e?t.EXITCSSFULLSCREEN_TIPS:t.CSSFULLSCREEN_TIPS)}},{key:"registerIcons",value:function(){return{cssFullscreen:{icon:ot,class:"xg-get-cssfull"},exitCssFullscreen:{icon:st,class:"xg-exit-cssfull"}}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class=\'xgplayer-cssfullscreen\'>\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="'.concat(this.i18nKeys.EXITCSSFULLSCREEN_TIPS,'">').concat(this.i18n.CSSFULLSCREEN_TIPS,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"cssFullscreen"}},{key:"defaultConfig",get:function(){return{position:p.a.CONTROLS_RIGHT,index:1,disable:!1,target:null}}}]),n}(p.b);function lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l()(e);if(t){var i=l()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var dt=function(e){o()(n,e);var t=lt(n);function n(){return i()(this,n),t.apply(this,arguments)}return A()(n,[{key:"afterCreate",value:function(){var e=this;this.clickHandler=this.hook("errorRetry",this.errorRetry,{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.onError=this.hook("showError",this.handleError),this.bind(".xgplayer-error-refresh","click",this.clickHandler),this.on(g.CANPLAY,(function(){e.handleCanPlay()})),this.on(g.ERROR,(function(t){e.onError(t)}))}},{key:"errorRetry",value:function(e){this.emitUserAction(e,"error_retry",{}),this.player.retry()}},{key:"handleCanPlay",value:function(){k.a.removeClass(this.player.root,"xgplayer-is-error")}},{key:"handleError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.player,n=e.errorType,r=t.errorNote?this.i18n[t.errorNote]:"";if(!r)switch(n){case"decoder":r=this.i18n.MEDIA_ERR_DECODE;break;case"network":r=this.i18n.MEDIA_ERR_NETWORK;break;default:r=this.i18n.MEDIA_ERR_SRC_NOT_SUPPORTED}this.find(".xgplayer-error-text").innerHTML=r,this.find(".xgplayer-error-tips").innerHTML="".concat(this.i18n.REFRESH_TIPS,'<span class="xgplayer-error-refresh">').concat(this.i18n.REFRESH,"</span>")}},{key:"destroy",value:function(){this.unbind(".xgplayer-error-refresh","click",this.clickHandler)}},{key:"render",value:function(){return'<xg-error class="xgplayer-error">\n      <div class="xgplayer-errornote">\n       <span class="xgplayer-error-text"></span>\n       <span class="xgplayer-error-tips"><em class="xgplayer-error-refresh"></em></span>\n      </div>\n    </xg-error>'}}],[{key:"pluginName",get:function(){return"error"}}]),n}(p.b);function ft(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l()(e);if(t){var i=l()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var ht=function(e){o()(n,e);var t=ft(n);function n(){return i()(this,n),t.apply(this,arguments)}return A()(n,[{key:"afterCreate",value:function(){var e=this;this.intervalId=0,this.customConfig=null,this.bind(".highlight",["click","touchend"],(function(t){(e.config.onClick||e.customOnClick)&&(t.preventDefault(),t.stopPropagation(),e.customOnClick?e.customOnClick(t):e.config.onClick(t))})),this.player.showPrompt=function(){e.show.apply(e,arguments)},this.player.hidePrompt=function(){e.hide()}}},{key:"setStyle",value:function(e){var t=this;Object.keys(e).map((function(n){t.root.style[n]=e[n]}))}},{key:"show",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(e){this.customOnClick=r;var i=this.config.interval;this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=null),k.a.addClass(this.root,"show"),"arrow"===n.mode&&k.a.addClass(this.root,"arrow"),this.find(".xgplayer-prompt-detail").innerHTML="string"==typeof e?e:"".concat(e.text||"")+"".concat(e.highlight?'<i class="highlight">'.concat(e.highlight,"</i>"):""),n.style&&this.setStyle(n.style);var a="boolean"==typeof n.autoHide?n.autoHide:this.config.autoHide;if(a){var o=n.interval||i;this.intervalId=setTimeout((function(){t.hide()}),o)}}}},{key:"hide",value:function(){k.a.removeClass(this.root,"show"),k.a.removeClass(this.root,"arrow"),this.root.removeAttribute("style"),this.customOnClick=null}},{key:"render",value:function(){return'<xg-prompt class="xgplayer-prompt '.concat(y.a.CONTROLS_FOLLOW,'">\n    <span class="xgplayer-prompt-detail"></span>\n    </xg-prompt>')}}],[{key:"pluginName",get:function(){return"prompt"}},{key:"defaultConfig",get:function(){return{interval:3e3,style:{},mode:"arrow",autoHide:!0,detail:{text:"",highlight:""},onClick:function(){}}}}]),n}(p.b),pt={time:0,text:"",id:1,duration:1,color:"#fff",style:{},width:6,height:6};function vt(e){Object.keys(pt).map((function(t){void 0===e[t]&&(e[t]=pt[t])}))}var gt={initDots:function(){var e=this;this._ispots.map((function(t){e.createDot(t,!1)})),this._ispotsInit=!0},createDot:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.player.plugins.progress;if(n&&(t&&(vt(e),this._ispots.push(e)),this._ispotsInit||!t)){var r=this.calcuPosition(e.time,e.duration),i=e.style||{};i.left="".concat(r.left,"%"),i.width="".concat(r.width,"%");var a="xgspot_".concat(e.id," xgplayer-spot");r.isMini&&(a+=" mini");var o=k.a.createDom("xg-spot",e.template||"",{"data-text":e.text,"data-time":e.time,"data-id":e.id},a);Object.keys(i).map((function(e){o.style[e]=i[e]})),n.outer&&n.outer.appendChild(o)}},findDot:function(e){if(this.player.plugins.progress){var t=this._ispots.filter((function(t,n){return t.id===e}));return t.length>0?t[0]:null}},updateDot:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.player.plugins.progress;if(n){var r=this.findDot(e.id);if(r&&Object.keys(e).map((function(t){r[t]=e[t]})),this._ispotsInit){var i=n.find('xg-spot[data-id="'.concat(e.id,'"]'));if(i){var a=this.calcuPosition(e.time,e.duration),o=e.style||{};o.left="".concat(a.left,"%"),o.width="".concat(a.width,"%"),i.setAttribute("data-text",e.text),i.setAttribute("data-time",e.time),a.isMini?k.a.addClass(i,"mini"):k.a.removeClass(i,"mini"),Object.keys(o).map((function(e){i.style[e]=o[e]})),t&&this.showDot(e.id)}}}},deleteDot:function(e){var t=this._ispots,n=this.player.plugins.progress;if(n){for(var r=[],i=0;i<t.length;i++)t[i].id===e&&r.push(i);for(var a=r.length-1;a>=0;a--)if(t.splice(r[a],1),this._ispotsInit){var o=n.find('xg-spot[data-id="'.concat(e,'"]'));o&&o.parentElement.removeChild(o)}}},deleteAllDots:function(){var e=this.player.plugins.progress;if(e)if(this._ispotsInit){for(var t=e.root.getElementsByTagName("xg-spot"),n=t.length-1;n>=0;n--)e.outer.removeChild(t[n]);this._ispots=[]}else this._ispots=[]},updateAllDots:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this.player.plugins.progress;if(n)if(this._ispotsInit){this._ispots=[];var r=n.root.getElementsByTagName("xg-spot"),i=r.length;if(i>t.length)for(var a=i-1;a>t.length-1;a--)n.outer.removeChild(r[a]);t.map((function(t,n){n<i?(r[n].setAttribute("data-id","".concat(t.id)),e._ispots.push(t),e.updateDot(t)):e.createDot(t)}))}else this._ispots=t},getAllDotsDom:function(){var e=this.player.plugins.progress;return e?e.root.getElementsByTagName("xg-spot"):[]},getDotDom:function(e){var t=this.player.plugins.progress;if(t)return t.find('xg-spot[data-id="'.concat(e,'"]'))}};function yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l()(e);if(t){var i=l()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var mt={dragmove:"onProgressMove",dragstart:"onProgressDragStart",dragend:"onProgressDragEnd",click:"onProgressClick",mouseover:"onProgressMouseOver"},bt=function(e){o()(n,e);var t=yt(n);function n(e){var r;return i()(this,n),r=t.call(this,e),f()(I()(r),"onMousemove",(function(e){(r._state.f||k.a.hasClass(e.target,"xg-spot-content"))&&(k.a.event(e),e.stopPropagation())})),f()(I()(r),"onMousedown",(function(e){(r._state.f||k.a.hasClass(e.target,"xg-spot-content"))&&(k.a.event(e),e.stopPropagation())})),f()(I()(r),"onDotMouseLeave",(function(e){r._curDot.removeEventListener("mouseleave",r.onDotMouseLeave),r.blurDot(e.target),r._curDot=null;var t=r.player.plugins.progress;t&&t.enableBlur(),r.show()})),f()(I()(r),"onProgressMouseOver",(function(e,t){if(k.a.hasClass(t.target,"xgplayer-spot")&&!r._curDot){r._curDot=t.target,r.focusDot(t.target),r._curDot.children.length>0&&r.hide();var n=r.player.plugins.progress;n&&n.disableBlur(),r._curDot.addEventListener("mouseleave",r.onDotMouseLeave)}})),r._ispots=[],r.videoPreview=null,r.videothumbnail=null,r.thumbnail=null,r._state={now:0,f:!1},r}return A()(n,[{key:"beforeCreate",value:function(e){var t=e.player.plugins.progress;t&&(e.root=t.root)}},{key:"afterCreate",value:function(){var e=this;this._curDot=null,this.handlerSpotClick=this.hook("spotClick",(function(t,n){n.time&&e.player.seek(n.time)})),function(e){var t=e.config,n=e.player;Object.keys(gt).map((function(t){e[t]=gt[t].bind(e)}));var r=n.config.progressDot||t.ispots||[];e._ispots=r.map((function(e){return vt(e),e})),e._ispotsInit=!1,n.once(g.DURATION_CHANGE,(function(){e.initDots()}))}(this)}},{key:"onPluginsReady",value:function(){this.player.plugins.progress&&(this.previewLine=this.find(".xg-spot-line"),this.timePoint=this.find(".xgplayer-progress-point"),this.timeText=this.find(".xg-spot-time"),this.tipText=this.find(".spot-inner-text"),this._hasThumnail=!1,this.registerThumbnail(),this.bindEvents())}},{key:"bindEvents",value:function(){var e=this,t=this.player.plugins.progress;if(t&&(Object.keys(mt).map((function(n){e[mt[n]]=e[mt[n]].bind(e),t.addCallBack(n,e[mt[n]])})),"mobile"!==_.a.device)){this.bind(".xg-spot-info","mousemove",this.onMousemove),this.bind(".xg-spot-info","mousedown",this.onMousedown);var n=this.hook("previewClick",(function(){}));this.handlerPreviewClick=function(t){t.stopPropagation(),n(parseInt(1e3*e._state.now,10)/1e3,t)},this.bind(".xg-spot-content","mouseup",this.handlerPreviewClick)}}},{key:"onProgressMove",value:function(e,t){this.updatePosition(e.offset,e.width,e.currentTime,e.e)}},{key:"onProgressDragStart",value:function(e){console.log("onProgressDragStart"),this.isDrag=!0,this.videoPreview&&k.a.addClass(this.videoPreview,"show")}},{key:"onProgressDragEnd",value:function(e){this.isDrag=!1,this.videoPreview&&k.a.removeClass(this.videoPreview,"show")}},{key:"onProgressClick",value:function(e,t){if(k.a.hasClass(t.target,"xgplayer-spot")){t.stopPropagation(),t.preventDefault();var n={};["time","id","text"].map((function(e){n[e]=t.target.getAttribute("data-".concat(e))})),n.time&&(n.time=Number(n.time)),this.handlerSpotClick(t,n)}}},{key:"updateLinePos",value:function(e,t){var n,r,i=this.root,a=this.previewLine,o=this.timePoint,s="flex"===this.player.controls.mode,c=i.getBoundingClientRect().width,u=o.getBoundingClientRect().width,l=e-c/2;l<0&&!s?(l=0,n=e-c/2,!this.thumbnail&&(r=e-c/2-u/2)):l>t-c&&!s?(n=l-(t-c),!this.thumbnail&&(r=l-(t-c)-u/2),l=t-c):!this.thumbnail&&(r=-u/2),a.style.transform=void 0!==n?"translateX(".concat(n,"px)"):"",o.style.transform=void 0!==r?"translateX(".concat(r,"px)"):"",i.style.transform="translateX(".concat(l,"px)")}},{key:"updateTimeText",value:function(e){var t=this.timeText,n=this.timePoint;t.textContent=e,!this.thumbnail&&(n.textContent=e)}},{key:"updatePosition",value:function(e,t,n,r){var i=this.root,a=this.config,o=this._state;if(i){this.updateLinePos(e,t),o.now=n;var s=k.a.format(n);r&&r.target&&k.a.hasClass(r.target,"xgplayer-spot")?(this.showTips(r.target.getAttribute("data-text"),!1,s),this.focusDot(r.target),o.f=!0,a.isFocusDots&&o.f&&(o.now=parseInt(r.target.getAttribute("data-time"),10))):a.defaultText?(o.f=!1,this.showTips(a.defaultText,!0,s)):(o.f=!1,this.hideTips("")),this.updateTimeText(s),this.updateThumbnails(o.now)}}},{key:"updateThumbnails",value:function(e){var t=this.player,n=this.videoPreview,r=t.plugins.thumbnail;if(r&&r.usable){this.thumbnail&&r.update(this.thumbnail,e,160,90);var i=n&&n.getBoundingClientRect();this.videothumbnail&&r.update(this.videothumbnail,e,i.width,i.height)}}},{key:"changeThumbnail",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("mobile"!==_.a.device){var t=this.player,n=this.config,r=t.getPlugin("thumbnail");if(r.changeConfig(e),r&&r.usable&&n.isShowThumbnail){k.a.removeClass(this.root,"short-line no-thumbnail"),this._hasThumnail=!0;var i=this.find(".xg-spot-thumbnail");this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.thumbnail&&i.removeChild(this.thumbnail),this.thumbnail=r.createThumbnail(i,"progress-thumbnail"),n.isShowCoverPreview&&(this.videoPreview=k.a.createDom("xg-video-preview","",{},"xgvideo-preview"),t.root.appendChild(this.videoPreview),this.videothumbnail=r.createThumbnail(this.videoPreview,"xgvideo-thumbnail"))}else{k.a.addClass(this.root,"short-line no-thumbnail");var a=this.find(".xg-spot-thumbnail");this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.thumbnail&&a.removeChild(this.thumbnail),this.videothumbnail=null,this.thumbnail=null,this._hasThumnail=!1}}}},{key:"registerThumbnail",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("mobile"!==_.a.device){var t=this.player,n=this.config,r=t.getPlugin("thumbnail");if(r&&Object.keys(e).map((function(t){r.config[t]=e[t]})),r&&r.usable&&n.isShowThumbnail){k.a.removeClass(this.root,"short-line no-thumbnail"),this._hasThumnail=!0;var i=this.find(".xg-spot-thumbnail");this.thumbnail=r.createThumbnail(i,"progress-thumbnail"),n.isShowCoverPreview&&(this.videoPreview=k.a.createDom("xg-video-preview","",{},"xgvideo-preview"),t.root.appendChild(this.videoPreview),this.videothumbnail=r.createThumbnail(this.videoPreview,"xgvideo-thumbnail"))}else k.a.addClass(this.root,"short-line no-thumbnail")}}},{key:"calcuPosition",value:function(e,t){var n=this.player.plugins.progress,r=this.player,i=n.root.getBoundingClientRect().width,a=r.duration/i*6;return e+t>r.duration&&(t=r.duration-e),r.duration,r.duration,{left:e/r.duration*100,width:t/r.duration*100,isMini:t<a}}},{key:"showDot",value:function(e){var t=this.findDot(e);if(t){var n=this.root.getBoundingClientRect().width,r=t.time/this.player.duration*n;this.updatePosition(r,n,t.time)}}},{key:"focusDot",value:function(e,t){e&&(t||(t=e.getAttribute("data-id")),k.a.addClass(e,"active"),this._activeDotId=t)}},{key:"blurDot",value:function(e){if(!e){var t=this._activeDotId;e=this.getDotDom(t)}e&&(k.a.removeClass(e,"active"),this._activeDotId=null)}},{key:"showTips",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";k.a.addClass(this.root,"no-timepoint"),e&&(k.a.addClass(this.find(".xg-spot-content"),"show-text"),t&&"production"===this.config.mode?(k.a.addClass(this.root,"product"),this.tipText.textContent=e):(k.a.removeClass(this.root,"product"),this.tipText.textContent=this._hasThumnail?e:"".concat(n," ").concat(e)))}},{key:"hideTips",value:function(){k.a.removeClass(this.root,"no-timepoint"),this.tipText.textContent="",k.a.removeClass(this.find(".xg-spot-content"),"show-text"),k.a.removeClass(this.root,"product")}},{key:"hide",value:function(){k.a.addClass(this.root,"hide")}},{key:"show",value:function(){k.a.removeClass(this.root,"hide")}},{key:"destroy",value:function(){var e=this,t=this.player.plugins.progress;t&&Object.keys(mt).map((function(n){t.removeCallBack(n,e[mt[n]])})),this.videothumbnail=null,this.thumbnail=null,this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.unbind(".xg-spot-info","mousemove",this.onMousemove),this.unbind(".xg-spot-info","mousedown",this.onMousedown),this.unbind(".xg-spot-content","mouseup",this.handlerPreviewClick)}},{key:"render",value:function(){return"mobile"===_.a.device||this.playerConfig.isMobileSimulateMode?"":'<div class="xg-spot-info '.concat("short"===this.config.mode?"short-line":"",'">\n      <div class="xg-spot-content">\n        <div class="xg-spot-thumbnail">\n          <span class="xg-spot-time"></span>\n        </div>\n        <div class="xg-spot-text"><span class="spot-inner-text"></span></div>\n      </div>\n      <div class="xgplayer-progress-point">00:00</div>\n      <div class="xg-spot-line"></div>\n    </div>')}}],[{key:"pluginName",get:function(){return"progresspreview"}},{key:"defaultConfig",get:function(){return{index:1,miniWidth:6,ispots:[],defaultText:"",isFocusDots:!0,isShowThumbnail:!0,isShowCoverPreview:!1,mode:""}}}]),n}(p.b);function _t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l()(e);if(t){var i=l()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var kt=function(e){o()(n,e);var t=_t(n);function n(e){var r;return i()(this,n),(r=t.call(this,e)).ratio=1,r.interval=-1,r.preloadMark={},r}return A()(n,[{key:"afterCreate",value:function(){var e=this;this.usable&&this.initThumbnail(),this.on([g.DURATION_CHANGE],(function(){var t=e.config,n=t.pic_num,r=t.interval;e.usable&&(e.interval=r>0?r:Math.round(1e3*e.player.duration/n)/1e3)}))}},{key:"usable",get:function(){var e=this.config,t=e.urls,n=e.pic_num;return t&&t.length>0&&n>0}},{key:"initThumbnail",value:function(){var e=this.config,t=e.width,n=e.height,r=e.pic_num,i=e.interval;this.ratio=t/n*100,this.interval=i>0?i:Math.round(1e3*this.player.duration/r)/1e3,this.preload(0)}},{key:"getUrlByIndex",value:function(e){return e>=0&&e<this.config.urls.length?this.config.urls[e]:""}},{key:"preload",value:function(e){var t=this,n=this.config.urls,r=n.length;[e-1,e,e+1,e+2].map((function(e){!t.preloadMark[e]&&e>=0&&e<r&&(k.a.preloadImg(n[e]),t.preloadMark[e]=!0)}))}},{key:"getPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.config,i=r.pic_num,a=r.row,o=r.col,s=r.width,c=r.height,u=Math.ceil(e/this.interval),l=(u=u>i?i:u)<a*o?0:Math.ceil(u/(a*o))-1,d=u-l*(o*a),f=d>0?Math.ceil(d/o)-1:0,h=d>0?d-f*o-1:0,p=0,v=0;if(t&&n){var g=t/n;g<s/c?v=(p=t)/(s/c):p=(v=n)*(s/c)}else v=(p=t||s)/(s/c);var y=this.getUrlByIndex(l);return{urlIndex:l,rowIndex:f,colIndex:h,url:y,height:v,width:p,style:{backgroundImage:"url(".concat(y,")"),backgroundSize:"".concat(p*o,"px auto"),backgroundPosition:"-".concat(h*p,"px -").concat(f*v,"px"),width:"".concat(p,"px"),height:"".concat(v,"px")}}}},{key:"update",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=this.config,o=a.pic_num,s=a.urls;if(!(o<1)&&s&&0!==s.length){var c=this.getPosition(t,n,r);this.preload(c.urlIndex),Object.keys(c.style).map((function(t){e.style[t]=c.style[t]})),Object.keys(i).map((function(t){e.style[t]=i[t]}))}}},{key:"changeConfig",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(t).forEach((function(n){void 0!==e.config[n]&&(e.config[n]=t[n])})),this.usable&&this.initThumbnail()}},{key:"createThumbnail",value:function(e,t){var n=k.a.createDom("xg-thumbnail","",{},"thumbnail ".concat(t));return e&&e.appendChild(n),n}}],[{key:"pluginName",get:function(){return"thumbnail"}},{key:"defaultConfig",get:function(){return{isShow:!1,urls:[],pic_num:0,col:0,row:0,width:160,height:90,scale:1,className:"",hidePortrait:!1}}}]),n}(p.b),wt=n("a262c24142fa15f75e93");function Et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l()(e);if(t){var i=l()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var Tt="realtime",At="firstframe";function St(){try{return window.performance.now()}catch(e){return(new Date).getTime()}}function It(e){return"safari"!==_.a.browser||!/^blob/.test(e.currentSrc)&&!/^blob/.test(e.src)}var Rt=null,Ot=function(e){o()(n,e);var t=Et(n);function n(){var e;i()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),f()(I()(e),"onLoadedData",(function(){if(e.player){var t=e.player.video;e.videoPI=parseInt(t.videoWidth/t.videoHeight*100,10)}})),f()(I()(e),"start",(function(){var t=e.player.video,n=St();It(t)&&e.canvasCtx&&(e.stop(),(e.config.mode===Tt||n-e.preTime>=e.interval)&&(t&&t.videoWidth&&e.update(t,t.videoWidth,t.videoHeight),e.preTime=n),e.frameId=window.setTimeout((function(){e.start()}),e.interval))})),f()(I()(e),"stop",(function(){e.frameId&&(window.clearTimeout(e.frameId),e.frameId=null)})),e}return A()(n,[{key:"afterCreate",value:function(){var e=this;!0===this.playerConfig.dynamicBg&&(this.config.disable=!1),n.isSupport||(this.config.disable=!0);var t=this.config,r=t.disable,i=t.mode;r||(this._pos={width:0,height:0,rwidth:0,rheight:0,x:0,y:0},this.isStart=!1,this.videoPI=0,this.preTime=0,this.interval=parseInt(1e3/this.config.frameRate,10),this.canvas=null,this.canvasCtx=null,this.once(g.COMPLETE,(function(){e.player&&(e.init(),!e.player.paused&&e.start())})),this.once(g.LOADED_DATA,this.onLoadedData),this.on(g.URL_CHANGE,(function(){e.once(g.LOADED_DATA,e.onLoadedData)})),i!==At&&(this.on(g.PLAY,(function(){e.start()})),this.on(g.PAUSE,(function(){e.stop()}))),i===At&&this.once(g.TIME_UPDATE,(function(){var t=e.player.video;t&&It(t)&&t.videoWidth&&e.update(t,t.videoWidth,t.videoHeight)})))}},{key:"init",value:function(){var e=this.player,t=this.config;this.canvasFilter=n.supportCanvasFilter();try{var r=this.config.isInnerRender&&e.innerContainer||e.root;r.insertAdjacentHTML("afterbegin",'<div class="xgplayer-dynamic-bg"><canvas>\n        </canvas><xgmask></xgmask></div>'),this.root=r.children[0],this.canvas=this.find("canvas"),this.canvasFilter||(this.canvas.style.filter=t.filter,this.canvas.style.webkitFilter=t.filter),this.mask=this.find("xgmask"),t.addMask&&(this.mask.style.background=t.maskBg),this.canvasCtx=this.canvas.getContext("2d");var i=this.playerConfig.poster;if(i){var a="String"===k.a.typeOf(i)?i:"String"===k.a.typeOf(i.poster)?i.poster:null;this.updateImg(a)}}catch(o){R.b.logError("plugin:DynamicBg",o)}}},{key:"updateImg",value:function(e){var t=this;if(e){var n=this.canvas.getBoundingClientRect(),r=n.width,i=n.height,a=new window.Image;a.onload=function(){t.canvas&&(t.canvas.height=i,t.canvas.width=r,a=null)},a.src=e}}},{key:"update",value:function(e,t,n){if(this.canvas&&this.canvasCtx&&this.videoPI)try{var r=this._pos,i=this.config,a=this.canvas.getBoundingClientRect(),o=a.width,s=a.height;if(this.videoPI=parseInt(t/n*100,10),o!==r.width||s!==r.height){var c=parseInt(o/s*100,10);r.width=this.canvas.width=o,r.height=this.canvas.height=s;var u=s,l=o;c<this.videoPI?l=parseInt(s*this.videoPI/100,10):c>this.videoPI&&(u=parseInt(100*o/this.videoPI,10)),c<this.videoPI?l=parseInt(s*this.videoPI/100,10):c>this.videoPI&&(u=parseInt(100*o/this.videoPI,10)),r.rwidth=1.2*l,r.rheight=1.2*u,r.x=(o-r.rwidth)/2,r.y=(s-r.rheight)/2}this.canvasFilter&&(this.canvasCtx.filter=i.filter),this.canvasCtx.drawImage(e,r.x,r.y,r.rwidth,r.rheight)}catch(d){R.b.logError("plugin:DynamicBg",d)}}},{key:"destroy",value:function(){this.stop(),this.canvasCtx=null,this.canvas=null}},{key:"render",value:function(){return""}}],[{key:"pluginName",get:function(){return"dynamicBg"}},{key:"defaultConfig",get:function(){return{isInnerRender:!1,disable:!0,mode:"framerate",frameRate:10,filter:"blur(50px)",addMask:!0,maskBg:"rgba(0,0,0,0.7)"}}},{key:"isSupport",get:function(){return"boolean"==typeof Rt?Rt:Rt=function(){try{return!!document.createElement("canvas").getContext}catch(e){return!1}}()}},{key:"supportCanvasFilter",value:function(){return!("safari"===_.a.browser||"firefox"===_.a.browser)}}]),n}(p.b),Ct=n("1219d2e8717a9a753eb7");n("4dae26d380810c71f7a0"),n("76778f89046144ac3189"),n("80c08e8fdbb6de44a743"),n("e270d63fe4abcc5b03f7"),n("fe0fdc51a50afd99ddb0");function xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l()(e);if(t){var i=l()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var Lt=g.STATS_EVENTS,Mt=function(e){o()(n,e);var t=Dt(n);function n(){var e;i()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),f()(I()(e),"_recordUserActions",(function(t){var n=e._getTime(),r=Object.assign({},t,{msg:t.msg||t.action});e._stats.info.push(Pt(Pt({type:"userAction"},n),{},{payload:r}))})),f()(I()(e),"_onReset",(function(){e.reset()})),f()(I()(e),"_recordInfo",(function(t){e.info(t)})),f()(I()(e),"_downloadStats",(function(){var t=e.getStats(),n=new Blob([JSON.stringify(t)],{type:"application/json"}),r=window.URL.createObjectURL(n),i=document.createElement("a");i.style.display="none",i.href=r,console.log("linkhref",r),i.download="player.txt",i.disabled=!1,i.click()})),e}return A()(n,[{key:"_getTime",value:function(){return{timestamp:Date.now(),timeFormat:(new Date).toISOString()}}},{key:"afterCreate",value:function(){this.reset(),this.on(g.USER_ACTION,this._recordUserActions),this.on(Lt.STATS_INFO,this._recordInfo),this.on(Lt.STATS_DOWNLOAD,this._downloadStats),this.on(Lt.STATS_RESET,this._onReset)}},{key:"destroy",value:function(){this.offAll()}},{key:"downloadStats",value:function(){this._downloadStats()}},{key:"info",value:function(e){e.profile?this._infoProfile(e):this._info(e)}},{key:"_info",value:function(e){var t=this._getTime();this._stats.info.push(Pt(Pt({},t),{},{payload:e}))}},{key:"_infoProfile",value:function(e){if(e&&e.startMs){var t=Pt({cat:"function",dur:Date.now()-e.startMs,name:e.name||e.msg,ph:"X",pid:0,tid:0,ts:e.startMs,profile:!0},e);this._info(t)}else console.warn("infoProfile need object data, include startMs")}},{key:"reset",value:function(){var e;this._stats=(e={},f()(e,"info",[]),f()(e,"media",{}),e)}},{key:"getStats",value:function(){for(var e=this.player.video,t=[],n=0;n<e.buffered.length;n++)t.push({start:e.buffered.start(n),end:e.buffered.end(n)});var r={currentTime:e.currentTime,readyState:e.readyState,buffered:t,paused:e.paused,ended:e.ended};return this._stats.media=r,{raw:this._stats,timestat:this._getTimeStats(),profile:this._getProfile()}}},{key:"_getTimeStats",value:function(){return this._stats.info.map((function(e){var t=e.payload.data,n="";try{t instanceof Error?n=t.msg:void 0!==t&&(n=JSON.stringify(t))}catch(b){console.log("err",b)}return"[".concat(e.timeFormat,"] : ").concat(e.payload.msg," ").concat(n," ")}))}},{key:"_getProfile",value:function(){var e={traceEvents:[]};return this._stats.info.forEach((function(t){t.payload.profile&&e.traceEvents.push(t.payload)})),e}}],[{key:"pluginName",get:function(){return"stats"}},{key:"defaultConfig",get:function(){return{}}}]),n}(v.a);function Nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l()(e);if(t){var i=l()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var Ut=function(e){o()(n,e);var t=Nt(n);function n(){return i()(this,n),t.apply(this,arguments)}return n}(h.a);f()(Ut,"defaultPreset",(function e(t,n){var r,a,o;i()(this,e);var s=n&&n.isMobileSimulateMode,c=n.isLive?[]:[De.a,wt.a,bt,Ne.a],u=[].concat(c,[Le.a,Me.a,je,Qe,it.a,at.a,tt,rt,Ue.a,Ye]),l=[M,U,B.a,Pe.a,j,dt,ht,kt,oe];this.plugins=[Mt,P].concat(E()(u),l);var d=s?"mobile":_.a.device;switch(d){case"pc":(r=this.plugins).push.apply(r,[xe.a,de,ut]);break;case"mobile":(a=this.plugins).push.apply(a,[Ce]);break;default:(o=this.plugins).push.apply(o,[xe.a,de,ut])}(_.a.os.isIpad||"pc"===d)&&this.plugins.push(Ot),_.a.os.isIpad&&this.plugins.push(de),this.ignores=[],this.i18n=[Ct.a]})),f()(Ut,"Util",k.a),f()(Ut,"Sniffer",_.a),f()(Ut,"Errors",b.b),f()(Ut,"Events",g),f()(Ut,"Plugin",p.b),f()(Ut,"BasePlugin",v.a),f()(Ut,"I18N",m.a),f()(Ut,"STATE_CLASS",y.a);var Bt=Ut},f595bdb75185de96d993:function(e,t,n){"use strict";function r(){return(new DOMParser).parseFromString('<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>\n</svg>\n',"image/svg+xml").firstChild}n.d(t,"a",(function(){return r}))},ff12d07833562306368e:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o}));n("d21c3f3d4c981a871761");var r="undefined"!=typeof window&&window.location&&window.location.href.indexOf("xgplayerdebugger=1")>-1,i={info:"color: #525252; background-color: #90ee90;",error:"color: #525252; background-color: red;",warn:"color: #525252; background-color: yellow; "},a="%c[xgplayer]",o={config:{debug:r?3:1},logInfo:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];this.config.debug>=3&&(t=console).log.apply(t,[a,i.info,e].concat(r))},logWarn:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];this.config.debug>=1&&(t=console).warn.apply(t,[a,i.warn,e].concat(r))},logError:function(e){var t;if(!(this.config.debug<1)){for(var n=this.config.debug>=2?"trace":"error",r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];(t=console)[n].apply(t,[a,i.error,e].concat(o))}}};function s(e){e.logInfo=o.logInfo.bind(e),e.logWarn=o.logWarn.bind(e),e.logError=o.logError.bind(e)}}}]);
//# sourceMappingURL=xgplayer.ad809f1d.js.map